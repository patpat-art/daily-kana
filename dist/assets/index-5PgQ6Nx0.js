(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function e(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=e(a);fetch(a.href,c)}})();var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cx(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var u1={exports:{}},Ym={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function ux(){if(ib)return Ym;ib=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,c){var f=null;if(c!==void 0&&(f=""+c),a.key!==void 0&&(f=""+a.key),"key"in a){c={};for(var d in a)d!=="key"&&(c[d]=a[d])}else c=a;return a=c.ref,{$$typeof:s,type:i,key:f,ref:a!==void 0?a:null,props:c}}return Ym.Fragment=t,Ym.jsx=e,Ym.jsxs=e,Ym}var sb;function hx(){return sb||(sb=1,u1.exports=ux()),u1.exports}var k=hx(),h1={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function fx(){if(rb)return ve;rb=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function N(G){return G===null||typeof G!="object"?null:(G=E&&G[E]||G["@@iterator"],typeof G=="function"?G:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,D={};function z(G,at,wt){this.props=G,this.context=at,this.refs=D,this.updater=wt||O}z.prototype.isReactComponent={},z.prototype.setState=function(G,at){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,at,"setState")},z.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function $(){}$.prototype=z.prototype;function Q(G,at,wt){this.props=G,this.context=at,this.refs=D,this.updater=wt||O}var nt=Q.prototype=new $;nt.constructor=Q,U(nt,z.prototype),nt.isPureReactComponent=!0;var K=Array.isArray;function X(){}var R={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function M(G,at,wt){var Tt=wt.ref;return{$$typeof:s,type:G,key:at,ref:Tt!==void 0?Tt:null,props:wt}}function V(G,at){return M(G.type,at,G.props)}function P(G){return typeof G=="object"&&G!==null&&G.$$typeof===s}function F(G){var at={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(wt){return at[wt]})}var B=/\/+/g;function At(G,at){return typeof G=="object"&&G!==null&&G.key!=null?F(""+G.key):at.toString(36)}function Mt(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(X,X):(G.status="pending",G.then(function(at){G.status==="pending"&&(G.status="fulfilled",G.value=at)},function(at){G.status==="pending"&&(G.status="rejected",G.reason=at)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Z(G,at,wt,Tt,It){var jt=typeof G;(jt==="undefined"||jt==="boolean")&&(G=null);var $t=!1;if(G===null)$t=!0;else switch(jt){case"bigint":case"string":case"number":$t=!0;break;case"object":switch(G.$$typeof){case s:case t:$t=!0;break;case T:return $t=G._init,Z($t(G._payload),at,wt,Tt,It)}}if($t)return It=It(G),$t=Tt===""?"."+At(G,0):Tt,K(It)?(wt="",$t!=null&&(wt=$t.replace(B,"$&/")+"/"),Z(It,at,wt,"",function(an){return an})):It!=null&&(P(It)&&(It=V(It,wt+(It.key==null||G&&G.key===It.key?"":(""+It.key).replace(B,"$&/")+"/")+$t)),at.push(It)),1;$t=0;var kt=Tt===""?".":Tt+":";if(K(G))for(var Zt=0;Zt<G.length;Zt++)Tt=G[Zt],jt=kt+At(Tt,Zt),$t+=Z(Tt,at,wt,jt,It);else if(Zt=N(G),typeof Zt=="function")for(G=Zt.call(G),Zt=0;!(Tt=G.next()).done;)Tt=Tt.value,jt=kt+At(Tt,Zt++),$t+=Z(Tt,at,wt,jt,It);else if(jt==="object"){if(typeof G.then=="function")return Z(Mt(G),at,wt,Tt,It);throw at=String(G),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return $t}function rt(G,at,wt){if(G==null)return G;var Tt=[],It=0;return Z(G,Tt,"","",function(jt){return at.call(wt,jt,It++)}),Tt}function _t(G){if(G._status===-1){var at=G._result;at=at(),at.then(function(wt){(G._status===0||G._status===-1)&&(G._status=1,G._result=wt)},function(wt){(G._status===0||G._status===-1)&&(G._status=2,G._result=wt)}),G._status===-1&&(G._status=0,G._result=at)}if(G._status===1)return G._result.default;throw G._result}var ht=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ft={map:rt,forEach:function(G,at,wt){rt(G,function(){at.apply(this,arguments)},wt)},count:function(G){var at=0;return rt(G,function(){at++}),at},toArray:function(G){return rt(G,function(at){return at})||[]},only:function(G){if(!P(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return ve.Activity=w,ve.Children=ft,ve.Component=z,ve.Fragment=e,ve.Profiler=a,ve.PureComponent=Q,ve.StrictMode=i,ve.Suspense=g,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ve.__COMPILER_RUNTIME={__proto__:null,c:function(G){return R.H.useMemoCache(G)}},ve.cache=function(G){return function(){return G.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(G,at,wt){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var Tt=U({},G.props),It=G.key;if(at!=null)for(jt in at.key!==void 0&&(It=""+at.key),at)!C.call(at,jt)||jt==="key"||jt==="__self"||jt==="__source"||jt==="ref"&&at.ref===void 0||(Tt[jt]=at[jt]);var jt=arguments.length-2;if(jt===1)Tt.children=wt;else if(1<jt){for(var $t=Array(jt),kt=0;kt<jt;kt++)$t[kt]=arguments[kt+2];Tt.children=$t}return M(G.type,It,Tt)},ve.createContext=function(G){return G={$$typeof:f,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:c,_context:G},G},ve.createElement=function(G,at,wt){var Tt,It={},jt=null;if(at!=null)for(Tt in at.key!==void 0&&(jt=""+at.key),at)C.call(at,Tt)&&Tt!=="key"&&Tt!=="__self"&&Tt!=="__source"&&(It[Tt]=at[Tt]);var $t=arguments.length-2;if($t===1)It.children=wt;else if(1<$t){for(var kt=Array($t),Zt=0;Zt<$t;Zt++)kt[Zt]=arguments[Zt+2];It.children=kt}if(G&&G.defaultProps)for(Tt in $t=G.defaultProps,$t)It[Tt]===void 0&&(It[Tt]=$t[Tt]);return M(G,jt,It)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(G){return{$$typeof:d,render:G}},ve.isValidElement=P,ve.lazy=function(G){return{$$typeof:T,_payload:{_status:-1,_result:G},_init:_t}},ve.memo=function(G,at){return{$$typeof:m,type:G,compare:at===void 0?null:at}},ve.startTransition=function(G){var at=R.T,wt={};R.T=wt;try{var Tt=G(),It=R.S;It!==null&&It(wt,Tt),typeof Tt=="object"&&Tt!==null&&typeof Tt.then=="function"&&Tt.then(X,ht)}catch(jt){ht(jt)}finally{at!==null&&wt.types!==null&&(at.types=wt.types),R.T=at}},ve.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ve.use=function(G){return R.H.use(G)},ve.useActionState=function(G,at,wt){return R.H.useActionState(G,at,wt)},ve.useCallback=function(G,at){return R.H.useCallback(G,at)},ve.useContext=function(G){return R.H.useContext(G)},ve.useDebugValue=function(){},ve.useDeferredValue=function(G,at){return R.H.useDeferredValue(G,at)},ve.useEffect=function(G,at){return R.H.useEffect(G,at)},ve.useEffectEvent=function(G){return R.H.useEffectEvent(G)},ve.useId=function(){return R.H.useId()},ve.useImperativeHandle=function(G,at,wt){return R.H.useImperativeHandle(G,at,wt)},ve.useInsertionEffect=function(G,at){return R.H.useInsertionEffect(G,at)},ve.useLayoutEffect=function(G,at){return R.H.useLayoutEffect(G,at)},ve.useMemo=function(G,at){return R.H.useMemo(G,at)},ve.useOptimistic=function(G,at){return R.H.useOptimistic(G,at)},ve.useReducer=function(G,at,wt){return R.H.useReducer(G,at,wt)},ve.useRef=function(G){return R.H.useRef(G)},ve.useState=function(G){return R.H.useState(G)},ve.useSyncExternalStore=function(G,at,wt){return R.H.useSyncExternalStore(G,at,wt)},ve.useTransition=function(){return R.H.useTransition()},ve.version="19.2.0",ve}var ab;function R0(){return ab||(ab=1,h1.exports=fx()),h1.exports}var Ft=R0(),f1={exports:{}},Qm={},d1={exports:{}},p1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function dx(){return ob||(ob=1,(function(s){function t(Z,rt){var _t=Z.length;Z.push(rt);t:for(;0<_t;){var ht=_t-1>>>1,ft=Z[ht];if(0<a(ft,rt))Z[ht]=rt,Z[_t]=ft,_t=ht;else break t}}function e(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var rt=Z[0],_t=Z.pop();if(_t!==rt){Z[0]=_t;t:for(var ht=0,ft=Z.length,G=ft>>>1;ht<G;){var at=2*(ht+1)-1,wt=Z[at],Tt=at+1,It=Z[Tt];if(0>a(wt,_t))Tt<ft&&0>a(It,wt)?(Z[ht]=It,Z[Tt]=_t,ht=Tt):(Z[ht]=wt,Z[at]=_t,ht=at);else if(Tt<ft&&0>a(It,_t))Z[ht]=It,Z[Tt]=_t,ht=Tt;else break t}}return rt}function a(Z,rt){var _t=Z.sortIndex-rt.sortIndex;return _t!==0?_t:Z.id-rt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,d=f.now();s.unstable_now=function(){return f.now()-d}}var g=[],m=[],T=1,w=null,E=3,N=!1,O=!1,U=!1,D=!1,z=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function nt(Z){for(var rt=e(m);rt!==null;){if(rt.callback===null)i(m);else if(rt.startTime<=Z)i(m),rt.sortIndex=rt.expirationTime,t(g,rt);else break;rt=e(m)}}function K(Z){if(U=!1,nt(Z),!O)if(e(g)!==null)O=!0,X||(X=!0,F());else{var rt=e(m);rt!==null&&Mt(K,rt.startTime-Z)}}var X=!1,R=-1,C=5,M=-1;function V(){return D?!0:!(s.unstable_now()-M<C)}function P(){if(D=!1,X){var Z=s.unstable_now();M=Z;var rt=!0;try{t:{O=!1,U&&(U=!1,$(R),R=-1),N=!0;var _t=E;try{e:{for(nt(Z),w=e(g);w!==null&&!(w.expirationTime>Z&&V());){var ht=w.callback;if(typeof ht=="function"){w.callback=null,E=w.priorityLevel;var ft=ht(w.expirationTime<=Z);if(Z=s.unstable_now(),typeof ft=="function"){w.callback=ft,nt(Z),rt=!0;break e}w===e(g)&&i(g),nt(Z)}else i(g);w=e(g)}if(w!==null)rt=!0;else{var G=e(m);G!==null&&Mt(K,G.startTime-Z),rt=!1}}break t}finally{w=null,E=_t,N=!1}rt=void 0}}finally{rt?F():X=!1}}}var F;if(typeof Q=="function")F=function(){Q(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,At=B.port2;B.port1.onmessage=P,F=function(){At.postMessage(null)}}else F=function(){z(P,0)};function Mt(Z,rt){R=z(function(){Z(s.unstable_now())},rt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(Z){switch(E){case 1:case 2:case 3:var rt=3;break;default:rt=E}var _t=E;E=rt;try{return Z()}finally{E=_t}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(Z,rt){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var _t=E;E=Z;try{return rt()}finally{E=_t}},s.unstable_scheduleCallback=function(Z,rt,_t){var ht=s.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?ht+_t:ht):_t=ht,Z){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=_t+ft,Z={id:T++,callback:rt,priorityLevel:Z,startTime:_t,expirationTime:ft,sortIndex:-1},_t>ht?(Z.sortIndex=_t,t(m,Z),e(g)===null&&Z===e(m)&&(U?($(R),R=-1):U=!0,Mt(K,_t-ht))):(Z.sortIndex=ft,t(g,Z),O||N||(O=!0,X||(X=!0,F()))),Z},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(Z){var rt=E;return function(){var _t=E;E=rt;try{return Z.apply(this,arguments)}finally{E=_t}}}})(p1)),p1}var lb;function px(){return lb||(lb=1,d1.exports=dx()),d1.exports}var m1={exports:{}},vs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function mx(){if(cb)return vs;cb=1;var s=R0();function t(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)m+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(g,m,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:g,containerInfo:m,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return vs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,vs.createPortal=function(g,m){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return c(g,m,null,T)},vs.flushSync=function(g){var m=f.T,T=i.p;try{if(f.T=null,i.p=2,g)return g()}finally{f.T=m,i.p=T,i.d.f()}},vs.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(g,m))},vs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},vs.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var T=m.as,w=d(T,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;T==="style"?i.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:N}):T==="script"&&i.d.X(g,{crossOrigin:w,integrity:E,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},vs.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var T=d(m.as,m.crossOrigin);i.d.M(g,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(g)},vs.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var T=m.as,w=d(T,m.crossOrigin);i.d.L(g,T,{crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},vs.preloadModule=function(g,m){if(typeof g=="string")if(m){var T=d(m.as,m.crossOrigin);i.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(g)},vs.requestFormReset=function(g){i.d.r(g)},vs.unstable_batchedUpdates=function(g,m){return g(m)},vs.useFormState=function(g,m,T){return f.H.useFormState(g,m,T)},vs.useFormStatus=function(){return f.H.useHostTransitionStatus()},vs.version="19.2.0",vs}var ub;function gx(){if(ub)return m1.exports;ub=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),m1.exports=mx(),m1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function _x(){if(hb)return Qm;hb=1;var s=px(),t=R0(),e=gx();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function f(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(i(188))}function m(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var _=o.return;if(_===null)break;var v=_.alternate;if(v===null){if(u=_.return,u!==null){o=u;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===o)return g(_),n;if(v===u)return g(_),r;v=v.sibling}throw Error(i(188))}if(o.return!==u.return)o=_,u=v;else{for(var A=!1,j=_.child;j;){if(j===o){A=!0,o=_,u=v;break}if(j===u){A=!0,u=_,o=v;break}j=j.sibling}if(!A){for(j=v.child;j;){if(j===o){A=!0,o=v,u=_;break}if(j===u){A=!0,u=v,o=_;break}j=j.sibling}if(!A)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function T(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=T(n),r!==null)return r;n=n.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),nt=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var B=Symbol.for("react.client.reference");function At(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===B?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case z:return"Profiler";case D:return"StrictMode";case K:return"Suspense";case X:return"SuspenseList";case M:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case Q:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case nt:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:At(n.type)||"Memo";case C:r=n._payload,n=n._init;try{return At(n(r))}catch{}}return null}var Mt=Array.isArray,Z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},ht=[],ft=-1;function G(n){return{current:n}}function at(n){0>ft||(n.current=ht[ft],ht[ft]=null,ft--)}function wt(n,r){ft++,ht[ft]=n.current,n.current=r}var Tt=G(null),It=G(null),jt=G(null),$t=G(null);function kt(n,r){switch(wt(jt,r),wt(It,n),wt(Tt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Oh(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Oh(r),n=_s(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}at(Tt),wt(Tt,n)}function Zt(){at(Tt),at(It),at(jt)}function an(n){n.memoizedState!==null&&wt($t,n);var r=Tt.current,o=_s(r,n.type);r!==o&&(wt(It,n),wt(Tt,o))}function Ve(n){It.current===n&&(at(Tt),at(It)),$t.current===n&&(at($t),qc._currentValue=_t)}var be,yn;function ae(n){if(be===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);be=r&&r[1]||"",yn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+n+yn}var gt=!1;function Pt(n,r){if(!n||gt)return"";gt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(mt){var ut=mt}Reflect.construct(n,[],St)}else{try{St.call()}catch(mt){ut=mt}n.call(St.prototype)}}else{try{throw Error()}catch(mt){ut=mt}(St=n())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(mt){if(mt&&ut&&typeof mt.stack=="string")return[mt.stack,ut.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),A=v[0],j=v[1];if(A&&j){var Y=A.split(`
`),ct=j.split(`
`);for(_=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;_<ct.length&&!ct[_].includes("DetermineComponentFrameRoot");)_++;if(u===Y.length||_===ct.length)for(u=Y.length-1,_=ct.length-1;1<=u&&0<=_&&Y[u]!==ct[_];)_--;for(;1<=u&&0<=_;u--,_--)if(Y[u]!==ct[_]){if(u!==1||_!==1)do if(u--,_--,0>_||Y[u]!==ct[_]){var vt=`
`+Y[u].replace(" at new "," at ");return n.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",n.displayName)),vt}while(1<=u&&0<=_);break}}}finally{gt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ae(o):""}function Yt(n,r){switch(n.tag){case 26:case 27:case 5:return ae(n.type);case 16:return ae("Lazy");case 13:return n.child!==r&&r!==null?ae("Suspense Fallback"):ae("Suspense");case 19:return ae("SuspenseList");case 0:case 15:return Pt(n.type,!1);case 11:return Pt(n.type.render,!1);case 1:return Pt(n.type,!0);case 31:return ae("Activity");default:return""}}function Bt(n){try{var r="",o=null;do r+=Yt(n,o),o=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ot=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,te=s.unstable_cancelCallback,oe=s.unstable_shouldYield,We=s.unstable_requestPaint,tn=s.unstable_now,Rn=s.unstable_getCurrentPriorityLevel,Fi=s.unstable_ImmediatePriority,ai=s.unstable_UserBlockingPriority,Mi=s.unstable_NormalPriority,ts=s.unstable_LowPriority,Sa=s.unstable_IdlePriority,es=s.log,lo=s.unstable_setDisableYieldValue,Xn=null,Vn=null;function ki(n){if(typeof es=="function"&&lo(n),Vn&&typeof Vn.setStrictMode=="function")try{Vn.setStrictMode(Xn,n)}catch{}}var fn=Math.clz32?Math.clz32:Hl,ns=Math.log,Zr=Math.LN2;function Hl(n){return n>>>=0,n===0?32:31-(ns(n)/Zr|0)|0}var Xs=256,Jr=262144,Nn=4194304;function Zs(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Js(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var _=0,v=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var j=u&134217727;return j!==0?(u=j&~v,u!==0?_=Zs(u):(A&=j,A!==0?_=Zs(A):o||(o=j&~n,o!==0&&(_=Zs(o))))):(j=u&~v,j!==0?_=Zs(j):A!==0?_=Zs(A):o||(o=u&~n,o!==0&&(_=Zs(o)))),_===0?0:r!==0&&r!==_&&(r&v)===0&&(v=_&-_,o=r&-r,v>=o||v===32&&(o&4194048)!==0)?r:_}function Es(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function co(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uo(){var n=Nn;return Nn<<=1,(Nn&62914560)===0&&(Nn=4194304),n}function is(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Aa(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gu(n,r,o,u,_,v){var A=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var j=n.entanglements,Y=n.expirationTimes,ct=n.hiddenUpdates;for(o=A&~o;0<o;){var vt=31-fn(o),St=1<<vt;j[vt]=0,Y[vt]=-1;var ut=ct[vt];if(ut!==null)for(ct[vt]=null,vt=0;vt<ut.length;vt++){var mt=ut[vt];mt!==null&&(mt.lane&=-536870913)}o&=~St}u!==0&&Sr(n,u,0),v!==0&&_===0&&n.tag!==0&&(n.suspendedLanes|=v&~(A&~r))}function Sr(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-fn(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function el(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-fn(o),_=1<<u;_&r|n[u]&r&&(n[u]|=r),o&=~_}}function Ea(n,r){var o=r&-r;return o=(o&42)!==0?1:Ca(o),(o&(n.suspendedLanes|r))!==0?0:o}function Ca(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ar(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ho(){var n=rt.p;return n!==0?n:(n=window.event,n===void 0?32:xy(n.type))}function Nt(n,r){var o=rt.p;try{return rt.p=n,r()}finally{rt.p=o}}var Ht=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ht,zt="__reactProps$"+Ht,ee="__reactContainer$"+Ht,Ge="__reactEvents$"+Ht,Fn="__reactListeners$"+Ht,en="__reactHandles$"+Ht,pi="__reactResources$"+Ht,Zn="__reactMarker$"+Ht;function Cs(n){delete n[Ut],delete n[zt],delete n[Ge],delete n[Fn],delete n[en]}function ss(n){var r=n[Ut];if(r)return r;for(var o=n.parentNode;o;){if(r=o[ee]||o[Ut]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=uy(n);n!==null;){if(o=n[Ut])return o;n=uy(n)}return r}n=o,o=n.parentNode}return null}function Hi(n){if(n=n[Ut]||n[ee]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function xs(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Rs(n){var r=n[pi];return r||(r=n[pi]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Jn(n){n[Zn]=!0}var _u=new Set,yu={};function Er(n,r){Cr(n,r),Cr(n+"Capture",r)}function Cr(n,r){for(yu[n]=r,n=0;n<r.length;n++)_u.add(r[n])}var Gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vu={},Tu={};function sf(n){return Ot.call(Tu,n)?!0:Ot.call(vu,n)?!1:Gl.test(n)?Tu[n]=!0:(vu[n]=!0,!1)}function Kl(n,r,o){if(sf(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function rs(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Hn(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}function oi(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ta(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wu(n,r,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,v=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return _.call(this)},set:function(A){o=""+A,v.call(this,A)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(A){o=""+A},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ye(n){if(!n._valueTracker){var r=ta(n)?"checked":"value";n._valueTracker=wu(n,r,""+n[r])}}function ea(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=ta(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function xr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var nl=/[\n"\\]/g;function Gi(n){return n.replace(nl,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function il(n,r,o,u,_,v,A,j){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),r!=null?A==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+oi(r)):n.value!==""+oi(r)&&(n.value=""+oi(r)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),r!=null?bu(n,A,oi(r)):o!=null?bu(n,A,oi(o)):u!=null&&n.removeAttribute("value"),_==null&&v!=null&&(n.defaultChecked=!!v),_!=null&&(n.checked=_&&typeof _!="function"&&typeof _!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+oi(j):n.removeAttribute("name")}function $l(n,r,o,u,_,v,A,j){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),r!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Ye(n);return}o=o!=null?""+oi(o):"",r=r!=null?""+oi(r):o,j||r===n.value||(n.value=r),n.defaultValue=r}u=u??_,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=j?n.checked:!!u,n.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A),Ye(n)}function bu(n,r,o){r==="number"&&xr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function xa(n,r,o,u){if(n=n.options,r){r={};for(var _=0;_<o.length;_++)r["$"+o[_]]=!0;for(o=0;o<n.length;o++)_=r.hasOwnProperty("$"+n[o].value),n[o].selected!==_&&(n[o].selected=_),_&&u&&(n[o].defaultSelected=!0)}else{for(o=""+oi(o),r=null,_=0;_<n.length;_++){if(n[_].value===o){n[_].selected=!0,u&&(n[_].defaultSelected=!0);return}r!==null||n[_].disabled||(r=n[_])}r!==null&&(r.selected=!0)}}function Wl(n,r,o){if(r!=null&&(r=""+oi(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+oi(o):""}function na(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(Mt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=oi(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ye(n)}function li(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Su=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||Su.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Au(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var _ in r)u=r[_],r.hasOwnProperty(_)&&o[_]!==u&&Yl(n,_,u)}else for(var v in r)r.hasOwnProperty(v)&&Yl(n,v,r[v])}function sl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ra=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rl(n){return Ra.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Rr(){}var Cu=null;function tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Na=null,ia=null;function al(n){var r=Hi(n);if(r&&(n=r.stateNode)){var o=n[zt]||null;t:switch(n=r.stateNode,r.type){case"input":if(il(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Gi(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var _=u[zt]||null;if(!_)throw Error(i(90));il(u,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&ea(u)}break t;case"textarea":Wl(n,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&xa(n,!!o.multiple,r,!1)}}}var Ql=!1;function fo(n,r,o){if(Ql)return n(r,o);Ql=!0;try{var u=n(r);return u}finally{if(Ql=!1,(Na!==null||ia!==null)&&(Jf(),Na&&(r=Na,n=ia,ia=Na=null,al(r),n)))for(r=0;r<n.length;r++)al(n[r])}}function Ns(n,r){var o=n.stateNode;if(o===null)return null;var u=o[zt]||null;if(u===null)return null;o=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ol=!1;if(er)try{var on={};Object.defineProperty(on,"passive",{get:function(){ol=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{ol=!1}var sa=null,xu=null,Ke=null;function Qe(){if(Ke)return Ke;var n,r=xu,o=r.length,u,_="value"in sa?sa.value:sa.textContent,v=_.length;for(n=0;n<o&&r[n]===_[n];n++);var A=o-n;for(u=1;u<=A&&r[o-u]===_[v-u];u++);return Ke=_.slice(n,1<u?1-u:void 0)}function ll(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ia(){return!0}function Nr(){return!1}function Ai(n){function r(o,u,_,v,A){this._reactName=o,this._targetInst=_,this.type=u,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(o=n[j],this[j]=o?o(v):v[j]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ia:Nr,this.isPropagationStopped=Nr,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),r}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=Ai(Oa),Da=w({},Oa,{view:0,detail:0}),Ru=Ai(Da),bn,po,Vi,cl=w({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vi&&(Vi&&n.type==="mousemove"?(bn=n.screenX-Vi.screenX,po=n.screenY-Vi.screenY):po=bn=0,Vi=n),bn)},movementY:function(n){return"movementY"in n?n.movementY:po}}),ul=Ai(cl),mi=w({},cl,{dataTransfer:0}),Nu=Ai(mi),Iu=w({},Da,{relatedTarget:0}),mo=Ai(Iu),Xl=w({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ou=Ai(Xl),hl=w({},Oa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ji=Ai(hl),rf=w({},Oa,{data:0}),Gn=Ai(rf),af={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ir={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Ir[n])?!!r[n]:!1}function aa(){return fl}var Ae=w({},Da,{key:function(n){if(n.key){var r=af[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ll(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Du[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(n){return n.type==="keypress"?ll(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ll(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Or=Ai(Ae),Zl=w({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=Ai(Zl),p=w({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),S=Ai(p),x=w({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Ai(x),ot=w({},cl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dt=Ai(ot),Lt=w({},Oa,{newState:0,oldState:0}),me=Ai(Lt),jn=[9,13,27,32],ze=er&&"CompositionEvent"in window,mn=null;er&&"documentMode"in document&&(mn=document.documentMode);var as=er&&"TextEvent"in window&&!mn,Dr=er&&(!ze||mn&&8<mn&&11>=mn),Mr=" ",Is=!1;function ka(n,r){switch(n){case"keyup":return jn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dl=!1;function Os(n,r){switch(n){case"compositionend":return Jl(r);case"keypress":return r.which!==32?null:(Is=!0,Mr);case"textInput":return n=r.data,n===Mr&&Is?null:n;default:return null}}function dp(n,r){if(dl)return n==="compositionend"||!ze&&ka(n,r)?(n=Qe(),Ke=xu=sa=null,dl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Dr&&r.locale!=="ko"?null:r.data;default:return null}}var Mu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Mu[n.type]:r==="textarea"}function mp(n,r,o,u){Na?ia?ia.push(u):ia=[u]:Na=u,r=xh(r,"onChange"),0<r.length&&(o=new ra("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var ku=null,Vu=null;function _v(n){ey(n,0)}function of(n){var r=xs(n);if(ea(r))return n}function qg(n,r){if(n==="change")return r}var pl=!1;if(er){var gp;if(er){var _p="oninput"in document;if(!_p){var lf=document.createElement("div");lf.setAttribute("oninput","return;"),_p=typeof lf.oninput=="function"}gp=_p}else gp=!1;pl=gp&&(!document.documentMode||9<document.documentMode)}function yp(){ku&&(ku.detachEvent("onpropertychange",Va),Vu=ku=null)}function Va(n){if(n.propertyName==="value"&&of(Vu)){var r=[];mp(r,Vu,n,tr(n)),fo(_v,r)}}function cf(n,r,o){n==="focusin"?(yp(),ku=r,Vu=o,ku.attachEvent("onpropertychange",Va)):n==="focusout"&&yp()}function yv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return of(Vu)}function vv(n,r){if(n==="click")return of(r)}function Tv(n,r){if(n==="input"||n==="change")return of(r)}function tc(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var In=typeof Object.is=="function"?Object.is:tc;function ec(n,r){if(In(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var _=o[u];if(!Ot.call(r,_)||!In(n[_],r[_]))return!1}return!0}function Fg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hg(n,r){var o=Fg(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Fg(o)}}function Gg(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Gg(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Kg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=xr(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=xr(n.document)}return r}function vp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var nc=er&&"documentMode"in document&&11>=document.documentMode,et=null,yt=null,pt=null,Gt=!1;function fe(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Gt||et==null||et!==xr(u)||(u=et,"selectionStart"in u&&vp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),pt&&ec(pt,u)||(pt=u,u=xh(yt,"onSelect"),0<u.length&&(r=new ra("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=et)))}function xe(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Sn={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionrun:xe("Transition","TransitionRun"),transitionstart:xe("Transition","TransitionStart"),transitioncancel:xe("Transition","TransitionCancel"),transitionend:xe("Transition","TransitionEnd")},nn={},uf={};er&&(uf=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);function ml(n){if(nn[n])return nn[n];if(!Sn[n])return n;var r=Sn[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in uf)return nn[n]=r[o];return n}var Ds=ml("animationend"),ju=ml("animationiteration"),$g=ml("animationstart"),ic=ml("transitionrun"),hf=ml("transitionstart"),ff=ml("transitioncancel"),Xe=ml("transitionend"),Wg=new Map,df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");df.push("scrollEnd");function os(n,r){Wg.set(n,r),Er(r,[n])}var pf=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},nr=[],sc=0,rc=0;function kr(){for(var n=sc,r=rc=sc=0;r<n;){var o=nr[r];nr[r++]=null;var u=nr[r];nr[r++]=null;var _=nr[r];nr[r++]=null;var v=nr[r];if(nr[r++]=null,u!==null&&_!==null){var A=u.pending;A===null?_.next=_:(_.next=A.next,A.next=_),u.pending=_}v!==0&&Tp(o,_,v)}}function gl(n,r,o,u){nr[sc++]=n,nr[sc++]=r,nr[sc++]=o,nr[sc++]=u,rc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function mf(n,r,o,u){return gl(n,r,o,u),Lu(n)}function oa(n,r){return gl(n,null,null,r),Lu(n)}function Tp(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var _=!1,v=n.return;v!==null;)v.childLanes|=o,u=v.alternate,u!==null&&(u.childLanes|=o),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(_=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,_&&r!==null&&(_=31-fn(o),n=v.hiddenUpdates,u=n[_],u===null?n[_]=[r]:u.push(r),r.lane=o|536870912),v):null}function Lu(n){if(50<Th)throw Th=0,vm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var ja={};function Yg(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(n,r,o,u){return new Yg(n,r,o,u)}function La(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ir(n,r){var o=n.alternate;return o===null?(o=Ei(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Qg(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function gf(n,r,o,u,_,v){var A=0;if(u=n,typeof n=="function")La(n)&&(A=1);else if(typeof n=="string")A=e1(n,o,Tt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case M:return n=Ei(31,o,r,_),n.elementType=M,n.lanes=v,n;case U:return _l(o.children,_,v,r);case D:A=8,_|=24;break;case z:return n=Ei(12,o,r,_|2),n.elementType=z,n.lanes=v,n;case K:return n=Ei(13,o,r,_),n.elementType=K,n.lanes=v,n;case X:return n=Ei(19,o,r,_),n.elementType=X,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:A=10;break t;case $:A=9;break t;case nt:A=11;break t;case R:A=14;break t;case C:A=16,u=null;break t}A=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=Ei(A,o,r,_),r.elementType=n,r.type=u,r.lanes=v,r}function _l(n,r,o,u){return n=Ei(7,n,u,r),n.lanes=o,n}function ac(n,r,o){return n=Ei(6,n,null,r),n.lanes=o,n}function Pu(n){var r=Ei(18,null,null,0);return r.stateNode=n,r}function Uu(n,r,o){return r=Ei(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Xg=new WeakMap;function Ms(n,r){if(typeof n=="object"&&n!==null){var o=Xg.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Bt(r)},Xg.set(n,r),r)}return{value:n,source:r,stack:Bt(r)}}var oc=[],lc=0,Ln=null,ti=0,sr=[],rr=0,Pa=null,la=1,ar="";function ks(n,r){oc[lc++]=ti,oc[lc++]=Ln,Ln=n,ti=r}function _f(n,r,o){sr[rr++]=la,sr[rr++]=ar,sr[rr++]=Pa,Pa=n;var u=la;n=ar;var _=32-fn(u)-1;u&=~(1<<_),o+=1;var v=32-fn(r)+_;if(30<v){var A=_-_%5;v=(u&(1<<A)-1).toString(32),u>>=A,_-=A,la=1<<32-fn(r)+_|o<<_|u,ar=v+n}else la=1<<v|o<<_|u,ar=n}function go(n){n.return!==null&&(ks(n,1),_f(n,1,0))}function yl(n){for(;n===Ln;)Ln=oc[--lc],oc[lc]=null,ti=oc[--lc],oc[lc]=null;for(;n===Pa;)Pa=sr[--rr],sr[rr]=null,ar=sr[--rr],sr[rr]=null,la=sr[--rr],sr[rr]=null}function cc(n,r){sr[rr++]=la,sr[rr++]=ar,sr[rr++]=Pa,la=r.id,ar=r.overflow,Pa=n}var ei=null,Ze=null,De=!1,_o=null,or=!1,wp=Error(i(519));function yo(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw To(Ms(r,n)),wp}function zu(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[Ut]=n,r[zt]=u,o){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(o=0;o<Ch.length;o++)Ne(Ch[o],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Ne("invalid",r),$l(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ne("invalid",r);break;case"textarea":Ne("invalid",r),na(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||sy(r.textContent,o)?(u.popover!=null&&(Ne("beforetoggle",r),Ne("toggle",r)),u.onScroll!=null&&Ne("scroll",r),u.onScrollEnd!=null&&Ne("scrollend",r),u.onClick!=null&&(r.onclick=Rr),r=!0):r=!1,r||yo(n,!0)}function uc(n){for(ei=n.return;ei;)switch(ei.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:ei=ei.return}}function vl(n){if(n!==ei)return!1;if(!De)return uc(n),De=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||jo(n.type,n.memoizedProps)),o=!o),o&&Ze&&yo(n),uc(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ze=cy(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ze=cy(n)}else r===27?(r=Ze,le(n.type)?(n=Um,Um=null,Ze=n):Ze=r):Ze=ei?pr(n.stateNode.nextSibling):null;return!0}function L(){Ze=ei=null,De=!1}function vo(){var n=_o;return n!==null&&(ps===null?ps=n:ps.push.apply(ps,n),_o=null),n}function To(n){_o===null?_o=[n]:_o.push(n)}var ls=G(null),ge=null,Ua=null;function wo(n,r,o){wt(ls,r._currentValue),r._currentValue=o}function za(n){n._currentValue=ls.current,at(ls)}function Ba(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function bp(n,r,o,u){var _=n.child;for(_!==null&&(_.return=n);_!==null;){var v=_.dependencies;if(v!==null){var A=_.child;v=v.firstContext;t:for(;v!==null;){var j=v;v=_;for(var Y=0;Y<r.length;Y++)if(j.context===r[Y]){v.lanes|=o,j=v.alternate,j!==null&&(j.lanes|=o),Ba(v.return,o,n),u||(A=null);break t}v=j.next}}else if(_.tag===18){if(A=_.return,A===null)throw Error(i(341));A.lanes|=o,v=A.alternate,v!==null&&(v.lanes|=o),Ba(A,o,n),A=null}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===n){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}}function hc(n,r,o,u){n=null;for(var _=r,v=!1;_!==null;){if(!v){if((_.flags&524288)!==0)v=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var A=_.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var j=_.type;In(_.pendingProps.value,A.value)||(n!==null?n.push(j):n=[j])}}else if(_===$t.current){if(A=_.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(n!==null?n.push(qc):n=[qc])}_=_.return}n!==null&&bp(r,n,o,u),r.flags|=262144}function yf(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Tl(n){ge=n,Ua=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ci(n){return Zg(ge,n)}function lr(n,r){return ge===null&&Tl(n),Zg(n,r)}function Zg(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ua===null){if(n===null)throw Error(i(308));Ua=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ua=Ua.next=r;return o}var wv=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},bv=s.unstable_scheduleCallback,Sv=s.unstable_NormalPriority,ni={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vr(){return{controller:new wv,data:new Map,refCount:0}}function Bu(n){n.refCount--,n.refCount===0&&bv(Sv,function(){n.controller.abort()})}var qu=null,Sp=0,fc=0,dc=null;function wl(n,r){if(qu===null){var o=qu=[];Sp=0,fc=Fs(),dc={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Sp++,r.then(Jg,Jg),r}function Jg(){if(--Sp===0&&qu!==null){dc!==null&&(dc.status="fulfilled");var n=qu;qu=null,fc=0,dc=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Av(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(_){o.push(_)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var _=0;_<o.length;_++)(0,o[_])(r)},function(_){for(u.status="rejected",u.reason=_,_=0;_<o.length;_++)(0,o[_])(void 0)}),u}var cr=Z.S;Z.S=function(n,r){L_=tn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&wl(n,r),cr!==null&&cr(n,r)};var bl=G(null);function Ap(){var n=bl.current;return n!==null?n:pn.pooledCache}function vf(n,r){r===null?wt(bl,bl.current):wt(bl,r.pool)}function t_(){var n=Ap();return n===null?null:{parent:ni._currentValue,pool:n}}var pc=Error(i(460)),Tf=Error(i(474)),Fu=Error(i(542)),wf={then:function(){}};function e_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bf(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Rr,Rr),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ep(n),n;default:if(typeof r.status=="string")r.then(Rr,Rr);else{if(n=pn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var _=r;_.status="fulfilled",_.value=u}},function(u){if(r.status==="pending"){var _=r;_.status="rejected",_.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ep(n),n}throw ca=r,pc}}function jr(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ca=o,pc):o}}var ca=null;function n_(){if(ca===null)throw Error(i(459));var n=ca;return ca=null,n}function Ep(n){if(n===pc||n===Fu)throw Error(i(483))}var mc=null,Vs=0;function gc(n){var r=Vs;return Vs+=1,mc===null&&(mc=[]),bf(mc,n,r)}function Lr(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Ki(n,r){throw r.$$typeof===E?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function i_(n){function r(it,tt){if(n){var lt=it.deletions;lt===null?(it.deletions=[tt],it.flags|=16):lt.push(tt)}}function o(it,tt){if(!n)return null;for(;tt!==null;)r(it,tt),tt=tt.sibling;return null}function u(it){for(var tt=new Map;it!==null;)it.key!==null?tt.set(it.key,it):tt.set(it.index,it),it=it.sibling;return tt}function _(it,tt){return it=ir(it,tt),it.index=0,it.sibling=null,it}function v(it,tt,lt){return it.index=lt,n?(lt=it.alternate,lt!==null?(lt=lt.index,lt<tt?(it.flags|=67108866,tt):lt):(it.flags|=67108866,tt)):(it.flags|=1048576,tt)}function A(it){return n&&it.alternate===null&&(it.flags|=67108866),it}function j(it,tt,lt,bt){return tt===null||tt.tag!==6?(tt=ac(lt,it.mode,bt),tt.return=it,tt):(tt=_(tt,lt),tt.return=it,tt)}function Y(it,tt,lt,bt){var ne=lt.type;return ne===U?vt(it,tt,lt.props.children,bt,lt.key):tt!==null&&(tt.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===C&&jr(ne)===tt.type)?(tt=_(tt,lt.props),Lr(tt,lt),tt.return=it,tt):(tt=gf(lt.type,lt.key,lt.props,null,it.mode,bt),Lr(tt,lt),tt.return=it,tt)}function ct(it,tt,lt,bt){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==lt.containerInfo||tt.stateNode.implementation!==lt.implementation?(tt=Uu(lt,it.mode,bt),tt.return=it,tt):(tt=_(tt,lt.children||[]),tt.return=it,tt)}function vt(it,tt,lt,bt,ne){return tt===null||tt.tag!==7?(tt=_l(lt,it.mode,bt,ne),tt.return=it,tt):(tt=_(tt,lt),tt.return=it,tt)}function St(it,tt,lt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=ac(""+tt,it.mode,lt),tt.return=it,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case N:return lt=gf(tt.type,tt.key,tt.props,null,it.mode,lt),Lr(lt,tt),lt.return=it,lt;case O:return tt=Uu(tt,it.mode,lt),tt.return=it,tt;case C:return tt=jr(tt),St(it,tt,lt)}if(Mt(tt)||F(tt))return tt=_l(tt,it.mode,lt,null),tt.return=it,tt;if(typeof tt.then=="function")return St(it,gc(tt),lt);if(tt.$$typeof===Q)return St(it,lr(it,tt),lt);Ki(it,tt)}return null}function ut(it,tt,lt,bt){var ne=tt!==null?tt.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return ne!==null?null:j(it,tt,""+lt,bt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case N:return lt.key===ne?Y(it,tt,lt,bt):null;case O:return lt.key===ne?ct(it,tt,lt,bt):null;case C:return lt=jr(lt),ut(it,tt,lt,bt)}if(Mt(lt)||F(lt))return ne!==null?null:vt(it,tt,lt,bt,null);if(typeof lt.then=="function")return ut(it,tt,gc(lt),bt);if(lt.$$typeof===Q)return ut(it,tt,lr(it,lt),bt);Ki(it,lt)}return null}function mt(it,tt,lt,bt,ne){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return it=it.get(lt)||null,j(tt,it,""+bt,ne);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case N:return it=it.get(bt.key===null?lt:bt.key)||null,Y(tt,it,bt,ne);case O:return it=it.get(bt.key===null?lt:bt.key)||null,ct(tt,it,bt,ne);case C:return bt=jr(bt),mt(it,tt,lt,bt,ne)}if(Mt(bt)||F(bt))return it=it.get(lt)||null,vt(tt,it,bt,ne,null);if(typeof bt.then=="function")return mt(it,tt,lt,gc(bt),ne);if(bt.$$typeof===Q)return mt(it,tt,lt,lr(tt,bt),ne);Ki(tt,bt)}return null}function Qt(it,tt,lt,bt){for(var ne=null,Be=null,Xt=tt,we=tt=0,Oe=null;Xt!==null&&we<lt.length;we++){Xt.index>we?(Oe=Xt,Xt=null):Oe=Xt.sibling;var qe=ut(it,Xt,lt[we],bt);if(qe===null){Xt===null&&(Xt=Oe);break}n&&Xt&&qe.alternate===null&&r(it,Xt),tt=v(qe,tt,we),Be===null?ne=qe:Be.sibling=qe,Be=qe,Xt=Oe}if(we===lt.length)return o(it,Xt),De&&ks(it,we),ne;if(Xt===null){for(;we<lt.length;we++)Xt=St(it,lt[we],bt),Xt!==null&&(tt=v(Xt,tt,we),Be===null?ne=Xt:Be.sibling=Xt,Be=Xt);return De&&ks(it,we),ne}for(Xt=u(Xt);we<lt.length;we++)Oe=mt(Xt,it,we,lt[we],bt),Oe!==null&&(n&&Oe.alternate!==null&&Xt.delete(Oe.key===null?we:Oe.key),tt=v(Oe,tt,we),Be===null?ne=Oe:Be.sibling=Oe,Be=Oe);return n&&Xt.forEach(function(qo){return r(it,qo)}),De&&ks(it,we),ne}function re(it,tt,lt,bt){if(lt==null)throw Error(i(151));for(var ne=null,Be=null,Xt=tt,we=tt=0,Oe=null,qe=lt.next();Xt!==null&&!qe.done;we++,qe=lt.next()){Xt.index>we?(Oe=Xt,Xt=null):Oe=Xt.sibling;var qo=ut(it,Xt,qe.value,bt);if(qo===null){Xt===null&&(Xt=Oe);break}n&&Xt&&qo.alternate===null&&r(it,Xt),tt=v(qo,tt,we),Be===null?ne=qo:Be.sibling=qo,Be=qo,Xt=Oe}if(qe.done)return o(it,Xt),De&&ks(it,we),ne;if(Xt===null){for(;!qe.done;we++,qe=lt.next())qe=St(it,qe.value,bt),qe!==null&&(tt=v(qe,tt,we),Be===null?ne=qe:Be.sibling=qe,Be=qe);return De&&ks(it,we),ne}for(Xt=u(Xt);!qe.done;we++,qe=lt.next())qe=mt(Xt,it,we,qe.value,bt),qe!==null&&(n&&qe.alternate!==null&&Xt.delete(qe.key===null?we:qe.key),tt=v(qe,tt,we),Be===null?ne=qe:Be.sibling=qe,Be=qe);return n&&Xt.forEach(function(c1){return r(it,c1)}),De&&ks(it,we),ne}function un(it,tt,lt,bt){if(typeof lt=="object"&&lt!==null&&lt.type===U&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case N:t:{for(var ne=lt.key;tt!==null;){if(tt.key===ne){if(ne=lt.type,ne===U){if(tt.tag===7){o(it,tt.sibling),bt=_(tt,lt.props.children),bt.return=it,it=bt;break t}}else if(tt.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===C&&jr(ne)===tt.type){o(it,tt.sibling),bt=_(tt,lt.props),Lr(bt,lt),bt.return=it,it=bt;break t}o(it,tt);break}else r(it,tt);tt=tt.sibling}lt.type===U?(bt=_l(lt.props.children,it.mode,bt,lt.key),bt.return=it,it=bt):(bt=gf(lt.type,lt.key,lt.props,null,it.mode,bt),Lr(bt,lt),bt.return=it,it=bt)}return A(it);case O:t:{for(ne=lt.key;tt!==null;){if(tt.key===ne)if(tt.tag===4&&tt.stateNode.containerInfo===lt.containerInfo&&tt.stateNode.implementation===lt.implementation){o(it,tt.sibling),bt=_(tt,lt.children||[]),bt.return=it,it=bt;break t}else{o(it,tt);break}else r(it,tt);tt=tt.sibling}bt=Uu(lt,it.mode,bt),bt.return=it,it=bt}return A(it);case C:return lt=jr(lt),un(it,tt,lt,bt)}if(Mt(lt))return Qt(it,tt,lt,bt);if(F(lt)){if(ne=F(lt),typeof ne!="function")throw Error(i(150));return lt=ne.call(lt),re(it,tt,lt,bt)}if(typeof lt.then=="function")return un(it,tt,gc(lt),bt);if(lt.$$typeof===Q)return un(it,tt,lr(it,lt),bt);Ki(it,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,tt!==null&&tt.tag===6?(o(it,tt.sibling),bt=_(tt,lt),bt.return=it,it=bt):(o(it,tt),bt=ac(lt,it.mode,bt),bt.return=it,it=bt),A(it)):o(it,tt)}return function(it,tt,lt,bt){try{Vs=0;var ne=un(it,tt,lt,bt);return mc=null,ne}catch(Xt){if(Xt===pc||Xt===Fu)throw Xt;var Be=Ei(29,Xt,null,it.mode);return Be.lanes=bt,Be.return=it,Be}finally{}}}var bo=i_(!0),Cp=i_(!1),ur=!1;function ua(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function So(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Pr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var _=u.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),u.pending=r,r=Lu(n),Tp(n,null,o),r}return gl(n,u,r,o),Lu(n)}function Hu(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,el(n,o)}}function Af(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var _=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var A={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?_=v=A:v=v.next=A,o=o.next}while(o!==null);v===null?_=v=r:v=v.next=r}else _=v=r;o={baseState:u.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var ci=!1;function Sl(){if(ci){var n=dc;if(n!==null)throw n}}function _c(n,r,o,u){ci=!1;var _=n.updateQueue;ur=!1;var v=_.firstBaseUpdate,A=_.lastBaseUpdate,j=_.shared.pending;if(j!==null){_.shared.pending=null;var Y=j,ct=Y.next;Y.next=null,A===null?v=ct:A.next=ct,A=Y;var vt=n.alternate;vt!==null&&(vt=vt.updateQueue,j=vt.lastBaseUpdate,j!==A&&(j===null?vt.firstBaseUpdate=ct:j.next=ct,vt.lastBaseUpdate=Y))}if(v!==null){var St=_.baseState;A=0,vt=ct=Y=null,j=v;do{var ut=j.lane&-536870913,mt=ut!==j.lane;if(mt?(Ie&ut)===ut:(u&ut)===ut){ut!==0&&ut===fc&&(ci=!0),vt!==null&&(vt=vt.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});t:{var Qt=n,re=j;ut=r;var un=o;switch(re.tag){case 1:if(Qt=re.payload,typeof Qt=="function"){St=Qt.call(un,St,ut);break t}St=Qt;break t;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=re.payload,ut=typeof Qt=="function"?Qt.call(un,St,ut):Qt,ut==null)break t;St=w({},St,ut);break t;case 2:ur=!0}}ut=j.callback,ut!==null&&(n.flags|=64,mt&&(n.flags|=8192),mt=_.callbacks,mt===null?_.callbacks=[ut]:mt.push(ut))}else mt={lane:ut,tag:j.tag,payload:j.payload,callback:j.callback,next:null},vt===null?(ct=vt=mt,Y=St):vt=vt.next=mt,A|=ut;if(j=j.next,j===null){if(j=_.shared.pending,j===null)break;mt=j,j=mt.next,mt.next=null,_.lastBaseUpdate=mt,_.shared.pending=null}}while(!0);vt===null&&(Y=St),_.baseState=Y,_.firstBaseUpdate=ct,_.lastBaseUpdate=vt,v===null&&(_.shared.lanes=0),Oo|=A,n.lanes=A,n.memoizedState=St}}function Ur(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function Ef(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ur(o[n],r)}var qa=G(null),ha=G(0);function xp(n,r){n=Gr,wt(ha,n),wt(qa,r),Gr=n|r.baseLanes}function xi(){wt(ha,Gr),wt(qa,qa.current)}function Gu(){Gr=ha.current,at(qa),at(ha)}var js=G(null),hr=null;function Ao(n){var r=n.alternate;wt(Kn,Kn.current&1),wt(js,n),hr===null&&(r===null||qa.current!==null||r.memoizedState!==null)&&(hr=n)}function Ku(n){wt(Kn,Kn.current),wt(js,n),hr===null&&(hr=n)}function s_(n){n.tag===22?(wt(Kn,Kn.current),wt(js,n),hr===null&&(hr=n)):fr()}function fr(){wt(Kn,Kn.current),wt(js,js.current)}function cs(n){at(js),hr===n&&(hr=null),at(Kn)}var Kn=G(0);function Cf(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||cd(o)||jc(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ls=0,_e=null,ln=null,Pn=null,$u=!1,yc=!1,Al=!1,xf=0,vc=0,Eo=null,Ev=0;function An(){throw Error(i(321))}function Rf(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!In(n[o],r[o]))return!1;return!0}function Nf(n,r,o,u,_,v){return Ls=v,_e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=n===null||n.memoizedState===null?m_:Pf,Al=!1,v=o(u,_),Al=!1,yc&&(v=Wu(r,o,u,_)),Rp(n),v}function Rp(n){Z.H=xo;var r=ln!==null&&ln.next!==null;if(Ls=0,Pn=ln=_e=null,$u=!1,vc=0,Eo=null,r)throw Error(i(300));n===null||On||(n=n.dependencies,n!==null&&yf(n)&&(On=!0))}function Wu(n,r,o,u){_e=n;var _=0;do{if(yc&&(Eo=null),vc=0,yc=!1,25<=_)throw Error(i(301));if(_+=1,Pn=ln=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Z.H=nh,v=r(o,u)}while(yc);return v}function Cv(){var n=Z.H,r=n.useState()[0];return r=typeof r.then=="function"?wc(r):r,n=n.useState()[0],(ln!==null?ln.memoizedState:null)!==n&&(_e.flags|=1024),r}function If(){var n=xf!==0;return xf=0,n}function Of(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Np(n){if($u){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}$u=!1}Ls=0,Pn=ln=_e=null,yc=!1,vc=xf=0,Eo=null}function Li(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?_e.memoizedState=Pn=n:Pn=Pn.next=n,Pn}function $n(){if(ln===null){var n=_e.alternate;n=n!==null?n.memoizedState:null}else n=ln.next;var r=Pn===null?_e.memoizedState:Pn.next;if(r!==null)Pn=r,ln=n;else{if(n===null)throw _e.alternate===null?Error(i(467)):Error(i(310));ln=n,n={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},Pn===null?_e.memoizedState=Pn=n:Pn=Pn.next=n}return Pn}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(n){var r=vc;return vc+=1,Eo===null&&(Eo=[]),n=bf(Eo,n,r),r=_e,(Pn===null?r.memoizedState:Pn.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?m_:Pf),n}function bc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return wc(n);if(n.$$typeof===Q)return Ci(n)}throw Error(i(438,String(n)))}function Ip(n){var r=null,o=_e.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(_){return _.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Tc(),_e.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=V;return r.index++,o}function zr(n,r){return typeof r=="function"?r(n):r}function ye(n){var r=$n();return Op(r,ln,n)}function Op(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var _=n.baseQueue,v=u.pending;if(v!==null){if(_!==null){var A=_.next;_.next=v.next,v.next=A}r.baseQueue=_=v,u.pending=null}if(v=n.baseState,_===null)n.memoizedState=v;else{r=_.next;var j=A=null,Y=null,ct=r,vt=!1;do{var St=ct.lane&-536870913;if(St!==ct.lane?(Ie&St)===St:(Ls&St)===St){var ut=ct.revertLane;if(ut===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),St===fc&&(vt=!0);else if((Ls&ut)===ut){ct=ct.next,ut===fc&&(vt=!0);continue}else St={lane:0,revertLane:ct.revertLane,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Y===null?(j=Y=St,A=v):Y=Y.next=St,_e.lanes|=ut,Oo|=ut;St=ct.action,Al&&o(v,St),v=ct.hasEagerState?ct.eagerState:o(v,St)}else ut={lane:St,revertLane:ct.revertLane,gesture:ct.gesture,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Y===null?(j=Y=ut,A=v):Y=Y.next=ut,_e.lanes|=St,Oo|=St;ct=ct.next}while(ct!==null&&ct!==r);if(Y===null?A=v:Y.next=j,!In(v,n.memoizedState)&&(On=!0,vt&&(o=dc,o!==null)))throw o;n.memoizedState=v,n.baseState=A,n.baseQueue=Y,u.lastRenderedState=v}return _===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Dp(n){var r=$n(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,_=o.pending,v=r.memoizedState;if(_!==null){o.pending=null;var A=_=_.next;do v=n(v,A.action),A=A.next;while(A!==_);In(v,r.memoizedState)||(On=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),o.lastRenderedState=v}return[v,u]}function Sc(n,r,o){var u=_e,_=$n(),v=De;if(v){if(o===void 0)throw Error(i(407));o=o()}else o=r();var A=!In((ln||_).memoizedState,o);if(A&&(_.memoizedState=o,On=!0),_=_.queue,Zu(a_.bind(null,u,_,n),[n]),_.getSnapshot!==r||A||Pn!==null&&Pn.memoizedState.tag&1){if(u.flags|=2048,Us(9,{destroy:void 0},r_.bind(null,u,_,o,r),null),pn===null)throw Error(i(349));v||(Ls&127)!==0||Mp(u,r,o)}return o}function Mp(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=_e.updateQueue,r===null?(r=Tc(),_e.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function r_(n,r,o,u){r.value=o,r.getSnapshot=u,Ps(r)&&o_(n)}function a_(n,r,o){return o(function(){Ps(r)&&o_(n)})}function Ps(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!In(n,o)}catch{return!0}}function o_(n){var r=oa(n,2);r!==null&&ms(r,n,2)}function Ac(n){var r=Li();if(typeof n=="function"){var o=n;if(n=o(),Al){ki(!0);try{o()}finally{ki(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:n},r}function Df(n,r,o,u){return n.baseState=o,Op(n,ln,typeof u=="function"?u:zr)}function l_(n,r,o,u,_){if(th(n))throw Error(i(485));if(n=r.action,n!==null){var v={payload:_,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Z.T!==null?o(!0):v.isTransition=!1,u(v),o=r.pending,o===null?(v.next=r.pending=v,kp(r,v)):(v.next=o.next,r.pending=o.next=v)}}function kp(n,r){var o=r.action,u=r.payload,_=n.state;if(r.isTransition){var v=Z.T,A={};Z.T=A;try{var j=o(_,u),Y=Z.S;Y!==null&&Y(A,j),us(n,r,j)}catch(ct){Yu(n,r,ct)}finally{v!==null&&A.types!==null&&(v.types=A.types),Z.T=v}}else try{v=o(_,u),us(n,r,v)}catch(ct){Yu(n,r,ct)}}function us(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Fa(n,r,u)},function(u){return Yu(n,r,u)}):Fa(n,r,o)}function Fa(n,r,o){r.status="fulfilled",r.value=o,Vp(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,kp(n,o)))}function Yu(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Vp(r),r=r.next;while(r!==u)}n.action=null}function Vp(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Qu(n,r){return r}function jp(n,r){if(De){var o=pn.formState;if(o!==null){t:{var u=_e;if(De){if(Ze){e:{for(var _=Ze,v=or;_.nodeType!==8;){if(!v){_=null;break e}if(_=pr(_.nextSibling),_===null){_=null;break e}}v=_.data,_=v==="F!"||v==="F"?_:null}if(_){Ze=pr(_.nextSibling),u=_.data==="F!";break t}}yo(u)}u=!1}u&&(r=o[0])}}return o=Li(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:r},o.queue=u,o=$p.bind(null,_e,u),u.dispatch=o,u=Ac(!1),v=Cc.bind(null,_e,!1,u.queue),u=Li(),_={state:r,dispatch:null,action:n,pending:null},u.queue=_,o=l_.bind(null,_e,_,v,o),_.dispatch=o,u.memoizedState=n,[r,o,!1]}function Mf(n){var r=$n();return Lp(r,ln,n)}function Lp(n,r,o){if(r=Op(n,r,Qu)[0],n=ye(zr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=wc(r)}catch(A){throw A===pc?Fu:A}else u=r;r=$n();var _=r.queue,v=_.dispatch;return o!==r.memoizedState&&(_e.flags|=2048,Us(9,{destroy:void 0},Pp.bind(null,_,o),null)),[u,v,n]}function Pp(n,r){n.action=r}function kf(n){var r=$n(),o=ln;if(o!==null)return Lp(r,o,n);$n(),r=r.memoizedState,o=$n();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function Us(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=_e.updateQueue,r===null&&(r=Tc(),_e.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function c_(){return $n().memoizedState}function Br(n,r,o,u){var _=Li();_e.flags|=n,_.memoizedState=Us(1|r,{destroy:void 0},o,u===void 0?null:u)}function Xu(n,r,o,u){var _=$n();u=u===void 0?null:u;var v=_.memoizedState.inst;ln!==null&&u!==null&&Rf(u,ln.memoizedState.deps)?_.memoizedState=Us(r,v,o,u):(_e.flags|=n,_.memoizedState=Us(1|r,v,o,u))}function Up(n,r){Br(8390656,8,n,r)}function Zu(n,r){Xu(2048,8,n,r)}function xv(n){_e.flags|=4;var r=_e.updateQueue;if(r===null)r=Tc(),_e.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function u_(n){var r=$n().memoizedState;return xv({ref:r,nextImpl:n}),function(){if(($e&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function h_(n,r){return Xu(4,2,n,r)}function zp(n,r){return Xu(4,4,n,r)}function Bp(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function f_(n,r,o){o=o!=null?o.concat([n]):null,Xu(4,4,Bp.bind(null,r,n),o)}function Vf(){}function qp(n,r){var o=$n();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Rf(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function $i(n,r){var o=$n();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Rf(r,u[1]))return u[0];if(u=n(),Al){ki(!0);try{n()}finally{ki(!1)}}return o.memoizedState=[u,r],u}function dr(n,r,o){return o===void 0||(Ls&1073741824)!==0&&(Ie&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=U_(),_e.lanes|=n,Oo|=n,o)}function d_(n,r,o,u){return In(o,r)?o:qa.current!==null?(n=dr(n,o,u),In(n,r)||(On=!0),n):(Ls&42)===0||(Ls&1073741824)!==0&&(Ie&261930)===0?(On=!0,n.memoizedState=o):(n=U_(),_e.lanes|=n,Oo|=n,r)}function p_(n,r,o,u,_){var v=rt.p;rt.p=v!==0&&8>v?v:8;var A=Z.T,j={};Z.T=j,Cc(n,!1,r,o);try{var Y=_(),ct=Z.S;if(ct!==null&&ct(j,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var vt=Av(Y,u);Ec(n,r,vt,qs(n))}else Ec(n,r,u,qs(n))}catch(St){Ec(n,r,{then:function(){},status:"rejected",reason:St},qs())}finally{rt.p=v,A!==null&&j.types!==null&&(A.types=j.types),Z.T=A}}function jf(){}function Co(n,r,o,u){if(n.tag!==5)throw Error(i(476));var _=Fp(n).queue;p_(n,_,r,_t,o===null?jf:function(){return Hp(n),o(u)})}function Fp(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:_t},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Hp(n){var r=Fp(n);r.next===null&&(r=n.alternate.memoizedState),Ec(n,r.next.queue,{},qs())}function Gp(){return Ci(qc)}function Kp(){return $n().memoizedState}function El(){return $n().memoizedState}function Ju(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=qs();n=So(o);var u=Pr(r,n,o);u!==null&&(ms(u,r,o),Hu(u,r,o)),r={cache:Vr()},n.payload=r;return}r=r.return}}function Rv(n,r,o){var u=qs();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},th(n)?eh(r,o):(o=mf(n,r,o,u),o!==null&&(ms(o,n,u),Lf(o,r,u)))}function $p(n,r,o){var u=qs();Ec(n,r,o,u)}function Ec(n,r,o,u){var _={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(th(n))eh(r,_);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,j=v(A,o);if(_.hasEagerState=!0,_.eagerState=j,In(j,A))return gl(n,r,_,0),pn===null&&kr(),!1}catch{}finally{}if(o=mf(n,r,_,u),o!==null)return ms(o,n,u),Lf(o,r,u),!0}return!1}function Cc(n,r,o,u){if(u={lane:2,revertLane:Fs(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},th(n)){if(r)throw Error(i(479))}else r=mf(n,o,u,2),r!==null&&ms(r,n,2)}function th(n){var r=n.alternate;return n===_e||r!==null&&r===_e}function eh(n,r){yc=$u=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function Lf(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,el(n,o)}}var xo={readContext:Ci,use:bc,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An};xo.useEffectEvent=An;var m_={readContext:Ci,use:bc,useCallback:function(n,r){return Li().memoizedState=[n,r===void 0?null:r],n},useContext:Ci,useEffect:Up,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Br(4194308,4,Bp.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Br(4194308,4,n,r)},useInsertionEffect:function(n,r){Br(4,2,n,r)},useMemo:function(n,r){var o=Li();r=r===void 0?null:r;var u=n();if(Al){ki(!0);try{n()}finally{ki(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=Li();if(o!==void 0){var _=o(r);if(Al){ki(!0);try{o(r)}finally{ki(!1)}}}else _=r;return u.memoizedState=u.baseState=_,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:_},u.queue=n,n=n.dispatch=Rv.bind(null,_e,n),[u.memoizedState,n]},useRef:function(n){var r=Li();return n={current:n},r.memoizedState=n},useState:function(n){n=Ac(n);var r=n.queue,o=$p.bind(null,_e,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Vf,useDeferredValue:function(n,r){var o=Li();return dr(o,n,r)},useTransition:function(){var n=Ac(!1);return n=p_.bind(null,_e,n.queue,!0,!1),Li().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=_e,_=Li();if(De){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),pn===null)throw Error(i(349));(Ie&127)!==0||Mp(u,r,o)}_.memoizedState=o;var v={value:o,getSnapshot:r};return _.queue=v,Up(a_.bind(null,u,v,n),[n]),u.flags|=2048,Us(9,{destroy:void 0},r_.bind(null,u,v,o,r),null),o},useId:function(){var n=Li(),r=pn.identifierPrefix;if(De){var o=ar,u=la;o=(u&~(1<<32-fn(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=xf++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Ev++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Gp,useFormState:jp,useActionState:jp,useOptimistic:function(n){var r=Li();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Cc.bind(null,_e,!0,o),o.dispatch=r,[n,r]},useMemoCache:Ip,useCacheRefresh:function(){return Li().memoizedState=Ju.bind(null,_e)},useEffectEvent:function(n){var r=Li(),o={impl:n};return r.memoizedState=o,function(){if(($e&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Pf={readContext:Ci,use:bc,useCallback:qp,useContext:Ci,useEffect:Zu,useImperativeHandle:f_,useInsertionEffect:h_,useLayoutEffect:zp,useMemo:$i,useReducer:ye,useRef:c_,useState:function(){return ye(zr)},useDebugValue:Vf,useDeferredValue:function(n,r){var o=$n();return d_(o,ln.memoizedState,n,r)},useTransition:function(){var n=ye(zr)[0],r=$n().memoizedState;return[typeof n=="boolean"?n:wc(n),r]},useSyncExternalStore:Sc,useId:Kp,useHostTransitionStatus:Gp,useFormState:Mf,useActionState:Mf,useOptimistic:function(n,r){var o=$n();return Df(o,ln,n,r)},useMemoCache:Ip,useCacheRefresh:El};Pf.useEffectEvent=u_;var nh={readContext:Ci,use:bc,useCallback:qp,useContext:Ci,useEffect:Zu,useImperativeHandle:f_,useInsertionEffect:h_,useLayoutEffect:zp,useMemo:$i,useReducer:Dp,useRef:c_,useState:function(){return Dp(zr)},useDebugValue:Vf,useDeferredValue:function(n,r){var o=$n();return ln===null?dr(o,n,r):d_(o,ln.memoizedState,n,r)},useTransition:function(){var n=Dp(zr)[0],r=$n().memoizedState;return[typeof n=="boolean"?n:wc(n),r]},useSyncExternalStore:Sc,useId:Kp,useHostTransitionStatus:Gp,useFormState:kf,useActionState:kf,useOptimistic:function(n,r){var o=$n();return ln!==null?Df(o,ln,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Ip,useCacheRefresh:El};nh.useEffectEvent=u_;function Uf(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:w({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var ih={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=qs(),_=So(u);_.payload=r,o!=null&&(_.callback=o),r=Pr(n,_,u),r!==null&&(ms(r,n,u),Hu(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=qs(),_=So(u);_.tag=1,_.payload=r,o!=null&&(_.callback=o),r=Pr(n,_,u),r!==null&&(ms(r,n,u),Hu(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=qs(),u=So(o);u.tag=2,r!=null&&(u.callback=r),r=Pr(n,u,o),r!==null&&(ms(r,n,o),Hu(r,n,o))}};function g_(n,r,o,u,_,v,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,A):r.prototype&&r.prototype.isPureReactComponent?!ec(o,u)||!ec(_,v):!0}function Wp(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&ih.enqueueReplaceState(r,r.state,null)}function Wi(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=w({},o));for(var _ in n)o[_]===void 0&&(o[_]=n[_])}return o}function Yp(n){pf(n)}function Qp(n){console.error(n)}function __(n){pf(n)}function sh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function y_(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Xp(n,r,o){return o=So(o),o.tag=3,o.payload={element:null},o.callback=function(){sh(n,r)},o}function fa(n){return n=So(n),n.tag=3,n}function zf(n,r,o,u){var _=o.type.getDerivedStateFromError;if(typeof _=="function"){var v=u.value;n.payload=function(){return _(v)},n.callback=function(){y_(r,o,u)}}var A=o.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){y_(r,o,u),typeof _!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function Zp(n,r,o,u,_){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&hc(r,o,_,!0),o=js.current,o!==null){switch(o.tag){case 31:case 13:return hr===null?td():o.alternate===null&&Dn===0&&(Dn=3),o.flags&=-257,o.flags|=65536,o.lanes=_,u===wf?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),xm(n,u,_)),!1;case 22:return o.flags|=65536,u===wf?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),xm(n,u,_)),!1}throw Error(i(435,o.tag))}return xm(n,u,_),td(),!1}if(De)return r=js.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=_,u!==wp&&(n=Error(i(422),{cause:u}),To(Ms(n,o)))):(u!==wp&&(r=Error(i(423),{cause:u}),To(Ms(r,o))),n=n.current.alternate,n.flags|=65536,_&=-_,n.lanes|=_,u=Ms(u,o),_=Xp(n.stateNode,u,_),Af(n,_),Dn!==4&&(Dn=2)),!1;var v=Error(i(520),{cause:u});if(v=Ms(v,o),yh===null?yh=[v]:yh.push(v),Dn!==4&&(Dn=2),r===null)return!0;u=Ms(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=_&-_,o.lanes|=n,n=Xp(o.stateNode,u,n),Af(o,n),!1;case 1:if(r=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Do===null||!Do.has(v))))return o.flags|=65536,_&=-_,o.lanes|=_,_=fa(_),zf(_,n,o,u),Af(o,_),!1}o=o.return}while(o!==null);return!1}var rh=Error(i(461)),On=!1;function Un(n,r,o,u){r.child=n===null?Cp(r,null,o,u):bo(r,n.child,o,u)}function se(n,r,o,u,_){o=o.render;var v=r.ref;if("ref"in u){var A={};for(var j in u)j!=="ref"&&(A[j]=u[j])}else A=u;return Tl(r),u=Nf(n,r,o,A,v,_),j=If(),n!==null&&!On?(Of(n,r,_),da(n,r,_)):(De&&j&&go(r),r.flags|=1,Un(n,r,u,_),r.child)}function ah(n,r,o,u,_){if(n===null){var v=o.type;return typeof v=="function"&&!La(v)&&v.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=v,Bf(n,r,v,u,_)):(n=gf(o.type,null,u,r,r.mode,_),n.ref=r.ref,n.return=r,r.child=n)}if(v=n.child,!Kf(n,_)){var A=v.memoizedProps;if(o=o.compare,o=o!==null?o:ec,o(A,u)&&n.ref===r.ref)return da(n,r,_)}return r.flags|=1,n=ir(v,u),n.ref=r.ref,n.return=r,r.child=n}function Bf(n,r,o,u,_){if(n!==null){var v=n.memoizedProps;if(ec(v,u)&&n.ref===r.ref)if(On=!1,r.pendingProps=u=v,Kf(n,_))(n.flags&131072)!==0&&(On=!0);else return r.lanes=n.lanes,da(n,r,_)}return Hf(n,r,o,u,_)}function Ro(n,r,o,u){var _=u.children,v=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|o:o,n!==null){for(u=r.child=n.child,_=0;u!==null;)_=_|u.lanes|u.childLanes,u=u.sibling;u=_&~v}else u=0,r.child=null;return qf(n,r,v,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&vf(r,v!==null?v.cachePool:null),v!==null?xp(r,v):xi(),s_(r);else return u=r.lanes=536870912,qf(n,r,v!==null?v.baseLanes|o:o,o,u)}else v!==null?(vf(r,v.cachePool),xp(r,v),fr(),r.memoizedState=null):(n!==null&&vf(r,null),xi(),fr());return Un(n,r,_,o),r.child}function oh(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qf(n,r,o,u,_){var v=Ap();return v=v===null?null:{parent:ni._currentValue,pool:v},r.memoizedState={baseLanes:o,cachePool:v},n!==null&&vf(r,null),xi(),s_(r),n!==null&&hc(n,r,u,!0),r.childLanes=_,null}function lh(n,r){return r=Gf({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Ri(n,r,o){return bo(r,n.child,null,o),n=lh(r,r.pendingProps),n.flags|=2,cs(r),r.memoizedState=null,n}function Nv(n,r,o){var u=r.pendingProps,_=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(De){if(u.mode==="hidden")return n=lh(r,u),r.lanes=536870912,oh(null,n);if(Ku(r),(n=Ze)?(n=ly(n,or),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Pa!==null?{id:la,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},o=Pu(n),o.return=r,r.child=o,ei=r,Ze=null)):n=null,n===null)throw yo(r);return r.lanes=536870912,null}return lh(r,u)}var v=n.memoizedState;if(v!==null){var A=v.dehydrated;if(Ku(r),_)if(r.flags&256)r.flags&=-257,r=Ri(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(On||hc(n,r,o,!1),_=(o&n.childLanes)!==0,On||_){if(u=pn,u!==null&&(A=Ea(u,o),A!==0&&A!==v.retryLane))throw v.retryLane=A,oa(n,A),ms(u,n,A),rh;td(),r=Ri(n,r,o)}else n=v.treeContext,Ze=pr(A.nextSibling),ei=r,De=!0,_o=null,or=!1,n!==null&&cc(r,n),r=lh(r,u),r.flags|=4096;return r}return n=ir(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Ff(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Hf(n,r,o,u,_){return Tl(r),o=Nf(n,r,o,u,void 0,_),u=If(),n!==null&&!On?(Of(n,r,_),da(n,r,_)):(De&&u&&go(r),r.flags|=1,Un(n,r,o,_),r.child)}function v_(n,r,o,u,_,v){return Tl(r),r.updateQueue=null,o=Wu(r,u,o,_),Rp(n),u=If(),n!==null&&!On?(Of(n,r,v),da(n,r,v)):(De&&u&&go(r),r.flags|=1,Un(n,r,o,v),r.child)}function Jp(n,r,o,u,_){if(Tl(r),r.stateNode===null){var v=ja,A=o.contextType;typeof A=="object"&&A!==null&&(v=Ci(A)),v=new o(u,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=ih,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=u,v.state=r.memoizedState,v.refs={},ua(r),A=o.contextType,v.context=typeof A=="object"&&A!==null?Ci(A):ja,v.state=r.memoizedState,A=o.getDerivedStateFromProps,typeof A=="function"&&(Uf(r,o,A,u),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&ih.enqueueReplaceState(v,v.state,null),_c(r,u,v,_),Sl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){v=r.stateNode;var j=r.memoizedProps,Y=Wi(o,j);v.props=Y;var ct=v.context,vt=o.contextType;A=ja,typeof vt=="object"&&vt!==null&&(A=Ci(vt));var St=o.getDerivedStateFromProps;vt=typeof St=="function"||typeof v.getSnapshotBeforeUpdate=="function",j=r.pendingProps!==j,vt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(j||ct!==A)&&Wp(r,v,u,A),ur=!1;var ut=r.memoizedState;v.state=ut,_c(r,u,v,_),Sl(),ct=r.memoizedState,j||ut!==ct||ur?(typeof St=="function"&&(Uf(r,o,St,u),ct=r.memoizedState),(Y=ur||g_(r,o,Y,u,ut,ct,A))?(vt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=ct),v.props=u,v.state=ct,v.context=A,u=Y):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{v=r.stateNode,Sf(n,r),A=r.memoizedProps,vt=Wi(o,A),v.props=vt,St=r.pendingProps,ut=v.context,ct=o.contextType,Y=ja,typeof ct=="object"&&ct!==null&&(Y=Ci(ct)),j=o.getDerivedStateFromProps,(ct=typeof j=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==St||ut!==Y)&&Wp(r,v,u,Y),ur=!1,ut=r.memoizedState,v.state=ut,_c(r,u,v,_),Sl();var mt=r.memoizedState;A!==St||ut!==mt||ur||n!==null&&n.dependencies!==null&&yf(n.dependencies)?(typeof j=="function"&&(Uf(r,o,j,u),mt=r.memoizedState),(vt=ur||g_(r,o,vt,u,ut,mt,Y)||n!==null&&n.dependencies!==null&&yf(n.dependencies))?(ct||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,mt,Y),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,mt,Y)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=mt),v.props=u,v.state=mt,v.context=Y,u=vt):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=1024),u=!1)}return v=u,Ff(n,r),u=(r.flags&128)!==0,v||u?(v=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,n!==null&&u?(r.child=bo(r,n.child,null,_),r.child=bo(r,null,o,_)):Un(n,r,o,_),r.memoizedState=v.state,n=r.child):n=da(n,r,_),n}function T_(n,r,o,u){return L(),r.flags|=256,Un(n,r,o,u),r.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(n){return{baseLanes:n,cachePool:t_()}}function qr(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Bs),n}function Pi(n,r,o){var u=r.pendingProps,_=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(Kn.current&2)!==0),A&&(_=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,n===null){if(De){if(_?Ao(r):fr(),(n=Ze)?(n=ly(n,or),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Pa!==null?{id:la,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},o=Pu(n),o.return=r,r.child=o,ei=r,Ze=null)):n=null,n===null)throw yo(r);return jc(n)?r.lanes=32:r.lanes=536870912,null}var j=u.children;return u=u.fallback,_?(fr(),_=r.mode,j=Gf({mode:"hidden",children:j},_),u=_l(u,_,o,null),j.return=r,u.return=r,j.sibling=u,r.child=j,u=r.child,u.memoizedState=em(o),u.childLanes=qr(n,A,o),r.memoizedState=tm,oh(null,u)):(Ao(r),ch(r,j))}var Y=n.memoizedState;if(Y!==null&&(j=Y.dehydrated,j!==null)){if(v)r.flags&256?(Ao(r),r.flags&=-257,r=uh(n,r,o)):r.memoizedState!==null?(fr(),r.child=n.child,r.flags|=128,r=null):(fr(),j=u.fallback,_=r.mode,u=Gf({mode:"visible",children:u.children},_),j=_l(j,_,o,null),j.flags|=2,u.return=r,j.return=r,u.sibling=j,r.child=u,bo(r,n.child,null,o),u=r.child,u.memoizedState=em(o),u.childLanes=qr(n,A,o),r.memoizedState=tm,r=oh(null,u));else if(Ao(r),jc(j)){if(A=j.nextSibling&&j.nextSibling.dataset,A)var ct=A.dgst;A=ct,u=Error(i(419)),u.stack="",u.digest=A,To({value:u,source:null,stack:null}),r=uh(n,r,o)}else if(On||hc(n,r,o,!1),A=(o&n.childLanes)!==0,On||A){if(A=pn,A!==null&&(u=Ea(A,o),u!==0&&u!==Y.retryLane))throw Y.retryLane=u,oa(n,u),ms(A,n,u),rh;cd(j)||td(),r=uh(n,r,o)}else cd(j)?(r.flags|=192,r.child=n.child,r=null):(n=Y.treeContext,Ze=pr(j.nextSibling),ei=r,De=!0,_o=null,or=!1,n!==null&&cc(r,n),r=ch(r,u.children),r.flags|=4096);return r}return _?(fr(),j=u.fallback,_=r.mode,Y=n.child,ct=Y.sibling,u=ir(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,ct!==null?j=ir(ct,j):(j=_l(j,_,o,null),j.flags|=2),j.return=r,u.return=r,u.sibling=j,r.child=u,oh(null,u),u=r.child,j=n.child.memoizedState,j===null?j=em(o):(_=j.cachePool,_!==null?(Y=ni._currentValue,_=_.parent!==Y?{parent:Y,pool:Y}:_):_=t_(),j={baseLanes:j.baseLanes|o,cachePool:_}),u.memoizedState=j,u.childLanes=qr(n,A,o),r.memoizedState=tm,oh(n.child,u)):(Ao(r),o=n.child,n=o.sibling,o=ir(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(A=r.deletions,A===null?(r.deletions=[n],r.flags|=16):A.push(n)),r.child=o,r.memoizedState=null,o)}function ch(n,r){return r=Gf({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Gf(n,r){return n=Ei(22,n,null,r),n.lanes=0,n}function uh(n,r,o){return bo(r,n.child,null,o),n=ch(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function w_(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Ba(n.return,r,o)}function nm(n,r,o,u,_,v){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:_,treeForkCount:v}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=o,A.tailMode=_,A.treeForkCount=v)}function xc(n,r,o){var u=r.pendingProps,_=u.revealOrder,v=u.tail;u=u.children;var A=Kn.current,j=(A&2)!==0;if(j?(A=A&1|2,r.flags|=128):A&=1,wt(Kn,A),Un(n,r,u,o),u=De?ti:0,!j&&n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&w_(n,o,r);else if(n.tag===19)w_(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(_){case"forwards":for(o=r.child,_=null;o!==null;)n=o.alternate,n!==null&&Cf(n)===null&&(_=o),o=o.sibling;o=_,o===null?(_=r.child,r.child=null):(_=o.sibling,o.sibling=null),nm(r,!1,_,o,v,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,_=r.child,r.child=null;_!==null;){if(n=_.alternate,n!==null&&Cf(n)===null){r.child=_;break}n=_.sibling,_.sibling=o,o=_,_=n}nm(r,!0,o,null,v,u);break;case"together":nm(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function da(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Oo|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(hc(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=ir(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=ir(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Kf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&yf(n)))}function Iv(n,r,o){switch(r.tag){case 3:kt(r,r.stateNode.containerInfo),wo(r,ni,n.memoizedState.cache),L();break;case 27:case 5:an(r);break;case 4:kt(r,r.stateNode.containerInfo);break;case 10:wo(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ku(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ao(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Pi(n,r,o):(Ao(r),n=da(n,r,o),n!==null?n.sibling:null);Ao(r);break;case 19:var _=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(hc(n,r,o,!1),u=(o&r.childLanes)!==0),_){if(u)return xc(n,r,o);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),wt(Kn,Kn.current),u)break;return null;case 22:return r.lanes=0,Ro(n,r,o,r.pendingProps);case 24:wo(r,ni,n.memoizedState.cache)}return da(n,r,o)}function b_(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)On=!0;else{if(!Kf(n,o)&&(r.flags&128)===0)return On=!1,Iv(n,r,o);On=(n.flags&131072)!==0}else On=!1,De&&(r.flags&1048576)!==0&&_f(r,ti,r.index);switch(r.lanes=0,r.tag){case 16:t:{var u=r.pendingProps;if(n=jr(r.elementType),r.type=n,typeof n=="function")La(n)?(u=Wi(n,u),r.tag=1,r=Jp(null,r,n,u,o)):(r.tag=0,r=Hf(null,r,n,u,o));else{if(n!=null){var _=n.$$typeof;if(_===nt){r.tag=11,r=se(null,r,n,u,o);break t}else if(_===R){r.tag=14,r=ah(null,r,n,u,o);break t}}throw r=At(n)||n,Error(i(306,r,""))}}return r;case 0:return Hf(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,_=Wi(u,r.pendingProps),Jp(n,r,u,_,o);case 3:t:{if(kt(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var v=r.memoizedState;_=v.element,Sf(n,r),_c(r,u,null,o);var A=r.memoizedState;if(u=A.cache,wo(r,ni,u),u!==v.cache&&bp(r,[ni],o,!0),Sl(),u=A.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=T_(n,r,u,o);break t}else if(u!==_){_=Ms(Error(i(424)),r),To(_),r=T_(n,r,u,o);break t}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ze=pr(n.firstChild),ei=r,De=!0,_o=null,or=!0,o=Cp(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(L(),u===_){r=da(n,r,o);break t}Un(n,r,u,o)}r=r.child}return r;case 26:return Ff(n,r),n===null?(o=py(r.type,null,r.pendingProps,null))?r.memoizedState=o:De||(o=r.type,n=r.pendingProps,u=Ih(jt.current).createElement(o),u[Ut]=r,u[zt]=n,Ni(u,o,n),Jn(u),r.stateNode=u):r.memoizedState=py(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return an(r),n===null&&De&&(u=r.stateNode=hy(r.type,r.pendingProps,jt.current),ei=r,or=!0,_=Ze,le(r.type)?(Um=_,Ze=pr(u.firstChild)):Ze=_),Un(n,r,r.pendingProps.children,o),Ff(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&De&&((_=u=Ze)&&(u=Kv(u,r.type,r.pendingProps,or),u!==null?(r.stateNode=u,ei=r,Ze=pr(u.firstChild),or=!1,_=!0):_=!1),_||yo(r)),an(r),_=r.type,v=r.pendingProps,A=n!==null?n.memoizedProps:null,u=v.children,jo(_,v)?u=null:A!==null&&jo(_,A)&&(r.flags|=32),r.memoizedState!==null&&(_=Nf(n,r,Cv,null,null,o),qc._currentValue=_),Ff(n,r),Un(n,r,u,o),r.child;case 6:return n===null&&De&&((n=o=Ze)&&(o=Je(o,r.pendingProps,or),o!==null?(r.stateNode=o,ei=r,Ze=null,n=!0):n=!1),n||yo(r)),null;case 13:return Pi(n,r,o);case 4:return kt(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=bo(r,null,u,o):Un(n,r,u,o),r.child;case 11:return se(n,r,r.type,r.pendingProps,o);case 7:return Un(n,r,r.pendingProps,o),r.child;case 8:return Un(n,r,r.pendingProps.children,o),r.child;case 12:return Un(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,wo(r,r.type,u.value),Un(n,r,u.children,o),r.child;case 9:return _=r.type._context,u=r.pendingProps.children,Tl(r),_=Ci(_),u=u(_),r.flags|=1,Un(n,r,u,o),r.child;case 14:return ah(n,r,r.type,r.pendingProps,o);case 15:return Bf(n,r,r.type,r.pendingProps,o);case 19:return xc(n,r,o);case 31:return Nv(n,r,o);case 22:return Ro(n,r,o,r.pendingProps);case 24:return Tl(r),u=Ci(ni),n===null?(_=Ap(),_===null&&(_=pn,v=Vr(),_.pooledCache=v,v.refCount++,v!==null&&(_.pooledCacheLanes|=o),_=v),r.memoizedState={parent:u,cache:_},ua(r),wo(r,ni,_)):((n.lanes&o)!==0&&(Sf(n,r),_c(r,null,null,o),Sl()),_=n.memoizedState,v=r.memoizedState,_.parent!==u?(_={parent:u,cache:u},r.memoizedState=_,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=_),wo(r,ni,u)):(u=v.cache,wo(r,ni,u),u!==_.cache&&bp(r,[ni],o,!0))),Un(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ha(n){n.flags|=4}function im(n,r,o,u,_){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(_&335544128)===_)if(n.stateNode.complete)n.flags|=8192;else if(wh())n.flags|=8192;else throw ca=wf,Tf}else n.flags&=-16777217}function sm(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!vy(r))if(wh())n.flags|=8192;else throw ca=wf,Tf}function hh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?uo():536870912,n.lanes|=r,Oc|=r)}function fh(n,r){if(!De)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function dn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var _=n.child;_!==null;)o|=_.lanes|_.childLanes,u|=_.subtreeFlags&65011712,u|=_.flags&65011712,_.return=n,_=_.sibling;else for(_=n.child;_!==null;)o|=_.lanes|_.childLanes,u|=_.subtreeFlags,u|=_.flags,_.return=n,_=_.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function S_(n,r,o){var u=r.pendingProps;switch(yl(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(r),null;case 1:return dn(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),za(ni),Zt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(vl(r)?Ha(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,vo())),dn(r),null;case 26:var _=r.type,v=r.memoizedState;return n===null?(Ha(r),v!==null?(dn(r),sm(r,v)):(dn(r),im(r,_,null,u,o))):v?v!==n.memoizedState?(Ha(r),dn(r),sm(r,v)):(dn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ha(r),dn(r),im(r,_,n,u,o)),null;case 27:if(Ve(r),o=jt.current,_=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Ha(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return dn(r),null}n=Tt.current,vl(r)?zu(r):(n=hy(_,u,o),r.stateNode=n,Ha(r))}return dn(r),null;case 5:if(Ve(r),_=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Ha(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return dn(r),null}if(v=Tt.current,vl(r))zu(r);else{var A=Ih(jt.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?A.createElement(_,{is:u.is}):A.createElement(_)}}v[Ut]=r,v[zt]=u;t:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break t;for(;A.sibling===null;){if(A.return===null||A.return===r)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=v;t:switch(Ni(v,_,u),_){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ha(r)}}return dn(r),im(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Ha(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=jt.current,vl(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,_=ei,_!==null)switch(_.tag){case 27:case 5:u=_.memoizedProps}n[Ut]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||sy(n.nodeValue,o)),n||yo(r,!0)}else n=Ih(n).createTextNode(u),n[Ut]=r,r.stateNode=n}return dn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(u=vl(r),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ut]=r}else L(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;dn(r),n=!1}else o=vo(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(cs(r),r):(cs(r),null);if((r.flags&128)!==0)throw Error(i(558))}return dn(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_=vl(r),u!==null&&u.dehydrated!==null){if(n===null){if(!_)throw Error(i(318));if(_=r.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Ut]=r}else L(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;dn(r),_=!1}else _=vo(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=_),_=!0;if(!_)return r.flags&256?(cs(r),r):(cs(r),null)}return cs(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=r.child,_=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(_=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==_&&(u.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),hh(r,r.updateQueue),dn(r),null);case 4:return Zt(),n===null&&Dm(r.stateNode.containerInfo),dn(r),null;case 10:return za(r.type),dn(r),null;case 19:if(at(Kn),u=r.memoizedState,u===null)return dn(r),null;if(_=(r.flags&128)!==0,v=u.rendering,v===null)if(_)fh(u,!1);else{if(Dn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(v=Cf(n),v!==null){for(r.flags|=128,fh(u,!1),n=v.updateQueue,r.updateQueue=n,hh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)Qg(o,n),o=o.sibling;return wt(Kn,Kn.current&1|2),De&&ks(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&tn()>Rl&&(r.flags|=128,_=!0,fh(u,!1),r.lanes=4194304)}else{if(!_)if(n=Cf(v),n!==null){if(r.flags|=128,_=!0,n=n.updateQueue,r.updateQueue=n,hh(r,n),fh(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!De)return dn(r),null}else 2*tn()-u.renderingStartTime>Rl&&o!==536870912&&(r.flags|=128,_=!0,fh(u,!1),r.lanes=4194304);u.isBackwards?(v.sibling=r.child,r.child=v):(n=u.last,n!==null?n.sibling=v:r.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=tn(),n.sibling=null,o=Kn.current,wt(Kn,_?o&1|2:o&1),De&&ks(r,u.treeForkCount),n):(dn(r),null);case 22:case 23:return cs(r),Gu(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(dn(r),r.subtreeFlags&6&&(r.flags|=8192)):dn(r),o=r.updateQueue,o!==null&&hh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&at(bl),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),za(ni),dn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function dh(n,r){switch(yl(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return za(ni),Zt(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ve(r),null;case 31:if(r.memoizedState!==null){if(cs(r),r.alternate===null)throw Error(i(340));L()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(cs(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));L()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return at(Kn),null;case 4:return Zt(),null;case 10:return za(r.type),null;case 22:case 23:return cs(r),Gu(),n!==null&&at(bl),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return za(ni),null;case 25:return null;default:return null}}function $f(n,r){switch(yl(r),r.tag){case 3:za(ni),Zt();break;case 26:case 27:case 5:Ve(r);break;case 4:Zt();break;case 31:r.memoizedState!==null&&cs(r);break;case 13:cs(r);break;case 19:at(Kn);break;case 10:za(r.type);break;case 22:case 23:cs(r),Gu(),n!==null&&at(bl);break;case 24:za(ni)}}function Rc(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var _=u.next;o=_;do{if((o.tag&n)===n){u=void 0;var v=o.create,A=o.inst;u=v(),A.destroy=u}o=o.next}while(o!==_)}}catch(j){rn(r,r.return,j)}}function Ga(n,r,o){try{var u=r.updateQueue,_=u!==null?u.lastEffect:null;if(_!==null){var v=_.next;u=v;do{if((u.tag&n)===n){var A=u.inst,j=A.destroy;if(j!==void 0){A.destroy=void 0,_=r;var Y=o,ct=j;try{ct()}catch(vt){rn(_,Y,vt)}}}u=u.next}while(u!==v)}}catch(vt){rn(r,r.return,vt)}}function ph(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{Ef(r,o)}catch(u){rn(n,n.return,u)}}}function rm(n,r,o){o.props=Wi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){rn(n,r,u)}}function hs(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(_){rn(n,r,_)}}function Ui(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(_){rn(n,r,_)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(_){rn(n,r,_)}else o.current=null}function A_(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(_){rn(n,n.return,_)}}function Wf(n,r,o){try{var u=n.stateNode;Fv(u,n.type,o,r),u[zt]=r}catch(_){rn(n,n.return,_)}}function E_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&le(n.type)||n.tag===4}function am(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||E_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&le(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function om(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Rr));else if(u!==4&&(u===27&&le(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(om(n,r,o),n=n.sibling;n!==null;)om(n,r,o),n=n.sibling}function Yf(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&le(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Yf(n,r,o),n=n.sibling;n!==null;)Yf(n,r,o),n=n.sibling}function C_(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,_=r.attributes;_.length;)r.removeAttributeNode(_[0]);Ni(r,u,o),r[Ut]=n,r[zt]=o}catch(v){rn(n,n.return,v)}}var Ka=!1,ii=!1,lm=!1,x_=typeof WeakSet=="function"?WeakSet:Set,gi=null;function Ov(n,r){if(n=n.containerInfo,Nh=gd,n=Kg(n),vp(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var _=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break t}var A=0,j=-1,Y=-1,ct=0,vt=0,St=n,ut=null;e:for(;;){for(var mt;St!==o||_!==0&&St.nodeType!==3||(j=A+_),St!==v||u!==0&&St.nodeType!==3||(Y=A+u),St.nodeType===3&&(A+=St.nodeValue.length),(mt=St.firstChild)!==null;)ut=St,St=mt;for(;;){if(St===n)break e;if(ut===o&&++ct===_&&(j=A),ut===v&&++vt===u&&(Y=A),(mt=St.nextSibling)!==null)break;St=ut,ut=St.parentNode}St=mt}o=j===-1||Y===-1?null:{start:j,end:Y}}else o=null}o=o||{start:0,end:0}}else o=null;for(jm={focusedElem:n,selectionRange:o},gd=!1,gi=r;gi!==null;)if(r=gi,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,gi=n;else for(;gi!==null;){switch(r=gi,v=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)_=n[o],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,o=r,_=v.memoizedProps,v=v.memoizedState,u=o.stateNode;try{var Qt=Wi(o.type,_);n=u.getSnapshotBeforeUpdate(Qt,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(re){rn(o,o.return,re)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)ld(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ld(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,gi=n;break}gi=r.return}}function cm(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Wa(n,o),u&4&&Rc(5,o);break;case 1:if(Wa(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(A){rn(o,o.return,A)}else{var _=Wi(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(_,r,n.__reactInternalSnapshotBeforeUpdate)}catch(A){rn(o,o.return,A)}}u&64&&ph(o),u&512&&hs(o,o.return);break;case 3:if(Wa(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Ef(n,r)}catch(A){rn(o,o.return,A)}}break;case 27:r===null&&u&4&&C_(o);case 26:case 5:Wa(n,o),r===null&&u&4&&A_(o),u&512&&hs(o,o.return);break;case 12:Wa(n,o);break;case 31:Wa(n,o),u&4&&hm(n,o);break;case 13:Wa(n,o),u&4&&N_(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=id.bind(null,o),$v(n,o))));break;case 22:if(u=o.memoizedState!==null||Ka,!u){r=r!==null&&r.memoizedState!==null||ii,_=Ka;var v=ii;Ka=u,(ii=r)&&!v?pa(n,o,(o.subtreeFlags&8772)!==0):Wa(n,o),Ka=_,ii=v}break;case 30:break;default:Wa(n,o)}}function um(n){var r=n.alternate;r!==null&&(n.alternate=null,um(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Cs(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var vn=null,fs=!1;function $a(n,r,o){for(o=o.child;o!==null;)R_(n,r,o),o=o.sibling}function R_(n,r,o){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Xn,o)}catch{}switch(o.tag){case 26:ii||Ui(o,r),$a(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ii||Ui(o,r);var u=vn,_=fs;le(o.type)&&(vn=o.stateNode,fs=!1),$a(n,r,o),Dh(o.stateNode),vn=u,fs=_;break;case 5:ii||Ui(o,r);case 6:if(u=vn,_=fs,vn=null,$a(n,r,o),vn=u,fs=_,vn!==null)if(fs)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(o.stateNode)}catch(v){rn(o,r,v)}else try{vn.removeChild(o.stateNode)}catch(v){rn(o,r,v)}break;case 18:vn!==null&&(fs?(n=vn,Pm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Hc(n)):Pm(vn,o.stateNode));break;case 4:u=vn,_=fs,vn=o.stateNode.containerInfo,fs=!0,$a(n,r,o),vn=u,fs=_;break;case 0:case 11:case 14:case 15:Ga(2,o,r),ii||Ga(4,o,r),$a(n,r,o);break;case 1:ii||(Ui(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&rm(o,r,u)),$a(n,r,o);break;case 21:$a(n,r,o);break;case 22:ii=(u=ii)||o.memoizedState!==null,$a(n,r,o),ii=u;break;default:$a(n,r,o)}}function hm(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Hc(n)}catch(o){rn(r,r.return,o)}}}function N_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Hc(n)}catch(o){rn(r,r.return,o)}}function Dv(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new x_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new x_),r;default:throw Error(i(435,n.tag))}}function Qf(n,r){var o=Dv(n);r.forEach(function(u){if(!o.has(u)){o.add(u);var _=Uv.bind(null,n,u);u.then(_,_)}})}function ds(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var _=o[u],v=n,A=r,j=A;t:for(;j!==null;){switch(j.tag){case 27:if(le(j.type)){vn=j.stateNode,fs=!1;break t}break;case 5:vn=j.stateNode,fs=!1;break t;case 3:case 4:vn=j.stateNode.containerInfo,fs=!0;break t}j=j.return}if(vn===null)throw Error(i(160));R_(v,A,_),vn=null,fs=!1,v=_.alternate,v!==null&&(v.return=null),_.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)I_(r,n),r=r.sibling}var Fr=null;function I_(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ds(r,n),Tn(n),u&4&&(Ga(3,n,n.return),Rc(3,n),Ga(5,n,n.return));break;case 1:ds(r,n),Tn(n),u&512&&(ii||o===null||Ui(o,o.return)),u&64&&Ka&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var _=Fr;if(ds(r,n),Tn(n),u&512&&(ii||o===null||Ui(o,o.return)),u&4){var v=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,_=_.ownerDocument||_;e:switch(u){case"title":v=_.getElementsByTagName("title")[0],(!v||v[Zn]||v[Ut]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=_.createElement(u),_.head.insertBefore(v,_.querySelector("head > title"))),Ni(v,u,o),v[Ut]=n,Jn(v),u=v;break t;case"link":var A=_y("link","href",_).get(u+(o.href||""));if(A){for(var j=0;j<A.length;j++)if(v=A[j],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){A.splice(j,1);break e}}v=_.createElement(u),Ni(v,u,o),_.head.appendChild(v);break;case"meta":if(A=_y("meta","content",_).get(u+(o.content||""))){for(j=0;j<A.length;j++)if(v=A[j],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){A.splice(j,1);break e}}v=_.createElement(u),Ni(v,u,o),_.head.appendChild(v);break;default:throw Error(i(468,u))}v[Ut]=n,Jn(v),u=v}n.stateNode=u}else yy(_,n.type,n.stateNode);else n.stateNode=gy(_,u,n.memoizedProps);else v!==u?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,u===null?yy(_,n.type,n.stateNode):gy(_,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Wf(n,n.memoizedProps,o.memoizedProps)}break;case 27:ds(r,n),Tn(n),u&512&&(ii||o===null||Ui(o,o.return)),o!==null&&u&4&&Wf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ds(r,n),Tn(n),u&512&&(ii||o===null||Ui(o,o.return)),n.flags&32){_=n.stateNode;try{li(_,"")}catch(Qt){rn(n,n.return,Qt)}}u&4&&n.stateNode!=null&&(_=n.memoizedProps,Wf(n,_,o!==null?o.memoizedProps:_)),u&1024&&(lm=!0);break;case 6:if(ds(r,n),Tn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Qt){rn(n,n.return,Qt)}}break;case 3:if(Mh=null,_=Fr,Fr=ud(r.containerInfo),ds(r,n),Fr=_,Tn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Hc(r.containerInfo)}catch(Qt){rn(n,n.return,Qt)}lm&&(lm=!1,O_(n));break;case 4:u=Fr,Fr=ud(n.stateNode.containerInfo),ds(r,n),Tn(n),Fr=u;break;case 12:ds(r,n),Tn(n);break;case 31:ds(r,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Qf(n,u)));break;case 13:ds(r,n),Tn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(vh=tn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Qf(n,u)));break;case 22:_=n.memoizedState!==null;var Y=o!==null&&o.memoizedState!==null,ct=Ka,vt=ii;if(Ka=ct||_,ii=vt||Y,ds(r,n),ii=vt,Ka=ct,Tn(n),u&8192)t:for(r=n.stateNode,r._visibility=_?r._visibility&-2:r._visibility|1,_&&(o===null||Y||Ka||ii||Cl(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){Y=o=r;try{if(v=Y.stateNode,_)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{j=Y.stateNode;var St=Y.memoizedProps.style,ut=St!=null&&St.hasOwnProperty("display")?St.display:null;j.style.display=ut==null||typeof ut=="boolean"?"":(""+ut).trim()}}catch(Qt){rn(Y,Y.return,Qt)}}}else if(r.tag===6){if(o===null){Y=r;try{Y.stateNode.nodeValue=_?"":Y.memoizedProps}catch(Qt){rn(Y,Y.return,Qt)}}}else if(r.tag===18){if(o===null){Y=r;try{var mt=Y.stateNode;_?Gs(mt,!0):Gs(Y.stateNode,!1)}catch(Qt){rn(Y,Y.return,Qt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Qf(n,o))));break;case 19:ds(r,n),Tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Qf(n,u)));break;case 30:break;case 21:break;default:ds(r,n),Tn(n)}}function Tn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(E_(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var _=o.stateNode,v=am(n);Yf(n,v,_);break;case 5:var A=o.stateNode;o.flags&32&&(li(A,""),o.flags&=-33);var j=am(n);Yf(n,j,A);break;case 3:case 4:var Y=o.stateNode.containerInfo,ct=am(n);om(n,ct,Y);break;default:throw Error(i(161))}}catch(vt){rn(n,n.return,vt)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function O_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;O_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Wa(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)cm(n,r.alternate,r),r=r.sibling}function Cl(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Ga(4,r,r.return),Cl(r);break;case 1:Ui(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&rm(r,r.return,o),Cl(r);break;case 27:Dh(r.stateNode);case 26:case 5:Ui(r,r.return),Cl(r);break;case 22:r.memoizedState===null&&Cl(r);break;case 30:Cl(r);break;default:Cl(r)}n=n.sibling}}function pa(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,_=n,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:pa(_,v,o),Rc(4,v);break;case 1:if(pa(_,v,o),u=v,_=u.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ct){rn(u,u.return,ct)}if(u=v,_=u.updateQueue,_!==null){var j=u.stateNode;try{var Y=_.shared.hiddenCallbacks;if(Y!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Y.length;_++)Ur(Y[_],j)}catch(ct){rn(u,u.return,ct)}}o&&A&64&&ph(v),hs(v,v.return);break;case 27:C_(v);case 26:case 5:pa(_,v,o),o&&u===null&&A&4&&A_(v),hs(v,v.return);break;case 12:pa(_,v,o);break;case 31:pa(_,v,o),o&&A&4&&hm(_,v);break;case 13:pa(_,v,o),o&&A&4&&N_(_,v);break;case 22:v.memoizedState===null&&pa(_,v,o),hs(v,v.return);break;case 30:break;default:pa(_,v,o)}r=r.sibling}}function fm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Bu(o))}function dm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Bu(n))}function Hr(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)D_(n,r,o,u),r=r.sibling}function D_(n,r,o,u){var _=r.flags;switch(r.tag){case 0:case 11:case 15:Hr(n,r,o,u),_&2048&&Rc(9,r);break;case 1:Hr(n,r,o,u);break;case 3:Hr(n,r,o,u),_&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Bu(n)));break;case 12:if(_&2048){Hr(n,r,o,u),n=r.stateNode;try{var v=r.memoizedProps,A=v.id,j=v.onPostCommit;typeof j=="function"&&j(A,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Y){rn(r,r.return,Y)}}else Hr(n,r,o,u);break;case 31:Hr(n,r,o,u);break;case 13:Hr(n,r,o,u);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?Hr(n,r,o,u):mh(n,r):v._visibility&2?Hr(n,r,o,u):(v._visibility|=2,No(n,r,o,u,(r.subtreeFlags&10256)!==0||!1)),_&2048&&fm(A,r);break;case 24:Hr(n,r,o,u),_&2048&&dm(r.alternate,r);break;default:Hr(n,r,o,u)}}function No(n,r,o,u,_){for(_=_&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=n,A=r,j=o,Y=u,ct=A.flags;switch(A.tag){case 0:case 11:case 15:No(v,A,j,Y,_),Rc(8,A);break;case 23:break;case 22:var vt=A.stateNode;A.memoizedState!==null?vt._visibility&2?No(v,A,j,Y,_):mh(v,A):(vt._visibility|=2,No(v,A,j,Y,_)),_&&ct&2048&&fm(A.alternate,A);break;case 24:No(v,A,j,Y,_),_&&ct&2048&&dm(A.alternate,A);break;default:No(v,A,j,Y,_)}r=r.sibling}}function mh(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,_=u.flags;switch(u.tag){case 22:mh(o,u),_&2048&&fm(u.alternate,u);break;case 24:mh(o,u),_&2048&&dm(u.alternate,u);break;default:mh(o,u)}r=r.sibling}}var gh=8192;function Nc(n,r,o){if(n.subtreeFlags&gh)for(n=n.child;n!==null;)M_(n,r,o),n=n.sibling}function M_(n,r,o){switch(n.tag){case 26:Nc(n,r,o),n.flags&gh&&n.memoizedState!==null&&Bc(o,Fr,n.memoizedState,n.memoizedProps);break;case 5:Nc(n,r,o);break;case 3:case 4:var u=Fr;Fr=ud(n.stateNode.containerInfo),Nc(n,r,o),Fr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=gh,gh=16777216,Nc(n,r,o),gh=u):Nc(n,r,o));break;default:Nc(n,r,o)}}function k_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function _h(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];gi=u,j_(u,n)}k_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)V_(n),n=n.sibling}function V_(n){switch(n.tag){case 0:case 11:case 15:_h(n),n.flags&2048&&Ga(9,n,n.return);break;case 3:_h(n);break;case 12:_h(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Xf(n)):_h(n);break;default:_h(n)}}function Xf(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];gi=u,j_(u,n)}k_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Ga(8,r,r.return),Xf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Xf(r));break;default:Xf(r)}n=n.sibling}}function j_(n,r){for(;gi!==null;){var o=gi;switch(o.tag){case 0:case 11:case 15:Ga(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Bu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,gi=u;else t:for(o=n;gi!==null;){u=gi;var _=u.sibling,v=u.return;if(um(u),u===o){gi=null;break t}if(_!==null){_.return=v,gi=_;break t}gi=v}}}var Mv={getCacheForType:function(n){var r=Ci(ni),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Ci(ni).controller.signal}},kv=typeof WeakMap=="function"?WeakMap:Map,$e=0,pn=null,Re=null,Ie=0,sn=0,zs=null,Io=!1,Ic=!1,pm=!1,Gr=0,Dn=0,Oo=0,xl=0,mm=0,Bs=0,Oc=0,yh=null,ps=null,gm=!1,vh=0,L_=0,Rl=1/0,Zf=null,Do=null,ui=0,Mo=null,Dc=null,Ya=0,_m=0,ym=null,P_=null,Th=0,vm=null;function qs(){return($e&2)!==0&&Ie!==0?Ie&-Ie:Z.T!==null?Fs():ho()}function U_(){if(Bs===0)if((Ie&536870912)===0||De){var n=Jr;Jr<<=1,(Jr&3932160)===0&&(Jr=262144),Bs=n}else Bs=536870912;return n=js.current,n!==null&&(n.flags|=32),Bs}function ms(n,r,o){(n===pn&&(sn===2||sn===9)||n.cancelPendingCommit!==null)&&(Mc(n,0),Qa(n,Ie,Bs,!1)),Aa(n,o),(($e&2)===0||n!==pn)&&(n===pn&&(($e&2)===0&&(xl|=o),Dn===4&&Qa(n,Ie,Bs,!1)),ma(n))}function z_(n,r,o){if(($e&6)!==0)throw Error(i(327));var u=!o&&(r&127)===0&&(r&n.expiredLanes)===0||Es(n,r),_=u?jv(n,r):wm(n,r,!0),v=u;do{if(_===0){Ic&&!u&&Qa(n,r,0,!1);break}else{if(o=n.current.alternate,v&&!q_(o)){_=wm(n,r,!1),v=!1;continue}if(_===2){if(v=r,n.errorRecoveryDisabledLanes&v)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;t:{var j=n;_=yh;var Y=j.current.memoizedState.isDehydrated;if(Y&&(Mc(j,A).flags|=256),A=wm(j,A,!1),A!==2){if(pm&&!Y){j.errorRecoveryDisabledLanes|=v,xl|=v,_=4;break t}v=ps,ps=_,v!==null&&(ps===null?ps=v:ps.push.apply(ps,v))}_=A}if(v=!1,_!==2)continue}}if(_===1){Mc(n,0),Qa(n,r,0,!0);break}t:{switch(u=n,v=_,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Qa(u,r,Bs,!Io);break t;case 2:ps=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(_=vh+300-tn(),10<_)){if(Qa(u,r,Bs,!Io),Js(u,0,!0)!==0)break t;Ya=r,u.timeoutHandle=ry(B_.bind(null,u,o,ps,Zf,gm,r,Bs,xl,Oc,Io,v,"Throttled",-0,0),_);break t}B_(u,o,ps,Zf,gm,r,Bs,xl,Oc,Io,v,null,-0,0)}}break}while(!0);ma(n)}function B_(n,r,o,u,_,v,A,j,Y,ct,vt,St,ut,mt){if(n.timeoutHandle=-1,St=r.subtreeFlags,St&8192||(St&16785408)===16785408){St={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rr},M_(r,v,St);var Qt=(v&62914560)===v?vh-tn():(v&4194048)===v?L_-tn():0;if(Qt=n1(St,Qt),Qt!==null){Ya=v,n.cancelPendingCommit=Qt(W_.bind(null,n,r,v,o,u,_,A,j,Y,vt,St,null,ut,mt)),Qa(n,v,A,!ct);return}}W_(n,r,v,o,u,_,A,j,Y)}function q_(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var _=o[u],v=_.getSnapshot;_=_.value;try{if(!In(v(),_))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qa(n,r,o,u){r&=~mm,r&=~xl,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var _=r;0<_;){var v=31-fn(_),A=1<<v;u[v]=-1,_&=~A}o!==0&&Sr(n,o,r)}function Jf(){return($e&6)===0?(Eh(0),!1):!0}function Tm(){if(Re!==null){if(sn===0)var n=Re.return;else n=Re,Ua=ge=null,Np(n),mc=null,Vs=0,n=Re;for(;n!==null;)$f(n.alternate,n),n=n.return;Re=null}}function Mc(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Gv(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ya=0,Tm(),pn=n,Re=o=ir(n.current,null),Ie=r,sn=0,zs=null,Io=!1,Ic=Es(n,r),pm=!1,Oc=Bs=mm=xl=Oo=Dn=0,ps=yh=null,gm=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var _=31-fn(u),v=1<<_;r|=n[_],u&=~v}return Gr=r,kr(),o}function F_(n,r){_e=null,Z.H=xo,r===pc||r===Fu?(r=n_(),sn=3):r===Tf?(r=n_(),sn=4):sn=r===rh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,zs=r,Re===null&&(Dn=1,sh(n,Ms(r,n.current)))}function wh(){var n=js.current;return n===null?!0:(Ie&4194048)===Ie?hr===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?n===hr:!1}function H_(){var n=Z.H;return Z.H=xo,n===null?xo:n}function G_(){var n=Z.A;return Z.A=Mv,n}function td(){Dn=4,Io||(Ie&4194048)!==Ie&&js.current!==null||(Ic=!0),(Oo&134217727)===0&&(xl&134217727)===0||pn===null||Qa(pn,Ie,Bs,!1)}function wm(n,r,o){var u=$e;$e|=2;var _=H_(),v=G_();(pn!==n||Ie!==r)&&(Zf=null,Mc(n,r)),r=!1;var A=Dn;t:do try{if(sn!==0&&Re!==null){var j=Re,Y=zs;switch(sn){case 8:Tm(),A=6;break t;case 3:case 2:case 9:case 6:js.current===null&&(r=!0);var ct=sn;if(sn=0,zs=null,kc(n,j,Y,ct),o&&Ic){A=0;break t}break;default:ct=sn,sn=0,zs=null,kc(n,j,Y,ct)}}Vv(),A=Dn;break}catch(vt){F_(n,vt)}while(!0);return r&&n.shellSuspendCounter++,Ua=ge=null,$e=u,Z.H=_,Z.A=v,Re===null&&(pn=null,Ie=0,kr()),A}function Vv(){for(;Re!==null;)K_(Re)}function jv(n,r){var o=$e;$e|=2;var u=H_(),_=G_();pn!==n||Ie!==r?(Zf=null,Rl=tn()+500,Mc(n,r)):Ic=Es(n,r);t:do try{if(sn!==0&&Re!==null){r=Re;var v=zs;e:switch(sn){case 1:sn=0,zs=null,kc(n,r,v,1);break;case 2:case 9:if(e_(v)){sn=0,zs=null,$_(r);break}r=function(){sn!==2&&sn!==9||pn!==n||(sn=7),ma(n)},v.then(r,r);break t;case 3:sn=7;break t;case 4:sn=5;break t;case 7:e_(v)?(sn=0,zs=null,$_(r)):(sn=0,zs=null,kc(n,r,v,7));break;case 5:var A=null;switch(Re.tag){case 26:A=Re.memoizedState;case 5:case 27:var j=Re;if(A?vy(A):j.stateNode.complete){sn=0,zs=null;var Y=j.sibling;if(Y!==null)Re=Y;else{var ct=j.return;ct!==null?(Re=ct,ed(ct)):Re=null}break e}}sn=0,zs=null,kc(n,r,v,5);break;case 6:sn=0,zs=null,kc(n,r,v,6);break;case 8:Tm(),Dn=6;break t;default:throw Error(i(462))}}Lv();break}catch(vt){F_(n,vt)}while(!0);return Ua=ge=null,Z.H=u,Z.A=_,$e=o,Re!==null?0:(pn=null,Ie=0,kr(),Dn)}function Lv(){for(;Re!==null&&!oe();)K_(Re)}function K_(n){var r=b_(n.alternate,n,Gr);n.memoizedProps=n.pendingProps,r===null?ed(n):Re=r}function $_(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=v_(o,r,r.pendingProps,r.type,void 0,Ie);break;case 11:r=v_(o,r,r.pendingProps,r.type.render,r.ref,Ie);break;case 5:Np(r);default:$f(o,r),r=Re=Qg(r,Gr),r=b_(o,r,Gr)}n.memoizedProps=n.pendingProps,r===null?ed(n):Re=r}function kc(n,r,o,u){Ua=ge=null,Np(r),mc=null,Vs=0;var _=r.return;try{if(Zp(n,_,r,o,Ie)){Dn=1,sh(n,Ms(o,n.current)),Re=null;return}}catch(v){if(_!==null)throw Re=_,v;Dn=1,sh(n,Ms(o,n.current)),Re=null;return}r.flags&32768?(De||u===1?n=!0:Ic||(Ie&536870912)!==0?n=!1:(Io=n=!0,(u===2||u===9||u===3||u===6)&&(u=js.current,u!==null&&u.tag===13&&(u.flags|=16384))),bh(r,n)):ed(r)}function ed(n){var r=n;do{if((r.flags&32768)!==0){bh(r,Io);return}n=r.return;var o=S_(r.alternate,r,Gr);if(o!==null){Re=o;return}if(r=r.sibling,r!==null){Re=r;return}Re=r=n}while(r!==null);Dn===0&&(Dn=5)}function bh(n,r){do{var o=dh(n.alternate,n);if(o!==null){o.flags&=32767,Re=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Re=n;return}Re=n=o}while(n!==null);Dn=6,Re=null}function W_(n,r,o,u,_,v,A,j,Y){n.cancelPendingCommit=null;do Sh();while(ui!==0);if(($e&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=rc,gu(n,o,v,A,j,Y),n===pn&&(Re=pn=null,Ie=0),Dc=r,Mo=n,Ya=o,_m=v,ym=_,P_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,zv(Mi,function(){return Em(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,_=rt.p,rt.p=2,A=$e,$e|=4;try{Ov(n,r,o)}finally{$e=A,rt.p=_,Z.T=u}}ui=1,bm(),Sm(),nd()}}function bm(){if(ui===1){ui=0;var n=Mo,r=Dc,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=rt.p;rt.p=2;var _=$e;$e|=4;try{I_(r,n);var v=jm,A=Kg(n.containerInfo),j=v.focusedElem,Y=v.selectionRange;if(A!==j&&j&&j.ownerDocument&&Gg(j.ownerDocument.documentElement,j)){if(Y!==null&&vp(j)){var ct=Y.start,vt=Y.end;if(vt===void 0&&(vt=ct),"selectionStart"in j)j.selectionStart=ct,j.selectionEnd=Math.min(vt,j.value.length);else{var St=j.ownerDocument||document,ut=St&&St.defaultView||window;if(ut.getSelection){var mt=ut.getSelection(),Qt=j.textContent.length,re=Math.min(Y.start,Qt),un=Y.end===void 0?re:Math.min(Y.end,Qt);!mt.extend&&re>un&&(A=un,un=re,re=A);var it=Hg(j,re),tt=Hg(j,un);if(it&&tt&&(mt.rangeCount!==1||mt.anchorNode!==it.node||mt.anchorOffset!==it.offset||mt.focusNode!==tt.node||mt.focusOffset!==tt.offset)){var lt=St.createRange();lt.setStart(it.node,it.offset),mt.removeAllRanges(),re>un?(mt.addRange(lt),mt.extend(tt.node,tt.offset)):(lt.setEnd(tt.node,tt.offset),mt.addRange(lt))}}}}for(St=[],mt=j;mt=mt.parentNode;)mt.nodeType===1&&St.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<St.length;j++){var bt=St[j];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}gd=!!Nh,jm=Nh=null}finally{$e=_,rt.p=u,Z.T=o}}n.current=r,ui=2}}function Sm(){if(ui===2){ui=0;var n=Mo,r=Dc,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=rt.p;rt.p=2;var _=$e;$e|=4;try{cm(n,r.alternate,r)}finally{$e=_,rt.p=u,Z.T=o}}ui=3}}function nd(){if(ui===4||ui===3){ui=0,We();var n=Mo,r=Dc,o=Ya,u=P_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ui=5:(ui=0,Dc=Mo=null,Am(n,n.pendingLanes));var _=n.pendingLanes;if(_===0&&(Do=null),Ar(o),r=r.stateNode,Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Xn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Z.T,_=rt.p,rt.p=2,Z.T=null;try{for(var v=n.onRecoverableError,A=0;A<u.length;A++){var j=u[A];v(j.value,{componentStack:j.stack})}}finally{Z.T=r,rt.p=_}}(Ya&3)!==0&&Sh(),ma(n),_=n.pendingLanes,(o&261930)!==0&&(_&42)!==0?n===vm?Th++:(Th=0,vm=n):Th=0,Eh(0)}}function Am(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Bu(r)))}function Sh(){return bm(),Sm(),nd(),Em()}function Em(){if(ui!==5)return!1;var n=Mo,r=_m;_m=0;var o=Ar(Ya),u=Z.T,_=rt.p;try{rt.p=32>o?32:o,Z.T=null,o=ym,ym=null;var v=Mo,A=Ya;if(ui=0,Dc=Mo=null,Ya=0,($e&6)!==0)throw Error(i(331));var j=$e;if($e|=4,V_(v.current),D_(v,v.current,A,o),$e=j,Eh(0,!1),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Xn,v)}catch{}return!0}finally{rt.p=_,Z.T=u,Am(n,r)}}function Cm(n,r,o){r=Ms(o,r),r=Xp(n.stateNode,r,2),n=Pr(n,r,2),n!==null&&(Aa(n,2),ma(n))}function rn(n,r,o){if(n.tag===3)Cm(n,n,o);else for(;r!==null;){if(r.tag===3){Cm(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Do===null||!Do.has(u))){n=Ms(o,n),o=fa(2),u=Pr(r,o,2),u!==null&&(zf(o,u,r,n),Aa(u,2),ma(u));break}}r=r.return}}function xm(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new kv;var _=new Set;u.set(r,_)}else _=u.get(r),_===void 0&&(_=new Set,u.set(r,_));_.has(o)||(pm=!0,_.add(o),n=Pv.bind(null,n,r,o),r.then(n,n))}function Pv(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,pn===n&&(Ie&o)===o&&(Dn===4||Dn===3&&(Ie&62914560)===Ie&&300>tn()-vh?($e&2)===0&&Mc(n,0):mm|=o,Oc===Ie&&(Oc=0)),ma(n)}function Ah(n,r){r===0&&(r=uo()),n=oa(n,r),n!==null&&(Aa(n,r),ma(n))}function id(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Ah(n,o)}function Uv(n,r){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,_=n.memoizedState;_!==null&&(o=_.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Ah(n,o)}function zv(n,r){return Vt(n,r)}var Vc=null,Nl=null,Rm=!1,sd=!1,Nm=!1,ko=0;function ma(n){n!==Nl&&n.next===null&&(Nl===null?Vc=Nl=n:Nl=Nl.next=n),sd=!0,Rm||(Rm=!0,qv())}function Eh(n,r){if(!Nm&&sd){Nm=!0;do for(var o=!1,u=Vc;u!==null;){if(n!==0){var _=u.pendingLanes;if(_===0)var v=0;else{var A=u.suspendedLanes,j=u.pingedLanes;v=(1<<31-fn(42|n)+1)-1,v&=_&~(A&~j),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,Z_(u,v))}else v=Ie,v=Js(u,u===pn?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Es(u,v)||(o=!0,Z_(u,v));u=u.next}while(o);Nm=!1}}function Bv(){Y_()}function Y_(){sd=Rm=!1;var n=0;ko!==0&&Hv()&&(n=ko);for(var r=tn(),o=null,u=Vc;u!==null;){var _=u.next,v=Q_(u,r);v===0?(u.next=null,o===null?Vc=_:o.next=_,_===null&&(Nl=o)):(o=u,(n!==0||(v&3)!==0)&&(sd=!0)),u=_}ui!==0&&ui!==5||Eh(n),ko!==0&&(ko=0)}function Q_(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,_=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var A=31-fn(v),j=1<<A,Y=_[A];Y===-1?((j&o)===0||(j&u)!==0)&&(_[A]=co(j,r)):Y<=r&&(n.expiredLanes|=j),v&=~j}if(r=pn,o=Ie,o=Js(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(sn===2||sn===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&te(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Es(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&te(u),Ar(o)){case 2:case 8:o=ai;break;case 32:o=Mi;break;case 268435456:o=Sa;break;default:o=Mi}return u=X_.bind(null,n),o=Vt(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&te(u),n.callbackPriority=2,n.callbackNode=null,2}function X_(n,r){if(ui!==0&&ui!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Sh()&&n.callbackNode!==o)return null;var u=Ie;return u=Js(n,n===pn?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(z_(n,u,r),Q_(n,tn()),n.callbackNode!=null&&n.callbackNode===o?X_.bind(null,n):null)}function Z_(n,r){if(Sh())return null;z_(n,r,!0)}function qv(){oy(function(){($e&6)!==0?Vt(Fi,Bv):Y_()})}function Fs(){if(ko===0){var n=fc;n===0&&(n=Xs,Xs<<=1,(Xs&261888)===0&&(Xs=256)),ko=n}return ko}function J_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:rl(""+n)}function ty(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function Il(n,r,o,u,_){if(r==="submit"&&o&&o.stateNode===_){var v=J_((_[zt]||null).action),A=u.submitter;A&&(r=(r=A[zt]||null)?J_(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var j=new ra("action","action",null,u,_);n.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ko!==0){var Y=A?ty(_,A):new FormData(_);Co(o,{pending:!0,data:Y,method:_.method,action:v},null,Y)}}else typeof v=="function"&&(j.preventDefault(),Y=A?ty(_,A):new FormData(_),Co(o,{pending:!0,data:Y,method:_.method,action:v},v,Y))},currentTarget:_}]})}}for(var de=0;de<df.length;de++){var Im=df[de],gs=Im.toLowerCase(),Wn=Im[0].toUpperCase()+Im.slice(1);os(gs,"on"+Wn)}os(Ds,"onAnimationEnd"),os(ju,"onAnimationIteration"),os($g,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(ic,"onTransitionRun"),os(hf,"onTransitionStart"),os(ff,"onTransitionCancel"),os(Xe,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vo=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ch));function ey(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],_=u.event;u=u.listeners;t:{var v=void 0;if(r)for(var A=u.length-1;0<=A;A--){var j=u[A],Y=j.instance,ct=j.currentTarget;if(j=j.listener,Y!==v&&_.isPropagationStopped())break t;v=j,_.currentTarget=ct;try{v(_)}catch(vt){pf(vt)}_.currentTarget=null,v=Y}else for(A=0;A<u.length;A++){if(j=u[A],Y=j.instance,ct=j.currentTarget,j=j.listener,Y!==v&&_.isPropagationStopped())break t;v=j,_.currentTarget=ct;try{v(_)}catch(vt){pf(vt)}_.currentTarget=null,v=Y}}}}function Ne(n,r){var o=r[Ge];o===void 0&&(o=r[Ge]=new Set);var u=n+"__bubble";o.has(u)||(ad(r,n,2,!1),o.add(u))}function Om(n,r,o){var u=0;r&&(u|=4),ad(o,n,u,r)}var rd="_reactListening"+Math.random().toString(36).slice(2);function Dm(n){if(!n[rd]){n[rd]=!0,_u.forEach(function(o){o!=="selectionchange"&&(Vo.has(o)||Om(o,!1,n),Om(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[rd]||(r[rd]=!0,Om("selectionchange",!1,r))}}function ad(n,r,o,u){switch(xy(r)){case 2:var _=s1;break;case 8:_=r1;break;default:_=Hm}o=_.bind(null,r,o,n),_=void 0,!ol||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),u?_!==void 0?n.addEventListener(r,o,{capture:!0,passive:_}):n.addEventListener(r,o,!0):_!==void 0?n.addEventListener(r,o,{passive:_}):n.addEventListener(r,o,!1)}function Mm(n,r,o,u,_){var v=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var j=u.stateNode.containerInfo;if(j===_)break;if(A===4)for(A=u.return;A!==null;){var Y=A.tag;if((Y===3||Y===4)&&A.stateNode.containerInfo===_)return;A=A.return}for(;j!==null;){if(A=ss(j),A===null)return;if(Y=A.tag,Y===5||Y===6||Y===26||Y===27){u=v=A;continue t}j=j.parentNode}}u=u.return}fo(function(){var ct=v,vt=tr(o),St=[];t:{var ut=Wg.get(n);if(ut!==void 0){var mt=ra,Qt=n;switch(n){case"keypress":if(ll(o)===0)break t;case"keydown":case"keyup":mt=Or;break;case"focusin":Qt="focus",mt=mo;break;case"focusout":Qt="blur",mt=mo;break;case"beforeblur":case"afterblur":mt=mo;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=S;break;case Ds:case ju:case $g:mt=Ou;break;case Xe:mt=H;break;case"scroll":case"scrollend":mt=Ru;break;case"wheel":mt=dt;break;case"copy":case"cut":case"paste":mt=ji;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Ma;break;case"toggle":case"beforetoggle":mt=me}var re=(r&4)!==0,un=!re&&(n==="scroll"||n==="scrollend"),it=re?ut!==null?ut+"Capture":null:ut;re=[];for(var tt=ct,lt;tt!==null;){var bt=tt;if(lt=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||lt===null||it===null||(bt=Ns(tt,it),bt!=null&&re.push(Hs(tt,bt,lt))),un)break;tt=tt.return}0<re.length&&(ut=new mt(ut,Qt,null,o,vt),St.push({event:ut,listeners:re}))}}if((r&7)===0){t:{if(ut=n==="mouseover"||n==="pointerover",mt=n==="mouseout"||n==="pointerout",ut&&o!==Cu&&(Qt=o.relatedTarget||o.fromElement)&&(ss(Qt)||Qt[ee]))break t;if((mt||ut)&&(ut=vt.window===vt?vt:(ut=vt.ownerDocument)?ut.defaultView||ut.parentWindow:window,mt?(Qt=o.relatedTarget||o.toElement,mt=ct,Qt=Qt?ss(Qt):null,Qt!==null&&(un=c(Qt),re=Qt.tag,Qt!==un||re!==5&&re!==27&&re!==6)&&(Qt=null)):(mt=null,Qt=ct),mt!==Qt)){if(re=ul,bt="onMouseLeave",it="onMouseEnter",tt="mouse",(n==="pointerout"||n==="pointerover")&&(re=Ma,bt="onPointerLeave",it="onPointerEnter",tt="pointer"),un=mt==null?ut:xs(mt),lt=Qt==null?ut:xs(Qt),ut=new re(bt,tt+"leave",mt,o,vt),ut.target=un,ut.relatedTarget=lt,bt=null,ss(vt)===ct&&(re=new re(it,tt+"enter",Qt,o,vt),re.target=lt,re.relatedTarget=un,bt=re),un=bt,mt&&Qt)e:{for(re=od,it=mt,tt=Qt,lt=0,bt=it;bt;bt=re(bt))lt++;bt=0;for(var ne=tt;ne;ne=re(ne))bt++;for(;0<lt-bt;)it=re(it),lt--;for(;0<bt-lt;)tt=re(tt),bt--;for(;lt--;){if(it===tt||tt!==null&&it===tt.alternate){re=it;break e}it=re(it),tt=re(tt)}re=null}else re=null;mt!==null&&En(St,ut,mt,re,!1),Qt!==null&&un!==null&&En(St,un,Qt,re,!0)}}t:{if(ut=ct?xs(ct):window,mt=ut.nodeName&&ut.nodeName.toLowerCase(),mt==="select"||mt==="input"&&ut.type==="file")var Be=qg;else if(pp(ut))if(pl)Be=Tv;else{Be=yv;var Xt=cf}else mt=ut.nodeName,!mt||mt.toLowerCase()!=="input"||ut.type!=="checkbox"&&ut.type!=="radio"?ct&&sl(ct.elementType)&&(Be=qg):Be=vv;if(Be&&(Be=Be(n,ct))){mp(St,Be,o,vt);break t}Xt&&Xt(n,ut,ct),n==="focusout"&&ct&&ut.type==="number"&&ct.memoizedProps.value!=null&&bu(ut,"number",ut.value)}switch(Xt=ct?xs(ct):window,n){case"focusin":(pp(Xt)||Xt.contentEditable==="true")&&(et=Xt,yt=ct,pt=null);break;case"focusout":pt=yt=et=null;break;case"mousedown":Gt=!0;break;case"contextmenu":case"mouseup":case"dragend":Gt=!1,fe(St,o,vt);break;case"selectionchange":if(nc)break;case"keydown":case"keyup":fe(St,o,vt)}var we;if(ze)t:{switch(n){case"compositionstart":var Oe="onCompositionStart";break t;case"compositionend":Oe="onCompositionEnd";break t;case"compositionupdate":Oe="onCompositionUpdate";break t}Oe=void 0}else dl?ka(n,o)&&(Oe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Oe="onCompositionStart");Oe&&(Dr&&o.locale!=="ko"&&(dl||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&dl&&(we=Qe()):(sa=vt,xu="value"in sa?sa.value:sa.textContent,dl=!0)),Xt=xh(ct,Oe),0<Xt.length&&(Oe=new Gn(Oe,n,null,o,vt),St.push({event:Oe,listeners:Xt}),we?Oe.data=we:(we=Jl(o),we!==null&&(Oe.data=we)))),(we=as?Os(n,o):dp(n,o))&&(Oe=xh(ct,"onBeforeInput"),0<Oe.length&&(Xt=new Gn("onBeforeInput","beforeinput",null,o,vt),St.push({event:Xt,listeners:Oe}),Xt.data=we)),Il(St,n,ct,o,vt)}ey(St,r)})}function Hs(n,r,o){return{instance:n,listener:r,currentTarget:o}}function xh(n,r){for(var o=r+"Capture",u=[];n!==null;){var _=n,v=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||v===null||(_=Ns(n,o),_!=null&&u.unshift(Hs(n,_,v)),_=Ns(n,r),_!=null&&u.push(Hs(n,_,v))),n.tag===3)return u;n=n.return}return[]}function od(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function En(n,r,o,u,_){for(var v=r._reactName,A=[];o!==null&&o!==u;){var j=o,Y=j.alternate,ct=j.stateNode;if(j=j.tag,Y!==null&&Y===u)break;j!==5&&j!==26&&j!==27||ct===null||(Y=ct,_?(ct=Ns(o,v),ct!=null&&A.unshift(Hs(o,ct,Y))):_||(ct=Ns(o,v),ct!=null&&A.push(Hs(o,ct,Y)))),o=o.return}A.length!==0&&n.push({event:r,listeners:A})}var zn=/\r\n?/g,ny=/\u0000|\uFFFD/g;function iy(n){return(typeof n=="string"?n:""+n).replace(zn,`
`).replace(ny,"")}function sy(n,r){return r=iy(r),iy(n)===r}function cn(n,r,o,u,_,v){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||li(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&li(n,""+u);break;case"className":rs(n,"class",u);break;case"tabIndex":rs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(n,o,u);break;case"style":Au(n,u,v);break;case"data":if(r!=="object"){rs(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=rl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(r!=="input"&&cn(n,r,"name",_.name,_,null),cn(n,r,"formEncType",_.formEncType,_,null),cn(n,r,"formMethod",_.formMethod,_,null),cn(n,r,"formTarget",_.formTarget,_,null)):(cn(n,r,"encType",_.encType,_,null),cn(n,r,"method",_.method,_,null),cn(n,r,"target",_.target,_,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=rl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Rr);break;case"onScroll":u!=null&&Ne("scroll",n);break;case"onScrollEnd":u!=null&&Ne("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(_.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=rl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Ne("beforetoggle",n),Ne("toggle",n),Kl(n,"popover",u);break;case"xlinkActuate":Hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Hn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Hn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Hn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Hn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Kl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Eu.get(o)||o,Kl(n,o,u))}}function km(n,r,o,u,_,v){switch(o){case"style":Au(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(_.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?li(n,u):(typeof u=="number"||typeof u=="bigint")&&li(n,""+u);break;case"onScroll":u!=null&&Ne("scroll",n);break;case"onScrollEnd":u!=null&&Ne("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yu.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(_=o.endsWith("Capture"),r=o.slice(2,_?o.length-7:void 0),v=n[zt]||null,v=v!=null?v[o]:null,typeof v=="function"&&n.removeEventListener(r,v,_),typeof u=="function")){typeof v!="function"&&v!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,_);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Kl(n,o,u)}}}function Ni(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",n),Ne("load",n);var u=!1,_=!1,v;for(v in o)if(o.hasOwnProperty(v)){var A=o[v];if(A!=null)switch(v){case"src":u=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:cn(n,r,v,A,o,null)}}_&&cn(n,r,"srcSet",o.srcSet,o,null),u&&cn(n,r,"src",o.src,o,null);return;case"input":Ne("invalid",n);var j=v=A=_=null,Y=null,ct=null;for(u in o)if(o.hasOwnProperty(u)){var vt=o[u];if(vt!=null)switch(u){case"name":_=vt;break;case"type":A=vt;break;case"checked":Y=vt;break;case"defaultChecked":ct=vt;break;case"value":v=vt;break;case"defaultValue":j=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(i(137,r));break;default:cn(n,r,u,vt,o,null)}}$l(n,v,j,Y,ct,A,_,!1);return;case"select":Ne("invalid",n),u=A=v=null;for(_ in o)if(o.hasOwnProperty(_)&&(j=o[_],j!=null))switch(_){case"value":v=j;break;case"defaultValue":A=j;break;case"multiple":u=j;default:cn(n,r,_,j,o,null)}r=v,o=A,n.multiple=!!u,r!=null?xa(n,!!u,r,!1):o!=null&&xa(n,!!u,o,!0);return;case"textarea":Ne("invalid",n),v=_=u=null;for(A in o)if(o.hasOwnProperty(A)&&(j=o[A],j!=null))switch(A){case"value":u=j;break;case"defaultValue":_=j;break;case"children":v=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:cn(n,r,A,j,o,null)}na(n,u,_,v);return;case"option":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:cn(n,r,Y,u,o,null)}return;case"dialog":Ne("beforetoggle",n),Ne("toggle",n),Ne("cancel",n),Ne("close",n);break;case"iframe":case"object":Ne("load",n);break;case"video":case"audio":for(u=0;u<Ch.length;u++)Ne(Ch[u],n);break;case"image":Ne("error",n),Ne("load",n);break;case"details":Ne("toggle",n);break;case"embed":case"source":case"link":Ne("error",n),Ne("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in o)if(o.hasOwnProperty(ct)&&(u=o[ct],u!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:cn(n,r,ct,u,o,null)}return;default:if(sl(r)){for(vt in o)o.hasOwnProperty(vt)&&(u=o[vt],u!==void 0&&km(n,r,vt,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&cn(n,r,j,u,o,null))}function Fv(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,v=null,A=null,j=null,Y=null,ct=null,vt=null;for(mt in o){var St=o[mt];if(o.hasOwnProperty(mt)&&St!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Y=St;default:u.hasOwnProperty(mt)||cn(n,r,mt,null,u,St)}}for(var ut in u){var mt=u[ut];if(St=o[ut],u.hasOwnProperty(ut)&&(mt!=null||St!=null))switch(ut){case"type":v=mt;break;case"name":_=mt;break;case"checked":ct=mt;break;case"defaultChecked":vt=mt;break;case"value":A=mt;break;case"defaultValue":j=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,r));break;default:mt!==St&&cn(n,r,ut,mt,u,St)}}il(n,A,j,Y,ct,vt,v,_);return;case"select":mt=A=j=ut=null;for(v in o)if(Y=o[v],o.hasOwnProperty(v)&&Y!=null)switch(v){case"value":break;case"multiple":mt=Y;default:u.hasOwnProperty(v)||cn(n,r,v,null,u,Y)}for(_ in u)if(v=u[_],Y=o[_],u.hasOwnProperty(_)&&(v!=null||Y!=null))switch(_){case"value":ut=v;break;case"defaultValue":j=v;break;case"multiple":A=v;default:v!==Y&&cn(n,r,_,v,u,Y)}r=j,o=A,u=mt,ut!=null?xa(n,!!o,ut,!1):!!u!=!!o&&(r!=null?xa(n,!!o,r,!0):xa(n,!!o,o?[]:"",!1));return;case"textarea":mt=ut=null;for(j in o)if(_=o[j],o.hasOwnProperty(j)&&_!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:cn(n,r,j,null,u,_)}for(A in u)if(_=u[A],v=o[A],u.hasOwnProperty(A)&&(_!=null||v!=null))switch(A){case"value":ut=_;break;case"defaultValue":mt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==v&&cn(n,r,A,_,u,v)}Wl(n,ut,mt);return;case"option":for(var Qt in o)if(ut=o[Qt],o.hasOwnProperty(Qt)&&ut!=null&&!u.hasOwnProperty(Qt))switch(Qt){case"selected":n.selected=!1;break;default:cn(n,r,Qt,null,u,ut)}for(Y in u)if(ut=u[Y],mt=o[Y],u.hasOwnProperty(Y)&&ut!==mt&&(ut!=null||mt!=null))switch(Y){case"selected":n.selected=ut&&typeof ut!="function"&&typeof ut!="symbol";break;default:cn(n,r,Y,ut,u,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in o)ut=o[re],o.hasOwnProperty(re)&&ut!=null&&!u.hasOwnProperty(re)&&cn(n,r,re,null,u,ut);for(ct in u)if(ut=u[ct],mt=o[ct],u.hasOwnProperty(ct)&&ut!==mt&&(ut!=null||mt!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(i(137,r));break;default:cn(n,r,ct,ut,u,mt)}return;default:if(sl(r)){for(var un in o)ut=o[un],o.hasOwnProperty(un)&&ut!==void 0&&!u.hasOwnProperty(un)&&km(n,r,un,void 0,u,ut);for(vt in u)ut=u[vt],mt=o[vt],!u.hasOwnProperty(vt)||ut===mt||ut===void 0&&mt===void 0||km(n,r,vt,ut,u,mt);return}}for(var it in o)ut=o[it],o.hasOwnProperty(it)&&ut!=null&&!u.hasOwnProperty(it)&&cn(n,r,it,null,u,ut);for(St in u)ut=u[St],mt=o[St],!u.hasOwnProperty(St)||ut===mt||ut==null&&mt==null||cn(n,r,St,ut,u,mt)}function Vm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rh(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var _=o[u],v=_.transferSize,A=_.initiatorType,j=_.duration;if(v&&j&&Vm(A)){for(A=0,j=_.responseEnd,u+=1;u<o.length;u++){var Y=o[u],ct=Y.startTime;if(ct>j)break;var vt=Y.transferSize,St=Y.initiatorType;vt&&Vm(St)&&(Y=Y.responseEnd,A+=vt*(Y<j?1:(j-ct)/(Y-ct)))}if(--u,r+=8*(v+A)/(_.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Nh=null,jm=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function Oh(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _s(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function jo(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Lm=null;function Hv(){var n=window.event;return n&&n.type==="popstate"?n===Lm?!1:(Lm=n,!0):(Lm=null,!1)}var ry=typeof setTimeout=="function"?setTimeout:void 0,Gv=typeof clearTimeout=="function"?clearTimeout:void 0,ay=typeof Promise=="function"?Promise:void 0,oy=typeof queueMicrotask=="function"?queueMicrotask:typeof ay<"u"?function(n){return ay.resolve(null).then(n).catch(Xa)}:ry;function Xa(n){setTimeout(function(){throw n})}function le(n){return n==="head"}function Pm(n,r){var o=r,u=0;do{var _=o.nextSibling;if(n.removeChild(o),_&&_.nodeType===8)if(o=_.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(_),Hc(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Dh(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Dh(o);for(var v=o.firstChild;v;){var A=v.nextSibling,j=v.nodeName;v[Zn]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=A}}else o==="body"&&Dh(n.ownerDocument.body);o=_}while(o);Hc(r)}function Gs(n,r){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function ld(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ld(o),Cs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Kv(n,r,o,u){for(;n.nodeType===1;){var _=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Zn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==_.rel||n.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||n.getAttribute("title")!==(_.title==null?null:_.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(_.src==null?null:_.src)||n.getAttribute("type")!==(_.type==null?null:_.type)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var v=_.name==null?null:""+_.name;if(_.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=pr(n.nextSibling),n===null)break}return null}function Je(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=pr(n.nextSibling),n===null))return null;return n}function ly(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=pr(n.nextSibling),n===null))return null;return n}function cd(n){return n.data==="$?"||n.data==="$~"}function jc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function $v(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function pr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Um=null;function cy(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return pr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function uy(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function hy(n,r,o){switch(r=Ih(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Dh(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Cs(n)}var mr=new Map,fy=new Set;function ud(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Za=rt.d;rt.d={f:Wv,r:Yv,D:zm,C:Qv,L:Xv,m:Zv,X:ys,S:_i,M:Jv};function Wv(){var n=Za.f(),r=Jf();return n||r}function Yv(n){var r=Hi(n);r!==null&&r.tag===5&&r.type==="form"?Hp(r):Za.r(n)}var Lo=typeof document>"u"?null:document;function dy(n,r,o){var u=Lo;if(u&&typeof r=="string"&&r){var _=Gi(r);_='link[rel="'+n+'"][href="'+_+'"]',typeof o=="string"&&(_+='[crossorigin="'+o+'"]'),fy.has(_)||(fy.add(_),n={rel:n,crossOrigin:o,href:r},u.querySelector(_)===null&&(r=u.createElement("link"),Ni(r,"link",n),Jn(r),u.head.appendChild(r)))}}function zm(n){Za.D(n),dy("dns-prefetch",n,null)}function Qv(n,r){Za.C(n,r),dy("preconnect",n,r)}function Xv(n,r,o){Za.L(n,r,o);var u=Lo;if(u&&n&&r){var _='link[rel="preload"][as="'+Gi(r)+'"]';r==="image"&&o&&o.imageSrcSet?(_+='[imagesrcset="'+Gi(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(_+='[imagesizes="'+Gi(o.imageSizes)+'"]')):_+='[href="'+Gi(n)+'"]';var v=_;switch(r){case"style":v=Lc(n);break;case"script":v=Uc(n)}mr.has(v)||(n=w({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),mr.set(v,n),u.querySelector(_)!==null||r==="style"&&u.querySelector(Pc(v))||r==="script"&&u.querySelector(zc(v))||(r=u.createElement("link"),Ni(r,"link",n),Jn(r),u.head.appendChild(r)))}}function Zv(n,r){Za.m(n,r);var o=Lo;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",_='link[rel="modulepreload"][as="'+Gi(u)+'"][href="'+Gi(n)+'"]',v=_;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Uc(n)}if(!mr.has(v)&&(n=w({rel:"modulepreload",href:n},r),mr.set(v,n),o.querySelector(_)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zc(v)))return}u=o.createElement("link"),Ni(u,"link",n),Jn(u),o.head.appendChild(u)}}}function _i(n,r,o){Za.S(n,r,o);var u=Lo;if(u&&n){var _=Rs(u).hoistableStyles,v=Lc(n);r=r||"default";var A=_.get(v);if(!A){var j={loading:0,preload:null};if(A=u.querySelector(Pc(v)))j.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":r},o),(o=mr.get(v))&&Bm(n,o);var Y=A=u.createElement("link");Jn(Y),Ni(Y,"link",n),Y._p=new Promise(function(ct,vt){Y.onload=ct,Y.onerror=vt}),Y.addEventListener("load",function(){j.loading|=1}),Y.addEventListener("error",function(){j.loading|=2}),j.loading|=4,hd(A,r,u)}A={type:"stylesheet",instance:A,count:1,state:j},_.set(v,A)}}}function ys(n,r){Za.X(n,r);var o=Lo;if(o&&n){var u=Rs(o).hoistableScripts,_=Uc(n),v=u.get(_);v||(v=o.querySelector(zc(_)),v||(n=w({src:n,async:!0},r),(r=mr.get(_))&&fd(n,r),v=o.createElement("script"),Jn(v),Ni(v,"link",n),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(_,v))}}function Jv(n,r){Za.M(n,r);var o=Lo;if(o&&n){var u=Rs(o).hoistableScripts,_=Uc(n),v=u.get(_);v||(v=o.querySelector(zc(_)),v||(n=w({src:n,async:!0,type:"module"},r),(r=mr.get(_))&&fd(n,r),v=o.createElement("script"),Jn(v),Ni(v,"link",n),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(_,v))}}function py(n,r,o,u){var _=(_=jt.current)?ud(_):null;if(!_)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Lc(o.href),o=Rs(_).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Lc(o.href);var v=Rs(_).hoistableStyles,A=v.get(n);if(A||(_=_.ownerDocument||_,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,A),(v=_.querySelector(Pc(n)))&&!v._p&&(A.instance=v,A.state.loading=5),mr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mr.set(n,o),v||t1(_,n,o,A.state))),r&&u===null)throw Error(i(528,""));return A}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Uc(o),o=Rs(_).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Lc(n){return'href="'+Gi(n)+'"'}function Pc(n){return'link[rel="stylesheet"]['+n+"]"}function my(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function t1(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Ni(r,"link",o),Jn(r),n.head.appendChild(r))}function Uc(n){return'[src="'+Gi(n)+'"]'}function zc(n){return"script[async]"+n}function gy(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+Gi(o.href)+'"]');if(u)return r.instance=u,Jn(u),u;var _=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Jn(u),Ni(u,"style",_),hd(u,o.precedence,n),r.instance=u;case"stylesheet":_=Lc(o.href);var v=n.querySelector(Pc(_));if(v)return r.state.loading|=4,r.instance=v,Jn(v),v;u=my(o),(_=mr.get(_))&&Bm(u,_),v=(n.ownerDocument||n).createElement("link"),Jn(v);var A=v;return A._p=new Promise(function(j,Y){A.onload=j,A.onerror=Y}),Ni(v,"link",u),r.state.loading|=4,hd(v,o.precedence,n),r.instance=v;case"script":return v=Uc(o.src),(_=n.querySelector(zc(v)))?(r.instance=_,Jn(_),_):(u=o,(_=mr.get(v))&&(u=w({},o),fd(u,_)),n=n.ownerDocument||n,_=n.createElement("script"),Jn(_),Ni(_,"link",u),n.head.appendChild(_),r.instance=_);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,hd(u,o.precedence,n));return r.instance}function hd(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=u.length?u[u.length-1]:null,v=_,A=0;A<u.length;A++){var j=u[A];if(j.dataset.precedence===r)v=j;else if(v!==_)break}v?v.parentNode.insertBefore(n,v.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Bm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function fd(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Mh=null;function _y(n,r,o){if(Mh===null){var u=new Map,_=Mh=new Map;_.set(o,u)}else _=Mh,u=_.get(o),u||(u=new Map,_.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),_=0;_<o.length;_++){var v=o[_];if(!(v[Zn]||v[Ut]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=n+A;var j=u.get(A);j?j.push(v):u.set(A,[v])}}return u}function yy(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function e1(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function vy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Bc(n,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var _=Lc(u.href),v=r.querySelector(Pc(_));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=dd.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=v,Jn(v);return}v=r.ownerDocument||r,u=my(u),(_=mr.get(_))&&Bm(u,_),v=v.createElement("link"),Jn(v);var A=v;A._p=new Promise(function(j,Y){A.onload=j,A.onerror=Y}),Ni(v,"link",u),o.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=dd.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var qm=0;function n1(n,r){return n.stylesheets&&n.count===0&&md(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&md(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+r);0<n.imgBytes&&qm===0&&(qm=62500*Rh());var _=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&md(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>qm?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(_)}}:null}function dd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)md(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var pd=null;function md(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,pd=new Map,r.forEach(Ty,n),pd=null,dd.call(n))}function Ty(n,r){if(!(r.state.loading&4)){var o=pd.get(n);if(o)var u=o.get(null);else{o=new Map,pd.set(n,o);for(var _=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<_.length;v++){var A=_[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(o.set(A.dataset.precedence,A),u=A)}u&&o.set(null,u)}_=r.instance,A=_.getAttribute("data-precedence"),v=o.get(A)||u,v===u&&o.set(null,_),o.set(A,_),this.count++,u=dd.bind(this),_.addEventListener("load",u),_.addEventListener("error",u),v?v.parentNode.insertBefore(_,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(_,n.firstChild)),r.state.loading|=4}}var qc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function i1(n,r,o,u,_,v,A,j,Y){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=is(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=is(0),this.hiddenUpdates=is(null),this.identifierPrefix=u,this.onUncaughtError=_,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function wy(n,r,o,u,_,v,A,j,Y,ct,vt,St){return n=new i1(n,r,o,A,Y,ct,vt,St,j),r=1,v===!0&&(r|=24),v=Ei(3,null,null,r),n.current=v,v.stateNode=n,r=Vr(),r.refCount++,n.pooledCache=r,r.refCount++,v.memoizedState={element:u,isDehydrated:o,cache:r},ua(v),n}function by(n){return n?(n=ja,n):ja}function Sy(n,r,o,u,_,v){_=by(_),u.context===null?u.context=_:u.pendingContext=_,u=So(r),u.payload={element:o},v=v===void 0?null:v,v!==null&&(u.callback=v),o=Pr(n,u,r),o!==null&&(ms(o,n,r),Hu(o,n,r))}function Ay(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Fm(n,r){Ay(n,r),(n=n.alternate)&&Ay(n,r)}function Ey(n){if(n.tag===13||n.tag===31){var r=oa(n,67108864);r!==null&&ms(r,n,67108864),Fm(n,67108864)}}function Cy(n){if(n.tag===13||n.tag===31){var r=qs();r=Ca(r);var o=oa(n,r);o!==null&&ms(o,n,r),Fm(n,r)}}var gd=!0;function s1(n,r,o,u){var _=Z.T;Z.T=null;var v=rt.p;try{rt.p=2,Hm(n,r,o,u)}finally{rt.p=v,Z.T=_}}function r1(n,r,o,u){var _=Z.T;Z.T=null;var v=rt.p;try{rt.p=8,Hm(n,r,o,u)}finally{rt.p=v,Z.T=_}}function Hm(n,r,o,u){if(gd){var _=Gm(u);if(_===null)Mm(n,r,u,_d,o),Ry(n,u);else if(Ny(_,n,r,o,u))u.stopPropagation();else if(Ry(n,u),r&4&&-1<a1.indexOf(n)){for(;_!==null;){var v=Hi(_);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Zs(v.pendingLanes);if(A!==0){var j=v;for(j.pendingLanes|=2,j.entangledLanes|=2;A;){var Y=1<<31-fn(A);j.entanglements[1]|=Y,A&=~Y}ma(v),($e&6)===0&&(Rl=tn()+500,Eh(0))}}break;case 31:case 13:j=oa(v,2),j!==null&&ms(j,v,2),Jf(),Fm(v,2)}if(v=Gm(u),v===null&&Mm(n,r,u,_d,o),v===_)break;_=v}_!==null&&u.stopPropagation()}else Mm(n,r,u,null,o)}}function Gm(n){return n=tr(n),Km(n)}var _d=null;function Km(n){if(_d=null,n=ss(n),n!==null){var r=c(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=f(r),n!==null)return n;n=null}else if(o===31){if(n=d(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return _d=n,null}function xy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rn()){case Fi:return 2;case ai:return 8;case Mi:case ts:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var $m=!1,Po=null,Uo=null,zo=null,kh=new Map,Vh=new Map,Bo=[],a1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ry(n,r){switch(n){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":Uo=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":kh.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(r.pointerId)}}function Ol(n,r,o,u,_,v){return n===null||n.nativeEvent!==v?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:v,targetContainers:[_]},r!==null&&(r=Hi(r),r!==null&&Ey(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),n)}function Ny(n,r,o,u,_){switch(r){case"focusin":return Po=Ol(Po,n,r,o,u,_),!0;case"dragenter":return Uo=Ol(Uo,n,r,o,u,_),!0;case"mouseover":return zo=Ol(zo,n,r,o,u,_),!0;case"pointerover":var v=_.pointerId;return kh.set(v,Ol(kh.get(v)||null,n,r,o,u,_)),!0;case"gotpointercapture":return v=_.pointerId,Vh.set(v,Ol(Vh.get(v)||null,n,r,o,u,_)),!0}return!1}function Wm(n){var r=ss(n.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=f(o),r!==null){n.blockedOn=r,Nt(n.priority,function(){Cy(o)});return}}else if(r===31){if(r=d(o),r!==null){n.blockedOn=r,Nt(n.priority,function(){Cy(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Gm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Cu=u,o.target.dispatchEvent(u),Cu=null}else return r=Hi(o),r!==null&&Ey(r),n.blockedOn=o,!1;r.shift()}return!0}function Iy(n,r,o){yd(n)&&o.delete(r)}function o1(){$m=!1,Po!==null&&yd(Po)&&(Po=null),Uo!==null&&yd(Uo)&&(Uo=null),zo!==null&&yd(zo)&&(zo=null),kh.forEach(Iy),Vh.forEach(Iy)}function Fc(n,r){n.blockedOn===r&&(n.blockedOn=null,$m||($m=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,o1)))}var vd=null;function Oy(n){vd!==n&&(vd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){vd===n&&(vd=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],_=n[r+2];if(typeof u!="function"){if(Km(u||o)===null)continue;break}var v=Hi(o);v!==null&&(n.splice(r,3),r-=3,Co(v,{pending:!0,data:_,method:o.method,action:u},u,_))}}))}function Hc(n){function r(Y){return Fc(Y,n)}Po!==null&&Fc(Po,n),Uo!==null&&Fc(Uo,n),zo!==null&&Fc(zo,n),kh.forEach(r),Vh.forEach(r);for(var o=0;o<Bo.length;o++){var u=Bo[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Bo.length&&(o=Bo[0],o.blockedOn===null);)Wm(o),o.blockedOn===null&&Bo.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var _=o[u],v=o[u+1],A=_[zt]||null;if(typeof v=="function")A||Oy(o);else if(A){var j=null;if(v&&v.hasAttribute("formAction")){if(_=v,A=v[zt]||null)j=A.formAction;else if(Km(_)!==null)continue}else j=A.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),Oy(o)}}}function Yi(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return _=A})},focusReset:"manual",scroll:"manual"})}function r(){_!==null&&(_(),_=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,_=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),_!==null&&(_(),_=null)}}}function jh(n){this._internalRoot=n}Td.prototype.render=jh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=qs();Sy(o,u,n,r,null,null)},Td.prototype.unmount=jh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Sy(n.current,2,null,n,null,null),Jf(),r[ee]=null}};function Td(n){this._internalRoot=n}Td.prototype.unstable_scheduleHydration=function(n){if(n){var r=ho();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Bo.length&&r!==0&&r<Bo[o].priority;o++);Bo.splice(o,0,n),o===0&&Wm(n)}};var Dy=t.version;if(Dy!=="19.2.0")throw Error(i(527,Dy,"19.2.0"));rt.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=m(r),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var l1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Xn=wd.inject(l1),Vn=wd}catch{}}return Qm.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",_=Yp,v=Qp,A=__;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(_=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=wy(n,1,!1,null,null,o,u,null,_,v,A,Yi),n[ee]=r.current,Dm(n),new jh(r)},Qm.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,_="",v=Yp,A=Qp,j=__,Y=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(_=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.formState!==void 0&&(Y=o.formState)),r=wy(n,1,!0,r,o??null,u,_,Y,v,A,j,Yi),r.context=by(null),o=r.current,u=qs(),u=Ca(u),_=So(u),_.callback=null,Pr(o,_,u),o=u,r.current.lanes=o,Aa(r,o),ma(r),n[ee]=r.current,Dm(n),new Td(r)},Qm.version="19.2.0",Qm}var fb;function yx(){if(fb)return f1.exports;fb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),f1.exports=_x(),f1.exports}var vx=yx(),Xm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Tx=Xm.exports,db;function wx(){return db||(db=1,(function(s,t){(function(){var e,i="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",d="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",m=500,T="__lodash_placeholder__",w=1,E=2,N=4,O=1,U=2,D=1,z=2,$=4,Q=8,nt=16,K=32,X=64,R=128,C=256,M=512,V=30,P="...",F=800,B=16,At=1,Mt=2,Z=3,rt=1/0,_t=9007199254740991,ht=17976931348623157e292,ft=NaN,G=4294967295,at=G-1,wt=G>>>1,Tt=[["ary",R],["bind",D],["bindKey",z],["curry",Q],["curryRight",nt],["flip",M],["partial",K],["partialRight",X],["rearg",C]],It="[object Arguments]",jt="[object Array]",$t="[object AsyncFunction]",kt="[object Boolean]",Zt="[object Date]",an="[object DOMException]",Ve="[object Error]",be="[object Function]",yn="[object GeneratorFunction]",ae="[object Map]",gt="[object Number]",Pt="[object Null]",Yt="[object Object]",Bt="[object Promise]",Ot="[object Proxy]",Vt="[object RegExp]",te="[object Set]",oe="[object String]",We="[object Symbol]",tn="[object Undefined]",Rn="[object WeakMap]",Fi="[object WeakSet]",ai="[object ArrayBuffer]",Mi="[object DataView]",ts="[object Float32Array]",Sa="[object Float64Array]",es="[object Int8Array]",lo="[object Int16Array]",Xn="[object Int32Array]",Vn="[object Uint8Array]",ki="[object Uint8ClampedArray]",fn="[object Uint16Array]",ns="[object Uint32Array]",Zr=/\b__p \+= '';/g,Hl=/\b(__p \+=) '' \+/g,Xs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Jr=/&(?:amp|lt|gt|quot|#39);/g,Nn=/[&<>"']/g,Zs=RegExp(Jr.source),Js=RegExp(Nn.source),Es=/<%-([\s\S]+?)%>/g,co=/<%([\s\S]+?)%>/g,uo=/<%=([\s\S]+?)%>/g,is=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Aa=/^\w*$/,gu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sr=/[\\^$.*+?()[\]{}|]/g,el=RegExp(Sr.source),Ea=/^\s+/,Ca=/\s/,Ar=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ho=/\{\n\/\* \[wrapped with (.+)\] \*/,Nt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ut=/[()=,{}\[\]\/\s]/,zt=/\\(\\)?/g,ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,Fn=/^[-+]0x[0-9a-f]+$/i,en=/^0b[01]+$/i,pi=/^\[object .+?Constructor\]$/,Zn=/^0o[0-7]+$/i,Cs=/^(?:0|[1-9]\d*)$/,ss=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hi=/($^)/,xs=/['\n\r\u2028\u2029\\]/g,Rs="\\ud800-\\udfff",Jn="\\u0300-\\u036f",_u="\\ufe20-\\ufe2f",yu="\\u20d0-\\u20ff",Er=Jn+_u+yu,Cr="\\u2700-\\u27bf",Gl="a-z\\xdf-\\xf6\\xf8-\\xff",vu="\\xac\\xb1\\xd7\\xf7",Tu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sf="\\u2000-\\u206f",Kl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rs="A-Z\\xc0-\\xd6\\xd8-\\xde",Hn="\\ufe0e\\ufe0f",oi=vu+Tu+sf+Kl,ta="[']",wu="["+Rs+"]",Ye="["+oi+"]",ea="["+Er+"]",xr="\\d+",nl="["+Cr+"]",Gi="["+Gl+"]",il="[^"+Rs+oi+xr+Cr+Gl+rs+"]",$l="\\ud83c[\\udffb-\\udfff]",bu="(?:"+ea+"|"+$l+")",xa="[^"+Rs+"]",Wl="(?:\\ud83c[\\udde6-\\uddff]){2}",na="[\\ud800-\\udbff][\\udc00-\\udfff]",li="["+rs+"]",Su="\\u200d",Yl="(?:"+Gi+"|"+il+")",Au="(?:"+li+"|"+il+")",sl="(?:"+ta+"(?:d|ll|m|re|s|t|ve))?",Eu="(?:"+ta+"(?:D|LL|M|RE|S|T|VE))?",Ra=bu+"?",rl="["+Hn+"]?",Rr="(?:"+Su+"(?:"+[xa,Wl,na].join("|")+")"+rl+Ra+")*",Cu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Na=rl+Ra+Rr,ia="(?:"+[nl,Wl,na].join("|")+")"+Na,al="(?:"+[xa+ea+"?",ea,Wl,na,wu].join("|")+")",Ql=RegExp(ta,"g"),fo=RegExp(ea,"g"),Ns=RegExp($l+"(?="+$l+")|"+al+Na,"g"),er=RegExp([li+"?"+Gi+"+"+sl+"(?="+[Ye,li,"$"].join("|")+")",Au+"+"+Eu+"(?="+[Ye,li+Yl,"$"].join("|")+")",li+"?"+Yl+"+"+sl,li+"+"+Eu,tr,Cu,xr,ia].join("|"),"g"),ol=RegExp("["+Su+Rs+Er+Hn+"]"),on=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xu=-1,Ke={};Ke[ts]=Ke[Sa]=Ke[es]=Ke[lo]=Ke[Xn]=Ke[Vn]=Ke[ki]=Ke[fn]=Ke[ns]=!0,Ke[It]=Ke[jt]=Ke[ai]=Ke[kt]=Ke[Mi]=Ke[Zt]=Ke[Ve]=Ke[be]=Ke[ae]=Ke[gt]=Ke[Yt]=Ke[Vt]=Ke[te]=Ke[oe]=Ke[Rn]=!1;var Qe={};Qe[It]=Qe[jt]=Qe[ai]=Qe[Mi]=Qe[kt]=Qe[Zt]=Qe[ts]=Qe[Sa]=Qe[es]=Qe[lo]=Qe[Xn]=Qe[ae]=Qe[gt]=Qe[Yt]=Qe[Vt]=Qe[te]=Qe[oe]=Qe[We]=Qe[Vn]=Qe[ki]=Qe[fn]=Qe[ns]=!0,Qe[Ve]=Qe[be]=Qe[Rn]=!1;var ll={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ia={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Nr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ai={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Oa=parseFloat,ra=parseInt,Da=typeof My=="object"&&My&&My.Object===Object&&My,Ru=typeof self=="object"&&self&&self.Object===Object&&self,bn=Da||Ru||Function("return this")(),po=t&&!t.nodeType&&t,Vi=po&&!0&&s&&!s.nodeType&&s,cl=Vi&&Vi.exports===po,ul=cl&&Da.process,mi=(function(){try{var et=Vi&&Vi.require&&Vi.require("util").types;return et||ul&&ul.binding&&ul.binding("util")}catch{}})(),Nu=mi&&mi.isArrayBuffer,Iu=mi&&mi.isDate,mo=mi&&mi.isMap,Xl=mi&&mi.isRegExp,Ou=mi&&mi.isSet,hl=mi&&mi.isTypedArray;function ji(et,yt,pt){switch(pt.length){case 0:return et.call(yt);case 1:return et.call(yt,pt[0]);case 2:return et.call(yt,pt[0],pt[1]);case 3:return et.call(yt,pt[0],pt[1],pt[2])}return et.apply(yt,pt)}function rf(et,yt,pt,Gt){for(var fe=-1,xe=et==null?0:et.length;++fe<xe;){var Sn=et[fe];yt(Gt,Sn,pt(Sn),et)}return Gt}function Gn(et,yt){for(var pt=-1,Gt=et==null?0:et.length;++pt<Gt&&yt(et[pt],pt,et)!==!1;);return et}function af(et,yt){for(var pt=et==null?0:et.length;pt--&&yt(et[pt],pt,et)!==!1;);return et}function Du(et,yt){for(var pt=-1,Gt=et==null?0:et.length;++pt<Gt;)if(!yt(et[pt],pt,et))return!1;return!0}function Ir(et,yt){for(var pt=-1,Gt=et==null?0:et.length,fe=0,xe=[];++pt<Gt;){var Sn=et[pt];yt(Sn,pt,et)&&(xe[fe++]=Sn)}return xe}function fl(et,yt){var pt=et==null?0:et.length;return!!pt&&Lt(et,yt,0)>-1}function aa(et,yt,pt){for(var Gt=-1,fe=et==null?0:et.length;++Gt<fe;)if(pt(yt,et[Gt]))return!0;return!1}function Ae(et,yt){for(var pt=-1,Gt=et==null?0:et.length,fe=Array(Gt);++pt<Gt;)fe[pt]=yt(et[pt],pt,et);return fe}function Or(et,yt){for(var pt=-1,Gt=yt.length,fe=et.length;++pt<Gt;)et[fe+pt]=yt[pt];return et}function Zl(et,yt,pt,Gt){var fe=-1,xe=et==null?0:et.length;for(Gt&&xe&&(pt=et[++fe]);++fe<xe;)pt=yt(pt,et[fe],fe,et);return pt}function Ma(et,yt,pt,Gt){var fe=et==null?0:et.length;for(Gt&&fe&&(pt=et[--fe]);fe--;)pt=yt(pt,et[fe],fe,et);return pt}function p(et,yt){for(var pt=-1,Gt=et==null?0:et.length;++pt<Gt;)if(yt(et[pt],pt,et))return!0;return!1}var S=mn("length");function x(et){return et.split("")}function H(et){return et.match(Ht)||[]}function ot(et,yt,pt){var Gt;return pt(et,function(fe,xe,Sn){if(yt(fe,xe,Sn))return Gt=xe,!1}),Gt}function dt(et,yt,pt,Gt){for(var fe=et.length,xe=pt+(Gt?1:-1);Gt?xe--:++xe<fe;)if(yt(et[xe],xe,et))return xe;return-1}function Lt(et,yt,pt){return yt===yt?vv(et,yt,pt):dt(et,jn,pt)}function me(et,yt,pt,Gt){for(var fe=pt-1,xe=et.length;++fe<xe;)if(Gt(et[fe],yt))return fe;return-1}function jn(et){return et!==et}function ze(et,yt){var pt=et==null?0:et.length;return pt?Is(et,yt)/pt:ft}function mn(et){return function(yt){return yt==null?e:yt[et]}}function as(et){return function(yt){return et==null?e:et[yt]}}function Dr(et,yt,pt,Gt,fe){return fe(et,function(xe,Sn,nn){pt=Gt?(Gt=!1,xe):yt(pt,xe,Sn,nn)}),pt}function Mr(et,yt){var pt=et.length;for(et.sort(yt);pt--;)et[pt]=et[pt].value;return et}function Is(et,yt){for(var pt,Gt=-1,fe=et.length;++Gt<fe;){var xe=yt(et[Gt]);xe!==e&&(pt=pt===e?xe:pt+xe)}return pt}function ka(et,yt){for(var pt=-1,Gt=Array(et);++pt<et;)Gt[pt]=yt(pt);return Gt}function Jl(et,yt){return Ae(yt,function(pt){return[pt,et[pt]]})}function dl(et){return et&&et.slice(0,ec(et)+1).replace(Ea,"")}function Os(et){return function(yt){return et(yt)}}function dp(et,yt){return Ae(yt,function(pt){return et[pt]})}function Mu(et,yt){return et.has(yt)}function pp(et,yt){for(var pt=-1,Gt=et.length;++pt<Gt&&Lt(yt,et[pt],0)>-1;);return pt}function mp(et,yt){for(var pt=et.length;pt--&&Lt(yt,et[pt],0)>-1;);return pt}function ku(et,yt){for(var pt=et.length,Gt=0;pt--;)et[pt]===yt&&++Gt;return Gt}var Vu=as(ll),_v=as(Ia);function of(et){return"\\"+Ai[et]}function qg(et,yt){return et==null?e:et[yt]}function pl(et){return ol.test(et)}function gp(et){return on.test(et)}function _p(et){for(var yt,pt=[];!(yt=et.next()).done;)pt.push(yt.value);return pt}function lf(et){var yt=-1,pt=Array(et.size);return et.forEach(function(Gt,fe){pt[++yt]=[fe,Gt]}),pt}function yp(et,yt){return function(pt){return et(yt(pt))}}function Va(et,yt){for(var pt=-1,Gt=et.length,fe=0,xe=[];++pt<Gt;){var Sn=et[pt];(Sn===yt||Sn===T)&&(et[pt]=T,xe[fe++]=pt)}return xe}function cf(et){var yt=-1,pt=Array(et.size);return et.forEach(function(Gt){pt[++yt]=Gt}),pt}function yv(et){var yt=-1,pt=Array(et.size);return et.forEach(function(Gt){pt[++yt]=[Gt,Gt]}),pt}function vv(et,yt,pt){for(var Gt=pt-1,fe=et.length;++Gt<fe;)if(et[Gt]===yt)return Gt;return-1}function Tv(et,yt,pt){for(var Gt=pt+1;Gt--;)if(et[Gt]===yt)return Gt;return Gt}function tc(et){return pl(et)?Hg(et):S(et)}function In(et){return pl(et)?Gg(et):x(et)}function ec(et){for(var yt=et.length;yt--&&Ca.test(et.charAt(yt)););return yt}var Fg=as(Nr);function Hg(et){for(var yt=Ns.lastIndex=0;Ns.test(et);)++yt;return yt}function Gg(et){return et.match(Ns)||[]}function Kg(et){return et.match(er)||[]}var vp=(function et(yt){yt=yt==null?bn:nc.defaults(bn.Object(),yt,nc.pick(bn,sa));var pt=yt.Array,Gt=yt.Date,fe=yt.Error,xe=yt.Function,Sn=yt.Math,nn=yt.Object,uf=yt.RegExp,ml=yt.String,Ds=yt.TypeError,ju=pt.prototype,$g=xe.prototype,ic=nn.prototype,hf=yt["__core-js_shared__"],ff=$g.toString,Xe=ic.hasOwnProperty,Wg=0,df=(function(){var l=/[^.]+$/.exec(hf&&hf.keys&&hf.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""})(),os=ic.toString,pf=ff.call(nn),nr=bn._,sc=uf("^"+ff.call(Xe).replace(Sr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rc=cl?yt.Buffer:e,kr=yt.Symbol,gl=yt.Uint8Array,mf=rc?rc.allocUnsafe:e,oa=yp(nn.getPrototypeOf,nn),Tp=nn.create,Lu=ic.propertyIsEnumerable,ja=ju.splice,Yg=kr?kr.isConcatSpreadable:e,Ei=kr?kr.iterator:e,La=kr?kr.toStringTag:e,ir=(function(){try{var l=Ro(nn,"defineProperty");return l({},"",{}),l}catch{}})(),Qg=yt.clearTimeout!==bn.clearTimeout&&yt.clearTimeout,gf=Gt&&Gt.now!==bn.Date.now&&Gt.now,_l=yt.setTimeout!==bn.setTimeout&&yt.setTimeout,ac=Sn.ceil,Pu=Sn.floor,Uu=nn.getOwnPropertySymbols,Xg=rc?rc.isBuffer:e,Ms=yt.isFinite,oc=ju.join,lc=yp(nn.keys,nn),Ln=Sn.max,ti=Sn.min,sr=Gt.now,rr=yt.parseInt,Pa=Sn.random,la=ju.reverse,ar=Ro(yt,"DataView"),ks=Ro(yt,"Map"),_f=Ro(yt,"Promise"),go=Ro(yt,"Set"),yl=Ro(yt,"WeakMap"),cc=Ro(nn,"create"),ei=yl&&new yl,Ze={},De=Ui(ar),_o=Ui(ks),or=Ui(_f),wp=Ui(go),yo=Ui(yl),zu=kr?kr.prototype:e,uc=zu?zu.valueOf:e,vl=zu?zu.toString:e;function L(l){if(zn(l)&&!de(l)&&!(l instanceof ge)){if(l instanceof ls)return l;if(Xe.call(l,"__wrapped__"))return Wf(l)}return new ls(l)}var vo=(function(){function l(){}return function(h){if(!En(h))return{};if(Tp)return Tp(h);l.prototype=h;var y=new l;return l.prototype=e,y}})();function To(){}function ls(l,h){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=e}L.templateSettings={escape:Es,evaluate:co,interpolate:uo,variable:"",imports:{_:L}},L.prototype=To.prototype,L.prototype.constructor=L,ls.prototype=vo(To.prototype),ls.prototype.constructor=ls;function ge(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function Ua(){var l=new ge(this.__wrapped__);return l.__actions__=$i(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=$i(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=$i(this.__views__),l}function wo(){if(this.__filtered__){var l=new ge(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function za(){var l=this.__wrapped__.value(),h=this.__dir__,y=de(l),b=h<0,I=y?l.length:0,q=Nv(0,I,this.__views__),W=q.start,J=q.end,st=J-W,Et=b?J:W-1,xt=this.__iteratees__,Dt=xt.length,qt=0,Jt=ti(st,this.__takeCount__);if(!y||!b&&I==st&&Jt==st)return jp(l,this.__actions__);var ce=[];t:for(;st--&&qt<Jt;){Et+=h;for(var Ee=-1,ue=l[Et];++Ee<Dt;){var Me=xt[Ee],Ue=Me.iteratee,Kr=Me.type,Ks=Ue(ue);if(Kr==Mt)ue=Ks;else if(!Ks){if(Kr==At)continue t;break t}}ce[qt++]=ue}return ce}ge.prototype=vo(To.prototype),ge.prototype.constructor=ge;function Ba(l){var h=-1,y=l==null?0:l.length;for(this.clear();++h<y;){var b=l[h];this.set(b[0],b[1])}}function bp(){this.__data__=cc?cc(null):{},this.size=0}function hc(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h}function yf(l){var h=this.__data__;if(cc){var y=h[l];return y===g?e:y}return Xe.call(h,l)?h[l]:e}function Tl(l){var h=this.__data__;return cc?h[l]!==e:Xe.call(h,l)}function Ci(l,h){var y=this.__data__;return this.size+=this.has(l)?0:1,y[l]=cc&&h===e?g:h,this}Ba.prototype.clear=bp,Ba.prototype.delete=hc,Ba.prototype.get=yf,Ba.prototype.has=Tl,Ba.prototype.set=Ci;function lr(l){var h=-1,y=l==null?0:l.length;for(this.clear();++h<y;){var b=l[h];this.set(b[0],b[1])}}function Zg(){this.__data__=[],this.size=0}function wv(l){var h=this.__data__,y=ca(h,l);if(y<0)return!1;var b=h.length-1;return y==b?h.pop():ja.call(h,y,1),--this.size,!0}function bv(l){var h=this.__data__,y=ca(h,l);return y<0?e:h[y][1]}function Sv(l){return ca(this.__data__,l)>-1}function ni(l,h){var y=this.__data__,b=ca(y,l);return b<0?(++this.size,y.push([l,h])):y[b][1]=h,this}lr.prototype.clear=Zg,lr.prototype.delete=wv,lr.prototype.get=bv,lr.prototype.has=Sv,lr.prototype.set=ni;function Vr(l){var h=-1,y=l==null?0:l.length;for(this.clear();++h<y;){var b=l[h];this.set(b[0],b[1])}}function Bu(){this.size=0,this.__data__={hash:new Ba,map:new(ks||lr),string:new Ba}}function qu(l){var h=ah(this,l).delete(l);return this.size-=h?1:0,h}function Sp(l){return ah(this,l).get(l)}function fc(l){return ah(this,l).has(l)}function dc(l,h){var y=ah(this,l),b=y.size;return y.set(l,h),this.size+=y.size==b?0:1,this}Vr.prototype.clear=Bu,Vr.prototype.delete=qu,Vr.prototype.get=Sp,Vr.prototype.has=fc,Vr.prototype.set=dc;function wl(l){var h=-1,y=l==null?0:l.length;for(this.__data__=new Vr;++h<y;)this.add(l[h])}function Jg(l){return this.__data__.set(l,g),this}function Av(l){return this.__data__.has(l)}wl.prototype.add=wl.prototype.push=Jg,wl.prototype.has=Av;function cr(l){var h=this.__data__=new lr(l);this.size=h.size}function bl(){this.__data__=new lr,this.size=0}function Ap(l){var h=this.__data__,y=h.delete(l);return this.size=h.size,y}function vf(l){return this.__data__.get(l)}function t_(l){return this.__data__.has(l)}function pc(l,h){var y=this.__data__;if(y instanceof lr){var b=y.__data__;if(!ks||b.length<a-1)return b.push([l,h]),this.size=++y.size,this;y=this.__data__=new Vr(b)}return y.set(l,h),this.size=y.size,this}cr.prototype.clear=bl,cr.prototype.delete=Ap,cr.prototype.get=vf,cr.prototype.has=t_,cr.prototype.set=pc;function Tf(l,h){var y=de(l),b=!y&&Il(l),I=!y&&!b&&Vo(l),q=!y&&!b&&!I&&jo(l),W=y||b||I||q,J=W?ka(l.length,ml):[],st=J.length;for(var Et in l)(h||Xe.call(l,Et))&&!(W&&(Et=="length"||I&&(Et=="offset"||Et=="parent")||q&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||qr(Et,st)))&&J.push(Et);return J}function Fu(l){var h=l.length;return h?l[bc(0,h-1)]:e}function wf(l,h){return ph($i(l),Lr(h,0,l.length))}function e_(l){return ph($i(l))}function bf(l,h,y){(y!==e&&!Fs(l[h],y)||y===e&&!(h in l))&&Vs(l,h,y)}function jr(l,h,y){var b=l[h];(!(Xe.call(l,h)&&Fs(b,y))||y===e&&!(h in l))&&Vs(l,h,y)}function ca(l,h){for(var y=l.length;y--;)if(Fs(l[y][0],h))return y;return-1}function n_(l,h,y,b){return ua(l,function(I,q,W){h(b,I,y(I),W)}),b}function Ep(l,h){return l&&dr(h,_i(h),l)}function mc(l,h){return l&&dr(h,ys(h),l)}function Vs(l,h,y){h=="__proto__"&&ir?ir(l,h,{configurable:!0,enumerable:!0,value:y,writable:!0}):l[h]=y}function gc(l,h){for(var y=-1,b=h.length,I=pt(b),q=l==null;++y<b;)I[y]=q?e:Lo(l,h[y]);return I}function Lr(l,h,y){return l===l&&(y!==e&&(l=l<=y?l:y),h!==e&&(l=l>=h?l:h)),l}function Ki(l,h,y,b,I,q){var W,J=h&w,st=h&E,Et=h&N;if(y&&(W=I?y(l,b,I,q):y(l)),W!==e)return W;if(!En(l))return l;var xt=de(l);if(xt){if(W=v_(l),!J)return $i(l,W)}else{var Dt=Ri(l),qt=Dt==be||Dt==yn;if(Vo(l))return Up(l,J);if(Dt==Yt||Dt==It||qt&&!I){if(W=st||qt?{}:Jp(l),!J)return st?p_(l,mc(W,l)):d_(l,Ep(W,l))}else{if(!Qe[Dt])return I?l:{};W=T_(l,Dt,J)}}q||(q=new cr);var Jt=q.get(l);if(Jt)return Jt;q.set(l,W),Ih(l)?l.forEach(function(ue){W.add(Ki(ue,h,y,ue,l,q))}):ny(l)&&l.forEach(function(ue,Me){W.set(Me,Ki(ue,h,y,Me,l,q))});var ce=Et?st?Zp:zf:st?ys:_i,Ee=xt?e:ce(l);return Gn(Ee||l,function(ue,Me){Ee&&(Me=ue,ue=l[Me]),jr(W,Me,Ki(ue,h,y,Me,l,q))}),W}function i_(l){var h=_i(l);return function(y){return bo(y,l,h)}}function bo(l,h,y){var b=y.length;if(l==null)return!b;for(l=nn(l);b--;){var I=y[b],q=h[I],W=l[I];if(W===e&&!(I in l)||!q(W))return!1}return!0}function Cp(l,h,y){if(typeof l!="function")throw new Ds(f);return dh(function(){l.apply(e,y)},h)}function ur(l,h,y,b){var I=-1,q=fl,W=!0,J=l.length,st=[],Et=h.length;if(!J)return st;y&&(h=Ae(h,Os(y))),b?(q=aa,W=!1):h.length>=a&&(q=Mu,W=!1,h=new wl(h));t:for(;++I<J;){var xt=l[I],Dt=y==null?xt:y(xt);if(xt=b||xt!==0?xt:0,W&&Dt===Dt){for(var qt=Et;qt--;)if(h[qt]===Dt)continue t;st.push(xt)}else q(h,Dt,b)||st.push(xt)}return st}var ua=Fp(Ur),Sf=Fp(Ef,!0);function So(l,h){var y=!0;return ua(l,function(b,I,q){return y=!!h(b,I,q),y}),y}function Pr(l,h,y){for(var b=-1,I=l.length;++b<I;){var q=l[b],W=h(q);if(W!=null&&(J===e?W===W&&!_s(W):y(W,J)))var J=W,st=q}return st}function Hu(l,h,y,b){var I=l.length;for(y=le(y),y<0&&(y=-y>I?0:I+y),b=b===e||b>I?I:le(b),b<0&&(b+=I),b=y>b?0:Pm(b);y<b;)l[y++]=h;return l}function Af(l,h){var y=[];return ua(l,function(b,I,q){h(b,I,q)&&y.push(b)}),y}function ci(l,h,y,b,I){var q=-1,W=l.length;for(y||(y=em),I||(I=[]);++q<W;){var J=l[q];h>0&&y(J)?h>1?ci(J,h-1,y,b,I):Or(I,J):b||(I[I.length]=J)}return I}var Sl=Hp(),_c=Hp(!0);function Ur(l,h){return l&&Sl(l,h,_i)}function Ef(l,h){return l&&_c(l,h,_i)}function qa(l,h){return Ir(h,function(y){return Hs(l[y])})}function ha(l,h){h=Us(h,l);for(var y=0,b=h.length;l!=null&&y<b;)l=l[hs(h[y++])];return y&&y==b?l:e}function xp(l,h,y){var b=h(l);return de(l)?b:Or(b,y(l))}function xi(l){return l==null?l===e?tn:Pt:La&&La in nn(l)?oh(l):im(l)}function Gu(l,h){return l>h}function js(l,h){return l!=null&&Xe.call(l,h)}function hr(l,h){return l!=null&&h in nn(l)}function Ao(l,h,y){return l>=ti(h,y)&&l<Ln(h,y)}function Ku(l,h,y){for(var b=y?aa:fl,I=l[0].length,q=l.length,W=q,J=pt(q),st=1/0,Et=[];W--;){var xt=l[W];W&&h&&(xt=Ae(xt,Os(h))),st=ti(xt.length,st),J[W]=!y&&(h||I>=120&&xt.length>=120)?new wl(W&&xt):e}xt=l[0];var Dt=-1,qt=J[0];t:for(;++Dt<I&&Et.length<st;){var Jt=xt[Dt],ce=h?h(Jt):Jt;if(Jt=y||Jt!==0?Jt:0,!(qt?Mu(qt,ce):b(Et,ce,y))){for(W=q;--W;){var Ee=J[W];if(!(Ee?Mu(Ee,ce):b(l[W],ce,y)))continue t}qt&&qt.push(ce),Et.push(Jt)}}return Et}function s_(l,h,y,b){return Ur(l,function(I,q,W){h(b,y(I),q,W)}),b}function fr(l,h,y){h=Us(h,l),l=hh(l,h);var b=l==null?l:l[hs(Tn(h))];return b==null?e:ji(b,l,y)}function cs(l){return zn(l)&&xi(l)==It}function Kn(l){return zn(l)&&xi(l)==ai}function Cf(l){return zn(l)&&xi(l)==Zt}function Ls(l,h,y,b,I){return l===h?!0:l==null||h==null||!zn(l)&&!zn(h)?l!==l&&h!==h:_e(l,h,y,b,Ls,I)}function _e(l,h,y,b,I,q){var W=de(l),J=de(h),st=W?jt:Ri(l),Et=J?jt:Ri(h);st=st==It?Yt:st,Et=Et==It?Yt:Et;var xt=st==Yt,Dt=Et==Yt,qt=st==Et;if(qt&&Vo(l)){if(!Vo(h))return!1;W=!0,xt=!1}if(qt&&!xt)return q||(q=new cr),W||jo(l)?sh(l,h,y,b,I,q):y_(l,h,st,y,b,I,q);if(!(y&O)){var Jt=xt&&Xe.call(l,"__wrapped__"),ce=Dt&&Xe.call(h,"__wrapped__");if(Jt||ce){var Ee=Jt?l.value():l,ue=ce?h.value():h;return q||(q=new cr),I(Ee,ue,y,b,q)}}return qt?(q||(q=new cr),Xp(l,h,y,b,I,q)):!1}function ln(l){return zn(l)&&Ri(l)==ae}function Pn(l,h,y,b){var I=y.length,q=I,W=!b;if(l==null)return!q;for(l=nn(l);I--;){var J=y[I];if(W&&J[2]?J[1]!==l[J[0]]:!(J[0]in l))return!1}for(;++I<q;){J=y[I];var st=J[0],Et=l[st],xt=J[1];if(W&&J[2]){if(Et===e&&!(st in l))return!1}else{var Dt=new cr;if(b)var qt=b(Et,xt,st,l,h,Dt);if(!(qt===e?Ls(xt,Et,O|U,b,Dt):qt))return!1}}return!0}function $u(l){if(!En(l)||w_(l))return!1;var h=Hs(l)?sc:pi;return h.test(Ui(l))}function yc(l){return zn(l)&&xi(l)==Vt}function Al(l){return zn(l)&&Ri(l)==te}function xf(l){return zn(l)&&od(l.length)&&!!Ke[xi(l)]}function vc(l){return typeof l=="function"?l:l==null?Yi:typeof l=="object"?de(l)?Rp(l[0],l[1]):Nf(l):j(l)}function Eo(l){if(!xc(l))return lc(l);var h=[];for(var y in nn(l))Xe.call(l,y)&&y!="constructor"&&h.push(y);return h}function Ev(l){if(!En(l))return Ha(l);var h=xc(l),y=[];for(var b in l)b=="constructor"&&(h||!Xe.call(l,b))||y.push(b);return y}function An(l,h){return l<h}function Rf(l,h){var y=-1,b=gs(l)?pt(l.length):[];return ua(l,function(I,q,W){b[++y]=h(I,q,W)}),b}function Nf(l){var h=Bf(l);return h.length==1&&h[0][2]?Kf(h[0][0],h[0][1]):function(y){return y===l||Pn(y,l,h)}}function Rp(l,h){return ch(l)&&da(h)?Kf(hs(l),h):function(y){var b=Lo(y,l);return b===e&&b===h?zm(y,l):Ls(h,b,O|U)}}function Wu(l,h,y,b,I){l!==h&&Sl(h,function(q,W){if(I||(I=new cr),En(q))Cv(l,h,W,y,Wu,b,I);else{var J=b?b(dn(l,W),q,W+"",l,h,I):e;J===e&&(J=q),bf(l,W,J)}},ys)}function Cv(l,h,y,b,I,q,W){var J=dn(l,y),st=dn(h,y),Et=W.get(st);if(Et){bf(l,y,Et);return}var xt=q?q(J,st,y+"",l,h,W):e,Dt=xt===e;if(Dt){var qt=de(st),Jt=!qt&&Vo(st),ce=!qt&&!Jt&&jo(st);xt=st,qt||Jt||ce?de(J)?xt=J:Wn(J)?xt=$i(J):Jt?(Dt=!1,xt=Up(st,!0)):ce?(Dt=!1,xt=zp(st,!0)):xt=[]:Rh(st)||Il(st)?(xt=J,Il(J)?xt=ld(J):(!En(J)||Hs(J))&&(xt=Jp(st))):Dt=!1}Dt&&(W.set(st,xt),I(xt,st,b,q,W),W.delete(st)),bf(l,y,xt)}function If(l,h){var y=l.length;if(y)return h+=h<0?y:0,qr(h,y)?l[h]:e}function Of(l,h,y){h.length?h=Ae(h,function(q){return de(q)?function(W){return ha(W,q.length===1?q[0]:q)}:q}):h=[Yi];var b=-1;h=Ae(h,Os(se()));var I=Rf(l,function(q,W,J){var st=Ae(h,function(Et){return Et(q)});return{criteria:st,index:++b,value:q}});return Mr(I,function(q,W){return f_(q,W,y)})}function Np(l,h){return Li(l,h,function(y,b){return zm(l,b)})}function Li(l,h,y){for(var b=-1,I=h.length,q={};++b<I;){var W=h[b],J=ha(l,W);y(J,W)&&Sc(q,Us(W,l),J)}return q}function $n(l){return function(h){return ha(h,l)}}function Tc(l,h,y,b){var I=b?me:Lt,q=-1,W=h.length,J=l;for(l===h&&(h=$i(h)),y&&(J=Ae(l,Os(y)));++q<W;)for(var st=0,Et=h[q],xt=y?y(Et):Et;(st=I(J,xt,st,b))>-1;)J!==l&&ja.call(J,st,1),ja.call(l,st,1);return l}function wc(l,h){for(var y=l?h.length:0,b=y-1;y--;){var I=h[y];if(y==b||I!==q){var q=I;qr(I)?ja.call(l,I,1):Yu(l,I)}}return l}function bc(l,h){return l+Pu(Pa()*(h-l+1))}function Ip(l,h,y,b){for(var I=-1,q=Ln(ac((h-l)/(y||1)),0),W=pt(q);q--;)W[b?q:++I]=l,l+=y;return W}function zr(l,h){var y="";if(!l||h<1||h>_t)return y;do h%2&&(y+=l),h=Pu(h/2),h&&(l+=l);while(h);return y}function ye(l,h){return $f(sm(l,h,Yi),l+"")}function Op(l){return Fu(Bc(l))}function Dp(l,h){var y=Bc(l);return ph(y,Lr(h,0,y.length))}function Sc(l,h,y,b){if(!En(l))return l;h=Us(h,l);for(var I=-1,q=h.length,W=q-1,J=l;J!=null&&++I<q;){var st=hs(h[I]),Et=y;if(st==="__proto__"||st==="constructor"||st==="prototype")return l;if(I!=W){var xt=J[st];Et=b?b(xt,st,J):e,Et===e&&(Et=En(xt)?xt:qr(h[I+1])?[]:{})}jr(J,st,Et),J=J[st]}return l}var Mp=ei?function(l,h){return ei.set(l,h),l}:Yi,r_=ir?function(l,h){return ir(l,"toString",{configurable:!0,enumerable:!1,value:Fc(h),writable:!0})}:Yi;function a_(l){return ph(Bc(l))}function Ps(l,h,y){var b=-1,I=l.length;h<0&&(h=-h>I?0:I+h),y=y>I?I:y,y<0&&(y+=I),I=h>y?0:y-h>>>0,h>>>=0;for(var q=pt(I);++b<I;)q[b]=l[b+h];return q}function o_(l,h){var y;return ua(l,function(b,I,q){return y=h(b,I,q),!y}),!!y}function Ac(l,h,y){var b=0,I=l==null?b:l.length;if(typeof h=="number"&&h===h&&I<=wt){for(;b<I;){var q=b+I>>>1,W=l[q];W!==null&&!_s(W)&&(y?W<=h:W<h)?b=q+1:I=q}return I}return Df(l,h,Yi,y)}function Df(l,h,y,b){var I=0,q=l==null?0:l.length;if(q===0)return 0;h=y(h);for(var W=h!==h,J=h===null,st=_s(h),Et=h===e;I<q;){var xt=Pu((I+q)/2),Dt=y(l[xt]),qt=Dt!==e,Jt=Dt===null,ce=Dt===Dt,Ee=_s(Dt);if(W)var ue=b||ce;else Et?ue=ce&&(b||qt):J?ue=ce&&qt&&(b||!Jt):st?ue=ce&&qt&&!Jt&&(b||!Ee):Jt||Ee?ue=!1:ue=b?Dt<=h:Dt<h;ue?I=xt+1:q=xt}return ti(q,at)}function l_(l,h){for(var y=-1,b=l.length,I=0,q=[];++y<b;){var W=l[y],J=h?h(W):W;if(!y||!Fs(J,st)){var st=J;q[I++]=W===0?0:W}}return q}function kp(l){return typeof l=="number"?l:_s(l)?ft:+l}function us(l){if(typeof l=="string")return l;if(de(l))return Ae(l,us)+"";if(_s(l))return vl?vl.call(l):"";var h=l+"";return h=="0"&&1/l==-rt?"-0":h}function Fa(l,h,y){var b=-1,I=fl,q=l.length,W=!0,J=[],st=J;if(y)W=!1,I=aa;else if(q>=a){var Et=h?null:g_(l);if(Et)return cf(Et);W=!1,I=Mu,st=new wl}else st=h?[]:J;t:for(;++b<q;){var xt=l[b],Dt=h?h(xt):xt;if(xt=y||xt!==0?xt:0,W&&Dt===Dt){for(var qt=st.length;qt--;)if(st[qt]===Dt)continue t;h&&st.push(Dt),J.push(xt)}else I(st,Dt,y)||(st!==J&&st.push(Dt),J.push(xt))}return J}function Yu(l,h){return h=Us(h,l),l=hh(l,h),l==null||delete l[hs(Tn(h))]}function Vp(l,h,y,b){return Sc(l,h,y(ha(l,h)),b)}function Qu(l,h,y,b){for(var I=l.length,q=b?I:-1;(b?q--:++q<I)&&h(l[q],q,l););return y?Ps(l,b?0:q,b?q+1:I):Ps(l,b?q+1:0,b?I:q)}function jp(l,h){var y=l;return y instanceof ge&&(y=y.value()),Zl(h,function(b,I){return I.func.apply(I.thisArg,Or([b],I.args))},y)}function Mf(l,h,y){var b=l.length;if(b<2)return b?Fa(l[0]):[];for(var I=-1,q=pt(b);++I<b;)for(var W=l[I],J=-1;++J<b;)J!=I&&(q[I]=ur(q[I]||W,l[J],h,y));return Fa(ci(q,1),h,y)}function Lp(l,h,y){for(var b=-1,I=l.length,q=h.length,W={};++b<I;){var J=b<q?h[b]:e;y(W,l[b],J)}return W}function Pp(l){return Wn(l)?l:[]}function kf(l){return typeof l=="function"?l:Yi}function Us(l,h){return de(l)?l:ch(l,h)?[l]:rm(Je(l))}var c_=ye;function Br(l,h,y){var b=l.length;return y=y===e?b:y,!h&&y>=b?l:Ps(l,h,y)}var Xu=Qg||function(l){return bn.clearTimeout(l)};function Up(l,h){if(h)return l.slice();var y=l.length,b=mf?mf(y):new l.constructor(y);return l.copy(b),b}function Zu(l){var h=new l.constructor(l.byteLength);return new gl(h).set(new gl(l)),h}function xv(l,h){var y=h?Zu(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.byteLength)}function u_(l){var h=new l.constructor(l.source,Ge.exec(l));return h.lastIndex=l.lastIndex,h}function h_(l){return uc?nn(uc.call(l)):{}}function zp(l,h){var y=h?Zu(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.length)}function Bp(l,h){if(l!==h){var y=l!==e,b=l===null,I=l===l,q=_s(l),W=h!==e,J=h===null,st=h===h,Et=_s(h);if(!J&&!Et&&!q&&l>h||q&&W&&st&&!J&&!Et||b&&W&&st||!y&&st||!I)return 1;if(!b&&!q&&!Et&&l<h||Et&&y&&I&&!b&&!q||J&&y&&I||!W&&I||!st)return-1}return 0}function f_(l,h,y){for(var b=-1,I=l.criteria,q=h.criteria,W=I.length,J=y.length;++b<W;){var st=Bp(I[b],q[b]);if(st){if(b>=J)return st;var Et=y[b];return st*(Et=="desc"?-1:1)}}return l.index-h.index}function Vf(l,h,y,b){for(var I=-1,q=l.length,W=y.length,J=-1,st=h.length,Et=Ln(q-W,0),xt=pt(st+Et),Dt=!b;++J<st;)xt[J]=h[J];for(;++I<W;)(Dt||I<q)&&(xt[y[I]]=l[I]);for(;Et--;)xt[J++]=l[I++];return xt}function qp(l,h,y,b){for(var I=-1,q=l.length,W=-1,J=y.length,st=-1,Et=h.length,xt=Ln(q-J,0),Dt=pt(xt+Et),qt=!b;++I<xt;)Dt[I]=l[I];for(var Jt=I;++st<Et;)Dt[Jt+st]=h[st];for(;++W<J;)(qt||I<q)&&(Dt[Jt+y[W]]=l[I++]);return Dt}function $i(l,h){var y=-1,b=l.length;for(h||(h=pt(b));++y<b;)h[y]=l[y];return h}function dr(l,h,y,b){var I=!y;y||(y={});for(var q=-1,W=h.length;++q<W;){var J=h[q],st=b?b(y[J],l[J],J,y,l):e;st===e&&(st=l[J]),I?Vs(y,J,st):jr(y,J,st)}return y}function d_(l,h){return dr(l,qf(l),h)}function p_(l,h){return dr(l,lh(l),h)}function jf(l,h){return function(y,b){var I=de(y)?rf:n_,q=h?h():{};return I(y,l,se(b,2),q)}}function Co(l){return ye(function(h,y){var b=-1,I=y.length,q=I>1?y[I-1]:e,W=I>2?y[2]:e;for(q=l.length>3&&typeof q=="function"?(I--,q):e,W&&Pi(y[0],y[1],W)&&(q=I<3?e:q,I=1),h=nn(h);++b<I;){var J=y[b];J&&l(h,J,b,q)}return h})}function Fp(l,h){return function(y,b){if(y==null)return y;if(!gs(y))return l(y,b);for(var I=y.length,q=h?I:-1,W=nn(y);(h?q--:++q<I)&&b(W[q],q,W)!==!1;);return y}}function Hp(l){return function(h,y,b){for(var I=-1,q=nn(h),W=b(h),J=W.length;J--;){var st=W[l?J:++I];if(y(q[st],st,q)===!1)break}return h}}function Gp(l,h,y){var b=h&D,I=Ju(l);function q(){var W=this&&this!==bn&&this instanceof q?I:l;return W.apply(b?y:this,arguments)}return q}function Kp(l){return function(h){h=Je(h);var y=pl(h)?In(h):e,b=y?y[0]:h.charAt(0),I=y?Br(y,1).join(""):h.slice(1);return b[l]()+I}}function El(l){return function(h){return Zl(Ny(qc(h).replace(Ql,"")),l,"")}}function Ju(l){return function(){var h=arguments;switch(h.length){case 0:return new l;case 1:return new l(h[0]);case 2:return new l(h[0],h[1]);case 3:return new l(h[0],h[1],h[2]);case 4:return new l(h[0],h[1],h[2],h[3]);case 5:return new l(h[0],h[1],h[2],h[3],h[4]);case 6:return new l(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new l(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var y=vo(l.prototype),b=l.apply(y,h);return En(b)?b:y}}function Rv(l,h,y){var b=Ju(l);function I(){for(var q=arguments.length,W=pt(q),J=q,st=Un(I);J--;)W[J]=arguments[J];var Et=q<3&&W[0]!==st&&W[q-1]!==st?[]:Va(W,st);if(q-=Et.length,q<y)return Uf(l,h,Cc,I.placeholder,e,W,Et,e,e,y-q);var xt=this&&this!==bn&&this instanceof I?b:l;return ji(xt,this,W)}return I}function $p(l){return function(h,y,b){var I=nn(h);if(!gs(h)){var q=se(y,3);h=_i(h),y=function(J){return q(I[J],J,I)}}var W=l(h,y,b);return W>-1?I[q?h[W]:W]:e}}function Ec(l){return fa(function(h){var y=h.length,b=y,I=ls.prototype.thru;for(l&&h.reverse();b--;){var q=h[b];if(typeof q!="function")throw new Ds(f);if(I&&!W&&On(q)=="wrapper")var W=new ls([],!0)}for(b=W?b:y;++b<y;){q=h[b];var J=On(q),st=J=="wrapper"?rh(q):e;st&&uh(st[0])&&st[1]==(R|Q|K|C)&&!st[4].length&&st[9]==1?W=W[On(st[0])].apply(W,st[3]):W=q.length==1&&uh(q)?W[J]():W.thru(q)}return function(){var Et=arguments,xt=Et[0];if(W&&Et.length==1&&de(xt))return W.plant(xt).value();for(var Dt=0,qt=y?h[Dt].apply(this,Et):xt;++Dt<y;)qt=h[Dt].call(this,qt);return qt}})}function Cc(l,h,y,b,I,q,W,J,st,Et){var xt=h&R,Dt=h&D,qt=h&z,Jt=h&(Q|nt),ce=h&M,Ee=qt?e:Ju(l);function ue(){for(var Me=arguments.length,Ue=pt(Me),Kr=Me;Kr--;)Ue[Kr]=arguments[Kr];if(Jt)var Ks=Un(ue),$r=ku(Ue,Ks);if(b&&(Ue=Vf(Ue,b,I,Jt)),q&&(Ue=qp(Ue,q,W,Jt)),Me-=$r,Jt&&Me<Et){var hi=Va(Ue,Ks);return Uf(l,h,Cc,ue.placeholder,y,Ue,hi,J,st,Et-Me)}var Ja=Dt?y:this,Dl=qt?Ja[l]:l;return Me=Ue.length,J?Ue=fh(Ue,J):ce&&Me>1&&Ue.reverse(),xt&&st<Me&&(Ue.length=st),this&&this!==bn&&this instanceof ue&&(Dl=Ee||Ju(Dl)),Dl.apply(Ja,Ue)}return ue}function th(l,h){return function(y,b){return s_(y,l,h(b),{})}}function eh(l,h){return function(y,b){var I;if(y===e&&b===e)return h;if(y!==e&&(I=y),b!==e){if(I===e)return b;typeof y=="string"||typeof b=="string"?(y=us(y),b=us(b)):(y=kp(y),b=kp(b)),I=l(y,b)}return I}}function Lf(l){return fa(function(h){return h=Ae(h,Os(se())),ye(function(y){var b=this;return l(h,function(I){return ji(I,b,y)})})})}function xo(l,h){h=h===e?" ":us(h);var y=h.length;if(y<2)return y?zr(h,l):h;var b=zr(h,ac(l/tc(h)));return pl(h)?Br(In(b),0,l).join(""):b.slice(0,l)}function m_(l,h,y,b){var I=h&D,q=Ju(l);function W(){for(var J=-1,st=arguments.length,Et=-1,xt=b.length,Dt=pt(xt+st),qt=this&&this!==bn&&this instanceof W?q:l;++Et<xt;)Dt[Et]=b[Et];for(;st--;)Dt[Et++]=arguments[++J];return ji(qt,I?y:this,Dt)}return W}function Pf(l){return function(h,y,b){return b&&typeof b!="number"&&Pi(h,y,b)&&(y=b=e),h=Xa(h),y===e?(y=h,h=0):y=Xa(y),b=b===e?h<y?1:-1:Xa(b),Ip(h,y,b,l)}}function nh(l){return function(h,y){return typeof h=="string"&&typeof y=="string"||(h=Gs(h),y=Gs(y)),l(h,y)}}function Uf(l,h,y,b,I,q,W,J,st,Et){var xt=h&Q,Dt=xt?W:e,qt=xt?e:W,Jt=xt?q:e,ce=xt?e:q;h|=xt?K:X,h&=~(xt?X:K),h&$||(h&=-4);var Ee=[l,h,I,Jt,Dt,ce,qt,J,st,Et],ue=y.apply(e,Ee);return uh(l)&&S_(ue,Ee),ue.placeholder=b,Rc(ue,l,h)}function ih(l){var h=Sn[l];return function(y,b){if(y=Gs(y),b=b==null?0:ti(le(b),292),b&&Ms(y)){var I=(Je(y)+"e").split("e"),q=h(I[0]+"e"+(+I[1]+b));return I=(Je(q)+"e").split("e"),+(I[0]+"e"+(+I[1]-b))}return h(y)}}var g_=go&&1/cf(new go([,-0]))[1]==rt?function(l){return new go(l)}:o;function Wp(l){return function(h){var y=Ri(h);return y==ae?lf(h):y==te?yv(h):Jl(h,l(h))}}function Wi(l,h,y,b,I,q,W,J){var st=h&z;if(!st&&typeof l!="function")throw new Ds(f);var Et=b?b.length:0;if(Et||(h&=-97,b=I=e),W=W===e?W:Ln(le(W),0),J=J===e?J:le(J),Et-=I?I.length:0,h&X){var xt=b,Dt=I;b=I=e}var qt=st?e:rh(l),Jt=[l,h,y,b,I,xt,Dt,q,W,J];if(qt&&b_(Jt,qt),l=Jt[0],h=Jt[1],y=Jt[2],b=Jt[3],I=Jt[4],J=Jt[9]=Jt[9]===e?st?0:l.length:Ln(Jt[9]-Et,0),!J&&h&(Q|nt)&&(h&=-25),!h||h==D)var ce=Gp(l,h,y);else h==Q||h==nt?ce=Rv(l,h,J):(h==K||h==(D|K))&&!I.length?ce=m_(l,h,y,b):ce=Cc.apply(e,Jt);var Ee=qt?Mp:S_;return Rc(Ee(ce,Jt),l,h)}function Yp(l,h,y,b){return l===e||Fs(l,ic[y])&&!Xe.call(b,y)?h:l}function Qp(l,h,y,b,I,q){return En(l)&&En(h)&&(q.set(h,l),Wu(l,h,e,Qp,q),q.delete(h)),l}function __(l){return Rh(l)?e:l}function sh(l,h,y,b,I,q){var W=y&O,J=l.length,st=h.length;if(J!=st&&!(W&&st>J))return!1;var Et=q.get(l),xt=q.get(h);if(Et&&xt)return Et==h&&xt==l;var Dt=-1,qt=!0,Jt=y&U?new wl:e;for(q.set(l,h),q.set(h,l);++Dt<J;){var ce=l[Dt],Ee=h[Dt];if(b)var ue=W?b(Ee,ce,Dt,h,l,q):b(ce,Ee,Dt,l,h,q);if(ue!==e){if(ue)continue;qt=!1;break}if(Jt){if(!p(h,function(Me,Ue){if(!Mu(Jt,Ue)&&(ce===Me||I(ce,Me,y,b,q)))return Jt.push(Ue)})){qt=!1;break}}else if(!(ce===Ee||I(ce,Ee,y,b,q))){qt=!1;break}}return q.delete(l),q.delete(h),qt}function y_(l,h,y,b,I,q,W){switch(y){case Mi:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case ai:return!(l.byteLength!=h.byteLength||!q(new gl(l),new gl(h)));case kt:case Zt:case gt:return Fs(+l,+h);case Ve:return l.name==h.name&&l.message==h.message;case Vt:case oe:return l==h+"";case ae:var J=lf;case te:var st=b&O;if(J||(J=cf),l.size!=h.size&&!st)return!1;var Et=W.get(l);if(Et)return Et==h;b|=U,W.set(l,h);var xt=sh(J(l),J(h),b,I,q,W);return W.delete(l),xt;case We:if(uc)return uc.call(l)==uc.call(h)}return!1}function Xp(l,h,y,b,I,q){var W=y&O,J=zf(l),st=J.length,Et=zf(h),xt=Et.length;if(st!=xt&&!W)return!1;for(var Dt=st;Dt--;){var qt=J[Dt];if(!(W?qt in h:Xe.call(h,qt)))return!1}var Jt=q.get(l),ce=q.get(h);if(Jt&&ce)return Jt==h&&ce==l;var Ee=!0;q.set(l,h),q.set(h,l);for(var ue=W;++Dt<st;){qt=J[Dt];var Me=l[qt],Ue=h[qt];if(b)var Kr=W?b(Ue,Me,qt,h,l,q):b(Me,Ue,qt,l,h,q);if(!(Kr===e?Me===Ue||I(Me,Ue,y,b,q):Kr)){Ee=!1;break}ue||(ue=qt=="constructor")}if(Ee&&!ue){var Ks=l.constructor,$r=h.constructor;Ks!=$r&&"constructor"in l&&"constructor"in h&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof $r=="function"&&$r instanceof $r)&&(Ee=!1)}return q.delete(l),q.delete(h),Ee}function fa(l){return $f(sm(l,e,vn),l+"")}function zf(l){return xp(l,_i,qf)}function Zp(l){return xp(l,ys,lh)}var rh=ei?function(l){return ei.get(l)}:o;function On(l){for(var h=l.name+"",y=Ze[h],b=Xe.call(Ze,h)?y.length:0;b--;){var I=y[b],q=I.func;if(q==null||q==l)return I.name}return h}function Un(l){var h=Xe.call(L,"placeholder")?L:l;return h.placeholder}function se(){var l=L.iteratee||jh;return l=l===jh?vc:l,arguments.length?l(arguments[0],arguments[1]):l}function ah(l,h){var y=l.__data__;return Gf(h)?y[typeof h=="string"?"string":"hash"]:y.map}function Bf(l){for(var h=_i(l),y=h.length;y--;){var b=h[y],I=l[b];h[y]=[b,I,da(I)]}return h}function Ro(l,h){var y=qg(l,h);return $u(y)?y:e}function oh(l){var h=Xe.call(l,La),y=l[La];try{l[La]=e;var b=!0}catch{}var I=os.call(l);return b&&(h?l[La]=y:delete l[La]),I}var qf=Uu?function(l){return l==null?[]:(l=nn(l),Ir(Uu(l),function(h){return Lu.call(l,h)}))}:St,lh=Uu?function(l){for(var h=[];l;)Or(h,qf(l)),l=oa(l);return h}:St,Ri=xi;(ar&&Ri(new ar(new ArrayBuffer(1)))!=Mi||ks&&Ri(new ks)!=ae||_f&&Ri(_f.resolve())!=Bt||go&&Ri(new go)!=te||yl&&Ri(new yl)!=Rn)&&(Ri=function(l){var h=xi(l),y=h==Yt?l.constructor:e,b=y?Ui(y):"";if(b)switch(b){case De:return Mi;case _o:return ae;case or:return Bt;case wp:return te;case yo:return Rn}return h});function Nv(l,h,y){for(var b=-1,I=y.length;++b<I;){var q=y[b],W=q.size;switch(q.type){case"drop":l+=W;break;case"dropRight":h-=W;break;case"take":h=ti(h,l+W);break;case"takeRight":l=Ln(l,h-W);break}}return{start:l,end:h}}function Ff(l){var h=l.match(ho);return h?h[1].split(Nt):[]}function Hf(l,h,y){h=Us(h,l);for(var b=-1,I=h.length,q=!1;++b<I;){var W=hs(h[b]);if(!(q=l!=null&&y(l,W)))break;l=l[W]}return q||++b!=I?q:(I=l==null?0:l.length,!!I&&od(I)&&qr(W,I)&&(de(l)||Il(l)))}function v_(l){var h=l.length,y=new l.constructor(h);return h&&typeof l[0]=="string"&&Xe.call(l,"index")&&(y.index=l.index,y.input=l.input),y}function Jp(l){return typeof l.constructor=="function"&&!xc(l)?vo(oa(l)):{}}function T_(l,h,y){var b=l.constructor;switch(h){case ai:return Zu(l);case kt:case Zt:return new b(+l);case Mi:return xv(l,y);case ts:case Sa:case es:case lo:case Xn:case Vn:case ki:case fn:case ns:return zp(l,y);case ae:return new b;case gt:case oe:return new b(l);case Vt:return u_(l);case te:return new b;case We:return h_(l)}}function tm(l,h){var y=h.length;if(!y)return l;var b=y-1;return h[b]=(y>1?"& ":"")+h[b],h=h.join(y>2?", ":" "),l.replace(Ar,`{
/* [wrapped with `+h+`] */
`)}function em(l){return de(l)||Il(l)||!!(Yg&&l&&l[Yg])}function qr(l,h){var y=typeof l;return h=h??_t,!!h&&(y=="number"||y!="symbol"&&Cs.test(l))&&l>-1&&l%1==0&&l<h}function Pi(l,h,y){if(!En(y))return!1;var b=typeof h;return(b=="number"?gs(y)&&qr(h,y.length):b=="string"&&h in y)?Fs(y[h],l):!1}function ch(l,h){if(de(l))return!1;var y=typeof l;return y=="number"||y=="symbol"||y=="boolean"||l==null||_s(l)?!0:Aa.test(l)||!is.test(l)||h!=null&&l in nn(h)}function Gf(l){var h=typeof l;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?l!=="__proto__":l===null}function uh(l){var h=On(l),y=L[h];if(typeof y!="function"||!(h in ge.prototype))return!1;if(l===y)return!0;var b=rh(y);return!!b&&l===b[0]}function w_(l){return!!df&&df in l}var nm=hf?Hs:ut;function xc(l){var h=l&&l.constructor,y=typeof h=="function"&&h.prototype||ic;return l===y}function da(l){return l===l&&!En(l)}function Kf(l,h){return function(y){return y==null?!1:y[l]===h&&(h!==e||l in nn(y))}}function Iv(l){var h=Ah(l,function(b){return y.size===m&&y.clear(),b}),y=h.cache;return h}function b_(l,h){var y=l[1],b=h[1],I=y|b,q=I<(D|z|R),W=b==R&&y==Q||b==R&&y==C&&l[7].length<=h[8]||b==(R|C)&&h[7].length<=h[8]&&y==Q;if(!(q||W))return l;b&D&&(l[2]=h[2],I|=y&D?0:$);var J=h[3];if(J){var st=l[3];l[3]=st?Vf(st,J,h[4]):J,l[4]=st?Va(l[3],T):h[4]}return J=h[5],J&&(st=l[5],l[5]=st?qp(st,J,h[6]):J,l[6]=st?Va(l[5],T):h[6]),J=h[7],J&&(l[7]=J),b&R&&(l[8]=l[8]==null?h[8]:ti(l[8],h[8])),l[9]==null&&(l[9]=h[9]),l[0]=h[0],l[1]=I,l}function Ha(l){var h=[];if(l!=null)for(var y in nn(l))h.push(y);return h}function im(l){return os.call(l)}function sm(l,h,y){return h=Ln(h===e?l.length-1:h,0),function(){for(var b=arguments,I=-1,q=Ln(b.length-h,0),W=pt(q);++I<q;)W[I]=b[h+I];I=-1;for(var J=pt(h+1);++I<h;)J[I]=b[I];return J[h]=y(W),ji(l,this,J)}}function hh(l,h){return h.length<2?l:ha(l,Ps(h,0,-1))}function fh(l,h){for(var y=l.length,b=ti(h.length,y),I=$i(l);b--;){var q=h[b];l[b]=qr(q,y)?I[q]:e}return l}function dn(l,h){if(!(h==="constructor"&&typeof l[h]=="function")&&h!="__proto__")return l[h]}var S_=Ga(Mp),dh=_l||function(l,h){return bn.setTimeout(l,h)},$f=Ga(r_);function Rc(l,h,y){var b=h+"";return $f(l,tm(b,A_(Ff(b),y)))}function Ga(l){var h=0,y=0;return function(){var b=sr(),I=B-(b-y);if(y=b,I>0){if(++h>=F)return arguments[0]}else h=0;return l.apply(e,arguments)}}function ph(l,h){var y=-1,b=l.length,I=b-1;for(h=h===e?b:h;++y<h;){var q=bc(y,I),W=l[q];l[q]=l[y],l[y]=W}return l.length=h,l}var rm=Iv(function(l){var h=[];return l.charCodeAt(0)===46&&h.push(""),l.replace(gu,function(y,b,I,q){h.push(I?q.replace(zt,"$1"):b||y)}),h});function hs(l){if(typeof l=="string"||_s(l))return l;var h=l+"";return h=="0"&&1/l==-rt?"-0":h}function Ui(l){if(l!=null){try{return ff.call(l)}catch{}try{return l+""}catch{}}return""}function A_(l,h){return Gn(Tt,function(y){var b="_."+y[0];h&y[1]&&!fl(l,b)&&l.push(b)}),l.sort()}function Wf(l){if(l instanceof ge)return l.clone();var h=new ls(l.__wrapped__,l.__chain__);return h.__actions__=$i(l.__actions__),h.__index__=l.__index__,h.__values__=l.__values__,h}function E_(l,h,y){(y?Pi(l,h,y):h===e)?h=1:h=Ln(le(h),0);var b=l==null?0:l.length;if(!b||h<1)return[];for(var I=0,q=0,W=pt(ac(b/h));I<b;)W[q++]=Ps(l,I,I+=h);return W}function am(l){for(var h=-1,y=l==null?0:l.length,b=0,I=[];++h<y;){var q=l[h];q&&(I[b++]=q)}return I}function om(){var l=arguments.length;if(!l)return[];for(var h=pt(l-1),y=arguments[0],b=l;b--;)h[b-1]=arguments[b];return Or(de(y)?$i(y):[y],ci(h,1))}var Yf=ye(function(l,h){return Wn(l)?ur(l,ci(h,1,Wn,!0)):[]}),C_=ye(function(l,h){var y=Tn(h);return Wn(y)&&(y=e),Wn(l)?ur(l,ci(h,1,Wn,!0),se(y,2)):[]}),Ka=ye(function(l,h){var y=Tn(h);return Wn(y)&&(y=e),Wn(l)?ur(l,ci(h,1,Wn,!0),e,y):[]});function ii(l,h,y){var b=l==null?0:l.length;return b?(h=y||h===e?1:le(h),Ps(l,h<0?0:h,b)):[]}function lm(l,h,y){var b=l==null?0:l.length;return b?(h=y||h===e?1:le(h),h=b-h,Ps(l,0,h<0?0:h)):[]}function x_(l,h){return l&&l.length?Qu(l,se(h,3),!0,!0):[]}function gi(l,h){return l&&l.length?Qu(l,se(h,3),!0):[]}function Ov(l,h,y,b){var I=l==null?0:l.length;return I?(y&&typeof y!="number"&&Pi(l,h,y)&&(y=0,b=I),Hu(l,h,y,b)):[]}function cm(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var I=y==null?0:le(y);return I<0&&(I=Ln(b+I,0)),dt(l,se(h,3),I)}function um(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var I=b-1;return y!==e&&(I=le(y),I=y<0?Ln(b+I,0):ti(I,b-1)),dt(l,se(h,3),I,!0)}function vn(l){var h=l==null?0:l.length;return h?ci(l,1):[]}function fs(l){var h=l==null?0:l.length;return h?ci(l,rt):[]}function $a(l,h){var y=l==null?0:l.length;return y?(h=h===e?1:le(h),ci(l,h)):[]}function R_(l){for(var h=-1,y=l==null?0:l.length,b={};++h<y;){var I=l[h];b[I[0]]=I[1]}return b}function hm(l){return l&&l.length?l[0]:e}function N_(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var I=y==null?0:le(y);return I<0&&(I=Ln(b+I,0)),Lt(l,h,I)}function Dv(l){var h=l==null?0:l.length;return h?Ps(l,0,-1):[]}var Qf=ye(function(l){var h=Ae(l,Pp);return h.length&&h[0]===l[0]?Ku(h):[]}),ds=ye(function(l){var h=Tn(l),y=Ae(l,Pp);return h===Tn(y)?h=e:y.pop(),y.length&&y[0]===l[0]?Ku(y,se(h,2)):[]}),Fr=ye(function(l){var h=Tn(l),y=Ae(l,Pp);return h=typeof h=="function"?h:e,h&&y.pop(),y.length&&y[0]===l[0]?Ku(y,e,h):[]});function I_(l,h){return l==null?"":oc.call(l,h)}function Tn(l){var h=l==null?0:l.length;return h?l[h-1]:e}function O_(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var I=b;return y!==e&&(I=le(y),I=I<0?Ln(b+I,0):ti(I,b-1)),h===h?Tv(l,h,I):dt(l,jn,I,!0)}function Wa(l,h){return l&&l.length?If(l,le(h)):e}var Cl=ye(pa);function pa(l,h){return l&&l.length&&h&&h.length?Tc(l,h):l}function fm(l,h,y){return l&&l.length&&h&&h.length?Tc(l,h,se(y,2)):l}function dm(l,h,y){return l&&l.length&&h&&h.length?Tc(l,h,e,y):l}var Hr=fa(function(l,h){var y=l==null?0:l.length,b=gc(l,h);return wc(l,Ae(h,function(I){return qr(I,y)?+I:I}).sort(Bp)),b});function D_(l,h){var y=[];if(!(l&&l.length))return y;var b=-1,I=[],q=l.length;for(h=se(h,3);++b<q;){var W=l[b];h(W,b,l)&&(y.push(W),I.push(b))}return wc(l,I),y}function No(l){return l==null?l:la.call(l)}function mh(l,h,y){var b=l==null?0:l.length;return b?(y&&typeof y!="number"&&Pi(l,h,y)?(h=0,y=b):(h=h==null?0:le(h),y=y===e?b:le(y)),Ps(l,h,y)):[]}function gh(l,h){return Ac(l,h)}function Nc(l,h,y){return Df(l,h,se(y,2))}function M_(l,h){var y=l==null?0:l.length;if(y){var b=Ac(l,h);if(b<y&&Fs(l[b],h))return b}return-1}function k_(l,h){return Ac(l,h,!0)}function _h(l,h,y){return Df(l,h,se(y,2),!0)}function V_(l,h){var y=l==null?0:l.length;if(y){var b=Ac(l,h,!0)-1;if(Fs(l[b],h))return b}return-1}function Xf(l){return l&&l.length?l_(l):[]}function j_(l,h){return l&&l.length?l_(l,se(h,2)):[]}function Mv(l){var h=l==null?0:l.length;return h?Ps(l,1,h):[]}function kv(l,h,y){return l&&l.length?(h=y||h===e?1:le(h),Ps(l,0,h<0?0:h)):[]}function $e(l,h,y){var b=l==null?0:l.length;return b?(h=y||h===e?1:le(h),h=b-h,Ps(l,h<0?0:h,b)):[]}function pn(l,h){return l&&l.length?Qu(l,se(h,3),!1,!0):[]}function Re(l,h){return l&&l.length?Qu(l,se(h,3)):[]}var Ie=ye(function(l){return Fa(ci(l,1,Wn,!0))}),sn=ye(function(l){var h=Tn(l);return Wn(h)&&(h=e),Fa(ci(l,1,Wn,!0),se(h,2))}),zs=ye(function(l){var h=Tn(l);return h=typeof h=="function"?h:e,Fa(ci(l,1,Wn,!0),e,h)});function Io(l){return l&&l.length?Fa(l):[]}function Ic(l,h){return l&&l.length?Fa(l,se(h,2)):[]}function pm(l,h){return h=typeof h=="function"?h:e,l&&l.length?Fa(l,e,h):[]}function Gr(l){if(!(l&&l.length))return[];var h=0;return l=Ir(l,function(y){if(Wn(y))return h=Ln(y.length,h),!0}),ka(h,function(y){return Ae(l,mn(y))})}function Dn(l,h){if(!(l&&l.length))return[];var y=Gr(l);return h==null?y:Ae(y,function(b){return ji(h,e,b)})}var Oo=ye(function(l,h){return Wn(l)?ur(l,h):[]}),xl=ye(function(l){return Mf(Ir(l,Wn))}),mm=ye(function(l){var h=Tn(l);return Wn(h)&&(h=e),Mf(Ir(l,Wn),se(h,2))}),Bs=ye(function(l){var h=Tn(l);return h=typeof h=="function"?h:e,Mf(Ir(l,Wn),e,h)}),Oc=ye(Gr);function yh(l,h){return Lp(l||[],h||[],jr)}function ps(l,h){return Lp(l||[],h||[],Sc)}var gm=ye(function(l){var h=l.length,y=h>1?l[h-1]:e;return y=typeof y=="function"?(l.pop(),y):e,Dn(l,y)});function vh(l){var h=L(l);return h.__chain__=!0,h}function L_(l,h){return h(l),l}function Rl(l,h){return h(l)}var Zf=fa(function(l){var h=l.length,y=h?l[0]:0,b=this.__wrapped__,I=function(q){return gc(q,l)};return h>1||this.__actions__.length||!(b instanceof ge)||!qr(y)?this.thru(I):(b=b.slice(y,+y+(h?1:0)),b.__actions__.push({func:Rl,args:[I],thisArg:e}),new ls(b,this.__chain__).thru(function(q){return h&&!q.length&&q.push(e),q}))});function Do(){return vh(this)}function ui(){return new ls(this.value(),this.__chain__)}function Mo(){this.__values__===e&&(this.__values__=oy(this.value()));var l=this.__index__>=this.__values__.length,h=l?e:this.__values__[this.__index__++];return{done:l,value:h}}function Dc(){return this}function Ya(l){for(var h,y=this;y instanceof To;){var b=Wf(y);b.__index__=0,b.__values__=e,h?I.__wrapped__=b:h=b;var I=b;y=y.__wrapped__}return I.__wrapped__=l,h}function _m(){var l=this.__wrapped__;if(l instanceof ge){var h=l;return this.__actions__.length&&(h=new ge(this)),h=h.reverse(),h.__actions__.push({func:Rl,args:[No],thisArg:e}),new ls(h,this.__chain__)}return this.thru(No)}function ym(){return jp(this.__wrapped__,this.__actions__)}var P_=jf(function(l,h,y){Xe.call(l,y)?++l[y]:Vs(l,y,1)});function Th(l,h,y){var b=de(l)?Du:So;return y&&Pi(l,h,y)&&(h=e),b(l,se(h,3))}function vm(l,h){var y=de(l)?Ir:Af;return y(l,se(h,3))}var qs=$p(cm),U_=$p(um);function ms(l,h){return ci(wh(l,h),1)}function z_(l,h){return ci(wh(l,h),rt)}function B_(l,h,y){return y=y===e?1:le(y),ci(wh(l,h),y)}function q_(l,h){var y=de(l)?Gn:ua;return y(l,se(h,3))}function Qa(l,h){var y=de(l)?af:Sf;return y(l,se(h,3))}var Jf=jf(function(l,h,y){Xe.call(l,y)?l[y].push(h):Vs(l,y,[h])});function Tm(l,h,y,b){l=gs(l)?l:Bc(l),y=y&&!b?le(y):0;var I=l.length;return y<0&&(y=Ln(I+y,0)),Oh(l)?y<=I&&l.indexOf(h,y)>-1:!!I&&Lt(l,h,y)>-1}var Mc=ye(function(l,h,y){var b=-1,I=typeof h=="function",q=gs(l)?pt(l.length):[];return ua(l,function(W){q[++b]=I?ji(h,W,y):fr(W,h,y)}),q}),F_=jf(function(l,h,y){Vs(l,y,h)});function wh(l,h){var y=de(l)?Ae:Rf;return y(l,se(h,3))}function H_(l,h,y,b){return l==null?[]:(de(h)||(h=h==null?[]:[h]),y=b?e:y,de(y)||(y=y==null?[]:[y]),Of(l,h,y))}var G_=jf(function(l,h,y){l[y?0:1].push(h)},function(){return[[],[]]});function td(l,h,y){var b=de(l)?Zl:Dr,I=arguments.length<3;return b(l,se(h,4),y,I,ua)}function wm(l,h,y){var b=de(l)?Ma:Dr,I=arguments.length<3;return b(l,se(h,4),y,I,Sf)}function Vv(l,h){var y=de(l)?Ir:Af;return y(l,id(se(h,3)))}function jv(l){var h=de(l)?Fu:Op;return h(l)}function Lv(l,h,y){(y?Pi(l,h,y):h===e)?h=1:h=le(h);var b=de(l)?wf:Dp;return b(l,h)}function K_(l){var h=de(l)?e_:a_;return h(l)}function $_(l){if(l==null)return 0;if(gs(l))return Oh(l)?tc(l):l.length;var h=Ri(l);return h==ae||h==te?l.size:Eo(l).length}function kc(l,h,y){var b=de(l)?p:o_;return y&&Pi(l,h,y)&&(h=e),b(l,se(h,3))}var ed=ye(function(l,h){if(l==null)return[];var y=h.length;return y>1&&Pi(l,h[0],h[1])?h=[]:y>2&&Pi(h[0],h[1],h[2])&&(h=[h[0]]),Of(l,ci(h,1),[])}),bh=gf||function(){return bn.Date.now()};function W_(l,h){if(typeof h!="function")throw new Ds(f);return l=le(l),function(){if(--l<1)return h.apply(this,arguments)}}function bm(l,h,y){return h=y?e:h,h=l&&h==null?l.length:h,Wi(l,R,e,e,e,e,h)}function Sm(l,h){var y;if(typeof h!="function")throw new Ds(f);return l=le(l),function(){return--l>0&&(y=h.apply(this,arguments)),l<=1&&(h=e),y}}var nd=ye(function(l,h,y){var b=D;if(y.length){var I=Va(y,Un(nd));b|=K}return Wi(l,b,h,y,I)}),Am=ye(function(l,h,y){var b=D|z;if(y.length){var I=Va(y,Un(Am));b|=K}return Wi(h,b,l,y,I)});function Sh(l,h,y){h=y?e:h;var b=Wi(l,Q,e,e,e,e,e,h);return b.placeholder=Sh.placeholder,b}function Em(l,h,y){h=y?e:h;var b=Wi(l,nt,e,e,e,e,e,h);return b.placeholder=Em.placeholder,b}function Cm(l,h,y){var b,I,q,W,J,st,Et=0,xt=!1,Dt=!1,qt=!0;if(typeof l!="function")throw new Ds(f);h=Gs(h)||0,En(y)&&(xt=!!y.leading,Dt="maxWait"in y,q=Dt?Ln(Gs(y.maxWait)||0,h):q,qt="trailing"in y?!!y.trailing:qt);function Jt(hi){var Ja=b,Dl=I;return b=I=e,Et=hi,W=l.apply(Dl,Ja),W}function ce(hi){return Et=hi,J=dh(Me,h),xt?Jt(hi):W}function Ee(hi){var Ja=hi-st,Dl=hi-Et,nb=h-Ja;return Dt?ti(nb,q-Dl):nb}function ue(hi){var Ja=hi-st,Dl=hi-Et;return st===e||Ja>=h||Ja<0||Dt&&Dl>=q}function Me(){var hi=bh();if(ue(hi))return Ue(hi);J=dh(Me,Ee(hi))}function Ue(hi){return J=e,qt&&b?Jt(hi):(b=I=e,W)}function Kr(){J!==e&&Xu(J),Et=0,b=st=I=J=e}function Ks(){return J===e?W:Ue(bh())}function $r(){var hi=bh(),Ja=ue(hi);if(b=arguments,I=this,st=hi,Ja){if(J===e)return ce(st);if(Dt)return Xu(J),J=dh(Me,h),Jt(st)}return J===e&&(J=dh(Me,h)),W}return $r.cancel=Kr,$r.flush=Ks,$r}var rn=ye(function(l,h){return Cp(l,1,h)}),xm=ye(function(l,h,y){return Cp(l,Gs(h)||0,y)});function Pv(l){return Wi(l,M)}function Ah(l,h){if(typeof l!="function"||h!=null&&typeof h!="function")throw new Ds(f);var y=function(){var b=arguments,I=h?h.apply(this,b):b[0],q=y.cache;if(q.has(I))return q.get(I);var W=l.apply(this,b);return y.cache=q.set(I,W)||q,W};return y.cache=new(Ah.Cache||Vr),y}Ah.Cache=Vr;function id(l){if(typeof l!="function")throw new Ds(f);return function(){var h=arguments;switch(h.length){case 0:return!l.call(this);case 1:return!l.call(this,h[0]);case 2:return!l.call(this,h[0],h[1]);case 3:return!l.call(this,h[0],h[1],h[2])}return!l.apply(this,h)}}function Uv(l){return Sm(2,l)}var zv=c_(function(l,h){h=h.length==1&&de(h[0])?Ae(h[0],Os(se())):Ae(ci(h,1),Os(se()));var y=h.length;return ye(function(b){for(var I=-1,q=ti(b.length,y);++I<q;)b[I]=h[I].call(this,b[I]);return ji(l,this,b)})}),Vc=ye(function(l,h){var y=Va(h,Un(Vc));return Wi(l,K,e,h,y)}),Nl=ye(function(l,h){var y=Va(h,Un(Nl));return Wi(l,X,e,h,y)}),Rm=fa(function(l,h){return Wi(l,C,e,e,e,h)});function sd(l,h){if(typeof l!="function")throw new Ds(f);return h=h===e?h:le(h),ye(l,h)}function Nm(l,h){if(typeof l!="function")throw new Ds(f);return h=h==null?0:Ln(le(h),0),ye(function(y){var b=y[h],I=Br(y,0,h);return b&&Or(I,b),ji(l,this,I)})}function ko(l,h,y){var b=!0,I=!0;if(typeof l!="function")throw new Ds(f);return En(y)&&(b="leading"in y?!!y.leading:b,I="trailing"in y?!!y.trailing:I),Cm(l,h,{leading:b,maxWait:h,trailing:I})}function ma(l){return bm(l,1)}function Eh(l,h){return Vc(kf(h),l)}function Bv(){if(!arguments.length)return[];var l=arguments[0];return de(l)?l:[l]}function Y_(l){return Ki(l,N)}function Q_(l,h){return h=typeof h=="function"?h:e,Ki(l,N,h)}function X_(l){return Ki(l,w|N)}function Z_(l,h){return h=typeof h=="function"?h:e,Ki(l,w|N,h)}function qv(l,h){return h==null||bo(l,h,_i(h))}function Fs(l,h){return l===h||l!==l&&h!==h}var J_=nh(Gu),ty=nh(function(l,h){return l>=h}),Il=cs((function(){return arguments})())?cs:function(l){return zn(l)&&Xe.call(l,"callee")&&!Lu.call(l,"callee")},de=pt.isArray,Im=Nu?Os(Nu):Kn;function gs(l){return l!=null&&od(l.length)&&!Hs(l)}function Wn(l){return zn(l)&&gs(l)}function Ch(l){return l===!0||l===!1||zn(l)&&xi(l)==kt}var Vo=Xg||ut,ey=Iu?Os(Iu):Cf;function Ne(l){return zn(l)&&l.nodeType===1&&!Rh(l)}function Om(l){if(l==null)return!0;if(gs(l)&&(de(l)||typeof l=="string"||typeof l.splice=="function"||Vo(l)||jo(l)||Il(l)))return!l.length;var h=Ri(l);if(h==ae||h==te)return!l.size;if(xc(l))return!Eo(l).length;for(var y in l)if(Xe.call(l,y))return!1;return!0}function rd(l,h){return Ls(l,h)}function Dm(l,h,y){y=typeof y=="function"?y:e;var b=y?y(l,h):e;return b===e?Ls(l,h,e,y):!!b}function ad(l){if(!zn(l))return!1;var h=xi(l);return h==Ve||h==an||typeof l.message=="string"&&typeof l.name=="string"&&!Rh(l)}function Mm(l){return typeof l=="number"&&Ms(l)}function Hs(l){if(!En(l))return!1;var h=xi(l);return h==be||h==yn||h==$t||h==Ot}function xh(l){return typeof l=="number"&&l==le(l)}function od(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=_t}function En(l){var h=typeof l;return l!=null&&(h=="object"||h=="function")}function zn(l){return l!=null&&typeof l=="object"}var ny=mo?Os(mo):ln;function iy(l,h){return l===h||Pn(l,h,Bf(h))}function sy(l,h,y){return y=typeof y=="function"?y:e,Pn(l,h,Bf(h),y)}function cn(l){return Vm(l)&&l!=+l}function km(l){if(nm(l))throw new fe(c);return $u(l)}function Ni(l){return l===null}function Fv(l){return l==null}function Vm(l){return typeof l=="number"||zn(l)&&xi(l)==gt}function Rh(l){if(!zn(l)||xi(l)!=Yt)return!1;var h=oa(l);if(h===null)return!0;var y=Xe.call(h,"constructor")&&h.constructor;return typeof y=="function"&&y instanceof y&&ff.call(y)==pf}var Nh=Xl?Os(Xl):yc;function jm(l){return xh(l)&&l>=-_t&&l<=_t}var Ih=Ou?Os(Ou):Al;function Oh(l){return typeof l=="string"||!de(l)&&zn(l)&&xi(l)==oe}function _s(l){return typeof l=="symbol"||zn(l)&&xi(l)==We}var jo=hl?Os(hl):xf;function Lm(l){return l===e}function Hv(l){return zn(l)&&Ri(l)==Rn}function ry(l){return zn(l)&&xi(l)==Fi}var Gv=nh(An),ay=nh(function(l,h){return l<=h});function oy(l){if(!l)return[];if(gs(l))return Oh(l)?In(l):$i(l);if(Ei&&l[Ei])return _p(l[Ei]());var h=Ri(l),y=h==ae?lf:h==te?cf:Bc;return y(l)}function Xa(l){if(!l)return l===0?l:0;if(l=Gs(l),l===rt||l===-rt){var h=l<0?-1:1;return h*ht}return l===l?l:0}function le(l){var h=Xa(l),y=h%1;return h===h?y?h-y:h:0}function Pm(l){return l?Lr(le(l),0,G):0}function Gs(l){if(typeof l=="number")return l;if(_s(l))return ft;if(En(l)){var h=typeof l.valueOf=="function"?l.valueOf():l;l=En(h)?h+"":h}if(typeof l!="string")return l===0?l:+l;l=dl(l);var y=en.test(l);return y||Zn.test(l)?ra(l.slice(2),y?2:8):Fn.test(l)?ft:+l}function ld(l){return dr(l,ys(l))}function Kv(l){return l?Lr(le(l),-_t,_t):l===0?l:0}function Je(l){return l==null?"":us(l)}var ly=Co(function(l,h){if(xc(h)||gs(h)){dr(h,_i(h),l);return}for(var y in h)Xe.call(h,y)&&jr(l,y,h[y])}),cd=Co(function(l,h){dr(h,ys(h),l)}),jc=Co(function(l,h,y,b){dr(h,ys(h),l,b)}),$v=Co(function(l,h,y,b){dr(h,_i(h),l,b)}),pr=fa(gc);function Um(l,h){var y=vo(l);return h==null?y:Ep(y,h)}var cy=ye(function(l,h){l=nn(l);var y=-1,b=h.length,I=b>2?h[2]:e;for(I&&Pi(h[0],h[1],I)&&(b=1);++y<b;)for(var q=h[y],W=ys(q),J=-1,st=W.length;++J<st;){var Et=W[J],xt=l[Et];(xt===e||Fs(xt,ic[Et])&&!Xe.call(l,Et))&&(l[Et]=q[Et])}return l}),uy=ye(function(l){return l.push(e,Qp),ji(Pc,e,l)});function hy(l,h){return ot(l,se(h,3),Ur)}function Dh(l,h){return ot(l,se(h,3),Ef)}function mr(l,h){return l==null?l:Sl(l,se(h,3),ys)}function fy(l,h){return l==null?l:_c(l,se(h,3),ys)}function ud(l,h){return l&&Ur(l,se(h,3))}function Za(l,h){return l&&Ef(l,se(h,3))}function Wv(l){return l==null?[]:qa(l,_i(l))}function Yv(l){return l==null?[]:qa(l,ys(l))}function Lo(l,h,y){var b=l==null?e:ha(l,h);return b===e?y:b}function dy(l,h){return l!=null&&Hf(l,h,js)}function zm(l,h){return l!=null&&Hf(l,h,hr)}var Qv=th(function(l,h,y){h!=null&&typeof h.toString!="function"&&(h=os.call(h)),l[h]=y},Fc(Yi)),Xv=th(function(l,h,y){h!=null&&typeof h.toString!="function"&&(h=os.call(h)),Xe.call(l,h)?l[h].push(y):l[h]=[y]},se),Zv=ye(fr);function _i(l){return gs(l)?Tf(l):Eo(l)}function ys(l){return gs(l)?Tf(l,!0):Ev(l)}function Jv(l,h){var y={};return h=se(h,3),Ur(l,function(b,I,q){Vs(y,h(b,I,q),b)}),y}function py(l,h){var y={};return h=se(h,3),Ur(l,function(b,I,q){Vs(y,I,h(b,I,q))}),y}var Lc=Co(function(l,h,y){Wu(l,h,y)}),Pc=Co(function(l,h,y,b){Wu(l,h,y,b)}),my=fa(function(l,h){var y={};if(l==null)return y;var b=!1;h=Ae(h,function(q){return q=Us(q,l),b||(b=q.length>1),q}),dr(l,Zp(l),y),b&&(y=Ki(y,w|E|N,__));for(var I=h.length;I--;)Yu(y,h[I]);return y});function t1(l,h){return zc(l,id(se(h)))}var Uc=fa(function(l,h){return l==null?{}:Np(l,h)});function zc(l,h){if(l==null)return{};var y=Ae(Zp(l),function(b){return[b]});return h=se(h),Li(l,y,function(b,I){return h(b,I[0])})}function gy(l,h,y){h=Us(h,l);var b=-1,I=h.length;for(I||(I=1,l=e);++b<I;){var q=l==null?e:l[hs(h[b])];q===e&&(b=I,q=y),l=Hs(q)?q.call(l):q}return l}function hd(l,h,y){return l==null?l:Sc(l,h,y)}function Bm(l,h,y,b){return b=typeof b=="function"?b:e,l==null?l:Sc(l,h,y,b)}var fd=Wp(_i),Mh=Wp(ys);function _y(l,h,y){var b=de(l),I=b||Vo(l)||jo(l);if(h=se(h,4),y==null){var q=l&&l.constructor;I?y=b?new q:[]:En(l)?y=Hs(q)?vo(oa(l)):{}:y={}}return(I?Gn:Ur)(l,function(W,J,st){return h(y,W,J,st)}),y}function yy(l,h){return l==null?!0:Yu(l,h)}function e1(l,h,y){return l==null?l:Vp(l,h,kf(y))}function vy(l,h,y,b){return b=typeof b=="function"?b:e,l==null?l:Vp(l,h,kf(y),b)}function Bc(l){return l==null?[]:dp(l,_i(l))}function qm(l){return l==null?[]:dp(l,ys(l))}function n1(l,h,y){return y===e&&(y=h,h=e),y!==e&&(y=Gs(y),y=y===y?y:0),h!==e&&(h=Gs(h),h=h===h?h:0),Lr(Gs(l),h,y)}function dd(l,h,y){return h=Xa(h),y===e?(y=h,h=0):y=Xa(y),l=Gs(l),Ao(l,h,y)}function pd(l,h,y){if(y&&typeof y!="boolean"&&Pi(l,h,y)&&(h=y=e),y===e&&(typeof h=="boolean"?(y=h,h=e):typeof l=="boolean"&&(y=l,l=e)),l===e&&h===e?(l=0,h=1):(l=Xa(l),h===e?(h=l,l=0):h=Xa(h)),l>h){var b=l;l=h,h=b}if(y||l%1||h%1){var I=Pa();return ti(l+I*(h-l+Oa("1e-"+((I+"").length-1))),h)}return bc(l,h)}var md=El(function(l,h,y){return h=h.toLowerCase(),l+(y?Ty(h):h)});function Ty(l){return Ol(Je(l).toLowerCase())}function qc(l){return l=Je(l),l&&l.replace(ss,Vu).replace(fo,"")}function i1(l,h,y){l=Je(l),h=us(h);var b=l.length;y=y===e?b:Lr(le(y),0,b);var I=y;return y-=h.length,y>=0&&l.slice(y,I)==h}function wy(l){return l=Je(l),l&&Js.test(l)?l.replace(Nn,_v):l}function by(l){return l=Je(l),l&&el.test(l)?l.replace(Sr,"\\$&"):l}var Sy=El(function(l,h,y){return l+(y?"-":"")+h.toLowerCase()}),Ay=El(function(l,h,y){return l+(y?" ":"")+h.toLowerCase()}),Fm=Kp("toLowerCase");function Ey(l,h,y){l=Je(l),h=le(h);var b=h?tc(l):0;if(!h||b>=h)return l;var I=(h-b)/2;return xo(Pu(I),y)+l+xo(ac(I),y)}function Cy(l,h,y){l=Je(l),h=le(h);var b=h?tc(l):0;return h&&b<h?l+xo(h-b,y):l}function gd(l,h,y){l=Je(l),h=le(h);var b=h?tc(l):0;return h&&b<h?xo(h-b,y)+l:l}function s1(l,h,y){return y||h==null?h=0:h&&(h=+h),rr(Je(l).replace(Ea,""),h||0)}function r1(l,h,y){return(y?Pi(l,h,y):h===e)?h=1:h=le(h),zr(Je(l),h)}function Hm(){var l=arguments,h=Je(l[0]);return l.length<3?h:h.replace(l[1],l[2])}var Gm=El(function(l,h,y){return l+(y?"_":"")+h.toLowerCase()});function _d(l,h,y){return y&&typeof y!="number"&&Pi(l,h,y)&&(h=y=e),y=y===e?G:y>>>0,y?(l=Je(l),l&&(typeof h=="string"||h!=null&&!Nh(h))&&(h=us(h),!h&&pl(l))?Br(In(l),0,y):l.split(h,y)):[]}var Km=El(function(l,h,y){return l+(y?" ":"")+Ol(h)});function xy(l,h,y){return l=Je(l),y=y==null?0:Lr(le(y),0,l.length),h=us(h),l.slice(y,y+h.length)==h}function $m(l,h,y){var b=L.templateSettings;y&&Pi(l,h,y)&&(h=e),l=Je(l),h=jc({},h,b,Yp);var I=jc({},h.imports,b.imports,Yp),q=_i(I),W=dp(I,q),J,st,Et=0,xt=h.interpolate||Hi,Dt="__p += '",qt=uf((h.escape||Hi).source+"|"+xt.source+"|"+(xt===uo?ee:Hi).source+"|"+(h.evaluate||Hi).source+"|$","g"),Jt="//# sourceURL="+(Xe.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xu+"]")+`
`;l.replace(qt,function(ue,Me,Ue,Kr,Ks,$r){return Ue||(Ue=Kr),Dt+=l.slice(Et,$r).replace(xs,of),Me&&(J=!0,Dt+=`' +
__e(`+Me+`) +
'`),Ks&&(st=!0,Dt+=`';
`+Ks+`;
__p += '`),Ue&&(Dt+=`' +
((__t = (`+Ue+`)) == null ? '' : __t) +
'`),Et=$r+ue.length,ue}),Dt+=`';
`;var ce=Xe.call(h,"variable")&&h.variable;if(!ce)Dt=`with (obj) {
`+Dt+`
}
`;else if(Ut.test(ce))throw new fe(d);Dt=(st?Dt.replace(Zr,""):Dt).replace(Hl,"$1").replace(Xs,"$1;"),Dt="function("+(ce||"obj")+`) {
`+(ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(st?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Dt+`return __p
}`;var Ee=Wm(function(){return xe(q,Jt+"return "+Dt).apply(e,W)});if(Ee.source=Dt,ad(Ee))throw Ee;return Ee}function Po(l){return Je(l).toLowerCase()}function Uo(l){return Je(l).toUpperCase()}function zo(l,h,y){if(l=Je(l),l&&(y||h===e))return dl(l);if(!l||!(h=us(h)))return l;var b=In(l),I=In(h),q=pp(b,I),W=mp(b,I)+1;return Br(b,q,W).join("")}function kh(l,h,y){if(l=Je(l),l&&(y||h===e))return l.slice(0,ec(l)+1);if(!l||!(h=us(h)))return l;var b=In(l),I=mp(b,In(h))+1;return Br(b,0,I).join("")}function Vh(l,h,y){if(l=Je(l),l&&(y||h===e))return l.replace(Ea,"");if(!l||!(h=us(h)))return l;var b=In(l),I=pp(b,In(h));return Br(b,I).join("")}function Bo(l,h){var y=V,b=P;if(En(h)){var I="separator"in h?h.separator:I;y="length"in h?le(h.length):y,b="omission"in h?us(h.omission):b}l=Je(l);var q=l.length;if(pl(l)){var W=In(l);q=W.length}if(y>=q)return l;var J=y-tc(b);if(J<1)return b;var st=W?Br(W,0,J).join(""):l.slice(0,J);if(I===e)return st+b;if(W&&(J+=st.length-J),Nh(I)){if(l.slice(J).search(I)){var Et,xt=st;for(I.global||(I=uf(I.source,Je(Ge.exec(I))+"g")),I.lastIndex=0;Et=I.exec(xt);)var Dt=Et.index;st=st.slice(0,Dt===e?J:Dt)}}else if(l.indexOf(us(I),J)!=J){var qt=st.lastIndexOf(I);qt>-1&&(st=st.slice(0,qt))}return st+b}function a1(l){return l=Je(l),l&&Zs.test(l)?l.replace(Jr,Fg):l}var Ry=El(function(l,h,y){return l+(y?" ":"")+h.toUpperCase()}),Ol=Kp("toUpperCase");function Ny(l,h,y){return l=Je(l),h=y?e:h,h===e?gp(l)?Kg(l):H(l):l.match(h)||[]}var Wm=ye(function(l,h){try{return ji(l,e,h)}catch(y){return ad(y)?y:new fe(y)}}),yd=fa(function(l,h){return Gn(h,function(y){y=hs(y),Vs(l,y,nd(l[y],l))}),l});function Iy(l){var h=l==null?0:l.length,y=se();return l=h?Ae(l,function(b){if(typeof b[1]!="function")throw new Ds(f);return[y(b[0]),b[1]]}):[],ye(function(b){for(var I=-1;++I<h;){var q=l[I];if(ji(q[0],this,b))return ji(q[1],this,b)}})}function o1(l){return i_(Ki(l,w))}function Fc(l){return function(){return l}}function vd(l,h){return l==null||l!==l?h:l}var Oy=Ec(),Hc=Ec(!0);function Yi(l){return l}function jh(l){return vc(typeof l=="function"?l:Ki(l,w))}function Td(l){return Nf(Ki(l,w))}function Dy(l,h){return Rp(l,Ki(h,w))}var l1=ye(function(l,h){return function(y){return fr(y,l,h)}}),wd=ye(function(l,h){return function(y){return fr(l,y,h)}});function n(l,h,y){var b=_i(h),I=qa(h,b);y==null&&!(En(h)&&(I.length||!b.length))&&(y=h,h=l,l=this,I=qa(h,_i(h)));var q=!(En(y)&&"chain"in y)||!!y.chain,W=Hs(l);return Gn(I,function(J){var st=h[J];l[J]=st,W&&(l.prototype[J]=function(){var Et=this.__chain__;if(q||Et){var xt=l(this.__wrapped__),Dt=xt.__actions__=$i(this.__actions__);return Dt.push({func:st,args:arguments,thisArg:l}),xt.__chain__=Et,xt}return st.apply(l,Or([this.value()],arguments))})}),l}function r(){return bn._===this&&(bn._=nr),this}function o(){}function u(l){return l=le(l),ye(function(h){return If(h,l)})}var _=Lf(Ae),v=Lf(Du),A=Lf(p);function j(l){return ch(l)?mn(hs(l)):$n(l)}function Y(l){return function(h){return l==null?e:ha(l,h)}}var ct=Pf(),vt=Pf(!0);function St(){return[]}function ut(){return!1}function mt(){return{}}function Qt(){return""}function re(){return!0}function un(l,h){if(l=le(l),l<1||l>_t)return[];var y=G,b=ti(l,G);h=se(h),l-=G;for(var I=ka(b,h);++y<l;)h(y);return I}function it(l){return de(l)?Ae(l,hs):_s(l)?[l]:$i(rm(Je(l)))}function tt(l){var h=++Wg;return Je(l)+h}var lt=eh(function(l,h){return l+h},0),bt=ih("ceil"),ne=eh(function(l,h){return l/h},1),Be=ih("floor");function Xt(l){return l&&l.length?Pr(l,Yi,Gu):e}function we(l,h){return l&&l.length?Pr(l,se(h,2),Gu):e}function Oe(l){return ze(l,Yi)}function qe(l,h){return ze(l,se(h,2))}function qo(l){return l&&l.length?Pr(l,Yi,An):e}function c1(l,h){return l&&l.length?Pr(l,se(h,2),An):e}var sx=eh(function(l,h){return l*h},1),rx=ih("round"),ax=eh(function(l,h){return l-h},0);function ox(l){return l&&l.length?Is(l,Yi):0}function lx(l,h){return l&&l.length?Is(l,se(h,2)):0}return L.after=W_,L.ary=bm,L.assign=ly,L.assignIn=cd,L.assignInWith=jc,L.assignWith=$v,L.at=pr,L.before=Sm,L.bind=nd,L.bindAll=yd,L.bindKey=Am,L.castArray=Bv,L.chain=vh,L.chunk=E_,L.compact=am,L.concat=om,L.cond=Iy,L.conforms=o1,L.constant=Fc,L.countBy=P_,L.create=Um,L.curry=Sh,L.curryRight=Em,L.debounce=Cm,L.defaults=cy,L.defaultsDeep=uy,L.defer=rn,L.delay=xm,L.difference=Yf,L.differenceBy=C_,L.differenceWith=Ka,L.drop=ii,L.dropRight=lm,L.dropRightWhile=x_,L.dropWhile=gi,L.fill=Ov,L.filter=vm,L.flatMap=ms,L.flatMapDeep=z_,L.flatMapDepth=B_,L.flatten=vn,L.flattenDeep=fs,L.flattenDepth=$a,L.flip=Pv,L.flow=Oy,L.flowRight=Hc,L.fromPairs=R_,L.functions=Wv,L.functionsIn=Yv,L.groupBy=Jf,L.initial=Dv,L.intersection=Qf,L.intersectionBy=ds,L.intersectionWith=Fr,L.invert=Qv,L.invertBy=Xv,L.invokeMap=Mc,L.iteratee=jh,L.keyBy=F_,L.keys=_i,L.keysIn=ys,L.map=wh,L.mapKeys=Jv,L.mapValues=py,L.matches=Td,L.matchesProperty=Dy,L.memoize=Ah,L.merge=Lc,L.mergeWith=Pc,L.method=l1,L.methodOf=wd,L.mixin=n,L.negate=id,L.nthArg=u,L.omit=my,L.omitBy=t1,L.once=Uv,L.orderBy=H_,L.over=_,L.overArgs=zv,L.overEvery=v,L.overSome=A,L.partial=Vc,L.partialRight=Nl,L.partition=G_,L.pick=Uc,L.pickBy=zc,L.property=j,L.propertyOf=Y,L.pull=Cl,L.pullAll=pa,L.pullAllBy=fm,L.pullAllWith=dm,L.pullAt=Hr,L.range=ct,L.rangeRight=vt,L.rearg=Rm,L.reject=Vv,L.remove=D_,L.rest=sd,L.reverse=No,L.sampleSize=Lv,L.set=hd,L.setWith=Bm,L.shuffle=K_,L.slice=mh,L.sortBy=ed,L.sortedUniq=Xf,L.sortedUniqBy=j_,L.split=_d,L.spread=Nm,L.tail=Mv,L.take=kv,L.takeRight=$e,L.takeRightWhile=pn,L.takeWhile=Re,L.tap=L_,L.throttle=ko,L.thru=Rl,L.toArray=oy,L.toPairs=fd,L.toPairsIn=Mh,L.toPath=it,L.toPlainObject=ld,L.transform=_y,L.unary=ma,L.union=Ie,L.unionBy=sn,L.unionWith=zs,L.uniq=Io,L.uniqBy=Ic,L.uniqWith=pm,L.unset=yy,L.unzip=Gr,L.unzipWith=Dn,L.update=e1,L.updateWith=vy,L.values=Bc,L.valuesIn=qm,L.without=Oo,L.words=Ny,L.wrap=Eh,L.xor=xl,L.xorBy=mm,L.xorWith=Bs,L.zip=Oc,L.zipObject=yh,L.zipObjectDeep=ps,L.zipWith=gm,L.entries=fd,L.entriesIn=Mh,L.extend=cd,L.extendWith=jc,n(L,L),L.add=lt,L.attempt=Wm,L.camelCase=md,L.capitalize=Ty,L.ceil=bt,L.clamp=n1,L.clone=Y_,L.cloneDeep=X_,L.cloneDeepWith=Z_,L.cloneWith=Q_,L.conformsTo=qv,L.deburr=qc,L.defaultTo=vd,L.divide=ne,L.endsWith=i1,L.eq=Fs,L.escape=wy,L.escapeRegExp=by,L.every=Th,L.find=qs,L.findIndex=cm,L.findKey=hy,L.findLast=U_,L.findLastIndex=um,L.findLastKey=Dh,L.floor=Be,L.forEach=q_,L.forEachRight=Qa,L.forIn=mr,L.forInRight=fy,L.forOwn=ud,L.forOwnRight=Za,L.get=Lo,L.gt=J_,L.gte=ty,L.has=dy,L.hasIn=zm,L.head=hm,L.identity=Yi,L.includes=Tm,L.indexOf=N_,L.inRange=dd,L.invoke=Zv,L.isArguments=Il,L.isArray=de,L.isArrayBuffer=Im,L.isArrayLike=gs,L.isArrayLikeObject=Wn,L.isBoolean=Ch,L.isBuffer=Vo,L.isDate=ey,L.isElement=Ne,L.isEmpty=Om,L.isEqual=rd,L.isEqualWith=Dm,L.isError=ad,L.isFinite=Mm,L.isFunction=Hs,L.isInteger=xh,L.isLength=od,L.isMap=ny,L.isMatch=iy,L.isMatchWith=sy,L.isNaN=cn,L.isNative=km,L.isNil=Fv,L.isNull=Ni,L.isNumber=Vm,L.isObject=En,L.isObjectLike=zn,L.isPlainObject=Rh,L.isRegExp=Nh,L.isSafeInteger=jm,L.isSet=Ih,L.isString=Oh,L.isSymbol=_s,L.isTypedArray=jo,L.isUndefined=Lm,L.isWeakMap=Hv,L.isWeakSet=ry,L.join=I_,L.kebabCase=Sy,L.last=Tn,L.lastIndexOf=O_,L.lowerCase=Ay,L.lowerFirst=Fm,L.lt=Gv,L.lte=ay,L.max=Xt,L.maxBy=we,L.mean=Oe,L.meanBy=qe,L.min=qo,L.minBy=c1,L.stubArray=St,L.stubFalse=ut,L.stubObject=mt,L.stubString=Qt,L.stubTrue=re,L.multiply=sx,L.nth=Wa,L.noConflict=r,L.noop=o,L.now=bh,L.pad=Ey,L.padEnd=Cy,L.padStart=gd,L.parseInt=s1,L.random=pd,L.reduce=td,L.reduceRight=wm,L.repeat=r1,L.replace=Hm,L.result=gy,L.round=rx,L.runInContext=et,L.sample=jv,L.size=$_,L.snakeCase=Gm,L.some=kc,L.sortedIndex=gh,L.sortedIndexBy=Nc,L.sortedIndexOf=M_,L.sortedLastIndex=k_,L.sortedLastIndexBy=_h,L.sortedLastIndexOf=V_,L.startCase=Km,L.startsWith=xy,L.subtract=ax,L.sum=ox,L.sumBy=lx,L.template=$m,L.times=un,L.toFinite=Xa,L.toInteger=le,L.toLength=Pm,L.toLower=Po,L.toNumber=Gs,L.toSafeInteger=Kv,L.toString=Je,L.toUpper=Uo,L.trim=zo,L.trimEnd=kh,L.trimStart=Vh,L.truncate=Bo,L.unescape=a1,L.uniqueId=tt,L.upperCase=Ry,L.upperFirst=Ol,L.each=q_,L.eachRight=Qa,L.first=hm,n(L,(function(){var l={};return Ur(L,function(h,y){Xe.call(L.prototype,y)||(l[y]=h)}),l})(),{chain:!1}),L.VERSION=i,Gn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){L[l].placeholder=L}),Gn(["drop","take"],function(l,h){ge.prototype[l]=function(y){y=y===e?1:Ln(le(y),0);var b=this.__filtered__&&!h?new ge(this):this.clone();return b.__filtered__?b.__takeCount__=ti(y,b.__takeCount__):b.__views__.push({size:ti(y,G),type:l+(b.__dir__<0?"Right":"")}),b},ge.prototype[l+"Right"]=function(y){return this.reverse()[l](y).reverse()}}),Gn(["filter","map","takeWhile"],function(l,h){var y=h+1,b=y==At||y==Z;ge.prototype[l]=function(I){var q=this.clone();return q.__iteratees__.push({iteratee:se(I,3),type:y}),q.__filtered__=q.__filtered__||b,q}}),Gn(["head","last"],function(l,h){var y="take"+(h?"Right":"");ge.prototype[l]=function(){return this[y](1).value()[0]}}),Gn(["initial","tail"],function(l,h){var y="drop"+(h?"":"Right");ge.prototype[l]=function(){return this.__filtered__?new ge(this):this[y](1)}}),ge.prototype.compact=function(){return this.filter(Yi)},ge.prototype.find=function(l){return this.filter(l).head()},ge.prototype.findLast=function(l){return this.reverse().find(l)},ge.prototype.invokeMap=ye(function(l,h){return typeof l=="function"?new ge(this):this.map(function(y){return fr(y,l,h)})}),ge.prototype.reject=function(l){return this.filter(id(se(l)))},ge.prototype.slice=function(l,h){l=le(l);var y=this;return y.__filtered__&&(l>0||h<0)?new ge(y):(l<0?y=y.takeRight(-l):l&&(y=y.drop(l)),h!==e&&(h=le(h),y=h<0?y.dropRight(-h):y.take(h-l)),y)},ge.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},ge.prototype.toArray=function(){return this.take(G)},Ur(ge.prototype,function(l,h){var y=/^(?:filter|find|map|reject)|While$/.test(h),b=/^(?:head|last)$/.test(h),I=L[b?"take"+(h=="last"?"Right":""):h],q=b||/^find/.test(h);I&&(L.prototype[h]=function(){var W=this.__wrapped__,J=b?[1]:arguments,st=W instanceof ge,Et=J[0],xt=st||de(W),Dt=function(Me){var Ue=I.apply(L,Or([Me],J));return b&&qt?Ue[0]:Ue};xt&&y&&typeof Et=="function"&&Et.length!=1&&(st=xt=!1);var qt=this.__chain__,Jt=!!this.__actions__.length,ce=q&&!qt,Ee=st&&!Jt;if(!q&&xt){W=Ee?W:new ge(this);var ue=l.apply(W,J);return ue.__actions__.push({func:Rl,args:[Dt],thisArg:e}),new ls(ue,qt)}return ce&&Ee?l.apply(this,J):(ue=this.thru(Dt),ce?b?ue.value()[0]:ue.value():ue)})}),Gn(["pop","push","shift","sort","splice","unshift"],function(l){var h=ju[l],y=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);L.prototype[l]=function(){var I=arguments;if(b&&!this.__chain__){var q=this.value();return h.apply(de(q)?q:[],I)}return this[y](function(W){return h.apply(de(W)?W:[],I)})}}),Ur(ge.prototype,function(l,h){var y=L[h];if(y){var b=y.name+"";Xe.call(Ze,b)||(Ze[b]=[]),Ze[b].push({name:h,func:y})}}),Ze[Cc(e,z).name]=[{name:"wrapper",func:e}],ge.prototype.clone=Ua,ge.prototype.reverse=wo,ge.prototype.value=za,L.prototype.at=Zf,L.prototype.chain=Do,L.prototype.commit=ui,L.prototype.next=Mo,L.prototype.plant=Ya,L.prototype.reverse=_m,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=ym,L.prototype.first=L.prototype.head,Ei&&(L.prototype[Ei]=Dc),L}),nc=vp();Vi?((Vi.exports=nc)._=nc,po._=nc):bn._=nc}).call(Tx)})(Xm,Xm.exports)),Xm.exports}var bx=wx();const g1=cx(bx),hA="15.1.22",pb=(s,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:s}),mb=(s,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:s}),B1=(s,t)=>({startTime:t,type:"setValue",value:s}),fA=(s,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:s}),dA=(s,t,{startTime:e,target:i,timeConstant:a})=>i+(t-i)*Math.exp((e-s)/a),xd=s=>s.type==="exponentialRampToValue",e0=s=>s.type==="linearRampToValue",Kc=s=>xd(s)||e0(s),AT=s=>s.type==="setValue",Ml=s=>s.type==="setValueCurve",n0=(s,t,e,i)=>{const a=s[t];return a===void 0?i:Kc(a)||AT(a)?a.value:Ml(a)?a.values[a.values.length-1]:dA(e,n0(s,t-1,a.startTime,i),a)},gb=(s,t,e,i,a)=>e===void 0?[i.insertTime,a]:Kc(e)?[e.endTime,e.value]:AT(e)?[e.startTime,e.value]:Ml(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,n0(s,t-1,e.startTime,a)],q1=s=>s.type==="cancelAndHold",F1=s=>s.type==="cancelScheduledValues",Gc=s=>q1(s)||F1(s)?s.cancelTime:xd(s)||e0(s)?s.endTime:s.startTime,_b=(s,t,e,{endTime:i,value:a})=>e===a?a:0<e&&0<a||e<0&&a<0?e*(a/e)**((s-t)/(i-t)):0,yb=(s,t,e,{endTime:i,value:a})=>e+(s-t)/(i-t)*(a-e),Sx=(s,t)=>{const e=Math.floor(t),i=Math.ceil(t);return e===i?s[e]:(1-(t-e))*s[e]+(1-(i-t))*s[i]},Ax=(s,{duration:t,startTime:e,values:i})=>{const a=(s-e)/t*(i.length-1);return Sx(i,a)},ky=s=>s.type==="setTarget";class Ex{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=Gc(t);if(q1(t)||F1(t)){const i=this._automationEvents.findIndex(c=>F1(t)&&Ml(c)?c.startTime+c.duration>=e:Gc(c)>=e),a=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),q1(t)){const c=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&Kc(a)){if(c!==void 0&&ky(c))throw new Error("The internal list is malformed.");const f=c===void 0?a.insertTime:Ml(c)?c.startTime+c.duration:Gc(c),d=c===void 0?this._defaultValue:Ml(c)?c.values[c.values.length-1]:c.value,g=xd(a)?_b(e,f,d,a):yb(e,f,d,a),m=xd(a)?pb(g,e,this._currenTime):mb(g,e,this._currenTime);this._automationEvents.push(m)}if(c!==void 0&&ky(c)&&this._automationEvents.push(B1(this.getValue(e),e)),c!==void 0&&Ml(c)&&c.startTime+c.duration>e){const f=e-c.startTime,d=(c.values.length-1)/c.duration,g=Math.max(2,1+Math.ceil(f*d)),m=f/(g-1)*d,T=c.values.slice(0,g);if(m<1)for(let w=1;w<g;w+=1){const E=m*w%1;T[w]=c.values[w-1]*(1-E)+c.values[w]*E}this._automationEvents[this._automationEvents.length-1]=fA(T,c.startTime,f)}}}else{const i=this._automationEvents.findIndex(f=>Gc(f)>e),a=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(a!==void 0&&Ml(a)&&Gc(a)+a.duration>e)return!1;const c=xd(t)?pb(t.value,t.endTime,this._currenTime):e0(t)?mb(t.value,e,this._currenTime):t;if(i===-1)this._automationEvents.push(c);else{if(Ml(t)&&e+t.duration>Gc(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,c)}}return!0}flush(t){const e=this._automationEvents.findIndex(i=>Gc(i)>t);if(e>1){const i=this._automationEvents.slice(e-1),a=i[0];ky(a)&&i.unshift(B1(n0(this._automationEvents,e-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=i}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(f=>Gc(f)>t),i=this._automationEvents[e],a=(e===-1?this._automationEvents.length:e)-1,c=this._automationEvents[a];if(c!==void 0&&ky(c)&&(i===void 0||!Kc(i)||i.insertTime>t))return dA(t,n0(this._automationEvents,a-1,c.startTime,this._defaultValue),c);if(c!==void 0&&AT(c)&&(i===void 0||!Kc(i)))return c.value;if(c!==void 0&&Ml(c)&&(i===void 0||!Kc(i)||c.startTime+c.duration>t))return t<c.startTime+c.duration?Ax(t,c):c.values[c.values.length-1];if(c!==void 0&&Kc(c)&&(i===void 0||!Kc(i)))return c.value;if(i!==void 0&&xd(i)){const[f,d]=gb(this._automationEvents,a,c,i,this._defaultValue);return _b(t,f,d,i)}if(i!==void 0&&e0(i)){const[f,d]=gb(this._automationEvents,a,c,i,this._defaultValue);return yb(t,f,d,i)}return this._defaultValue}}const Cx=s=>({cancelTime:s,type:"cancelAndHold"}),xx=s=>({cancelTime:s,type:"cancelScheduledValues"}),Rx=(s,t)=>({endTime:t,type:"exponentialRampToValue",value:s}),Nx=(s,t)=>({endTime:t,type:"linearRampToValue",value:s}),Ix=(s,t,e)=>({startTime:t,target:s,timeConstant:e,type:"setTarget"}),Ox=()=>new DOMException("","AbortError"),Dx=s=>(t,e,[i,a,c],f)=>{s(t[a],[e,i,c],d=>d[0]===e&&d[1]===i,f)},Mx=s=>(t,e,i)=>{const a=[];for(let c=0;c<i.numberOfInputs;c+=1)a.push(new Set);s.set(t,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},kx=s=>(t,e)=>{s.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},Pd=new WeakSet,pA=new WeakMap,ET=new WeakMap,mA=new WeakMap,CT=new WeakMap,N0=new WeakMap,gA=new WeakMap,H1=new WeakMap,G1=new WeakMap,K1=new WeakMap,_A={construct(){return _A}},Vx=s=>{try{const t=new Proxy(s,_A);new t}catch{return!1}return!0},vb=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Tb=(s,t)=>{const e=[];let i=s.replace(/^[\s]+/,""),a=i.match(vb);for(;a!==null;){const c=a[1].slice(1,-1),f=a[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(f),i=i.slice(a[0].length).replace(/^[\s]+/,""),a=i.match(vb)}return[e.join(";"),i]},wb=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},bb=s=>{if(!Vx(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},jx=(s,t,e,i,a,c,f,d,g,m,T,w,E)=>{let N=0;return(O,U,D={credentials:"omit"})=>{const z=T.get(O);if(z!==void 0&&z.has(U))return Promise.resolve();const $=m.get(O);if($!==void 0){const K=$.get(U);if(K!==void 0)return K}const Q=c(O),nt=Q.audioWorklet===void 0?a(U).then(([K,X])=>{const[R,C]=Tb(K,X),M=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return e(M)}).then(()=>{const K=E._AWGS.pop();if(K===void 0)throw new SyntaxError;i(Q.currentTime,Q.sampleRate,()=>K(class{},void 0,(X,R)=>{if(X.trim()==="")throw t();const C=G1.get(Q);if(C!==void 0){if(C.has(X))throw t();bb(R),wb(R.parameterDescriptors),C.set(X,R)}else bb(R),wb(R.parameterDescriptors),G1.set(Q,new Map([[X,R]]))},Q.sampleRate,void 0,void 0))}):Promise.all([a(U),Promise.resolve(s(w,w))]).then(([[K,X],R])=>{const C=N+1;N=C;const[M,V]=Tb(K,X),At=`${M};((AudioWorkletProcessor,registerProcessor)=>{${V}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,Mt=new Blob([At],{type:"application/javascript; charset=utf-8"}),Z=URL.createObjectURL(Mt);return Q.audioWorklet.addModule(Z,D).then(()=>{if(d(Q))return Q;const rt=f(Q);return rt.audioWorklet.addModule(Z,D).then(()=>rt)}).then(rt=>{if(g===null)throw new SyntaxError;try{new g(rt,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Z))});return $===void 0?m.set(O,new Map([[U,nt]])):$.set(U,nt),nt.then(()=>{const K=T.get(O);K===void 0?T.set(O,new Set([U])):K.add(U)}).finally(()=>{const K=m.get(O);K!==void 0&&K.delete(U)}),nt}},io=(s,t)=>{const e=s.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},I0=(s,t)=>{const e=Array.from(s).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[i]=e;return s.delete(i),i},yA=(s,t,e,i)=>{const a=io(s,t),c=I0(a,f=>f[0]===e&&f[1]===i);return a.size===0&&s.delete(t),c},yg=s=>io(gA,s),Ud=s=>{if(Pd.has(s))throw new Error("The AudioNode is already stored.");Pd.add(s),yg(s).forEach(t=>t(!0))},vA=s=>"port"in s,vg=s=>{if(!Pd.has(s))throw new Error("The AudioNode is not stored.");Pd.delete(s),yg(s).forEach(t=>t(!1))},$1=(s,t)=>{!vA(s)&&t.every(e=>e.size===0)&&vg(s)},Lx=(s,t,e,i,a,c,f,d,g,m,T,w,E)=>{const N=new WeakMap;return(O,U,D,z,$)=>{const{activeInputs:Q,passiveInputs:nt}=c(U),{outputs:K}=c(O),X=d(O),R=C=>{const M=g(U),V=g(O);if(C){const P=yA(nt,O,D,z);s(Q,O,P,!1),!$&&!w(O)&&e(V,M,D,z),E(U)&&Ud(U)}else{const P=i(Q,O,D,z);t(nt,z,P,!1),!$&&!w(O)&&a(V,M,D,z);const F=f(U);if(F===0)T(U)&&$1(U,Q);else{const B=N.get(U);B!==void 0&&clearTimeout(B),N.set(U,setTimeout(()=>{T(U)&&$1(U,Q)},F*1e3))}}};return m(K,[U,D,z],C=>C[0]===U&&C[1]===D&&C[2]===z,!0)?(X.add(R),T(O)?s(Q,O,[D,z,R],!0):t(nt,z,[O,D,R],!0),!0):!1}},Px=s=>(t,e,[i,a,c],f)=>{const d=t.get(i);d===void 0?t.set(i,new Set([[a,e,c]])):s(d,[a,e,c],g=>g[0]===a&&g[1]===e,f)},Ux=s=>(t,e)=>{const i=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(i).connect(t.destination);const a=()=>{e.removeEventListener("ended",a),e.disconnect(i),i.disconnect()};e.addEventListener("ended",a)},zx=s=>(t,e)=>{s(t).add(e)},Bx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},qx=(s,t,e,i,a,c)=>class extends s{constructor(d,g){const m=a(d),T={...Bx,...g},w=i(m,T),E=c(m)?t():null;super(d,!1,w,E),this._nativeAnalyserNode=w}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const g=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=g,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const g=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=g,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},As=(s,t)=>s.context===t,Fx=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!As(d,f)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=s(f,m)}return i.set(f,d),await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},i0=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Zo=()=>new DOMException("","IndexSizeError"),xT=s=>{s.getChannelData=(t=>e=>{try{return t.call(s,e)}catch(i){throw i.code===12?Zo():i}})(s.getChannelData)},Hx={numberOfChannels:1},Gx=(s,t,e,i,a,c,f,d)=>{let g=null;return class TA{constructor(T){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:w,numberOfChannels:E,sampleRate:N}={...Hx,...T};g===null&&(g=new a(1,1,44100));const O=i!==null&&t(c,c)?new i({length:w,numberOfChannels:E,sampleRate:N}):g.createBuffer(E,w,N);if(O.numberOfChannels===0)throw e();return typeof O.copyFromChannel!="function"?(f(O),xT(O)):t(i0,()=>i0(O))||d(O),s.add(O),O}static[Symbol.hasInstance](T){return T!==null&&typeof T=="object"&&Object.getPrototypeOf(T)===TA.prototype||s.has(T)}}},_r=-34028234663852886e22,$s=-_r,kl=s=>Pd.has(s),Kx={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},$x=(s,t,e,i,a,c,f,d)=>class extends s{constructor(m,T){const w=c(m),E={...Kx,...T},N=a(w,E),O=f(w),U=O?t():null;super(m,!1,N,U),this._audioBufferSourceNodeRenderer=U,this._isBufferNullified=!1,this._isBufferSet=E.buffer!==null,this._nativeAudioBufferSourceNode=N,this._onended=null,this._playbackRate=e(this,O,N.playbackRate,$s,_r)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const T=typeof m=="function"?d(this,m):null;this._nativeAudioBufferSourceNode.onended=T;const w=this._nativeAudioBufferSourceNode.onended;this._onended=w!==null&&w===T?m:w}get playbackRate(){return this._playbackRate}start(m=0,T=0,w){if(this._nativeAudioBufferSourceNode.start(m,T,w),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=w===void 0?[m,T]:[m,T,w]),this.context.state!=="closed"){Ud(this);const E=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",E),kl(this)&&vg(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",E)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},Wx=(s,t,e,i,a)=>()=>{const c=new WeakMap;let f=null,d=null;const g=async(m,T)=>{let w=e(m);const E=As(w,T);if(!E){const N={buffer:w.buffer,channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,loop:w.loop,loopEnd:w.loopEnd,loopStart:w.loopStart,playbackRate:w.playbackRate.value};w=t(T,N),f!==null&&w.start(...f),d!==null&&w.stop(d)}return c.set(T,w),E?await s(T,m.playbackRate,w.playbackRate):await i(T,m.playbackRate,w.playbackRate),await a(m,T,w),w};return{set start(m){f=m},set stop(m){d=m},render(m,T){const w=c.get(T);return w!==void 0?Promise.resolve(w):g(m,T)}}},Yx=s=>"playbackRate"in s,Qx=s=>"frequency"in s&&"gain"in s,Xx=s=>"offset"in s,Zx=s=>!("frequency"in s)&&"gain"in s,Jx=s=>"detune"in s&&"frequency"in s&&!("gain"in s),tR=s=>"pan"in s,Ws=s=>io(pA,s),Tg=s=>io(mA,s),W1=(s,t)=>{const{activeInputs:e}=Ws(s);e.forEach(a=>a.forEach(([c])=>{t.includes(s)||W1(c,[...t,s])}));const i=Yx(s)?[s.playbackRate]:vA(s)?Array.from(s.parameters.values()):Qx(s)?[s.Q,s.detune,s.frequency,s.gain]:Xx(s)?[s.offset]:Zx(s)?[s.gain]:Jx(s)?[s.detune,s.frequency]:tR(s)?[s.pan]:[];for(const a of i){const c=Tg(a);c!==void 0&&c.activeInputs.forEach(([f])=>W1(f,t))}kl(s)&&vg(s)},wA=s=>{W1(s.destination,[])},eR=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),nR=(s,t,e,i,a,c,f,d,g)=>class extends s{constructor(T={}){if(g===null)throw new Error("Missing the native AudioContext constructor.");let w;try{w=new g(T)}catch(O){throw O.code===12&&O.message==="sampleRate is not in range"?e():O}if(w===null)throw i();if(!eR(T.latencyHint))throw new TypeError(`The provided value '${T.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(T.sampleRate!==void 0&&w.sampleRate!==T.sampleRate)throw e();super(w,2);const{latencyHint:E}=T,{sampleRate:N}=w;if(this._baseLatency=typeof w.baseLatency=="number"?w.baseLatency:E==="balanced"?512/N:E==="interactive"||E===void 0?256/N:E==="playback"?1024/N:Math.max(2,Math.min(128,Math.round(E*N/128)))*128/N,this._nativeAudioContext=w,g.name==="webkitAudioContext"?(this._nativeGainNode=w.createGain(),this._nativeOscillatorNode=w.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(w.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,w.state==="running"){this._state="suspended";const O=()=>{this._state==="suspended"&&(this._state=null),w.removeEventListener("statechange",O)};w.addEventListener("statechange",O)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wA(this)}))}createMediaElementSource(T){return new a(this,{mediaElement:T})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(T){return new f(this,{mediaStream:T})}createMediaStreamTrackSource(T){return new d(this,{mediaStreamTrack:T})}resume(){return this._state==="suspended"?new Promise((T,w)=>{const E=()=>{this._nativeAudioContext.removeEventListener("statechange",E),this._nativeAudioContext.state==="running"?T():this.resume().then(T,w)};this._nativeAudioContext.addEventListener("statechange",E)}):this._nativeAudioContext.resume().catch(T=>{throw T===void 0||T.code===15?t():T})}suspend(){return this._nativeAudioContext.suspend().catch(T=>{throw T===void 0?t():T})}},iR=(s,t,e,i,a,c,f,d)=>class extends s{constructor(m,T){const w=c(m),E=f(w),N=a(w,T,E),O=E?t(d):null;super(m,!1,N,O),this._isNodeOfNativeOfflineAudioContext=E,this._nativeAudioDestinationNode=N}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},sR=s=>{const t=new WeakMap,e=async(i,a)=>{const c=a.destination;return t.set(a,c),await s(i,a,c),c};return{render(i,a){const c=t.get(a);return c!==void 0?Promise.resolve(c):e(i,a)}}},rR=(s,t,e,i,a,c,f,d)=>(g,m)=>{const T=m.listener,w=()=>{const K=new Float32Array(1),X=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=f(m);let C=!1,M=[0,0,-1,0,1,0],V=[0,0,0];const P=()=>{if(C)return;C=!0;const Mt=i(m,256,9,0);Mt.onaudioprocess=({inputBuffer:Z})=>{const rt=[c(Z,K,0),c(Z,K,1),c(Z,K,2),c(Z,K,3),c(Z,K,4),c(Z,K,5)];rt.some((ht,ft)=>ht!==M[ft])&&(T.setOrientation(...rt),M=rt);const _t=[c(Z,K,6),c(Z,K,7),c(Z,K,8)];_t.some((ht,ft)=>ht!==V[ft])&&(T.setPosition(..._t),V=_t)},X.connect(Mt)},F=Mt=>Z=>{Z!==M[Mt]&&(M[Mt]=Z,T.setOrientation(...M))},B=Mt=>Z=>{Z!==V[Mt]&&(V[Mt]=Z,T.setPosition(...V))},At=(Mt,Z,rt)=>{const _t=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z});_t.connect(X,0,Mt),_t.start(),Object.defineProperty(_t.offset,"defaultValue",{get(){return Z}});const ht=s({context:g},R,_t.offset,$s,_r);return d(ht,"value",ft=>()=>ft.call(ht),ft=>G=>{try{ft.call(ht,G)}catch(at){if(at.code!==9)throw at}P(),R&&rt(G)}),ht.cancelAndHoldAtTime=(ft=>R?()=>{throw a()}:(...G)=>{const at=ft.apply(ht,G);return P(),at})(ht.cancelAndHoldAtTime),ht.cancelScheduledValues=(ft=>R?()=>{throw a()}:(...G)=>{const at=ft.apply(ht,G);return P(),at})(ht.cancelScheduledValues),ht.exponentialRampToValueAtTime=(ft=>R?()=>{throw a()}:(...G)=>{const at=ft.apply(ht,G);return P(),at})(ht.exponentialRampToValueAtTime),ht.linearRampToValueAtTime=(ft=>R?()=>{throw a()}:(...G)=>{const at=ft.apply(ht,G);return P(),at})(ht.linearRampToValueAtTime),ht.setTargetAtTime=(ft=>R?()=>{throw a()}:(...G)=>{const at=ft.apply(ht,G);return P(),at})(ht.setTargetAtTime),ht.setValueAtTime=(ft=>R?()=>{throw a()}:(...G)=>{const at=ft.apply(ht,G);return P(),at})(ht.setValueAtTime),ht.setValueCurveAtTime=(ft=>R?()=>{throw a()}:(...G)=>{const at=ft.apply(ht,G);return P(),at})(ht.setValueCurveAtTime),ht};return{forwardX:At(0,0,F(0)),forwardY:At(1,0,F(1)),forwardZ:At(2,-1,F(2)),positionX:At(6,0,B(0)),positionY:At(7,0,B(1)),positionZ:At(8,0,B(2)),upX:At(3,0,F(3)),upY:At(4,1,F(4)),upZ:At(5,0,F(5))}},{forwardX:E,forwardY:N,forwardZ:O,positionX:U,positionY:D,positionZ:z,upX:$,upY:Q,upZ:nt}=T.forwardX===void 0?w():T;return{get forwardX(){return E},get forwardY(){return N},get forwardZ(){return O},get positionX(){return U},get positionY(){return D},get positionZ(){return z},get upX(){return $},get upY(){return Q},get upZ(){return nt}}},s0=s=>"context"in s,wg=s=>s0(s[0]),Zh=(s,t,e,i)=>{for(const a of s)if(e(a)){if(i)return!1;throw Error("The set contains at least one similar element.")}return s.add(t),!0},Sb=(s,t,[e,i],a)=>{Zh(s,[t,e,i],c=>c[0]===t&&c[1]===e,a)},Ab=(s,[t,e,i],a)=>{const c=s.get(t);c===void 0?s.set(t,new Set([[e,i]])):Zh(c,[e,i],f=>f[0]===e,a)},Jd=s=>"inputs"in s,r0=(s,t,e,i)=>{if(Jd(t)){const a=t.inputs[i];return s.connect(a,e,0),[a,e,0]}return s.connect(t,e,i),[t,e,i]},bA=(s,t,e)=>{for(const i of s)if(i[0]===t&&i[1]===e)return s.delete(i),i;return null},aR=(s,t,e)=>I0(s,i=>i[0]===t&&i[1]===e),SA=(s,t)=>{if(!yg(s).delete(t))throw new Error("Missing the expected event listener.")},AA=(s,t,e)=>{const i=io(s,t),a=I0(i,c=>c[0]===e);return i.size===0&&s.delete(t),a},a0=(s,t,e,i)=>{Jd(t)?s.disconnect(t.inputs[i],e,0):s.disconnect(t,e,i)},kn=s=>io(ET,s),og=s=>io(CT,s),Gh=s=>H1.has(s),Ky=s=>!Pd.has(s),Eb=(s,t)=>new Promise(e=>{if(t!==null)e(!0);else{const i=s.createScriptProcessor(256,1,1),a=s.createGain(),c=s.createBuffer(1,2,44100),f=c.getChannelData(0);f[0]=1,f[1]=1;const d=s.createBufferSource();d.buffer=c,d.loop=!0,d.connect(i).connect(s.destination),d.connect(a),d.disconnect(a),i.onaudioprocess=g=>{const m=g.inputBuffer.getChannelData(0);Array.prototype.some.call(m,T=>T===1)?e(!0):e(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(s.destination)},d.start()}}),_1=(s,t)=>{const e=new Map;for(const i of s)for(const a of i){const c=e.get(a);e.set(a,c===void 0?1:c+1)}e.forEach((i,a)=>t(a,i))},o0=s=>"context"in s,oR=s=>{const t=new Map;s.connect=(e=>(i,a=0,c=0)=>{const f=o0(i)?e(i,a,c):e(i,a),d=t.get(i);return d===void 0?t.set(i,[{input:c,output:a}]):d.every(g=>g.input!==c||g.output!==a)&&d.push({input:c,output:a}),f})(s.connect.bind(s)),s.disconnect=(e=>(i,a,c)=>{if(e.apply(s),i===void 0)t.clear();else if(typeof i=="number")for(const[f,d]of t){const g=d.filter(m=>m.output!==i);g.length===0?t.delete(f):t.set(f,g)}else if(t.has(i))if(a===void 0)t.delete(i);else{const f=t.get(i);if(f!==void 0){const d=f.filter(g=>g.output!==a&&(g.input!==c||c===void 0));d.length===0?t.delete(i):t.set(i,d)}}for(const[f,d]of t)d.forEach(g=>{o0(f)?s.connect(f,g.output,g.input):s.connect(f,g.output)})})(s.disconnect)},lR=(s,t,e,i)=>{const{activeInputs:a,passiveInputs:c}=Tg(t),{outputs:f}=Ws(s),d=yg(s),g=m=>{const T=kn(s),w=og(t);if(m){const E=AA(c,s,e);Sb(a,s,E,!1),!i&&!Gh(s)&&T.connect(w,e)}else{const E=aR(a,s,e);Ab(c,E,!1),!i&&!Gh(s)&&T.disconnect(w,e)}};return Zh(f,[t,e],m=>m[0]===t&&m[1]===e,!0)?(d.add(g),kl(s)?Sb(a,s,[e,g],!0):Ab(c,[s,e,g],!0),!0):!1},cR=(s,t,e,i)=>{const{activeInputs:a,passiveInputs:c}=Ws(t),f=bA(a[i],s,e);return f===null?[yA(c,s,e,i)[2],!1]:[f[2],!0]},uR=(s,t,e)=>{const{activeInputs:i,passiveInputs:a}=Tg(t),c=bA(i,s,e);return c===null?[AA(a,s,e)[1],!1]:[c[2],!0]},RT=(s,t,e,i,a)=>{const[c,f]=cR(s,e,i,a);if(c!==null&&(SA(s,c),f&&!t&&!Gh(s)&&a0(kn(s),kn(e),i,a)),kl(e)){const{activeInputs:d}=Ws(e);$1(e,d)}},NT=(s,t,e,i)=>{const[a,c]=uR(s,e,i);a!==null&&(SA(s,a),c&&!t&&!Gh(s)&&kn(s).disconnect(og(e),i))},hR=(s,t)=>{const e=Ws(s),i=[];for(const a of e.outputs)wg(a)?RT(s,t,...a):NT(s,t,...a),i.push(a[0]);return e.outputs.clear(),i},fR=(s,t,e)=>{const i=Ws(s),a=[];for(const c of i.outputs)c[1]===e&&(wg(c)?RT(s,t,...c):NT(s,t,...c),a.push(c[0]),i.outputs.delete(c));return a},dR=(s,t,e,i,a)=>{const c=Ws(s);return Array.from(c.outputs).filter(f=>f[0]===e&&(i===void 0||f[1]===i)&&(a===void 0||f[2]===a)).map(f=>(wg(f)?RT(s,t,...f):NT(s,t,...f),c.outputs.delete(f),f[0]))},pR=(s,t,e,i,a,c,f,d,g,m,T,w,E,N,O,U)=>class extends m{constructor(z,$,Q,nt){super(Q),this._context=z,this._nativeAudioNode=Q;const K=T(z);w(K)&&e(Eb,()=>Eb(K,U))!==!0&&oR(Q),ET.set(this,Q),gA.set(this,new Set),z.state!=="closed"&&$&&Ud(this),s(this,nt,Q)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(z){this._nativeAudioNode.channelCount=z}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(z){this._nativeAudioNode.channelCountMode=z}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(z){this._nativeAudioNode.channelInterpretation=z}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(z,$=0,Q=0){if($<0||$>=this._nativeAudioNode.numberOfOutputs)throw a();const nt=T(this._context),K=O(nt);if(E(z)||N(z))throw c();if(s0(z)){const C=kn(z);try{const V=r0(this._nativeAudioNode,C,$,Q),P=Ky(this);(K||P)&&this._nativeAudioNode.disconnect(...V),this.context.state!=="closed"&&!P&&Ky(z)&&Ud(z)}catch(V){throw V.code===12?c():V}if(t(this,z,$,Q,K)){const V=g([this],z);_1(V,i(K))}return z}const X=og(z);if(X.name==="playbackRate"&&X.maxValue===1024)throw f();try{this._nativeAudioNode.connect(X,$),(K||Ky(this))&&this._nativeAudioNode.disconnect(X,$)}catch(C){throw C.code===12?c():C}if(lR(this,z,$,K)){const C=g([this],z);_1(C,i(K))}}disconnect(z,$,Q){let nt;const K=T(this._context),X=O(K);if(z===void 0)nt=hR(this,X);else if(typeof z=="number"){if(z<0||z>=this.numberOfOutputs)throw a();nt=fR(this,X,z)}else{if($!==void 0&&($<0||$>=this.numberOfOutputs)||s0(z)&&Q!==void 0&&(Q<0||Q>=z.numberOfInputs))throw a();if(nt=dR(this,X,z,$,Q),nt.length===0)throw c()}for(const R of nt){const C=g([this],R);_1(C,d)}}},mR=(s,t,e,i,a,c,f,d,g,m,T,w,E)=>(N,O,U,D=null,z=null)=>{const $=U.value,Q=new Ex($),nt=O?i(Q):null,K={get defaultValue(){return $},get maxValue(){return D===null?U.maxValue:D},get minValue(){return z===null?U.minValue:z},get value(){return U.value},set value(X){U.value=X,K.setValueAtTime(X,N.context.currentTime)},cancelAndHoldAtTime(X){if(typeof U.cancelAndHoldAtTime=="function")nt===null&&Q.flush(N.context.currentTime),Q.add(a(X)),U.cancelAndHoldAtTime(X);else{const R=Array.from(Q).pop();nt===null&&Q.flush(N.context.currentTime),Q.add(a(X));const C=Array.from(Q).pop();U.cancelScheduledValues(X),R!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?U.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?U.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?U.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&U.setValueCurveAtTime(C.values,C.startTime,C.duration))}return K},cancelScheduledValues(X){return nt===null&&Q.flush(N.context.currentTime),Q.add(c(X)),U.cancelScheduledValues(X),K},exponentialRampToValueAtTime(X,R){if(X===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const C=N.context.currentTime;return nt===null&&Q.flush(C),Array.from(Q).length===0&&(Q.add(m($,C)),U.setValueAtTime($,C)),Q.add(f(X,R)),U.exponentialRampToValueAtTime(X,R),K},linearRampToValueAtTime(X,R){const C=N.context.currentTime;return nt===null&&Q.flush(C),Array.from(Q).length===0&&(Q.add(m($,C)),U.setValueAtTime($,C)),Q.add(d(X,R)),U.linearRampToValueAtTime(X,R),K},setTargetAtTime(X,R,C){return nt===null&&Q.flush(N.context.currentTime),Q.add(g(X,R,C)),U.setTargetAtTime(X,R,C),K},setValueAtTime(X,R){return nt===null&&Q.flush(N.context.currentTime),Q.add(m(X,R)),U.setValueAtTime(X,R),K},setValueCurveAtTime(X,R,C){const M=X instanceof Float32Array?X:new Float32Array(X);if(w!==null&&w.name==="webkitAudioContext"){const V=R+C,P=N.context.sampleRate,F=Math.ceil(R*P),B=Math.floor(V*P),At=B-F,Mt=new Float32Array(At);for(let rt=0;rt<At;rt+=1){const _t=(M.length-1)/C*((F+rt)/P-R),ht=Math.floor(_t),ft=Math.ceil(_t);Mt[rt]=ht===ft?M[ht]:(1-(_t-ht))*M[ht]+(1-(ft-_t))*M[ft]}nt===null&&Q.flush(N.context.currentTime),Q.add(T(Mt,R,C)),U.setValueCurveAtTime(Mt,R,C);const Z=B/P;Z<V&&E(K,Mt[Mt.length-1],Z),E(K,M[M.length-1],V)}else nt===null&&Q.flush(N.context.currentTime),Q.add(T(M,R,C)),U.setValueCurveAtTime(M,R,C);return K}};return e.set(K,U),t.set(K,N),s(K,nt),K},gR=s=>({replay(t){for(const e of s)if(e.type==="exponentialRampToValue"){const{endTime:i,value:a}=e;t.exponentialRampToValueAtTime(a,i)}else if(e.type==="linearRampToValue"){const{endTime:i,value:a}=e;t.linearRampToValueAtTime(a,i)}else if(e.type==="setTarget"){const{startTime:i,target:a,timeConstant:c}=e;t.setTargetAtTime(a,i,c)}else if(e.type==="setValue"){const{startTime:i,value:a}=e;t.setValueAtTime(a,i)}else if(e.type==="setValueCurve"){const{duration:i,startTime:a,values:c}=e;t.setValueCurveAtTime(c,a,i)}else throw new Error("Can't apply an unknown automation.")}});class EA{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((i,a)=>t.call(e,i,a,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const _R={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},yR=(s,t,e,i,a,c,f,d,g,m,T,w,E,N)=>class extends t{constructor(U,D,z){var $;const Q=d(U),nt=g(Q),K=T({..._R,...z});E(K);const X=G1.get(Q),R=X?.get(D),C=nt||Q.state!=="closed"?Q:($=f(Q))!==null&&$!==void 0?$:Q,M=a(C,nt?null:U.baseLatency,m,D,R,K),V=nt?i(D,K,R):null;super(U,!0,M,V);const P=[];M.parameters.forEach((B,At)=>{const Mt=e(this,nt,B);P.push([At,Mt])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new EA(P),nt&&s(Q,this);const{activeInputs:F}=c(this);w(M,F)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(U){const D=typeof U=="function"?N(this,U):null;this._nativeAudioWorkletNode.onprocessorerror=D;const z=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=z!==null&&z===D?U:z}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function l0(s,t,e,i,a){if(typeof s.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),s.copyFromChannel(t[e],i,a);else{const c=s.getChannelData(i);if(t[e].byteLength===0)t[e]=c.slice(a,a+128);else{const f=new Float32Array(c.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(f)}}}const CA=(s,t,e,i,a)=>{typeof s.copyToChannel=="function"?t[e].byteLength!==0&&s.copyToChannel(t[e],i,a):t[e].byteLength!==0&&s.getChannelData(i).set(t[e],a)},c0=(s,t)=>{const e=[];for(let i=0;i<s;i+=1){const a=[],c=typeof t=="number"?t:t[i];for(let f=0;f<c;f+=1)a.push(new Float32Array(128));e.push(a)}return e},vR=(s,t)=>{const e=io(K1,s),i=kn(t);return io(e,i)},TR=async(s,t,e,i,a,c,f)=>{const d=t===null?Math.ceil(s.context.length/128)*128:t.length,g=i.channelCount*i.numberOfInputs,m=a.reduce((D,z)=>D+z,0),T=m===0?null:e.createBuffer(m,d,e.sampleRate);if(c===void 0)throw new Error("Missing the processor constructor.");const w=Ws(s),E=await vR(e,s),N=c0(i.numberOfInputs,i.channelCount),O=c0(i.numberOfOutputs,a),U=Array.from(s.parameters.keys()).reduce((D,z)=>({...D,[z]:new Float32Array(128)}),{});for(let D=0;D<d;D+=128){if(i.numberOfInputs>0&&t!==null)for(let z=0;z<i.numberOfInputs;z+=1)for(let $=0;$<i.channelCount;$+=1)l0(t,N[z],$,$,D);c.parameterDescriptors!==void 0&&t!==null&&c.parameterDescriptors.forEach(({name:z},$)=>{l0(t,U,z,g+$,D)});for(let z=0;z<i.numberOfInputs;z+=1)for(let $=0;$<a[z];$+=1)O[z][$].byteLength===0&&(O[z][$]=new Float32Array(128));try{const z=N.map((Q,nt)=>w.activeInputs[nt].size===0?[]:Q),$=f(D/e.sampleRate,e.sampleRate,()=>E.process(z,O,U));if(T!==null)for(let Q=0,nt=0;Q<i.numberOfOutputs;Q+=1){for(let K=0;K<a[Q];K+=1)CA(T,O[Q],K,nt+K,D);nt+=a[Q]}if(!$)break}catch(z){s.dispatchEvent(new ErrorEvent("processorerror",{colno:z.colno,filename:z.filename,lineno:z.lineno,message:z.message}));break}}return T},wR=(s,t,e,i,a,c,f,d,g,m,T,w,E,N,O,U)=>(D,z,$)=>{const Q=new WeakMap;let nt=null;const K=async(X,R)=>{let C=T(X),M=null;const V=As(C,R),P=Array.isArray(z.outputChannelCount)?z.outputChannelCount:Array.from(z.outputChannelCount);if(w===null){const F=P.reduce((Z,rt)=>Z+rt,0),B=a(R,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),At=[];for(let Z=0;Z<X.numberOfOutputs;Z+=1)At.push(i(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:P[Z]}));const Mt=f(R,{channelCount:z.channelCount,channelCountMode:z.channelCountMode,channelInterpretation:z.channelInterpretation,gain:1});Mt.connect=t.bind(null,At),Mt.disconnect=g.bind(null,At),M=[B,At,Mt]}else V||(C=new w(R,D));if(Q.set(R,M===null?C:M[2]),M!==null){if(nt===null){if($===void 0)throw new Error("Missing the processor constructor.");if(E===null)throw new Error("Missing the native OfflineAudioContext constructor.");const rt=X.channelCount*X.numberOfInputs,_t=$.parameterDescriptors===void 0?0:$.parameterDescriptors.length,ht=rt+_t;nt=TR(X,ht===0?null:await(async()=>{const G=new E(ht,Math.ceil(X.context.length/128)*128,R.sampleRate),at=[],wt=[];for(let jt=0;jt<z.numberOfInputs;jt+=1)at.push(f(G,{channelCount:z.channelCount,channelCountMode:z.channelCountMode,channelInterpretation:z.channelInterpretation,gain:1})),wt.push(a(G,{channelCount:z.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:z.channelCount}));const Tt=await Promise.all(Array.from(X.parameters.values()).map(async jt=>{const $t=c(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:jt.value});return await N(G,jt,$t.offset),$t})),It=i(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,rt+_t)});for(let jt=0;jt<z.numberOfInputs;jt+=1){at[jt].connect(wt[jt]);for(let $t=0;$t<z.channelCount;$t+=1)wt[jt].connect(It,$t,jt*z.channelCount+$t)}for(const[jt,$t]of Tt.entries())$t.connect(It,0,rt+jt),$t.start(0);return It.connect(G.destination),await Promise.all(at.map(jt=>O(X,G,jt))),U(G)})(),R,z,P,$,m)}const F=await nt,B=e(R,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[At,Mt,Z]=M;F!==null&&(B.buffer=F,B.start(0)),B.connect(At);for(let rt=0,_t=0;rt<X.numberOfOutputs;rt+=1){const ht=Mt[rt];for(let ft=0;ft<P[rt];ft+=1)At.connect(ht,_t+ft,ft);_t+=P[rt]}return Z}if(V)for(const[F,B]of X.parameters.entries())await s(R,B,C.parameters.get(F));else for(const[F,B]of X.parameters.entries())await N(R,B,C.parameters.get(F));return await O(X,R,C),C};return{render(X,R){d(R,X);const C=Q.get(R);return C!==void 0?Promise.resolve(C):K(X,R)}}},bR=(s,t,e,i,a,c,f,d,g,m,T,w,E,N,O,U,D,z,$,Q)=>class extends O{constructor(K,X){super(K,X),this._nativeContext=K,this._audioWorklet=s===void 0?void 0:{addModule:(R,C)=>s(this,R,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new a(this)}createBuffer(K,X,R){return new e({length:X,numberOfChannels:K,sampleRate:R})}createBufferSource(){return new i(this)}createChannelMerger(K=6){return new c(this,{numberOfInputs:K})}createChannelSplitter(K=6){return new f(this,{numberOfOutputs:K})}createConstantSource(){return new d(this)}createConvolver(){return new g(this)}createDelay(K=1){return new T(this,{maxDelayTime:K})}createDynamicsCompressor(){return new w(this)}createGain(){return new E(this)}createIIRFilter(K,X){return new N(this,{feedback:X,feedforward:K})}createOscillator(){return new U(this)}createPanner(){return new D(this)}createPeriodicWave(K,X,R={disableNormalization:!1}){return new z(this,{...R,imag:X,real:K})}createStereoPanner(){return new $(this)}createWaveShaper(){return new Q(this)}decodeAudioData(K,X,R){return m(this._nativeContext,K).then(C=>(typeof X=="function"&&X(C),C),C=>{throw typeof R=="function"&&R(C),C})}},SR={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},AR=(s,t,e,i,a,c,f,d)=>class extends s{constructor(m,T){const w=c(m),E={...SR,...T},N=a(w,E),O=f(w),U=O?e():null;super(m,!1,N,U),this._Q=t(this,O,N.Q,$s,_r),this._detune=t(this,O,N.detune,1200*Math.log2($s),-1200*Math.log2($s)),this._frequency=t(this,O,N.frequency,m.sampleRate/2,0),this._gain=t(this,O,N.gain,40*Math.log10($s),_r),this._nativeBiquadFilterNode=N,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,T,w){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,T,w)}catch(E){throw E.code===11?i():E}if(m.length!==T.length||T.length!==w.length)throw i()}},ER=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,g)=>{let m=e(d);const T=As(m,g);if(!T){const w={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=t(g,w)}return c.set(g,m),T?(await s(g,d.Q,m.Q),await s(g,d.detune,m.detune),await s(g,d.frequency,m.frequency),await s(g,d.gain,m.gain)):(await i(g,d.Q,m.Q),await i(g,d.detune,m.detune),await i(g,d.frequency,m.frequency),await i(g,d.gain,m.gain)),await a(d,g,m),m};return{render(d,g){const m=c.get(g);return m!==void 0?Promise.resolve(m):f(d,g)}}},CR=(s,t)=>(e,i)=>{const a=t.get(e);if(a!==void 0)return a;const c=s.get(e);if(c!==void 0)return c;try{const f=i();return f instanceof Promise?(s.set(e,f),f.catch(()=>!1).then(d=>(s.delete(e),t.set(e,d),d))):(t.set(e,f),f)}catch{return t.set(e,!1),!1}},xR={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},RR=(s,t,e,i,a)=>class extends s{constructor(f,d){const g=i(f),m={...xR,...d},T=e(g,m),w=a(g)?t():null;super(f,!1,T,w)}},NR=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!As(d,f)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=s(f,m)}return i.set(f,d),await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},IR={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},OR=(s,t,e,i,a,c)=>class extends s{constructor(d,g){const m=i(d),T=c({...IR,...g}),w=e(m,T),E=a(m)?t():null;super(d,!1,w,E)}},DR=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!As(d,f)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=s(f,m)}return i.set(f,d),await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},MR=s=>(t,e,i)=>s(e,t,i),kR=s=>(t,e,i=0,a=0)=>{const c=t[i];if(c===void 0)throw s();return o0(e)?c.connect(e,0,a):c.connect(e,0)},VR=s=>(t,e)=>{const i=s(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=t.createBuffer(1,2,44100);return i.buffer=a,i.loop=!0,i.connect(e),i.start(),()=>{i.stop(),i.disconnect(e)}},jR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},LR=(s,t,e,i,a,c,f)=>class extends s{constructor(g,m){const T=a(g),w={...jR,...m},E=i(T,w),N=c(T),O=N?e():null;super(g,!1,E,O),this._constantSourceNodeRenderer=O,this._nativeConstantSourceNode=E,this._offset=t(this,N,E.offset,$s,_r),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(g){const m=typeof g=="function"?f(this,g):null;this._nativeConstantSourceNode.onended=m;const T=this._nativeConstantSourceNode.onended;this._onended=T!==null&&T===m?g:T}start(g=0){if(this._nativeConstantSourceNode.start(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=g),this.context.state!=="closed"){Ud(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),kl(this)&&vg(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(g=0){this._nativeConstantSourceNode.stop(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=g)}},PR=(s,t,e,i,a)=>()=>{const c=new WeakMap;let f=null,d=null;const g=async(m,T)=>{let w=e(m);const E=As(w,T);if(!E){const N={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,offset:w.offset.value};w=t(T,N),f!==null&&w.start(f),d!==null&&w.stop(d)}return c.set(T,w),E?await s(T,m.offset,w.offset):await i(T,m.offset,w.offset),await a(m,T,w),w};return{set start(m){f=m},set stop(m){d=m},render(m,T){const w=c.get(T);return w!==void 0?Promise.resolve(w):g(m,T)}}},UR=s=>t=>(s[0]=t,s[0]),zR={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},BR=(s,t,e,i,a,c)=>class extends s{constructor(d,g){const m=i(d),T={...zR,...g},w=e(m,T),N=a(m)?t():null;super(d,!1,w,N),this._isBufferNullified=!1,this._nativeConvolverNode=w,T.buffer!==null&&c(this,T.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const g=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=g.createBuffer(1,1,g.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},qR=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!As(d,f)){const m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=s(f,m)}return i.set(f,d),Jd(d)?await e(c,f,d.inputs[0]):await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},FR=(s,t)=>(e,i,a)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,i,a)}catch(c){throw c.name==="SyntaxError"?s():c}},HR=()=>new DOMException("","DataCloneError"),Cb=s=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(i=>{const a=()=>{e.onmessage=null,t.close(),e.close(),i()};e.onmessage=()=>a();try{t.postMessage(s,[s])}catch{}finally{a()}})},GR=(s,t,e,i,a,c,f,d,g,m,T)=>(w,E)=>{const N=f(w)?w:c(w);if(a.has(E)){const O=e();return Promise.reject(O)}try{a.add(E)}catch{}return t(g,()=>g(N))?N.decodeAudioData(E).then(O=>(Cb(E).catch(()=>{}),t(d,()=>d(O))||T(O),s.add(O),O)):new Promise((O,U)=>{const D=async()=>{try{await Cb(E)}catch{}},z=$=>{U($),D()};try{N.decodeAudioData(E,$=>{typeof $.copyFromChannel!="function"&&(m($),xT($)),s.add($),D().then(()=>O($))},$=>{z($===null?i():$)})}catch($){z($)}})},KR=(s,t,e,i,a,c,f,d)=>(g,m)=>{const T=t.get(g);if(T===void 0)throw new Error("Missing the expected cycle count.");const w=c(g.context),E=d(w);if(T===m){if(t.delete(g),!E&&f(g)){const N=i(g),{outputs:O}=e(g);for(const U of O)if(wg(U)){const D=i(U[0]);s(N,D,U[1],U[2])}else{const D=a(U[0]);N.connect(D,U[1])}}}else t.set(g,T-m)},$R={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},WR=(s,t,e,i,a,c,f)=>class extends s{constructor(g,m){const T=a(g),w={...$R,...m},E=i(T,w),N=c(T),O=N?e(w.maxDelayTime):null;super(g,!1,E,O),this._delayTime=t(this,N,E.delayTime),f(this,w.maxDelayTime)}get delayTime(){return this._delayTime}},YR=(s,t,e,i,a)=>c=>{const f=new WeakMap,d=async(g,m)=>{let T=e(g);const w=As(T,m);if(!w){const E={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,delayTime:T.delayTime.value,maxDelayTime:c};T=t(m,E)}return f.set(m,T),w?await s(m,g.delayTime,T.delayTime):await i(m,g.delayTime,T.delayTime),await a(g,m,T),T};return{render(g,m){const T=f.get(m);return T!==void 0?Promise.resolve(T):d(g,m)}}},QR=s=>(t,e,i,a)=>s(t[a],c=>c[0]===e&&c[1]===i),XR=s=>(t,e)=>{s(t).delete(e)},ZR=s=>"delayTime"in s,JR=(s,t,e)=>function i(a,c){const f=s0(c)?c:e(s,c);if(ZR(f))return[];if(a[0]===f)return[a];if(a.includes(f))return[];const{outputs:d}=t(f);return Array.from(d).map(g=>i([...a,f],g[0])).reduce((g,m)=>g.concat(m),[])},Vy=(s,t,e)=>{const i=t[e];if(i===void 0)throw s();return i},tN=s=>(t,e=void 0,i=void 0,a=0)=>e===void 0?t.forEach(c=>c.disconnect()):typeof e=="number"?Vy(s,t,e).disconnect():o0(e)?i===void 0?t.forEach(c=>c.disconnect(e)):a===void 0?Vy(s,t,i).disconnect(e,0):Vy(s,t,i).disconnect(e,0,a):i===void 0?t.forEach(c=>c.disconnect(e)):Vy(s,t,i).disconnect(e,0),eN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},nN=(s,t,e,i,a,c,f,d)=>class extends s{constructor(m,T){const w=c(m),E={...eN,...T},N=i(w,E),O=f(w),U=O?e():null;super(m,!1,N,U),this._attack=t(this,O,N.attack),this._knee=t(this,O,N.knee),this._nativeDynamicsCompressorNode=N,this._ratio=t(this,O,N.ratio),this._release=t(this,O,N.release),this._threshold=t(this,O,N.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const T=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=T,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const T=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=T,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},iN=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,g)=>{let m=e(d);const T=As(m,g);if(!T){const w={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=t(g,w)}return c.set(g,m),T?(await s(g,d.attack,m.attack),await s(g,d.knee,m.knee),await s(g,d.ratio,m.ratio),await s(g,d.release,m.release),await s(g,d.threshold,m.threshold)):(await i(g,d.attack,m.attack),await i(g,d.knee,m.knee),await i(g,d.ratio,m.ratio),await i(g,d.release,m.release),await i(g,d.threshold,m.threshold)),await a(d,g,m),m};return{render(d,g){const m=c.get(g);return m!==void 0?Promise.resolve(m):f(d,g)}}},sN=()=>new DOMException("","EncodingError"),rN=s=>t=>new Promise((e,i)=>{if(s===null){i(new SyntaxError);return}const a=s.document.head;if(a===null)i(new SyntaxError);else{const c=s.document.createElement("script"),f=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(f),g=s.onerror,m=()=>{s.onerror=g,URL.revokeObjectURL(d)};s.onerror=(T,w,E,N,O)=>{if(w===d||w===s.location.href&&E===1&&N===1)return m(),i(O),!1;if(g!==null)return g(T,w,E,N,O)},c.onerror=()=>{m(),i(new SyntaxError)},c.onload=()=>{m(),e()},c.src=d,c.type="module",a.appendChild(c)}}),aN=s=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,i,a){if(i!==null){let c=this._listeners.get(i);c===void 0&&(c=s(this,i),typeof i=="function"&&this._listeners.set(i,c)),this._nativeEventTarget.addEventListener(e,c,a)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,i,a){const c=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(e,c===void 0?null:c,a)}},oN=s=>(t,e,i)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return i()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},lN=s=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw s()},cN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},uN=(s,t,e,i,a,c)=>class extends s{constructor(d,g){const m=a(d),T={...cN,...g},w=i(m,T),E=c(m),N=E?e():null;super(d,!1,w,N),this._gain=t(this,E,w.gain,$s,_r)}get gain(){return this._gain}},hN=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,g)=>{let m=e(d);const T=As(m,g);if(!T){const w={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=t(g,w)}return c.set(g,m),T?await s(g,d.gain,m.gain):await i(g,d.gain,m.gain),await a(d,g,m),m};return{render(d,g){const m=c.get(g);return m!==void 0?Promise.resolve(m):f(d,g)}}},fN=(s,t)=>e=>t(s,e),dN=s=>t=>{const e=s(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},pN=s=>t=>{var e;return(e=s.get(t))!==null&&e!==void 0?e:0},mN=s=>t=>{const e=s(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},gN=s=>t=>s.get(t),Bi=()=>new DOMException("","InvalidStateError"),_N=s=>t=>{const e=s.get(t);if(e===void 0)throw Bi();return e},yN=(s,t)=>e=>{let i=s.get(e);if(i!==void 0)return i;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),s.set(e,i),i},vN=s=>t=>{const e=s.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},O0=()=>new DOMException("","InvalidAccessError"),TN=s=>{s.getFrequencyResponse=(t=>(e,i,a)=>{if(e.length!==i.length||i.length!==a.length)throw O0();return t.call(s,e,i,a)})(s.getFrequencyResponse)},wN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},bN=(s,t,e,i,a,c)=>class extends s{constructor(d,g){const m=i(d),T=a(m),w={...wN,...g},E=t(m,T?null:d.baseLatency,w),N=T?e(w.feedback,w.feedforward):null;super(d,!1,E,N),TN(E),this._nativeIIRFilterNode=E,c(this,1)}getFrequencyResponse(d,g,m){return this._nativeIIRFilterNode.getFrequencyResponse(d,g,m)}},xA=(s,t,e,i,a,c,f,d,g,m,T)=>{const w=m.length;let E=d;for(let N=0;N<w;N+=1){let O=e[0]*m[N];for(let U=1;U<a;U+=1){const D=E-U&g-1;O+=e[U]*c[D],O-=s[U]*f[D]}for(let U=a;U<i;U+=1)O+=e[U]*c[E-U&g-1];for(let U=a;U<t;U+=1)O-=s[U]*f[E-U&g-1];c[E]=m[N],f[E]=O,E=E+1&g-1,T[N]=O}return E},SN=(s,t,e,i)=>{const a=e instanceof Float64Array?e:new Float64Array(e),c=i instanceof Float64Array?i:new Float64Array(i),f=a.length,d=c.length,g=Math.min(f,d);if(a[0]!==1){for(let O=0;O<f;O+=1)c[O]/=a[0];for(let O=1;O<d;O+=1)a[O]/=a[0]}const m=32,T=new Float32Array(m),w=new Float32Array(m),E=t.createBuffer(s.numberOfChannels,s.length,s.sampleRate),N=s.numberOfChannels;for(let O=0;O<N;O+=1){const U=s.getChannelData(O),D=E.getChannelData(O);T.fill(0),w.fill(0),xA(a,f,c,d,g,T,w,0,m,U,D)}return E},AN=(s,t,e,i,a)=>(c,f)=>{const d=new WeakMap;let g=null;const m=async(T,w)=>{let E=null,N=t(T);const O=As(N,w);if(w.createIIRFilter===void 0?E=s(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):O||(N=w.createIIRFilter(f,c)),d.set(w,E===null?N:E),E!==null){if(g===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new e(T.context.destination.channelCount,T.context.length,w.sampleRate);g=(async()=>{await i(T,D,D.destination);const z=await a(D);return SN(z,w,c,f)})()}const U=await g;return E.buffer=U,E.start(0),E}return await i(T,w,N),N};return{render(T,w){const E=d.get(w);return E!==void 0?Promise.resolve(E):m(T,w)}}},EN=(s,t,e,i,a,c)=>f=>(d,g)=>{const m=s.get(d);if(m===void 0){if(!f&&c(d)){const T=i(d),{outputs:w}=e(d);for(const E of w)if(wg(E)){const N=i(E[0]);t(T,N,E[1],E[2])}else{const N=a(E[0]);T.disconnect(N,E[1])}}s.set(d,g)}else s.set(d,m+g)},CN=(s,t)=>e=>{const i=s.get(e);return t(i)||t(e)},xN=(s,t)=>e=>s.has(e)||t(e),RN=(s,t)=>e=>s.has(e)||t(e),NN=(s,t)=>e=>{const i=s.get(e);return t(i)||t(e)},IN=s=>t=>s!==null&&t instanceof s,ON=s=>t=>s!==null&&typeof s.AudioNode=="function"&&t instanceof s.AudioNode,DN=s=>t=>s!==null&&typeof s.AudioParam=="function"&&t instanceof s.AudioParam,MN=(s,t)=>e=>s(e)||t(e),kN=s=>t=>s!==null&&t instanceof s,VN=s=>s!==null&&s.isSecureContext,jN=(s,t,e,i)=>class extends s{constructor(c,f){const d=e(c),g=t(d,f);if(i(d))throw TypeError();super(c,!0,g,null),this._nativeMediaElementAudioSourceNode=g}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},LN={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},PN=(s,t,e,i)=>class extends s{constructor(c,f){const d=e(c);if(i(d))throw new TypeError;const g={...LN,...f},m=t(d,g);super(c,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},UN=(s,t,e,i)=>class extends s{constructor(c,f){const d=e(c),g=t(d,f);if(i(d))throw new TypeError;super(c,!0,g,null),this._nativeMediaStreamAudioSourceNode=g}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},zN=(s,t,e)=>class extends s{constructor(a,c){const f=e(a),d=t(f,c);super(a,!0,d,null)}},BN=(s,t,e,i,a,c)=>class extends e{constructor(d,g){super(d),this._nativeContext=d,N0.set(this,d),i(d)&&a.set(d,new Set),this._destination=new s(this,g),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const g=typeof d=="function"?c(this,d):null;this._nativeContext.onstatechange=g;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===g?d:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},lg=s=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=s.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},qN=(s,t)=>(e,i,a)=>{const c=new Set;return e.connect=(f=>(d,g=0,m=0)=>{const T=c.size===0;if(t(d))return f.call(e,d,g,m),s(c,[d,g,m],w=>w[0]===d&&w[1]===g&&w[2]===m,!0),T&&i(),d;f.call(e,d,g),s(c,[d,g],w=>w[0]===d&&w[1]===g,!0),T&&i()})(e.connect),e.disconnect=(f=>(d,g,m)=>{const T=c.size>0;if(d===void 0)f.apply(e),c.clear();else if(typeof d=="number"){f.call(e,d);for(const E of c)E[1]===d&&c.delete(E)}else{t(d)?f.call(e,d,g,m):f.call(e,d,g);for(const E of c)E[0]===d&&(g===void 0||E[1]===g)&&(m===void 0||E[2]===m)&&c.delete(E)}const w=c.size===0;T&&w&&a()})(e.disconnect),e},qn=(s,t,e)=>{const i=t[e];i!==void 0&&i!==s[e]&&(s[e]=i)},Di=(s,t)=>{qn(s,t,"channelCount"),qn(s,t,"channelCountMode"),qn(s,t,"channelInterpretation")},xb=s=>typeof s.getFloatTimeDomainData=="function",FN=s=>{s.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);s.getByteTimeDomainData(e);const i=Math.max(e.length,s.fftSize);for(let a=0;a<i;a+=1)t[a]=(e[a]-128)*.0078125;return t}},HN=(s,t)=>(e,i)=>{const a=e.createAnalyser();if(Di(a,i),!(i.maxDecibels>i.minDecibels))throw t();return qn(a,i,"fftSize"),qn(a,i,"maxDecibels"),qn(a,i,"minDecibels"),qn(a,i,"smoothingTimeConstant"),s(xb,()=>xb(a))||FN(a),a},GN=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,si=(s,t,e)=>{const i=t[e];i!==void 0&&i!==s[e].value&&(s[e].value=i)},KN=s=>{s.start=(t=>{let e=!1;return(i=0,a=0,c)=>{if(e)throw Bi();t.call(s,i,a,c),e=!0}})(s.start)},IT=s=>{s.start=(t=>(e=0,i=0,a)=>{if(typeof a=="number"&&a<0||i<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(s,e,i,a)})(s.start)},OT=s=>{s.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(s,e)})(s.stop)},$N=(s,t,e,i,a,c,f,d,g,m,T)=>(w,E)=>{const N=w.createBufferSource();return Di(N,E),si(N,E,"playbackRate"),qn(N,E,"buffer"),qn(N,E,"loop"),qn(N,E,"loopEnd"),qn(N,E,"loopStart"),t(e,()=>e(w))||KN(N),t(i,()=>i(w))||g(N),t(a,()=>a(w))||m(N,w),t(c,()=>c(w))||IT(N),t(f,()=>f(w))||T(N,w),t(d,()=>d(w))||OT(N),s(w,N),N},WN=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,YN=(s,t)=>(e,i,a)=>{const c=e.destination;if(c.channelCount!==i)try{c.channelCount=i}catch{}a&&c.channelCountMode!=="explicit"&&(c.channelCountMode="explicit"),c.maxChannelCount===0&&Object.defineProperty(c,"maxChannelCount",{value:i});const f=s(e,{channelCount:i,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(f,"channelCount",d=>()=>d.call(f),d=>g=>{d.call(f,g);try{c.channelCount=g}catch(m){if(g>c.maxChannelCount)throw m}}),t(f,"channelCountMode",d=>()=>d.call(f),d=>g=>{d.call(f,g),c.channelCountMode=g}),t(f,"channelInterpretation",d=>()=>d.call(f),d=>g=>{d.call(f,g),c.channelInterpretation=g}),Object.defineProperty(f,"maxChannelCount",{get:()=>c.maxChannelCount}),f.connect(c),f},QN=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,XN=s=>{const{port1:t}=new MessageChannel;try{t.postMessage(s)}finally{t.close()}},ZN=(s,t,e,i,a)=>(c,f,d,g,m,T)=>{if(d!==null)try{const w=new d(c,g,T),E=new Map;let N=null;if(Object.defineProperties(w,{channelCount:{get:()=>T.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>N,set:O=>{typeof N=="function"&&w.removeEventListener("processorerror",N),N=typeof O=="function"?O:null,typeof N=="function"&&w.addEventListener("processorerror",N)}}}),w.addEventListener=(O=>(...U)=>{if(U[0]==="processorerror"){const D=typeof U[1]=="function"?U[1]:typeof U[1]=="object"&&U[1]!==null&&typeof U[1].handleEvent=="function"?U[1].handleEvent:null;if(D!==null){const z=E.get(U[1]);z!==void 0?U[1]=z:(U[1]=$=>{$.type==="error"?(Object.defineProperties($,{type:{value:"processorerror"}}),D($)):D(new ErrorEvent(U[0],{...$}))},E.set(D,U[1]))}}return O.call(w,"error",U[1],U[2]),O.call(w,...U)})(w.addEventListener),w.removeEventListener=(O=>(...U)=>{if(U[0]==="processorerror"){const D=E.get(U[1]);D!==void 0&&(E.delete(U[1]),U[1]=D)}return O.call(w,"error",U[1],U[2]),O.call(w,U[0],U[1],U[2])})(w.removeEventListener),T.numberOfOutputs!==0){const O=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return w.connect(O).connect(c.destination),a(w,()=>O.disconnect(),()=>O.connect(c.destination))}return w}catch(w){throw w.code===11?i():w}if(m===void 0)throw i();return XN(T),t(c,f,m,T)},RA=(s,t)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*t))))),JN=s=>new Promise((t,e)=>{const{port1:i,port2:a}=new MessageChannel;i.onmessage=({data:c})=>{i.close(),a.close(),t(c)},i.onmessageerror=({data:c})=>{i.close(),a.close(),e(c)},a.postMessage(s)}),tI=async(s,t)=>{const e=await JN(t);return new s(e)},eI=(s,t,e,i)=>{let a=K1.get(s);a===void 0&&(a=new WeakMap,K1.set(s,a));const c=tI(e,i);return a.set(t,c),c},nI=(s,t,e,i,a,c,f,d,g,m,T,w,E)=>(N,O,U,D)=>{if(D.numberOfInputs===0&&D.numberOfOutputs===0)throw g();const z=Array.isArray(D.outputChannelCount)?D.outputChannelCount:Array.from(D.outputChannelCount);if(z.some(gt=>gt<1))throw g();if(z.length!==D.numberOfOutputs)throw t();if(D.channelCountMode!=="explicit")throw g();const $=D.channelCount*D.numberOfInputs,Q=z.reduce((gt,Pt)=>gt+Pt,0),nt=U.parameterDescriptors===void 0?0:U.parameterDescriptors.length;if($+nt>6||Q>6)throw g();const K=new MessageChannel,X=[],R=[];for(let gt=0;gt<D.numberOfInputs;gt+=1)X.push(f(N,{channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,gain:1})),R.push(a(N,{channelCount:D.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:D.channelCount}));const C=[];if(U.parameterDescriptors!==void 0)for(const{defaultValue:gt,maxValue:Pt,minValue:Yt,name:Bt}of U.parameterDescriptors){const Ot=c(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D.parameterData[Bt]!==void 0?D.parameterData[Bt]:gt===void 0?0:gt});Object.defineProperties(Ot.offset,{defaultValue:{get:()=>gt===void 0?0:gt},maxValue:{get:()=>Pt===void 0?$s:Pt},minValue:{get:()=>Yt===void 0?_r:Yt}}),C.push(Ot)}const M=i(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,$+nt)}),V=RA(O,N.sampleRate),P=d(N,V,$+nt,Math.max(1,Q)),F=a(N,{channelCount:Math.max(1,Q),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Q)}),B=[];for(let gt=0;gt<D.numberOfOutputs;gt+=1)B.push(i(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:z[gt]}));for(let gt=0;gt<D.numberOfInputs;gt+=1){X[gt].connect(R[gt]);for(let Pt=0;Pt<D.channelCount;Pt+=1)R[gt].connect(M,Pt,gt*D.channelCount+Pt)}const At=new EA(U.parameterDescriptors===void 0?[]:U.parameterDescriptors.map(({name:gt},Pt)=>{const Yt=C[Pt];return Yt.connect(M,0,$+Pt),Yt.start(0),[gt,Yt.offset]}));M.connect(P);let Mt=D.channelInterpretation,Z=null;const rt=D.numberOfOutputs===0?[P]:B,_t={get bufferSize(){return V},get channelCount(){return D.channelCount},set channelCount(gt){throw e()},get channelCountMode(){return D.channelCountMode},set channelCountMode(gt){throw e()},get channelInterpretation(){return Mt},set channelInterpretation(gt){for(const Pt of X)Pt.channelInterpretation=gt;Mt=gt},get context(){return P.context},get inputs(){return X},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get onprocessorerror(){return Z},set onprocessorerror(gt){typeof Z=="function"&&_t.removeEventListener("processorerror",Z),Z=typeof gt=="function"?gt:null,typeof Z=="function"&&_t.addEventListener("processorerror",Z)},get parameters(){return At},get port(){return K.port2},addEventListener(...gt){return P.addEventListener(gt[0],gt[1],gt[2])},connect:s.bind(null,rt),disconnect:m.bind(null,rt),dispatchEvent(...gt){return P.dispatchEvent(gt[0])},removeEventListener(...gt){return P.removeEventListener(gt[0],gt[1],gt[2])}},ht=new Map;K.port1.addEventListener=(gt=>(...Pt)=>{if(Pt[0]==="message"){const Yt=typeof Pt[1]=="function"?Pt[1]:typeof Pt[1]=="object"&&Pt[1]!==null&&typeof Pt[1].handleEvent=="function"?Pt[1].handleEvent:null;if(Yt!==null){const Bt=ht.get(Pt[1]);Bt!==void 0?Pt[1]=Bt:(Pt[1]=Ot=>{T(N.currentTime,N.sampleRate,()=>Yt(Ot))},ht.set(Yt,Pt[1]))}}return gt.call(K.port1,Pt[0],Pt[1],Pt[2])})(K.port1.addEventListener),K.port1.removeEventListener=(gt=>(...Pt)=>{if(Pt[0]==="message"){const Yt=ht.get(Pt[1]);Yt!==void 0&&(ht.delete(Pt[1]),Pt[1]=Yt)}return gt.call(K.port1,Pt[0],Pt[1],Pt[2])})(K.port1.removeEventListener);let ft=null;Object.defineProperty(K.port1,"onmessage",{get:()=>ft,set:gt=>{typeof ft=="function"&&K.port1.removeEventListener("message",ft),ft=typeof gt=="function"?gt:null,typeof ft=="function"&&(K.port1.addEventListener("message",ft),K.port1.start())}}),U.prototype.port=K.port1;let G=null;eI(N,_t,U,D).then(gt=>G=gt);const wt=c0(D.numberOfInputs,D.channelCount),Tt=c0(D.numberOfOutputs,z),It=U.parameterDescriptors===void 0?[]:U.parameterDescriptors.reduce((gt,{name:Pt})=>({...gt,[Pt]:new Float32Array(128)}),{});let jt=!0;const $t=()=>{D.numberOfOutputs>0&&P.disconnect(F);for(let gt=0,Pt=0;gt<D.numberOfOutputs;gt+=1){const Yt=B[gt];for(let Bt=0;Bt<z[gt];Bt+=1)F.disconnect(Yt,Pt+Bt,Bt);Pt+=z[gt]}},kt=new Map;P.onaudioprocess=({inputBuffer:gt,outputBuffer:Pt})=>{if(G!==null){const Yt=w(_t);for(let Bt=0;Bt<V;Bt+=128){for(let Ot=0;Ot<D.numberOfInputs;Ot+=1)for(let Vt=0;Vt<D.channelCount;Vt+=1)l0(gt,wt[Ot],Vt,Vt,Bt);U.parameterDescriptors!==void 0&&U.parameterDescriptors.forEach(({name:Ot},Vt)=>{l0(gt,It,Ot,$+Vt,Bt)});for(let Ot=0;Ot<D.numberOfInputs;Ot+=1)for(let Vt=0;Vt<z[Ot];Vt+=1)Tt[Ot][Vt].byteLength===0&&(Tt[Ot][Vt]=new Float32Array(128));try{const Ot=wt.map((te,oe)=>{if(Yt[oe].size>0)return kt.set(oe,V/128),te;const tn=kt.get(oe);return tn===void 0?[]:(te.every(Rn=>Rn.every(Fi=>Fi===0))&&(tn===1?kt.delete(oe):kt.set(oe,tn-1)),te)});jt=T(N.currentTime+Bt/N.sampleRate,N.sampleRate,()=>G.process(Ot,Tt,It));for(let te=0,oe=0;te<D.numberOfOutputs;te+=1){for(let We=0;We<z[te];We+=1)CA(Pt,Tt[te],We,oe+We,Bt);oe+=z[te]}}catch(Ot){jt=!1,_t.dispatchEvent(new ErrorEvent("processorerror",{colno:Ot.colno,filename:Ot.filename,lineno:Ot.lineno,message:Ot.message}))}if(!jt){for(let Ot=0;Ot<D.numberOfInputs;Ot+=1){X[Ot].disconnect(R[Ot]);for(let Vt=0;Vt<D.channelCount;Vt+=1)R[Bt].disconnect(M,Vt,Ot*D.channelCount+Vt)}if(U.parameterDescriptors!==void 0){const Ot=U.parameterDescriptors.length;for(let Vt=0;Vt<Ot;Vt+=1){const te=C[Vt];te.disconnect(M,0,$+Vt),te.stop()}}M.disconnect(P),P.onaudioprocess=null,Zt?$t():be();break}}}};let Zt=!1;const an=f(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ve=()=>P.connect(an).connect(N.destination),be=()=>{P.disconnect(an),an.disconnect()},yn=()=>{if(jt){be(),D.numberOfOutputs>0&&P.connect(F);for(let gt=0,Pt=0;gt<D.numberOfOutputs;gt+=1){const Yt=B[gt];for(let Bt=0;Bt<z[gt];Bt+=1)F.connect(Yt,Pt+Bt,Bt);Pt+=z[gt]}}Zt=!0},ae=()=>{jt&&(Ve(),$t()),Zt=!1};return Ve(),E(_t,yn,ae)},NA=(s,t)=>{const e=s.createBiquadFilter();return Di(e,t),si(e,t,"Q"),si(e,t,"detune"),si(e,t,"frequency"),si(e,t,"gain"),qn(e,t,"type"),e},iI=(s,t)=>(e,i)=>{const a=e.createChannelMerger(i.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&t(e,a),Di(a,i),a},sI=s=>{const t=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Bi()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Bi()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Bi()}})},bg=(s,t)=>{const e=s.createChannelSplitter(t.numberOfOutputs);return Di(e,t),sI(e),e},rI=(s,t,e,i,a)=>(c,f)=>{if(c.createConstantSource===void 0)return e(c,f);const d=c.createConstantSource();return Di(d,f),si(d,f,"offset"),t(i,()=>i(c))||IT(d),t(a,()=>a(c))||OT(d),s(c,d),d},tp=(s,t)=>(s.connect=t.connect.bind(t),s.disconnect=t.disconnect.bind(t),s),aI=(s,t,e,i)=>(a,{offset:c,...f})=>{const d=a.createBuffer(1,2,44100),g=t(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=e(a,{...f,gain:c}),T=d.getChannelData(0);T[0]=1,T[1]=1,g.buffer=d,g.loop=!0;const w={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(O){m.channelCount=O},get channelCountMode(){return m.channelCountMode},set channelCountMode(O){m.channelCountMode=O},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(O){m.channelInterpretation=O},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return g.onended},set onended(O){g.onended=O},addEventListener(...O){return g.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return g.dispatchEvent(O[0])},removeEventListener(...O){return g.removeEventListener(O[0],O[1],O[2])},start(O=0){g.start.call(g,O)},stop(O=0){g.stop.call(g,O)}},E=()=>g.connect(m),N=()=>g.disconnect(m);return s(a,g),i(tp(w,m),E,N)},oI=(s,t)=>(e,i)=>{const a=e.createConvolver();if(Di(a,i),i.disableNormalization===a.normalize&&(a.normalize=!i.disableNormalization),qn(a,i,"buffer"),i.channelCount>2||(t(a,"channelCount",c=>()=>c.call(a),c=>f=>{if(f>2)throw s();return c.call(a,f)}),i.channelCountMode==="max"))throw s();return t(a,"channelCountMode",c=>()=>c.call(a),c=>f=>{if(f==="max")throw s();return c.call(a,f)}),a},IA=(s,t)=>{const e=s.createDelay(t.maxDelayTime);return Di(e,t),si(e,t,"delayTime"),e},lI=s=>(t,e)=>{const i=t.createDynamicsCompressor();if(Di(i,e),e.channelCount>2||e.channelCountMode==="max")throw s();return si(i,e,"attack"),si(i,e,"knee"),si(i,e,"ratio"),si(i,e,"release"),si(i,e,"threshold"),i},wr=(s,t)=>{const e=s.createGain();return Di(e,t),si(e,t,"gain"),e},cI=s=>(t,e,i)=>{if(t.createIIRFilter===void 0)return s(t,e,i);const a=t.createIIRFilter(i.feedforward,i.feedback);return Di(a,i),a};function uI(s,t){const e=t[0]*t[0]+t[1]*t[1];return[(s[0]*t[0]+s[1]*t[1])/e,(s[1]*t[0]-s[0]*t[1])/e]}function hI(s,t){return[s[0]*t[0]-s[1]*t[1],s[0]*t[1]+s[1]*t[0]]}function Rb(s,t){let e=[0,0];for(let i=s.length-1;i>=0;i-=1)e=hI(e,t),e[0]+=s[i];return e}const fI=(s,t,e,i)=>(a,c,{channelCount:f,channelCountMode:d,channelInterpretation:g,feedback:m,feedforward:T})=>{const w=RA(c,a.sampleRate),E=m instanceof Float64Array?m:new Float64Array(m),N=T instanceof Float64Array?T:new Float64Array(T),O=E.length,U=N.length,D=Math.min(O,U);if(O===0||O>20)throw i();if(E[0]===0)throw t();if(U===0||U>20)throw i();if(N[0]===0)throw t();if(E[0]!==1){for(let C=0;C<U;C+=1)N[C]/=E[0];for(let C=1;C<O;C+=1)E[C]/=E[0]}const z=e(a,w,f,f);z.channelCount=f,z.channelCountMode=d,z.channelInterpretation=g;const $=32,Q=[],nt=[],K=[];for(let C=0;C<f;C+=1){Q.push(0);const M=new Float32Array($),V=new Float32Array($);M.fill(0),V.fill(0),nt.push(M),K.push(V)}z.onaudioprocess=C=>{const M=C.inputBuffer,V=C.outputBuffer,P=M.numberOfChannels;for(let F=0;F<P;F+=1){const B=M.getChannelData(F),At=V.getChannelData(F);Q[F]=xA(E,O,N,U,D,nt[F],K[F],Q[F],$,B,At)}};const X=a.sampleRate/2;return tp({get bufferSize(){return w},get channelCount(){return z.channelCount},set channelCount(C){z.channelCount=C},get channelCountMode(){return z.channelCountMode},set channelCountMode(C){z.channelCountMode=C},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(C){z.channelInterpretation=C},get context(){return z.context},get inputs(){return[z]},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},addEventListener(...C){return z.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return z.dispatchEvent(C[0])},getFrequencyResponse(C,M,V){if(C.length!==M.length||M.length!==V.length)throw s();const P=C.length;for(let F=0;F<P;F+=1){const B=-Math.PI*(C[F]/X),At=[Math.cos(B),Math.sin(B)],Mt=Rb(N,At),Z=Rb(E,At),rt=uI(Mt,Z);M[F]=Math.sqrt(rt[0]*rt[0]+rt[1]*rt[1]),V[F]=Math.atan2(rt[1],rt[0])}},removeEventListener(...C){return z.removeEventListener(C[0],C[1],C[2])}},z)},dI=(s,t)=>s.createMediaElementSource(t.mediaElement),pI=(s,t)=>{const e=s.createMediaStreamDestination();return Di(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},mI=(s,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((c,f)=>c.id<f.id?-1:c.id>f.id?1:0);const i=e.slice(0,1),a=s.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(a,"mediaStream",{value:t}),a},gI=(s,t)=>(e,{mediaStreamTrack:i})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(i);const a=new MediaStream([i]),c=e.createMediaStreamSource(a);if(i.kind!=="audio")throw s();if(t(e))throw new TypeError;return c},_I=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,yI=(s,t,e,i,a,c)=>(f,d)=>{const g=f.createOscillator();return Di(g,d),si(g,d,"detune"),si(g,d,"frequency"),d.periodicWave!==void 0?g.setPeriodicWave(d.periodicWave):qn(g,d,"type"),t(e,()=>e(f))||IT(g),t(i,()=>i(f))||c(g,f),t(a,()=>a(f))||OT(g),s(f,g),g},vI=s=>(t,e)=>{const i=t.createPanner();return i.orientationX===void 0?s(t,e):(Di(i,e),si(i,e,"orientationX"),si(i,e,"orientationY"),si(i,e,"orientationZ"),si(i,e,"positionX"),si(i,e,"positionY"),si(i,e,"positionZ"),qn(i,e,"coneInnerAngle"),qn(i,e,"coneOuterAngle"),qn(i,e,"coneOuterGain"),qn(i,e,"distanceModel"),qn(i,e,"maxDistance"),qn(i,e,"panningModel"),qn(i,e,"refDistance"),qn(i,e,"rolloffFactor"),i)},TI=(s,t,e,i,a,c,f,d,g,m)=>(T,{coneInnerAngle:w,coneOuterAngle:E,coneOuterGain:N,distanceModel:O,maxDistance:U,orientationX:D,orientationY:z,orientationZ:$,panningModel:Q,positionX:nt,positionY:K,positionZ:X,refDistance:R,rolloffFactor:C,...M})=>{const V=T.createPanner();if(M.channelCount>2||M.channelCountMode==="max")throw f();Di(V,M);const P={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=e(T,{...P,channelInterpretation:"speakers",numberOfInputs:6}),B=i(T,{...M,gain:1}),At=i(T,{...P,gain:1}),Mt=i(T,{...P,gain:0}),Z=i(T,{...P,gain:0}),rt=i(T,{...P,gain:0}),_t=i(T,{...P,gain:0}),ht=i(T,{...P,gain:0}),ft=a(T,256,6,1),G=c(T,{...P,curve:new Float32Array([1,1]),oversample:"none"});let at=[D,z,$],wt=[nt,K,X];const Tt=new Float32Array(1);ft.onaudioprocess=({inputBuffer:kt})=>{const Zt=[g(kt,Tt,0),g(kt,Tt,1),g(kt,Tt,2)];Zt.some((Ve,be)=>Ve!==at[be])&&(V.setOrientation(...Zt),at=Zt);const an=[g(kt,Tt,3),g(kt,Tt,4),g(kt,Tt,5)];an.some((Ve,be)=>Ve!==wt[be])&&(V.setPosition(...an),wt=an)},Object.defineProperty(Mt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(rt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_t.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ht.gain,"defaultValue",{get:()=>0});const It={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(kt){if(kt>2)throw f();B.channelCount=kt,V.channelCount=kt},get channelCountMode(){return V.channelCountMode},set channelCountMode(kt){if(kt==="max")throw f();B.channelCountMode=kt,V.channelCountMode=kt},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(kt){B.channelInterpretation=kt,V.channelInterpretation=kt},get coneInnerAngle(){return V.coneInnerAngle},set coneInnerAngle(kt){V.coneInnerAngle=kt},get coneOuterAngle(){return V.coneOuterAngle},set coneOuterAngle(kt){V.coneOuterAngle=kt},get coneOuterGain(){return V.coneOuterGain},set coneOuterGain(kt){if(kt<0||kt>1)throw t();V.coneOuterGain=kt},get context(){return V.context},get distanceModel(){return V.distanceModel},set distanceModel(kt){V.distanceModel=kt},get inputs(){return[B]},get maxDistance(){return V.maxDistance},set maxDistance(kt){if(kt<0)throw new RangeError;V.maxDistance=kt},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get orientationX(){return At.gain},get orientationY(){return Mt.gain},get orientationZ(){return Z.gain},get panningModel(){return V.panningModel},set panningModel(kt){V.panningModel=kt},get positionX(){return rt.gain},get positionY(){return _t.gain},get positionZ(){return ht.gain},get refDistance(){return V.refDistance},set refDistance(kt){if(kt<0)throw new RangeError;V.refDistance=kt},get rolloffFactor(){return V.rolloffFactor},set rolloffFactor(kt){if(kt<0)throw new RangeError;V.rolloffFactor=kt},addEventListener(...kt){return B.addEventListener(kt[0],kt[1],kt[2])},dispatchEvent(...kt){return B.dispatchEvent(kt[0])},removeEventListener(...kt){return B.removeEventListener(kt[0],kt[1],kt[2])}};w!==It.coneInnerAngle&&(It.coneInnerAngle=w),E!==It.coneOuterAngle&&(It.coneOuterAngle=E),N!==It.coneOuterGain&&(It.coneOuterGain=N),O!==It.distanceModel&&(It.distanceModel=O),U!==It.maxDistance&&(It.maxDistance=U),D!==It.orientationX.value&&(It.orientationX.value=D),z!==It.orientationY.value&&(It.orientationY.value=z),$!==It.orientationZ.value&&(It.orientationZ.value=$),Q!==It.panningModel&&(It.panningModel=Q),nt!==It.positionX.value&&(It.positionX.value=nt),K!==It.positionY.value&&(It.positionY.value=K),X!==It.positionZ.value&&(It.positionZ.value=X),R!==It.refDistance&&(It.refDistance=R),C!==It.rolloffFactor&&(It.rolloffFactor=C),(at[0]!==1||at[1]!==0||at[2]!==0)&&V.setOrientation(...at),(wt[0]!==0||wt[1]!==0||wt[2]!==0)&&V.setPosition(...wt);const jt=()=>{B.connect(V),s(B,G,0,0),G.connect(At).connect(F,0,0),G.connect(Mt).connect(F,0,1),G.connect(Z).connect(F,0,2),G.connect(rt).connect(F,0,3),G.connect(_t).connect(F,0,4),G.connect(ht).connect(F,0,5),F.connect(ft).connect(T.destination)},$t=()=>{B.disconnect(V),d(B,G,0,0),G.disconnect(At),At.disconnect(F),G.disconnect(Mt),Mt.disconnect(F),G.disconnect(Z),Z.disconnect(F),G.disconnect(rt),rt.disconnect(F),G.disconnect(_t),_t.disconnect(F),G.disconnect(ht),ht.disconnect(F),F.disconnect(ft),ft.disconnect(T.destination)};return m(tp(It,V),jt,$t)},wI=s=>(t,{disableNormalization:e,imag:i,real:a})=>{const c=i instanceof Float32Array?i:new Float32Array(i),f=a instanceof Float32Array?a:new Float32Array(a),d=t.createPeriodicWave(f,c,{disableNormalization:e});if(Array.from(i).length<2)throw s();return d},Sg=(s,t,e,i)=>s.createScriptProcessor(t,e,i),bI=(s,t)=>(e,i)=>{const a=i.channelCountMode;if(a==="clamped-max")throw t();if(e.createStereoPanner===void 0)return s(e,i);const c=e.createStereoPanner();return Di(c,i),si(c,i,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>a,set:f=>{if(f!==a)throw t()}}),c},SI=(s,t,e,i,a,c)=>{const d=new Float32Array([1,1]),g=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},T={...m,oversample:"none"},w=(O,U,D,z)=>{const $=new Float32Array(16385),Q=new Float32Array(16385);for(let M=0;M<16385;M+=1){const V=M/16384*g;$[M]=Math.cos(V),Q[M]=Math.sin(V)}const nt=e(O,{...m,gain:0}),K=i(O,{...T,curve:$}),X=i(O,{...T,curve:d}),R=e(O,{...m,gain:0}),C=i(O,{...T,curve:Q});return{connectGraph(){U.connect(nt),U.connect(X.inputs===void 0?X:X.inputs[0]),U.connect(R),X.connect(D),D.connect(K.inputs===void 0?K:K.inputs[0]),D.connect(C.inputs===void 0?C:C.inputs[0]),K.connect(nt.gain),C.connect(R.gain),nt.connect(z,0,0),R.connect(z,0,1)},disconnectGraph(){U.disconnect(nt),U.disconnect(X.inputs===void 0?X:X.inputs[0]),U.disconnect(R),X.disconnect(D),D.disconnect(K.inputs===void 0?K:K.inputs[0]),D.disconnect(C.inputs===void 0?C:C.inputs[0]),K.disconnect(nt.gain),C.disconnect(R.gain),nt.disconnect(z,0,0),R.disconnect(z,0,1)}}},E=(O,U,D,z)=>{const $=new Float32Array(16385),Q=new Float32Array(16385),nt=new Float32Array(16385),K=new Float32Array(16385),X=Math.floor(16385/2);for(let rt=0;rt<16385;rt+=1)if(rt>X){const _t=(rt-X)/(16384-X)*g;$[rt]=Math.cos(_t),Q[rt]=Math.sin(_t),nt[rt]=0,K[rt]=1}else{const _t=rt/(16384-X)*g;$[rt]=1,Q[rt]=0,nt[rt]=Math.cos(_t),K[rt]=Math.sin(_t)}const R=t(O,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=e(O,{...m,gain:0}),M=i(O,{...T,curve:$}),V=e(O,{...m,gain:0}),P=i(O,{...T,curve:Q}),F=i(O,{...T,curve:d}),B=e(O,{...m,gain:0}),At=i(O,{...T,curve:nt}),Mt=e(O,{...m,gain:0}),Z=i(O,{...T,curve:K});return{connectGraph(){U.connect(R),U.connect(F.inputs===void 0?F:F.inputs[0]),R.connect(C,0),R.connect(V,0),R.connect(B,1),R.connect(Mt,1),F.connect(D),D.connect(M.inputs===void 0?M:M.inputs[0]),D.connect(P.inputs===void 0?P:P.inputs[0]),D.connect(At.inputs===void 0?At:At.inputs[0]),D.connect(Z.inputs===void 0?Z:Z.inputs[0]),M.connect(C.gain),P.connect(V.gain),At.connect(B.gain),Z.connect(Mt.gain),C.connect(z,0,0),B.connect(z,0,0),V.connect(z,0,1),Mt.connect(z,0,1)},disconnectGraph(){U.disconnect(R),U.disconnect(F.inputs===void 0?F:F.inputs[0]),R.disconnect(C,0),R.disconnect(V,0),R.disconnect(B,1),R.disconnect(Mt,1),F.disconnect(D),D.disconnect(M.inputs===void 0?M:M.inputs[0]),D.disconnect(P.inputs===void 0?P:P.inputs[0]),D.disconnect(At.inputs===void 0?At:At.inputs[0]),D.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),M.disconnect(C.gain),P.disconnect(V.gain),At.disconnect(B.gain),Z.disconnect(Mt.gain),C.disconnect(z,0,0),B.disconnect(z,0,0),V.disconnect(z,0,1),Mt.disconnect(z,0,1)}}},N=(O,U,D,z,$)=>{if(U===1)return w(O,D,z,$);if(U===2)return E(O,D,z,$);throw a()};return(O,{channelCount:U,channelCountMode:D,pan:z,...$})=>{if(D==="max")throw a();const Q=s(O,{...$,channelCount:1,channelCountMode:D,numberOfInputs:2}),nt=e(O,{...$,channelCount:U,channelCountMode:D,gain:1}),K=e(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:z});let{connectGraph:X,disconnectGraph:R}=N(O,U,nt,K,Q);Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"maxValue",{get:()=>1}),Object.defineProperty(K.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return nt.channelCount},set channelCount(F){nt.channelCount!==F&&(M&&R(),{connectGraph:X,disconnectGraph:R}=N(O,F,nt,K,Q),M&&X()),nt.channelCount=F},get channelCountMode(){return nt.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw a();nt.channelCountMode=F},get channelInterpretation(){return nt.channelInterpretation},set channelInterpretation(F){nt.channelInterpretation=F},get context(){return nt.context},get inputs(){return[nt]},get numberOfInputs(){return nt.numberOfInputs},get numberOfOutputs(){return nt.numberOfOutputs},get pan(){return K.gain},addEventListener(...F){return nt.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return nt.dispatchEvent(F[0])},removeEventListener(...F){return nt.removeEventListener(F[0],F[1],F[2])}};let M=!1;const V=()=>{X(),M=!0},P=()=>{R(),M=!1};return c(tp(C,Q),V,P)}},AI=(s,t,e,i,a,c,f)=>(d,g)=>{const m=d.createWaveShaper();if(c!==null&&c.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return e(d,g);Di(m,g);const T=g.curve===null||g.curve instanceof Float32Array?g.curve:new Float32Array(g.curve);if(T!==null&&T.length<2)throw t();qn(m,{curve:T},"curve"),qn(m,g,"oversample");let w=null,E=!1;return f(m,"curve",U=>()=>U.call(m),U=>D=>(U.call(m,D),E&&(i(D)&&w===null?w=s(d,m):!i(D)&&w!==null&&(w(),w=null)),D)),a(m,()=>{E=!0,i(m.curve)&&(w=s(d,m))},()=>{E=!1,w!==null&&(w(),w=null)})},EI=(s,t,e,i,a)=>(c,{curve:f,oversample:d,...g})=>{const m=c.createWaveShaper(),T=c.createWaveShaper();Di(m,g),Di(T,g);const w=e(c,{...g,gain:1}),E=e(c,{...g,gain:-1}),N=e(c,{...g,gain:1}),O=e(c,{...g,gain:-1});let U=null,D=!1,z=null;const $={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(K){w.channelCount=K,E.channelCount=K,m.channelCount=K,N.channelCount=K,T.channelCount=K,O.channelCount=K},get channelCountMode(){return m.channelCountMode},set channelCountMode(K){w.channelCountMode=K,E.channelCountMode=K,m.channelCountMode=K,N.channelCountMode=K,T.channelCountMode=K,O.channelCountMode=K},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(K){w.channelInterpretation=K,E.channelInterpretation=K,m.channelInterpretation=K,N.channelInterpretation=K,T.channelInterpretation=K,O.channelInterpretation=K},get context(){return m.context},get curve(){return z},set curve(K){if(K!==null&&K.length<2)throw t();if(K===null)m.curve=K,T.curve=K;else{const X=K.length,R=new Float32Array(X+2-X%2),C=new Float32Array(X+2-X%2);R[0]=K[0],C[0]=-K[X-1];const M=Math.ceil((X+1)/2),V=(X+1)/2-1;for(let P=1;P<M;P+=1){const F=P/M*V,B=Math.floor(F),At=Math.ceil(F);R[P]=B===At?K[B]:(1-(F-B))*K[B]+(1-(At-F))*K[At],C[P]=B===At?-K[X-1-B]:-((1-(F-B))*K[X-1-B])-(1-(At-F))*K[X-1-At]}R[M]=X%2===1?K[M-1]:(K[M-2]+K[M-1])/2,m.curve=R,T.curve=C}z=K,D&&(i(z)&&U===null?U=s(c,w):U!==null&&(U(),U=null))},get inputs(){return[w]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(K){m.oversample=K,T.oversample=K},addEventListener(...K){return w.addEventListener(K[0],K[1],K[2])},dispatchEvent(...K){return w.dispatchEvent(K[0])},removeEventListener(...K){return w.removeEventListener(K[0],K[1],K[2])}};f!==null&&($.curve=f instanceof Float32Array?f:new Float32Array(f)),d!==$.oversample&&($.oversample=d);const Q=()=>{w.connect(m).connect(N),w.connect(E).connect(T).connect(O).connect(N),D=!0,i(z)&&(U=s(c,w))},nt=()=>{w.disconnect(m),m.disconnect(N),w.disconnect(E),E.disconnect(T),T.disconnect(O),O.disconnect(N),D=!1,U!==null&&(U(),U=null)};return a(tp($,N),Q,nt)},Qs=()=>new DOMException("","NotSupportedError"),CI={numberOfChannels:1},xI=(s,t,e,i,a)=>class extends s{constructor(f,d,g){let m;if(typeof f=="number"&&d!==void 0&&g!==void 0)m={length:d,numberOfChannels:f,sampleRate:g};else if(typeof f=="object")m=f;else throw new Error("The given parameters are not valid.");const{length:T,numberOfChannels:w,sampleRate:E}={...CI,...m},N=i(w,T,E);t(lg,()=>lg(N))||N.addEventListener("statechange",(()=>{let O=0;const U=D=>{this._state==="running"&&(O>0?(N.removeEventListener("statechange",U),D.stopImmediatePropagation(),this._waitForThePromiseToSettle(D)):O+=1)};return U})()),super(N,w),this._length=T,this._nativeOfflineAudioContext=N,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,wA(this)}))}_waitForThePromiseToSettle(f){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(f):setTimeout(()=>this._waitForThePromiseToSettle(f))}},RI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},NI=(s,t,e,i,a,c,f)=>class extends s{constructor(g,m){const T=a(g),w={...RI,...m},E=e(T,w),N=c(T),O=N?i():null,U=g.sampleRate/2;super(g,!1,E,O),this._detune=t(this,N,E.detune,153600,-153600),this._frequency=t(this,N,E.frequency,U,-U),this._nativeOscillatorNode=E,this._onended=null,this._oscillatorNodeRenderer=O,this._oscillatorNodeRenderer!==null&&w.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=w.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(g){const m=typeof g=="function"?f(this,g):null;this._nativeOscillatorNode.onended=m;const T=this._nativeOscillatorNode.onended;this._onended=T!==null&&T===m?g:T}get type(){return this._nativeOscillatorNode.type}set type(g){this._nativeOscillatorNode.type=g,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(g){this._nativeOscillatorNode.setPeriodicWave(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=g)}start(g=0){if(this._nativeOscillatorNode.start(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=g),this.context.state!=="closed"){Ud(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),kl(this)&&vg(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(g=0){this._nativeOscillatorNode.stop(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=g)}},II=(s,t,e,i,a)=>()=>{const c=new WeakMap;let f=null,d=null,g=null;const m=async(T,w)=>{let E=e(T);const N=As(E,w);if(!N){const O={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,detune:E.detune.value,frequency:E.frequency.value,periodicWave:f===null?void 0:f,type:E.type};E=t(w,O),d!==null&&E.start(d),g!==null&&E.stop(g)}return c.set(w,E),N?(await s(w,T.detune,E.detune),await s(w,T.frequency,E.frequency)):(await i(w,T.detune,E.detune),await i(w,T.frequency,E.frequency)),await a(T,w,E),E};return{set periodicWave(T){f=T},set start(T){d=T},set stop(T){g=T},render(T,w){const E=c.get(w);return E!==void 0?Promise.resolve(E):m(T,w)}}},OI={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},DI=(s,t,e,i,a,c,f)=>class extends s{constructor(g,m){const T=a(g),w={...OI,...m},E=e(T,w),N=c(T),O=N?i():null;super(g,!1,E,O),this._nativePannerNode=E,this._orientationX=t(this,N,E.orientationX,$s,_r),this._orientationY=t(this,N,E.orientationY,$s,_r),this._orientationZ=t(this,N,E.orientationZ,$s,_r),this._positionX=t(this,N,E.positionX,$s,_r),this._positionY=t(this,N,E.positionY,$s,_r),this._positionZ=t(this,N,E.positionZ,$s,_r),f(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(g){this._nativePannerNode.coneInnerAngle=g}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(g){this._nativePannerNode.coneOuterAngle=g}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(g){this._nativePannerNode.coneOuterGain=g}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(g){this._nativePannerNode.distanceModel=g}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(g){this._nativePannerNode.maxDistance=g}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(g){this._nativePannerNode.panningModel=g}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(g){this._nativePannerNode.refDistance=g}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(g){this._nativePannerNode.rolloffFactor=g}},MI=(s,t,e,i,a,c,f,d,g,m)=>()=>{const T=new WeakMap;let w=null;const E=async(N,O)=>{let U=null,D=c(N);const z={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation},$={...z,coneInnerAngle:D.coneInnerAngle,coneOuterAngle:D.coneOuterAngle,coneOuterGain:D.coneOuterGain,distanceModel:D.distanceModel,maxDistance:D.maxDistance,panningModel:D.panningModel,refDistance:D.refDistance,rolloffFactor:D.rolloffFactor},Q=As(D,O);if("bufferSize"in D)U=i(O,{...z,gain:1});else if(!Q){const nt={...$,orientationX:D.orientationX.value,orientationY:D.orientationY.value,orientationZ:D.orientationZ.value,positionX:D.positionX.value,positionY:D.positionY.value,positionZ:D.positionZ.value};D=a(O,nt)}if(T.set(O,U===null?D:U),U!==null){if(w===null){if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const P=new f(6,N.context.length,O.sampleRate),F=t(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});F.connect(P.destination),w=(async()=>{const B=await Promise.all([N.orientationX,N.orientationY,N.orientationZ,N.positionX,N.positionY,N.positionZ].map(async(At,Mt)=>{const Z=e(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Mt===0?1:0});return await d(P,At,Z.offset),Z}));for(let At=0;At<6;At+=1)B[At].connect(F,0,At),B[At].start(0);return m(P)})()}const nt=await w,K=i(O,{...z,gain:1});await g(N,O,K);const X=[];for(let P=0;P<nt.numberOfChannels;P+=1)X.push(nt.getChannelData(P));let R=[X[0][0],X[1][0],X[2][0]],C=[X[3][0],X[4][0],X[5][0]],M=i(O,{...z,gain:1}),V=a(O,{...$,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:C[0],positionY:C[1],positionZ:C[2]});K.connect(M).connect(V.inputs[0]),V.connect(U);for(let P=128;P<nt.length;P+=128){const F=[X[0][P],X[1][P],X[2][P]],B=[X[3][P],X[4][P],X[5][P]];if(F.some((At,Mt)=>At!==R[Mt])||B.some((At,Mt)=>At!==C[Mt])){R=F,C=B;const At=P/O.sampleRate;M.gain.setValueAtTime(0,At),M=i(O,{...z,gain:0}),V=a(O,{...$,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),M.gain.setValueAtTime(1,At),K.connect(M).connect(V.inputs[0]),V.connect(U)}}return U}return Q?(await s(O,N.orientationX,D.orientationX),await s(O,N.orientationY,D.orientationY),await s(O,N.orientationZ,D.orientationZ),await s(O,N.positionX,D.positionX),await s(O,N.positionY,D.positionY),await s(O,N.positionZ,D.positionZ)):(await d(O,N.orientationX,D.orientationX),await d(O,N.orientationY,D.orientationY),await d(O,N.orientationZ,D.orientationZ),await d(O,N.positionX,D.positionX),await d(O,N.positionY,D.positionY),await d(O,N.positionZ,D.positionZ)),Jd(D)?await g(N,O,D.inputs[0]):await g(N,O,D),D};return{render(N,O){const U=T.get(O);return U!==void 0?Promise.resolve(U):E(N,O)}}},kI={disableNormalization:!1},VI=(s,t,e,i)=>class OA{constructor(c,f){const d=t(c),g=i({...kI,...f}),m=s(d,g);return e.add(m),m}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===OA.prototype||e.has(c)}},jI=(s,t)=>(e,i,a)=>(s(i).replay(a),t(i,e,a)),LI=(s,t,e)=>async(i,a,c)=>{const f=s(i);await Promise.all(f.activeInputs.map((d,g)=>Array.from(d).map(async([m,T])=>{const E=await t(m).render(m,a),N=i.context.destination;!e(m)&&(i!==N||!e(i))&&E.connect(c,T,g)})).reduce((d,g)=>[...d,...g],[]))},PI=(s,t,e)=>async(i,a,c)=>{const f=t(i);await Promise.all(Array.from(f.activeInputs).map(async([d,g])=>{const T=await s(d).render(d,a);e(d)||T.connect(c,g)}))},UI=(s,t,e,i)=>a=>s(lg,()=>lg(a))?Promise.resolve(s(i,i)).then(c=>{if(!c){const f=e(a,512,0,1);a.oncomplete=()=>{f.onaudioprocess=null,f.disconnect()},f.onaudioprocess=()=>a.currentTime,f.connect(a.destination)}return a.startRendering()}):new Promise(c=>{const f=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=d=>{f.disconnect(),c(d.renderedBuffer)},f.connect(a.destination),a.startRendering()}),zI=s=>(t,e)=>{s.set(t,e)},BI=s=>(t,e)=>s.set(t,e),qI=(s,t,e,i,a,c,f,d)=>(g,m)=>e(g).render(g,m).then(()=>Promise.all(Array.from(i(m)).map(T=>e(T).render(T,m)))).then(()=>a(m)).then(T=>(typeof T.copyFromChannel!="function"?(f(T),xT(T)):t(c,()=>c(T))||d(T),s.add(T),T)),FI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},HI=(s,t,e,i,a,c)=>class extends s{constructor(d,g){const m=a(d),T={...FI,...g},w=e(m,T),E=c(m),N=E?i():null;super(d,!1,w,N),this._pan=t(this,E,w.pan)}get pan(){return this._pan}},GI=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,g)=>{let m=e(d);const T=As(m,g);if(!T){const w={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=t(g,w)}return c.set(g,m),T?await s(g,d.pan,m.pan):await i(g,d.pan,m.pan),Jd(m)?await a(d,g,m.inputs[0]):await a(d,g,m),m};return{render(d,g){const m=c.get(g);return m!==void 0?Promise.resolve(m):f(d,g)}}},KI=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},$I=(s,t)=>async()=>{if(s===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),a=URL.createObjectURL(e);let c=!1,f=!1;try{await i.audioWorklet.addModule(a);const d=new s(i,"a",{numberOfOutputs:0}),g=i.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>f=!0,g.connect(d),g.start(0),await i.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(a)}return c&&!f},WI=(s,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),i=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{e.oncomplete=()=>{i.disconnect(),a(e.currentTime!==0)},e.startRendering()})},YI=()=>new DOMException("","UnknownError"),QI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},XI=(s,t,e,i,a,c,f)=>class extends s{constructor(g,m){const T=a(g),w={...QI,...m},E=e(T,w),O=c(T)?i():null;super(g,!0,E,O),this._isCurveNullified=!1,this._nativeWaveShaperNode=E,f(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(g){if(g===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(g.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=g}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(g){this._nativeWaveShaperNode.oversample=g}},ZI=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!As(d,f)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=s(f,m)}return i.set(f,d),Jd(d)?await e(c,f,d.inputs[0]):await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},JI=()=>typeof window>"u"?null:window,t4=(s,t)=>e=>{e.copyFromChannel=(i,a,c=0)=>{const f=s(c),d=s(a);if(d>=e.numberOfChannels)throw t();const g=e.length,m=e.getChannelData(d),T=i.length;for(let w=f<0?-f:0;w+f<g&&w<T;w+=1)i[w]=m[w+f]},e.copyToChannel=(i,a,c=0)=>{const f=s(c),d=s(a);if(d>=e.numberOfChannels)throw t();const g=e.length,m=e.getChannelData(d),T=i.length;for(let w=f<0?-f:0;w+f<g&&w<T;w+=1)m[w+f]=i[w]}},e4=s=>t=>{t.copyFromChannel=(e=>(i,a,c=0)=>{const f=s(c),d=s(a);if(f<t.length)return e.call(t,i,d,f)})(t.copyFromChannel),t.copyToChannel=(e=>(i,a,c=0)=>{const f=s(c),d=s(a);if(f<t.length)return e.call(t,i,d,f)})(t.copyToChannel)},n4=s=>(t,e)=>{const i=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=i),s(t,"buffer",a=>()=>{const c=a.call(t);return c===i?null:c},a=>c=>a.call(t,c===null?i:c))},i4=(s,t)=>(e,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const a=e.createBufferSource();t(i,()=>{const d=i.numberOfInputs;for(let g=0;g<d;g+=1)a.connect(i,0,g)},()=>a.disconnect(i))},DA=(s,t,e)=>s.copyFromChannel===void 0?s.getChannelData(e)[0]:(s.copyFromChannel(t,e),t[0]),MA=s=>{if(s===null)return!1;const t=s.length;return t%2!==0?s[Math.floor(t/2)]!==0:s[t/2-1]+s[t/2]!==0},Ag=(s,t,e,i)=>{let a=s;for(;!a.hasOwnProperty(t);)a=Object.getPrototypeOf(a);const{get:c,set:f}=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(s,t,{get:e(c),set:i(f)})},s4=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),r4=s=>({...s,channelCount:s.numberOfOutputs}),a4=s=>{const{imag:t,real:e}=s;return t===void 0?e===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(e,()=>0),real:e}:e===void 0?{...s,imag:t,real:Array.from(t,()=>0)}:{...s,imag:t,real:e}},kA=(s,t,e)=>{try{s.setValueAtTime(t,e)}catch(i){if(i.code!==9)throw i;kA(s,t,e+1e-7)}},o4=s=>{const t=s.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},l4=s=>{const t=s.createBufferSource(),e=s.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},c4=s=>{const t=s.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},DT=s=>{const t=s.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},VA=s=>{const t=s.createBuffer(1,1,44100),e=s.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},MT=s=>{const t=s.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},u4=s=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(s)}finally{t.close(),e.close()}},h4=s=>{s.start=(t=>(e=0,i=0,a)=>{const c=s.buffer,f=c===null?i:Math.min(c.duration,i);c!==null&&f>c.duration-.5/s.context.sampleRate?t.call(s,e,0,0):t.call(s,e,f,a)})(s.start)},jA=(s,t)=>{const e=t.createGain();s.connect(e);const i=(a=>()=>{a.call(s,e),s.removeEventListener("ended",i)})(s.disconnect);s.addEventListener("ended",i),tp(s,e),s.stop=(a=>{let c=!1;return(f=0)=>{if(c)try{a.call(s,f)}catch{e.gain.setValueAtTime(0,f)}else a.call(s,f),c=!0}})(s.stop)},ep=(s,t)=>e=>{const i={value:s};return Object.defineProperties(e,{currentTarget:i,target:i}),typeof t=="function"?t.call(s,e):t.handleEvent.call(s,e)},f4=Dx(Zh),d4=Px(Zh),p4=QR(I0),LA=new WeakMap,m4=pN(LA),ro=CR(new Map,new WeakMap),Qo=JI(),PA=HN(ro,Zo),kT=dN(Ws),Ji=LI(Ws,kT,Gh),g4=Fx(PA,kn,Ji),xn=_N(N0),Bl=_I(Qo),_n=kN(Bl),UA=new WeakMap,zA=aN(ep),Eg=WN(Qo),VT=IN(Eg),jT=ON(Qo),BA=DN(Qo),cg=QN(Qo),di=pR(Mx(pA),Lx(f4,d4,r0,p4,a0,Ws,m4,yg,kn,Zh,kl,Gh,Ky),ro,EN(H1,a0,Ws,kn,og,kl),Zo,O0,Qs,KR(r0,H1,Ws,kn,og,xn,kl,_n),JR(UA,Ws,io),zA,xn,VT,jT,BA,_n,cg),_4=qx(di,g4,Zo,PA,xn,_n),LT=new WeakSet,Nb=GN(Qo),qA=UR(new Uint32Array(1)),PT=t4(qA,Zo),UT=e4(qA),FA=Gx(LT,ro,Qs,Nb,Bl,KI(Nb),PT,UT),D0=Ux(wr),HA=PI(kT,Tg,Gh),Jo=MR(HA),np=$N(D0,ro,o4,l4,c4,DT,VA,MT,h4,n4(Ag),jA),tl=jI(mN(Tg),HA),y4=Wx(Jo,np,kn,tl,Ji),ao=mR(kx(mA),UA,CT,gR,Cx,xx,Rx,Nx,Ix,B1,fA,Eg,kA),v4=$x(di,y4,ao,Bi,np,xn,_n,ep),T4=iR(di,sR,Zo,Bi,YN(wr,Ag),xn,_n,Ji),w4=ER(Jo,NA,kn,tl,Ji),Jh=BI(LA),b4=AR(di,ao,w4,O0,NA,xn,_n,Jh),uu=qN(Zh,jT),S4=i4(Bi,uu),hu=iI(Eg,S4),A4=NR(hu,kn,Ji),E4=RR(di,A4,hu,xn,_n),C4=DR(bg,kn,Ji),x4=OR(di,C4,bg,xn,_n,r4),R4=aI(D0,np,wr,uu),ip=rI(D0,ro,R4,DT,MT),N4=PR(Jo,ip,kn,tl,Ji),I4=LR(di,ao,N4,ip,xn,_n,ep),GA=oI(Qs,Ag),O4=qR(GA,kn,Ji),D4=BR(di,O4,GA,xn,_n,Jh),M4=YR(Jo,IA,kn,tl,Ji),k4=WR(di,ao,M4,IA,xn,_n,Jh),KA=lI(Qs),V4=iN(Jo,KA,kn,tl,Ji),j4=nN(di,ao,V4,KA,Qs,xn,_n,Jh),L4=hN(Jo,wr,kn,tl,Ji),P4=uN(di,ao,L4,wr,xn,_n),U4=fI(O0,Bi,Sg,Qs),M0=UI(ro,wr,Sg,WI(wr,Bl)),z4=AN(np,kn,Bl,Ji,M0),B4=cI(U4),q4=bN(di,B4,z4,xn,_n,Jh),F4=rR(ao,hu,ip,Sg,Qs,DA,_n,Ag),$A=new WeakMap,H4=BN(T4,F4,zA,_n,$A,ep),WA=yI(D0,ro,DT,VA,MT,jA),G4=II(Jo,WA,kn,tl,Ji),K4=NI(di,ao,WA,G4,xn,_n,ep),YA=VR(np),$4=EI(YA,Bi,wr,MA,uu),k0=AI(YA,Bi,$4,MA,uu,Eg,Ag),W4=TI(r0,Bi,hu,wr,Sg,k0,Qs,a0,DA,uu),QA=vI(W4),Y4=MI(Jo,hu,ip,wr,QA,kn,Bl,tl,Ji,M0),Q4=DI(di,ao,QA,Y4,xn,_n,Jh),X4=wI(Zo),Z4=VI(X4,xn,new WeakSet,a4),J4=SI(hu,bg,wr,k0,Qs,uu),XA=bI(J4,Qs),tO=GI(Jo,XA,kn,tl,Ji),eO=HI(di,ao,XA,tO,xn,_n),nO=ZI(k0,kn,Ji),iO=XI(di,Bi,k0,nO,xn,_n,Jh),ZA=VN(Qo),zT=oN(Qo),JA=new WeakMap,sO=yN(JA,Bl),rO=ZA?jx(ro,Qs,rN(Qo),zT,lN(Ox),xn,sO,_n,cg,new WeakMap,new WeakMap,$I(cg,Bl),Qo):void 0,aO=MN(VT,_n),oO=GR(LT,ro,HR,sN,new WeakSet,xn,aO,i0,lg,PT,UT),tE=bR(rO,_4,FA,v4,b4,E4,x4,I4,D4,oO,k4,j4,P4,q4,H4,K4,Q4,Z4,eO,iO),lO=jN(di,dI,xn,_n),cO=PN(di,pI,xn,_n),uO=UN(di,mI,xn,_n),hO=gI(Bi,_n),fO=zN(di,hO,xn),dO=nR(tE,Bi,Qs,YI,lO,cO,uO,fO,Eg),BT=vN($A),pO=zx(BT),eE=kR(Zo),mO=XR(BT),nE=tN(Zo),iE=new WeakMap,gO=fN(iE,io),_O=nI(eE,Zo,Bi,hu,bg,ip,wr,Sg,Qs,nE,zT,gO,uu),yO=ZN(Bi,_O,wr,Qs,uu),vO=wR(Jo,eE,np,hu,bg,ip,wr,mO,nE,zT,kn,cg,Bl,tl,Ji,M0),TO=gN(JA),wO=zI(iE),Ib=ZA?yR(pO,di,ao,vO,yO,Ws,TO,xn,_n,cg,s4,wO,u4,ep):void 0,bO=FR(Qs,Bl),SO=qI(LT,ro,kT,BT,M0,i0,PT,UT),AO=xI(tE,ro,Bi,bO,SO),EO=CN(N0,VT),CO=xN(ET,jT),xO=RN(CT,BA),RO=NN(N0,_n);function Ta(s){return s===void 0}function Le(s){return s!==void 0}function NO(s){return typeof s=="function"}function Kh(s){return typeof s=="number"}function qh(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function IO(s){return typeof s=="boolean"}function no(s){return Array.isArray(s)}function jl(s){return typeof s=="string"}function jy(s){return jl(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function Ce(s,t){if(!s)throw new Error(t)}function tu(s,t,e=1/0){if(!(t<=s&&s<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${s}`)}function sE(s){!s.isOffline&&s.state!=="running"&&qT('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let rE=!1,Ob=!1;function Db(s){rE=s}function OO(s){Ta(s)&&rE&&!Ob&&(Ob=!0,qT("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let aE=console;function DO(...s){aE.log(...s)}function qT(...s){aE.warn(...s)}function MO(s){return new dO(s)}function kO(s,t,e){return new AO(s,t,e)}const Wr=typeof self=="object"?self:null,VO=Wr&&(Wr.hasOwnProperty("AudioContext")||Wr.hasOwnProperty("webkitAudioContext"));function jO(s,t,e){return Ce(Le(Ib),"AudioWorkletNode only works in a secure context (https or localhost)"),new(s instanceof Wr?.BaseAudioContext?Wr?.AudioWorkletNode:Ib)(s,t,e)}function oo(s,t,e,i){var a=arguments.length,c=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,t,e,i);else for(var d=s.length-1;d>=0;d--)(f=s[d])&&(c=(a<3?f(c):a>3?f(t,e,c):f(t,e))||c);return a>3&&c&&Object.defineProperty(t,e,c),c}function bi(s,t,e,i){function a(c){return c instanceof e?c:new e(function(f){f(c)})}return new(e||(e=Promise))(function(c,f){function d(T){try{m(i.next(T))}catch(w){f(w)}}function g(T){try{m(i.throw(T))}catch(w){f(w)}}function m(T){T.done?c(T.value):a(T.value).then(d,g)}m((i=i.apply(s,t||[])).next())})}class LO{constructor(t,e,i,a){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function $h(s){return xO(s)}function Wc(s){return CO(s)}function $y(s){return RO(s)}function bd(s){return EO(s)}function PO(s){return s instanceof FA}function UO(s,t){return s==="value"||$h(t)||Wc(t)||PO(t)}function Id(s,...t){if(!t.length)return s;const e=t.shift();if(qh(s)&&qh(e))for(const i in e)UO(i,e[i])?s[i]=e[i]:qh(e[i])?(s[i]||Object.assign(s,{[i]:{}}),Id(s[i],e[i])):Object.assign(s,{[i]:e[i]});return Id(s,...t)}function zO(s,t){return s.length===t.length&&s.every((e,i)=>t[i]===e)}function Se(s,t,e=[],i){const a={},c=Array.from(t);if(qh(c[0])&&i&&!Reflect.has(c[0],i)&&(Object.keys(c[0]).some(d=>Reflect.has(s,d))||(Id(a,{[i]:c[0]}),e.splice(e.indexOf(i),1),c.shift())),c.length===1&&qh(c[0]))Id(a,c[0]);else for(let f=0;f<e.length;f++)Le(c[f])&&(a[e[f]]=c[f]);return Id(s,a)}function BO(s){return s.constructor.getDefaults()}function Od(s,t){return Ta(s)?t:s}function Mb(s,t){return t.forEach(e=>{Reflect.has(s,e)&&delete s[e]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class ql{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Wr&&this.toString()===Wr.TONE_DEBUG_CLASS)&&DO(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ql.version=hA;const FT=1e-6;function zd(s,t){return s>t+FT}function Y1(s,t){return zd(s,t)||to(s,t)}function u0(s,t){return s+FT<t}function to(s,t){return Math.abs(s-t)<FT}function qO(s,t,e){return Math.max(Math.min(s,e),t)}class wa extends ql{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Se(wa.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Ce(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Ce(Y1(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const i=this._search(t,e);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const i=this._search(t);return i-1>=0?this._timeline[i-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(to(this._timeline[e].time,t)){for(let i=e;i>=0&&to(this._timeline[i].time,t);i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&Y1(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let i=0;const a=this._timeline.length;let c=a;if(a>0&&this._timeline[a-1][e]<=t)return a-1;for(;i<c;){let f=Math.floor(i+(c-i)/2);const d=this._timeline[f],g=this._timeline[f+1];if(to(d[e],t)){for(let m=f;m<this._timeline.length;m++){const T=this._timeline[m];if(to(T[e],t))f=m;else break}return f}else{if(u0(d[e],t)&&zd(g[e],t))return f;zd(d[e],t)?c=f:i=f+1}}return-1}_iterate(t,e=0,i=this._timeline.length-1){this._timeline.slice(e,i+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const i=this._search(t);return i!==-1&&this._iterate(e,0,i),this}forEachAfter(t,e){const i=this._search(t);return this._iterate(e,i+1),this}forEachBetween(t,e,i){let a=this._search(t),c=this._search(e);return a!==-1&&c!==-1?(this._timeline[a].time!==t&&(a+=1),this._timeline[c].time===e&&(c-=1),this._iterate(i,a,c)):a===-1&&this._iterate(i,0,c),this}forEachFrom(t,e){let i=this._search(t);for(;i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this}forEachAtTime(t,e){const i=this._search(t);if(i!==-1&&to(this._timeline[i].time,t)){let a=i;for(let c=i;c>=0&&to(this._timeline[c].time,t);c--)a=c;this._iterate(c=>{e(c)},a,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const oE=[];function V0(s){oE.push(s)}function FO(s){oE.forEach(t=>t(s))}const lE=[];function j0(s){lE.push(s)}function HO(s){lE.forEach(t=>t(s))}class Cg extends ql{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(a=>{Ta(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(e)}),this}once(t,e){const i=(...a)=>{e(...a),this.off(t,i)};return this.on(t,i),this}off(t,e){return t.split(/\W+/).forEach(a=>{if(Ta(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Ta(e))this._events[a]=[];else{const c=this._events[a];for(let f=c.length-1;f>=0;f--)c[f]===e&&c.splice(f,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(let a=0,c=i.length;a<c;a++)i[a].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const i=Object.getOwnPropertyDescriptor(Cg.prototype,e);Object.defineProperty(t.prototype,e,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class cE extends Cg{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class xg extends cE{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new wa,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=Se(xg.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=MO({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new LO(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(FO(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,i){return this._context.createBuffer(t,e,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,i){return this._context.createPeriodicWave(t,e,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Ce(bd(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Ce(bd(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Ce(bd(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Ce(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Ce(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Ce(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Ce(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return jO(this.rawContext,t,e)}addAudioWorkletModule(t){return bi(this,void 0,void 0,function*(){Ce(Le(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return bi(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return bd(this._context)?this._context.resume():Promise.resolve()}close(){return bi(this,void 0,void 0,function*(){bd(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&HO(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0);for(let c=0;c<i.length;c++)i[c]=t;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=e,a.loop=!0,a.start(0),this._constants.set(t,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(t,e){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const i=++this._timeoutIds,a=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),a()},id:i,time:c+e})};return a(),i}}class GO extends cE{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,i){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return bi(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function ri(s,t){no(t)?t.forEach(e=>ri(s,e)):Object.defineProperty(s,t,{enumerable:!0,writable:!1})}function uE(s,t){no(t)?t.forEach(e=>uE(s,e)):Object.defineProperty(s,t,{writable:!0})}const gn=()=>{};class Bn extends ql{constructor(){super(),this.name="ToneAudioBuffer",this.onload=gn;const t=Se(Bn.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,jl(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:gn,onload:gn,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ya().sampleRate}set(t){return t instanceof Bn?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return bi(this,void 0,void 0,function*(){const e=Bn.load(t).then(i=>{this.set(i),this.onload(this)});Bn.downloads.push(e);try{yield e}finally{const i=Bn.downloads.indexOf(e);Bn.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=no(t)&&t[0].length>0,i=e?t.length:1,a=e?t[0].length:t.length,c=ya(),f=c.createBuffer(i,a,c.sampleRate),d=!e&&i===1?[t]:t;for(let g=0;g<i;g++)f.copyToChannel(d[g],g);return this._buffer=f,this}toMono(t){if(Kh(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const i=this.numberOfChannels;for(let a=0;a<i;a++){const c=this.toArray(a);for(let f=0;f<c.length;f++)e[f]+=c[f]}e=e.map(a=>a/i),this.fromArray(e)}return this}toArray(t){if(Kh(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let i=0;i<this.numberOfChannels;i++)e[i]=this.getChannelData(i);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){Ce(this.loaded,"Buffer is not loaded");const i=Math.floor(t*this.sampleRate),a=Math.floor(e*this.sampleRate);Ce(i<a,"The start time must be less than the end time");const c=a-i,f=ya().createBuffer(this.numberOfChannels,c,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)f.copyToChannel(this.getChannelData(d).subarray(i,a),d);return new Bn(f)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Bn().fromArray(t)}static fromUrl(t){return bi(this,void 0,void 0,function*(){return yield new Bn().load(t)})}static load(t){return bi(this,void 0,void 0,function*(){const e=Bn.baseUrl===""||Bn.baseUrl.endsWith("/")?Bn.baseUrl:Bn.baseUrl+"/",i=yield fetch(e+t);if(!i.ok)throw new Error(`could not load url: ${t}`);const a=yield i.arrayBuffer();return yield ya().decodeAudioData(a)})}static supportsType(t){const e=t.split("."),i=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return bi(this,void 0,void 0,function*(){for(yield Promise.resolve();Bn.downloads.length;)yield Bn.downloads[0]})}}Bn.baseUrl="";Bn.downloads=[];class HT extends xg{constructor(){super({clockSource:"offline",context:$y(arguments[0])?arguments[0]:kO(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:$y(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=$y(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return bi(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const i=Math.floor(this.sampleRate/128);t&&e%i===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return bi(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Bn(e)})}close(){return Promise.resolve()}}const hE=new GO;let Uh=hE;function ya(){return Uh===hE&&VO&&KO(new xg),Uh}function KO(s,t=!1){t&&Uh.dispose(),bd(s)?Uh=new xg(s):$y(s)?Uh=new HT(s):Uh=s}function $O(){return Uh.resume()}if(Wr&&!Wr.TONE_SILENCE_LOGGING){const t=` * Tone.js v${hA} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function WO(s){return Math.pow(10,s/20)}function YO(s){return 20*(Math.log(s)/Math.LN10)}function fE(s){return Math.pow(2,s/12)}let L0=440;function QO(){return L0}function XO(s){L0=s}function Q1(s){return Math.round(dE(s))}function dE(s){return 69+12*Math.log2(s/L0)}function ZO(s){return L0*Math.pow(2,(s-69)/12)}class GT extends ql{constructor(t,e,i){super(),this.defaultUnits="s",this._val=e,this._units=i,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const i=parseInt(t,10),a=e==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/i)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,i)=>{let a=0;return t&&t!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(a+=this._beatsToUnits(parseFloat(e))),i&&i!=="0"&&(a+=this._beatsToUnits(parseFloat(i)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof GT&&this.fromType(this._val),Ta(this._val))return this._noArg();if(jl(this._val)&&Ta(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(qh(this._val)){let t=0;for(const e in this._val)if(Le(this._val[e])){const i=this._val[e],a=new this.constructor(this.context,e).valueOf()*i;t+=a}return t}if(Le(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return jl(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class eo extends GT{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new eo(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const i=new this.constructor(this.context,t).valueOf(),a=this.valueOf(),d=Math.round(a/i)*i-a;return a+d*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){const f=Math.pow(2,c);e.push(f+"n."),e.push(f+"n"),e.push(f+"t")}e.push("0");let i=e[0],a=new eo(this.context,e[0]).toSeconds();return e.forEach(c=>{const f=new eo(this.context,c).toSeconds();Math.abs(f-t)<Math.abs(a-t)&&(i=c,a=f)}),i}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const i=Math.floor(e/this._getTimeSignature());let a=e%1*4;e=Math.floor(e)%this._getTimeSignature();const c=a.toString();return c.length>3&&(a=parseFloat(parseFloat(c).toFixed(3))),[i,e,a].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Q1(this.toFrequency())}_now(){return this.context.now()}}class va extends eo{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return QO()}static set A4(t){XO(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:va.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const a=JO[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?a:va.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,i){let a=1;return t&&t!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(a*=this._beatsToUnits(parseFloat(e))),i&&i!=="0"&&(a*=this._beatsToUnits(parseFloat(i)/4)),a}}})}transpose(t){return new va(this.context,this.valueOf()*fE(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Q1(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/va.A4);let i=Math.round(12*e)+57;const a=Math.floor(i/12);return a<0&&(i+=-12*a),tD[i%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return ZO(t)}static ftom(t){return Q1(t)}}const JO={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},tD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class eg extends eo{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class vr extends ql{constructor(){super();const t=Se(vr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ya()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return OO(t),new eo(this.context,t).toSeconds()}toFrequency(t){return new va(this.context,t).toFrequency()}toTicks(t){return new eg(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(i=>{Ta(t[i])&&delete e[i]}),e}get(){const t=BO(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const i=this[e];Le(i)&&Le(i.value)&&Le(i.setValueAtTime)?t[e]=i.value:i instanceof vr?t[e]=i._getPartialProperties(t[e]):no(i)||Kh(i)||jl(i)||IO(i)?t[e]=i:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&Le(this[e])&&(this[e]&&Le(this[e].value)&&Le(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof vr?this[e].set(t[e]):this[e]=t[e])}),this}}class KT extends wa{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,i){return tu(e,0),this.add(Object.assign({},i,{state:t,time:e})),this}getLastState(t,e){const i=this._search(e);for(let a=i;a>=0;a--){const c=this._timeline[a];if(c.state===t)return c}}getNextState(t,e){const i=this._search(e);if(i!==-1)for(let a=i;a<this._timeline.length;a++){const c=this._timeline[a];if(c.state===t)return c}}}class Yn extends vr{constructor(){const t=Se(Yn.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ce(Le(t.param)&&($h(t.param)||t.param instanceof Yn),"param must be an AudioParam");!$h(t.param);)t.param=t.param._param;this._swappable=Le(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new wa(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Le(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(vr.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Le(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Le(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Le(this.maxValue)&&Le(this.minValue)&&tu(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?WO(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?YO(t):t}setValueAtTime(t,e){const i=this.toSeconds(e),a=this._fromType(t);return Ce(isFinite(a)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,i),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),a=this._events.get(e);let c=this._initialValue;if(a===null)c=this._initialValue;else if(a.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const f=this._events.getBefore(a.time);let d;f===null?d=this._initialValue:d=f.value,a.type==="setTargetAtTime"&&(c=this._exponentialApproach(a.time,d,a.value,a.constant,e))}else if(i===null)c=a.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let f=a.value;if(a.type==="setTargetAtTime"){const d=this._events.getBefore(a.time);d===null?f=this._initialValue:f=d.value}i.type==="linearRampToValueAtTime"?c=this._linearInterpolate(a.time,f,i.time,i.value,e):c=this._exponentialInterpolate(a.time,f,i.time,i.value,e)}else c=a.value;return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const i=this._fromType(t),a=this.toSeconds(e);return Ce(isFinite(i)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this._events.add({time:a,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,a),this._param.linearRampToValueAtTime(i,a),this}exponentialRampToValueAtTime(t,e){let i=this._fromType(t);i=to(i,0)?this._minOutput:i,this._assertRange(i);const a=this.toSeconds(e);return Ce(isFinite(i)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,a),this._param.exponentialRampToValueAtTime(i,a),this}exponentialRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this}linearRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this}targetRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this}exponentialApproachValueAtTime(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);const a=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,a),this.cancelAndHoldAtTime(e+i*.9),this.linearRampToValueAtTime(t,e+i),this}setTargetAtTime(t,e,i){const a=this._fromType(t);Ce(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(e);return this._assertRange(a),Ce(isFinite(a)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:i,time:c,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",t,c,i),this._param.setTargetAtTime(a,c,i),this}setValueCurveAtTime(t,e,i,a=1){i=this.toSeconds(i),e=this.toSeconds(e);const c=this._fromType(t[0])*a;this.setValueAtTime(this._toType(c),e);const f=i/(t.length-1);for(let d=1;d<t.length;d++){const g=this._fromType(t[d])*a;this.linearRampToValueAtTime(this._toType(g),e+d*f)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Ce(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));Ce(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);const a=this._events.get(e),c=this._events.getAfter(e);return a&&to(a.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),c.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),e):c.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this}rampTo(t,e=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const i=this._events.get(e);if(i&&i.type==="setTargetAtTime"){const a=this._events.getAfter(i.time),c=a?a.time:e+2,f=(c-e)/10;for(let d=e;d<c;d+=f)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?t.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?t.setTargetAtTime(a.value,a.time,a.constant):t[a.type](a.value,a.time)}),this}setParam(t){Ce(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,i,a,c){return i+(e-i)*Math.exp(-(c-t)/a)}_linearInterpolate(t,e,i,a,c){return e+(a-e)*((c-t)/(i-t))}_exponentialInterpolate(t,e,i,a,c){return e*Math.pow(a/e,(c-t)/(i-t))}}class ke extends vr{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Le(this.input)?$h(this.input)||this.input instanceof Yn?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Le(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Le(t)&&(t instanceof ke||Wc(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=>{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();Ce(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,i=0){return sp(this,t,e,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return qT("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,i=0){return eD(this,t,e,i),this}chain(...t){return X1(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Le(this.input)&&(this.input instanceof ke?this.input.dispose():Wc(this.input)&&this.input.disconnect()),Le(this.output)&&(this.output instanceof ke?this.output.dispose():Wc(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function X1(...s){const t=s.shift();s.reduce((e,i)=>(e instanceof ke?e.connect(i):Wc(e)&&sp(e,i),i),t)}function sp(s,t,e=0,i=0){for(Ce(Le(s),"Cannot connect from undefined node"),Ce(Le(t),"Cannot connect to undefined node"),(t instanceof ke||Wc(t))&&Ce(t.numberOfInputs>0,"Cannot connect to node with no inputs"),Ce(s.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof ke||t instanceof Yn;)Le(t.input)&&(t=t.input);for(;s instanceof ke;)Le(s.output)&&(s=s.output);$h(t)?s.connect(t,e):s.connect(t,e,i)}function eD(s,t,e=0,i=0){if(Le(t))for(;t instanceof ke;)t=t.input;for(;!Wc(s);)Le(s.output)&&(s=s.output);$h(t)?s.disconnect(t,e):Wc(t)?s.disconnect(t,e,i):s.disconnect()}class Ss extends ke{constructor(){const t=Se(Ss.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Yn({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),ri(this,"gain")}static getDefaults(){return Object.assign(ke.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Bd extends ke{constructor(t){super(t),this.onended=gn,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ss({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const i=this.toSeconds(e);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(ke.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:gn})}_startGain(t,e=1){Ce(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Ce(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==gn&&(this.onended(this),this.onended=gn,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ce(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=gn,this}}class $T extends Bd{constructor(){const t=Se($T.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),sp(this._source,this._gainNode),this.offset=new Yn({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Bd.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class qi extends ke{constructor(){const t=Se(qi.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new $T({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ke.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,i=0){return WT(this,t,e,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,i){return this._param.exponentialRampTo(t,e,i),this}linearRampTo(t,e,i){return this._param.linearRampTo(t,e,i),this}targetRampTo(t,e,i){return this._param.targetRampTo(t,e,i),this}exponentialApproachValueAtTime(t,e,i){return this._param.exponentialApproachValueAtTime(t,e,i),this}setTargetAtTime(t,e,i){return this._param.setTargetAtTime(t,e,i),this}setValueCurveAtTime(t,e,i,a){return this._param.setValueCurveAtTime(t,e,i,a),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,i){return this._param.rampTo(t,e,i),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function WT(s,t,e,i){(t instanceof Yn||$h(t)||t instanceof qi&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof qi&&(t.overridden=!0)),sp(s,t,e,i)}class YT extends Yn{constructor(){const t=Se(YT.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new wa(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Yn.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);const a=this._fromType(t),c=this._events.get(e),f=Math.round(Math.max(1/i,1));for(let d=0;d<=f;d++){const g=i*d+e,m=this._exponentialApproach(c.time,c.value,a,i,g);this.linearRampToValueAtTime(this._toType(m),g)}return this}setValueAtTime(t,e){const i=this.toSeconds(e);super.setValueAtTime(t,e);const a=this._events.get(i),c=this._events.previousEvent(a),f=this._getTicksUntilEvent(c,i);return a.ticks=Math.max(f,0),this}linearRampToValueAtTime(t,e){const i=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const a=this._events.get(i),c=this._events.previousEvent(a),f=this._getTicksUntilEvent(c,i);return a.ticks=Math.max(f,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const i=this._fromType(t),a=this._events.get(e),c=Math.round(Math.max((e-a.time)*10,1)),f=(e-a.time)/c;for(let d=0;d<=c;d++){const g=f*d+a.time,m=this._exponentialInterpolate(a.time,a.value,e,i,g);this.linearRampToValueAtTime(this._toType(m),g)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ta(t.ticks)){const f=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(f,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let a=this._fromType(this.getValueAtTime(e));const c=this._events.get(e);return c&&c.time===e&&c.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+a)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)}getDurationOfTicks(t,e){const i=this.toSeconds(e),a=this.getTicksAtTime(e);return this.getTimeOfTick(a+t)-i}getTimeOfTick(t){const e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&i.type==="linearRampToValueAtTime"&&e.value!==i.value){const a=this._fromType(this.getValueAtTime(e.time)),f=(this._fromType(this.getValueAtTime(i.time))-a)/(i.time-e.time),d=Math.sqrt(Math.pow(a,2)-2*f*(e.ticks-t)),g=(-a+d)/f,m=(-a-d)/f;return(g>0?g:m)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const i=this.toSeconds(e),a=this.toSeconds(t),c=this.getTicksAtTime(i);return this.getTicksAtTime(i+a)-c}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class QT extends qi{constructor(){const t=Se(QT.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new YT({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(qi.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class XT extends vr{constructor(){const t=Se(XT.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new KT,this._tickOffset=new wa,this._ticksAtTime=new wa,this._secondsAtTime=new wa,this.frequency=new QT({context:this.context,units:t.units,value:t.frequency}),ri(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},vr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const i=this.toSeconds(t);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),Le(e)&&this.setTicksAtTime(e,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const i=this._state.get(e);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),i=this._state.getLastState("stopped",e),a=this._ticksAtTime.get(e),c={state:"paused",time:e};this._state.add(c);let f=a||i,d=a?a.ticks:0,g=null;return this._state.forEachBetween(f.time,e+this.sampleTime,m=>{let T=f.time;const w=this._tickOffset.get(m.time);w&&w.time>=f.time&&(d=w.ticks,T=w.time),f.state==="started"&&m.state!=="started"&&(d+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(T),m.time!==c.time&&(g={state:m.state,time:m.time,ticks:d})),f=m}),this._state.remove(c),g&&this._ticksAtTime.add(g),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);const a=this._secondsAtTime.get(t);let c=a||e,f=a?a.seconds:0,d=null;return this._state.forEachBetween(c.time,t+this.sampleTime,g=>{let m=c.time;const T=this._tickOffset.get(g.time);T&&T.time>=c.time&&(f=T.seconds,m=T.time),c.state==="started"&&g.state!=="started"&&(f+=g.time-m,g.time!==i.time&&(d={state:g.state,time:g.time,seconds:f})),c=g}),this._state.remove(i),d&&this._secondsAtTime.add(d),f}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const i=this._tickOffset.get(e),a=this._state.get(e),c=Math.max(i.time,a.time),f=this.frequency.getTicksAtTime(c)+t-i.ticks;return this.frequency.getTimeOfTick(f)}forEachTickBetween(t,e,i){let a=this._state.get(t);this._state.forEachBetween(t,e,f=>{a&&a.state==="started"&&f.state!=="started"&&this.forEachTickBetween(Math.max(a.time,t),f.time-this.sampleTime,i),a=f});let c=null;if(a&&a.state==="started"){const f=Math.max(a.time,t),d=this.frequency.getTicksAtTime(f),g=this.frequency.getTicksAtTime(a.time),m=d-g;let T=Math.ceil(m)-m;T=to(T,1)?0:T;let w=this.frequency.getTimeOfTick(d+T);for(;w<e;){try{i(w,Math.round(this.getTicksAtTime(w)))}catch(E){c=E;break}w+=this.frequency.getDurationOfTicks(1,w)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class P0 extends vr{constructor(){const t=Se(P0.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=gn,this._lastUpdate=0,this._state=new KT("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new XT({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ri(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(vr.getDefaults(),{callback:gn,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){sE(this.context);const i=this.toSeconds(t);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,e),i<this._lastUpdate&&this.emit("start",i,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const i=this.toSeconds(e),a=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(a+t,i)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,i=>{switch(i.state){case"started":const a=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,a);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(t,e,(i,a)=>{this.callback(i,a)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Cg.mixin(P0);class rp extends ke{constructor(){const t=Se(rp.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new Ss({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,ri(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(ke.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class ZT extends ke{constructor(){const t=Se(ZT.getDefaults(),arguments);super(t),this.name="Destination",this.input=new rp({context:this.context}),this.output=new Ss({context:this.context}),this.volume=this.input.volume,X1(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ke.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),X1(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}V0(s=>{s.destination=new ZT({context:s})});j0(s=>{s.destination.dispose()});class nD extends ke{constructor(){super(...arguments),this.name="Listener",this.positionX=new Yn({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Yn({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Yn({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Yn({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Yn({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Yn({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Yn({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Yn({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Yn({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ke.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}V0(s=>{s.listener=new nD({context:s})});j0(s=>{s.listener.dispose()});class JT extends ql{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Se(JT.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const i=t.urls[e];this.add(e,i,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:gn,onload:gn,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Ce(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,i=gn,a=gn){return jl(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Bn(this.baseUrl+e,i,a))):this._buffers.set(t.toString(),new Bn(e,i,a)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Rd extends eg{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class iD extends vr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new wa,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}V0(s=>{s.draw=new iD({context:s})});j0(s=>{s.draw.dispose()});class sD extends ql{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Ce(Le(t.time),"Events must have a time property"),Ce(Le(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new rD(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const i of e)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let i,a=null;if(e>0)if(t.left.right===null)i=t.left,i.right=t.right,a=i;else{for(i=t.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,a=i.parent,i.left=t.left,i.right=t.right)}else if(t.right.left===null)i=t.right,i.left=t.left,a=i;else{for(i=t.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,a=i.parent,i.left=t.left,i.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),a&&this._rebalance(a)}t.dispose()}_rotateLeft(t){const e=t.parent,i=t.isLeftChild(),a=t.right;a&&(t.right=a.left,a.left=t),e!==null?i?e.left=a:e.right=a:this._setRoot(a)}_rotateRight(t){const e=t.parent,i=t.isLeftChild(),a=t.left;a&&(t.left=a.right,a.right=t),e!==null?i?e.left=a:e.right=a:this._setRoot(a)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let i=e[0];for(let a=1;a<e.length;a++)e[a].low>i.low&&(i=e[a]);return i.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(i=>e.push(i)),e.forEach(i=>{i.event&&t(i.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const i=[];this._root.search(t,i),i.forEach(a=>{a.event&&e(a.event)})}return this}forEachFrom(t,e){if(this._root!==null){const i=[];this._root.searchAfter(t,i),i.forEach(a=>{a.event&&e(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class rD{constructor(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class aD extends ql{constructor(t){super(),this.name="TimelineValue",this._timeline=new wa({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class qd extends ke{constructor(){super(Se(qd.getDefaults(),arguments,["context"]))}connect(t,e=0,i=0){return WT(this,t,e,i),this}}class Rg extends qd{constructor(){const t=Se(Rg.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,no(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):NO(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(qi.getDefaults(),{length:1024})}setMap(t,e=1024){const i=new Float32Array(e);for(let a=0,c=e;a<c;a++){const f=a/(c-1)*2-1;i[a]=t(f,a)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(i=>i.includes(t));Ce(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class tw extends qd{constructor(){const t=Se(tw.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Rg({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(qd.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class eu{constructor(t,e){this.id=eu._eventId++,this._remainderTime=0;const i=Object.assign(eu.getDefaults(),e);this.transport=t,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:gn,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}eu._eventId=0;class ew extends eu{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(ew.getDefaults(),e);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},eu.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return u0(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Rd(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){u0(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Rd(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);zd(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class U0 extends vr{constructor(){const t=Se(U0.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new aD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new wa,this._repeatedEvents=new sD,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new P0({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),ri(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(vr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const i=e%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(i*Math.PI)*this._swingAmount;t+=new Rd(this.context,this._swingTicks*2/3).toSeconds()*a}Db(!0),this._timeline.forEachAtTime(e,i=>i.invoke(t)),Db(!1)}schedule(t,e){const i=new eu(this,{callback:t,time:new eg(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(t,e,i,a=1/0){const c=new ew(this,{callback:t,duration:new eo(this.context,a).toTicks(),interval:new eo(this.context,e).toTicks(),time:new eg(this.context,i).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){const i=new eu(this,{callback:t,once:!0,time:new eg(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(e,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new Rd(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let i;return Le(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){no(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new eo(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new eo(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Rd(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Rd(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(e),a=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,e),c=e+a;this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),i=this.getTicksAtTime(e),a=t-i%t;return this._clock.nextTickTime(a,e)}}syncSignal(t,e){const i=this.now();let a=this.bpm,c=1/(60/a.getValueAtTime(i)/this.PPQ),f=[];if(t.units==="time"){const g=.015625/c,m=new Ss(g),T=new tw(-1),w=new Ss(g);a.chain(m,T,w),a=w,c=1/c,f=[m,T,w]}e||(t.getValueAtTime(i)!==0?e=t.getValueAtTime(i)/c:e=0);const d=new Ss(e);return a.connect(d),d.connect(t._param),f.push(d),this._syncedSignals.push({initial:t.value,nodes:f,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const i=this._syncedSignals[e];i.signal===t&&(i.nodes.forEach(a=>a.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),uE(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Cg.mixin(U0);V0(s=>{s.transport=new U0({context:s})});j0(s=>{s.transport.dispose()});class Xr extends ke{constructor(t){super(t),this.input=void 0,this._state=new KT("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=gn,this._syncedStop=gn,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new rp({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,ri(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(ke.getDefaults(),{mute:!1,onstop:gn,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,i){let a=Ta(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")Ce(zd(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,e,i);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const c=this._state.get(a);c&&(c.offset=this.toSeconds(Od(e,0)),c.duration=i?this.toSeconds(i):void 0);const f=this.context.transport.schedule(d=>{this._start(d,e,i)},a);this._scheduled.push(f),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else sE(this.context),this._start(a,e,i);return this}stop(t){let e=Ta(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||Le(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const i=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,i){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(zd(e,0)){const i=this._state.get(e);if(i&&i.state==="started"&&i.time!==e){const a=e-this.toSeconds(i.time);let c;i.duration&&(c=this.toSeconds(i.duration)-a),this._start(t,this.toSeconds(i.offset)+a,c)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=gn,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class z0 extends Bd{constructor(){const t=Se(z0.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,sp(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Yn({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Bn(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Bd.getDefaults(),{url:new Bn,loop:!1,loopEnd:0,loopStart:0,onload:gn,onerror:gn,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,i,a=1){Ce(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,a),this.loop?e=Od(e,this.loopStart):e=Od(e,0);let f=Math.max(this.toSeconds(e),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,g=this.toSeconds(this.loopStart),m=d-g;Y1(f,d)&&(f=(f-g)%m+g),to(f,this.buffer.duration)&&(f=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,u0(f,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,f)),Le(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function tf(s,t){return bi(this,void 0,void 0,function*(){const e=t/s.context.sampleRate,i=new HT(1,e,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/e,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class nw extends Bd{constructor(){const t=Se(nw.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],sp(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Yn({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Yn({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),ri(this,["frequency","detune"])}static getDefaults(){return Object.assign(Bd.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ti extends Xr{constructor(){const t=Se(Ti.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new qi({context:this.context,units:"frequency",value:t.frequency}),ri(this,"frequency"),this.detune=new qi({context:this.context,units:"cents",value:t.detune}),ri(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Xr.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),i=new nw({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ti._periodicWaveCache.find(e=>e.phase===this._phase&&zO(e.partials,this._partials));{const t=Ti._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const i=this._getCachedPeriodicWave();if(Le(i)){const{partials:a,wave:c}=i;this._wave=c,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,c]=this._getRealImaginary(t,this._phase),f=this.context.createPeriodicWave(a,c);this._wave=f,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ti._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),Ti._periodicWaveCache.length>100&&Ti._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){tu(t,0);let e=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(e=i[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const a=new Float32Array(t);this._partials.forEach((c,f)=>a[f]=c),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(t,e){let a=2048;const c=new Float32Array(a),f=new Float32Array(a);let d=1;if(t==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,a=d,this._partials.length===0)return[c,f]}else{const g=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);g?(d=parseInt(g[2],10)+1,this._partialCount=parseInt(g[2],10),t=g[1],d=Math.max(d,2),a=d):this._partialCount=0,this._partials=[]}for(let g=1;g<a;++g){const m=2/(g*Math.PI);let T;switch(t){case"sine":T=g<=d?1:0,this._partials[g-1]=T;break;case"square":T=g&1?2*m:0,this._partials[g-1]=T;break;case"sawtooth":T=m*(g&1?1:-1),this._partials[g-1]=T;break;case"triangle":g&1?T=2*(m*m)*(g-1>>1&1?-1:1):T=0,this._partials[g-1]=T;break;case"custom":T=this._partials[g-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}T!==0?(c[g]=-T*Math.sin(e*g),f[g]=T*Math.cos(e*g)):(c[g]=0,f[g]=0)}return[c,f]}_inverseFFT(t,e,i){let a=0;const c=t.length;for(let f=0;f<c;f++)a+=t[f]*Math.cos(f*i)+e[f]*Math.sin(f*i);return a}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let i=0;const a=Math.PI*2,c=32;for(let f=0;f<c;f++)i=Math.max(this._inverseFFT(t,e,f/c*a),i);return qO(-this._inverseFFT(t,e,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return bi(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ti._periodicWaveCache=[];class oD extends qd{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Rg({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Fd extends qi{constructor(){const t=Se(Fd.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ss({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(qi.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class B0 extends Xr{constructor(){const t=Se(B0.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new oD({context:this.context}),this._modulationNode=new Ss({context:this.context}),this._carrier=new Ti({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ti({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Fd({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ri(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ti.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return bi(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class q0 extends Xr{constructor(){const t=Se(q0.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new Ss({context:this.context,gain:0}),this._carrier=new Ti({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new qi({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Ti({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Fd({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Fd({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ri(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ti.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return bi(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ng extends Xr{constructor(){const t=Se(Ng.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new Ss({context:this.context,gain:0}),this._thresh=new Rg({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new qi({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Ti({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ri(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Xr.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return bi(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class F0 extends Xr{constructor(){const t=Se(F0.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new qi({context:this.context,units:"frequency",value:t.frequency}),this.detune=new qi({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,ri(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ti.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,i=t/(this._oscillators.length-1);this._forEach((a,c)=>a.detune.value=e+i*c)}}get count(){return this._oscillators.length}set count(t){if(tu(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const i=new Ti({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):gn});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,i)=>e.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return bi(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class H0 extends Xr{constructor(){const t=Se(H0.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Fd({context:this.context,value:2}),this._pulse=new Ng({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ti({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ri(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Xr.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return bi(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const kb={am:B0,fat:F0,fm:q0,oscillator:Ti,pulse:Ng,pwm:H0};class h0 extends Xr{constructor(){const t=Se(h0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new qi({context:this.context,units:"frequency",value:t.frequency}),this.detune=new qi({context:this.context,units:"cents",value:t.detune}),ri(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Ti.getDefaults(),q0.getDefaults(),B0.getDefaults(),F0.getDefaults(),Ng.getDefaults(),H0.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=kb[t],i=this.now();if(this._oscillator){const a=this._oscillator;a.stop(i),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof kb[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Kh(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Kh(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&jl(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return bi(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function pE(s,t=1/0){const e=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){tu(c,s,t),e.set(this,c)}})}}function Fl(s,t=1/0){const e=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){tu(this.toSeconds(c),s,t),e.set(this,c)}})}}class G0 extends Xr{constructor(){const t=Se(G0.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Bn({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Xr.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:gn,onerror:gn,playbackRate:1,reverse:!1})}load(t){return bi(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=gn){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,i){return super.start(t,e,i),this}_start(t,e,i){this._loop?e=Od(e,this._loopStart):e=Od(e,0);const a=this.toSeconds(e),c=i;i=Od(i,Math.max(this._buffer.duration-a,0));let f=this.toSeconds(i);f=f/this._playbackRate,t=this.toSeconds(t);const d=new z0({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+f),this._state.setStateAtTime("stopped",t+f,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&Ta(c)?d.start(t,a):d.start(t,a,f-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(i=>i.stop(e))}restart(t,e,i){return super.restart(t,e,i),this}_restart(t,e,i){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(t),this._start(t,e,i)}seek(t,e){const i=this.toSeconds(e);if(this._state.getValueAtTime(i)==="started"){const a=this.toSeconds(t);this._stop(i),this._start(i,a)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&tu(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&tu(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),i=this._state.getNextState("stopped",e);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}oo([Fl(0)],G0.prototype,"fadeIn",void 0);oo([Fl(0)],G0.prototype,"fadeOut",void 0);class fu extends ke{constructor(){const t=Se(fu.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new qi({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(ke.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(jl(t))return t;{let i;for(i in Ly)if(Ly[i][e]===t)return i;return t}}_setCurve(t,e,i){if(jl(i)&&Reflect.has(Ly,i)){const a=Ly[i];qh(a)?t!=="_decayCurve"&&(this[t]=a[e]):this[t]=a}else if(no(i)&&t!=="_decayCurve")this[t]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let a=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),f=this.getValueAtTime(t);if(f>0){const d=1/a;a=(1-f)/d}if(a<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,a,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,a,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let g=1;g<d.length;g++)if(d[g-1]<=f&&f<=d[g]){d=this._attackCurve.slice(g),d[0]=f;break}this._sig.setValueCurveAtTime(d,t,a,e)}if(c&&this.sustain<1){const d=e*this.sustain,g=t+a;this.log("decay",g),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,c+g):this._sig.exponentialApproachValueAtTime(d,g,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,t):(Ce(no(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,i,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,i=1){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,i=0){return WT(this,t,e,i),this}asArray(){return bi(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,i=new HT(1,e,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=a+this.toSeconds(this.release),f=c*.1,d=c+f,g=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/d,decay:e*this.toSeconds(this.decay)/d,release:e*this.toSeconds(this.release)/d,context:i}));return g._sig.toDestination(),g.triggerAttackRelease(e*(a+f)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}oo([Fl(0)],fu.prototype,"attack",void 0);oo([Fl(0)],fu.prototype,"decay",void 0);oo([pE(0,1)],fu.prototype,"sustain",void 0);oo([Fl(0)],fu.prototype,"release",void 0);const Ly=(()=>{let t,e;const i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));const a=[],c=6.4;for(t=0;t<127;t++){e=t/127;const E=Math.sin(e*(Math.PI*2)*c-Math.PI/2)+1;a[t]=E/10+e*.83}a[127]=1;const f=[],d=5;for(t=0;t<128;t++)f[t]=Math.ceil(t/127*d)/d;const g=[];for(t=0;t<128;t++)e=t/127,g[t]=.5*(1-Math.cos(Math.PI*e));const m=[];for(t=0;t<128;t++){e=t/127;const E=Math.pow(e,3)*4+.2,N=Math.cos(E*Math.PI*2*e);m[t]=Math.abs(N*(1-e))}function T(E){const N=new Array(E.length);for(let O=0;O<E.length;O++)N[O]=1-E[O];return N}function w(E){return E.slice(0).reverse()}return{bounce:{In:T(m),Out:m},cosine:{In:i,Out:w(i)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:T(a)},sine:{In:g,Out:T(g)},step:{In:f,Out:T(f)}}})();class Hd extends ke{constructor(){const t=Se(Hd.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new rp({context:this.context,volume:t.volume}),this.volume=this._volume.volume,ri(this,"volume")}static getDefaults(){return Object.assign(ke.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const i=this["_original_"+t]=this[t];this[t]=(...a)=>{const c=a[e],f=this.context.transport.schedule(d=>{a[e]=d,i.apply(this,a)},c);this._scheduledEvents.push(f)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,i,a){const c=this.toSeconds(i),f=this.toSeconds(e);return this.triggerAttack(t,c,a),this.triggerRelease(c+f),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Gd extends Hd{constructor(){const t=Se(Gd.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Hd.getDefaults(),{detune:0,onsilence:gn,portamento:0})}triggerAttack(t,e,i=1){this.log("triggerAttack",t,e,i);const a=this.toSeconds(e);return this._triggerEnvelopeAttack(a,i),this.setNote(t,a),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const i=this.toSeconds(e),a=t instanceof va?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,c,i)}else this.frequency.setValueAtTime(a,i);return this}}oo([Fl(0)],Gd.prototype,"portamento",void 0);class iw extends fu{constructor(){super(Se(iw.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ss({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Fh extends Gd{constructor(){const t=Se(Fh.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new h0(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new iw(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),ri(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Gd.getDefaults(),{envelope:Object.assign(Mb(fu.getDefaults(),Object.keys(ke.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Mb(h0.getDefaults(),[...Object.keys(Xr.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+i+a)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class K0 extends Fh{constructor(){const t=Se(K0.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,ri(this,["oscillator","envelope"])}static getDefaults(){return Id(Gd.getDefaults(),Fh.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const i=this.toSeconds(e),a=this.toFrequency(t instanceof va?t.toFrequency():t),c=a*this.octaves;return this.oscillator.frequency.setValueAtTime(c,i),this.oscillator.frequency.exponentialRampToValueAtTime(a,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}oo([pE(0)],K0.prototype,"octaves",void 0);oo([Fl(0)],K0.prototype,"pitchDecay",void 0);const mE=new Set;function sw(s){mE.add(s)}function gE(s,t){const e=`registerProcessor("${s}", ${t})`;mE.add(e)}const lD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;sw(lD);const cD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;sw(cD);const uD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;sw(uD);const hD="feedback-comb-filter",fD=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;gE(hD,fD);class $0 extends Hd{constructor(){const t=Se($0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(i=>{const a=parseInt(i,10);if(Ce(jy(i)||Kh(a)&&isFinite(a),`url key is neither a note or midi pitch: ${i}`),jy(i)){const c=new va(this.context,i).toMidi();e[c]=t.urls[i]}else Kh(a)&&isFinite(a)&&(e[a]=t.urls[a])}),this._buffers=new JT({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Hd.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:gn,onerror:gn,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i<96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,i=1){return this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]),t.forEach(a=>{const c=dE(new va(this.context,a).toFrequency()),f=Math.round(c),d=c-f,g=this._findClosest(f),m=f-g,T=this._buffers.get(m),w=fE(g+d),E=new z0({url:T,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:w}).connect(this.output);E.start(e,0,T.duration/w,i),no(this._activeSources.get(f))||this._activeSources.set(f,[]),this._activeSources.get(f).push(E),E.onended=()=>{if(this._activeSources&&this._activeSources.has(f)){const N=this._activeSources.get(f),O=N.indexOf(E);O!==-1&&N.splice(O,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(i=>{const a=new va(this.context,i).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const c=this._activeSources.get(a);e=this.toSeconds(e),c.forEach(f=>{f.stop(e)}),this._activeSources.set(a,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,i,a=1){const c=this.toSeconds(i);return this.triggerAttack(t,c,a),no(e)?(Ce(no(t),"notes must be an array when duration is array"),t.forEach((f,d)=>{const g=e[Math.min(d,e.length-1)];this.triggerRelease(f,c+this.toSeconds(g))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,i){if(Ce(jy(t)||isFinite(t),`note must be a pitch or midi: ${t}`),jy(t)){const a=new va(this.context,t).toMidi();this._buffers.add(a,e,i)}else this._buffers.add(t,e,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}oo([Fl(0)],$0.prototype,"attack",void 0);oo([Fl(0)],$0.prototype,"release",void 0);class rw extends ke{constructor(){const t=Se(rw.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Yn({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",ri(this,"pan")}static getDefaults(){return Object.assign(ke.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const dD="bit-crusher",pD=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;gE(dD,pD);class vi extends ke{constructor(){const t=Se(vi.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new Ss({context:this.context}),vi._allSolos.has(this.context)||vi._allSolos.set(this.context,new Set),vi._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(ke.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),vi._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){vi._soloed.has(this.context)||vi._soloed.set(this.context,new Set),vi._soloed.get(this.context).add(this)}_removeSolo(){vi._soloed.has(this.context)&&vi._soloed.get(this.context).delete(this)}_isSoloed(){return vi._soloed.has(this.context)&&vi._soloed.get(this.context).has(this)}_noSolos(){return!vi._soloed.has(this.context)||vi._soloed.has(this.context)&&vi._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),vi._allSolos.get(this.context).delete(this),this._removeSolo(),this}}vi._allSolos=new Map;vi._soloed=new Map;class aw extends ke{constructor(){const t=Se(aw.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new rw({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new rp({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,ri(this,["pan","volume"])}static getDefaults(){return Object.assign(ke.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Nd extends ke{constructor(){const t=Se(Nd.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new vi({solo:t.solo,context:this.context}),this._panVol=this.output=new aw({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ri(this,["pan","volume"])}static getDefaults(){return Object.assign(ke.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Nd.buses.has(t)||Nd.buses.set(t,new Ss({context:this.context})),Nd.buses.get(t)}send(t,e=0){const i=this._getBus(t),a=new Ss({context:this.context,units:"decibels",gain:e});return this.connect(a),a.connect(i),a}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Nd.buses=new Map;function y1(){return ya().now()}ya().transport;ya().destination;ya().destination;ya().listener;ya().draw;ya();const Hh={hiragana:[{char:"",romaji:"a",category:"vowel",row:"vowel",col:1,type:"basic"},{char:"",romaji:"i",category:"vowel",row:"vowel",col:2,type:"basic"},{char:"",romaji:"u",category:"vowel",row:"vowel",col:3,type:"basic"},{char:"",romaji:"e",category:"vowel",row:"vowel",col:4,type:"basic"},{char:"",romaji:"o",category:"vowel",row:"vowel",col:5,type:"basic"},{char:"",romaji:"ka",category:"k-series",row:"k",col:1,type:"basic"},{char:"",romaji:"ki",category:"k-series",row:"k",col:2,type:"basic"},{char:"",romaji:"ku",category:"k-series",row:"k",col:3,type:"basic"},{char:"",romaji:"ke",category:"k-series",row:"k",col:4,type:"basic"},{char:"",romaji:"ko",category:"k-series",row:"k",col:5,type:"basic"},{char:"",romaji:"sa",category:"s-series",row:"s",col:1,type:"basic"},{char:"",romaji:"shi",category:"s-series",row:"s",col:2,type:"basic"},{char:"",romaji:"su",category:"s-series",row:"s",col:3,type:"basic"},{char:"",romaji:"se",category:"s-series",row:"s",col:4,type:"basic"},{char:"",romaji:"so",category:"s-series",row:"s",col:5,type:"basic"},{char:"",romaji:"ta",category:"t-series",row:"t",col:1,type:"basic"},{char:"",romaji:"chi",category:"t-series",row:"t",col:2,type:"basic"},{char:"",romaji:"tsu",category:"t-series",row:"t",col:3,type:"basic"},{char:"",romaji:"te",category:"t-series",row:"t",col:4,type:"basic"},{char:"",romaji:"to",category:"t-series",row:"t",col:5,type:"basic"},{char:"",romaji:"na",category:"n-series",row:"n",col:1,type:"basic"},{char:"",romaji:"ni",category:"n-series",row:"n",col:2,type:"basic"},{char:"",romaji:"nu",category:"n-series",row:"n",col:3,type:"basic"},{char:"",romaji:"ne",category:"n-series",row:"n",col:4,type:"basic"},{char:"",romaji:"no",category:"n-series",row:"n",col:5,type:"basic"},{char:"",romaji:"ha",category:"h-series",row:"h",col:1,type:"basic"},{char:"",romaji:"hi",category:"h-series",row:"h",col:2,type:"basic"},{char:"",romaji:"fu",category:"h-series",row:"h",col:3,type:"basic"},{char:"",romaji:"he",category:"h-series",row:"h",col:4,type:"basic"},{char:"",romaji:"ho",category:"h-series",row:"h",col:5,type:"basic"},{char:"",romaji:"ma",category:"m-series",row:"m",col:1,type:"basic"},{char:"",romaji:"mi",category:"m-series",row:"m",col:2,type:"basic"},{char:"",romaji:"mu",category:"m-series",row:"m",col:3,type:"basic"},{char:"",romaji:"me",category:"m-series",row:"m",col:4,type:"basic"},{char:"",romaji:"mo",category:"m-series",row:"m",col:5,type:"basic"},{char:"",romaji:"ya",category:"y-series",row:"y",col:1,type:"basic"},{char:"",romaji:"yu",category:"y-series",row:"y",col:3,type:"basic"},{char:"",romaji:"yo",category:"y-series",row:"y",col:5,type:"basic"},{char:"",romaji:"ra",category:"r-series",row:"r",col:1,type:"basic"},{char:"",romaji:"ri",category:"r-series",row:"r",col:2,type:"basic"},{char:"",romaji:"ru",category:"r-series",row:"r",col:3,type:"basic"},{char:"",romaji:"re",category:"r-series",row:"r",col:4,type:"basic"},{char:"",romaji:"ro",category:"r-series",row:"r",col:5,type:"basic"},{char:"",romaji:"wa",category:"w-series",row:"w",col:1,type:"basic"},{char:"",romaji:"wo",category:"w-series",row:"w",col:5,type:"basic"},{char:"",romaji:"n",category:"n-consonant",row:"n-single",col:1,type:"basic"},{char:"",romaji:"ga",category:"g-series",row:"g",col:1,type:"dakuten"},{char:"",romaji:"gi",category:"g-series",row:"g",col:2,type:"dakuten"},{char:"",romaji:"gu",category:"g-series",row:"g",col:3,type:"dakuten"},{char:"",romaji:"ge",category:"g-series",row:"g",col:4,type:"dakuten"},{char:"",romaji:"go",category:"g-series",row:"g",col:5,type:"dakuten"},{char:"",romaji:"za",category:"z-series",row:"z",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"z-series",row:"z",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"z-series",row:"z",col:3,type:"dakuten"},{char:"",romaji:"ze",category:"z-series",row:"z",col:4,type:"dakuten"},{char:"",romaji:"zo",category:"z-series",row:"z",col:5,type:"dakuten"},{char:"",romaji:"da",category:"d-series",row:"d",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"d-series",row:"d",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"d-series",row:"d",col:3,type:"dakuten"},{char:"",romaji:"de",category:"d-series",row:"d",col:4,type:"dakuten"},{char:"",romaji:"do",category:"d-series",row:"d",col:5,type:"dakuten"},{char:"",romaji:"ba",category:"b-series",row:"b",col:1,type:"dakuten"},{char:"",romaji:"bi",category:"b-series",row:"b",col:2,type:"dakuten"},{char:"",romaji:"bu",category:"b-series",row:"b",col:3,type:"dakuten"},{char:"",romaji:"be",category:"b-series",row:"b",col:4,type:"dakuten"},{char:"",romaji:"bo",category:"b-series",row:"b",col:5,type:"dakuten"},{char:"",romaji:"pa",category:"p-series",row:"p",col:1,type:"handakuten"},{char:"",romaji:"pi",category:"p-series",row:"p",col:2,type:"handakuten"},{char:"",romaji:"pu",category:"p-series",row:"p",col:3,type:"handakuten"},{char:"",romaji:"pe",category:"p-series",row:"p",col:4,type:"handakuten"},{char:"",romaji:"po",category:"p-series",row:"p",col:5,type:"handakuten"}],katakana:[{char:"",romaji:"a",category:"vowel",row:"vowel",col:1,type:"basic"},{char:"",romaji:"i",category:"vowel",row:"vowel",col:2,type:"basic"},{char:"",romaji:"u",category:"vowel",row:"vowel",col:3,type:"basic"},{char:"",romaji:"e",category:"vowel",row:"vowel",col:4,type:"basic"},{char:"",romaji:"o",category:"vowel",row:"vowel",col:5,type:"basic"},{char:"",romaji:"ka",category:"k-series",row:"k",col:1,type:"basic"},{char:"",romaji:"ki",category:"k-series",row:"k",col:2,type:"basic"},{char:"",romaji:"ku",category:"k-series",row:"k",col:3,type:"basic"},{char:"",romaji:"ke",category:"k-series",row:"k",col:4,type:"basic"},{char:"",romaji:"ko",category:"k-series",row:"k",col:5,type:"basic"},{char:"",romaji:"sa",category:"s-series",row:"s",col:1,type:"basic"},{char:"",romaji:"shi",category:"s-series",row:"s",col:2,type:"basic"},{char:"",romaji:"su",category:"s-series",row:"s",col:3,type:"basic"},{char:"",romaji:"se",category:"s-series",row:"s",col:4,type:"basic"},{char:"",romaji:"so",category:"s-series",row:"s",col:5,type:"basic"},{char:"",romaji:"ta",category:"t-series",row:"t",col:1,type:"basic"},{char:"",romaji:"chi",category:"t-series",row:"t",col:2,type:"basic"},{char:"",romaji:"tsu",category:"t-series",row:"t",col:3,type:"basic"},{char:"",romaji:"te",category:"t-series",row:"t",col:4,type:"basic"},{char:"",romaji:"to",category:"t-series",row:"t",col:5,type:"basic"},{char:"",romaji:"na",category:"n-series",row:"n",col:1,type:"basic"},{char:"",romaji:"ni",category:"n-series",row:"n",col:2,type:"basic"},{char:"",romaji:"nu",category:"n-series",row:"n",col:3,type:"basic"},{char:"",romaji:"ne",category:"n-series",row:"n",col:4,type:"basic"},{char:"",romaji:"no",category:"n-series",row:"n",col:5,type:"basic"},{char:"",romaji:"ha",category:"h-series",row:"h",col:1,type:"basic"},{char:"",romaji:"hi",category:"h-series",row:"h",col:2,type:"basic"},{char:"",romaji:"fu",category:"h-series",row:"h",col:3,type:"basic"},{char:"",romaji:"he",category:"h-series",row:"h",col:4,type:"basic"},{char:"",romaji:"ho",category:"h-series",row:"h",col:5,type:"basic"},{char:"",romaji:"ma",category:"m-series",row:"m",col:1,type:"basic"},{char:"",romaji:"mi",category:"m-series",row:"m",col:2,type:"basic"},{char:"",romaji:"mu",category:"m-series",row:"m",col:3,type:"basic"},{char:"",romaji:"me",category:"m-series",row:"m",col:4,type:"basic"},{char:"",romaji:"mo",category:"m-series",row:"m",col:5,type:"basic"},{char:"",romaji:"ya",category:"y-series",row:"y",col:1,type:"basic"},{char:"",romaji:"yu",category:"y-series",row:"y",col:3,type:"basic"},{char:"",romaji:"yo",category:"y-series",row:"y",col:5,type:"basic"},{char:"",romaji:"ra",category:"r-series",row:"r",col:1,type:"basic"},{char:"",romaji:"ri",category:"r-series",row:"r",col:2,type:"basic"},{char:"",romaji:"ru",category:"r-series",row:"r",col:3,type:"basic"},{char:"",romaji:"re",category:"r-series",row:"r",col:4,type:"basic"},{char:"",romaji:"ro",category:"r-series",row:"r",col:5,type:"basic"},{char:"",romaji:"wa",category:"w-series",row:"w",col:1,type:"basic"},{char:"",romaji:"wo",category:"w-series",row:"w",col:5,type:"basic"},{char:"",romaji:"n",category:"n-consonant",row:"n-single",col:1,type:"basic"},{char:"",romaji:"ga",category:"g-series",row:"g",col:1,type:"dakuten"},{char:"",romaji:"gi",category:"g-series",row:"g",col:2,type:"dakuten"},{char:"",romaji:"gu",category:"g-series",row:"g",col:3,type:"dakuten"},{char:"",romaji:"ge",category:"g-series",row:"g",col:4,type:"dakuten"},{char:"",romaji:"go",category:"g-series",row:"g",col:5,type:"dakuten"},{char:"",romaji:"za",category:"z-series",row:"z",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"z-series",row:"z",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"z-series",row:"z",col:3,type:"dakuten"},{char:"",romaji:"ze",category:"z-series",row:"z",col:4,type:"dakuten"},{char:"",romaji:"zo",category:"z-series",row:"z",col:5,type:"dakuten"},{char:"",romaji:"da",category:"d-series",row:"d",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"d-series",row:"d",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"d-series",row:"d",col:3,type:"dakuten"},{char:"",romaji:"de",category:"d-series",row:"d",col:4,type:"dakuten"},{char:"",romaji:"do",category:"d-series",row:"d",col:5,type:"dakuten"},{char:"",romaji:"ba",category:"b-series",row:"b",col:1,type:"dakuten"},{char:"",romaji:"bi",category:"b-series",row:"b",col:2,type:"dakuten"},{char:"",romaji:"bu",category:"b-series",row:"b",col:3,type:"dakuten"},{char:"",romaji:"be",category:"b-series",row:"b",col:4,type:"dakuten"},{char:"",romaji:"bo",category:"b-series",row:"b",col:5,type:"dakuten"},{char:"",romaji:"pa",category:"p-series",row:"p",col:1,type:"handakuten"},{char:"",romaji:"pi",category:"p-series",row:"p",col:2,type:"handakuten"},{char:"",romaji:"pu",category:"p-series",row:"p",col:3,type:"handakuten"},{char:"",romaji:"pe",category:"p-series",row:"p",col:4,type:"handakuten"},{char:"",romaji:"po",category:"p-series",row:"p",col:5,type:"handakuten"}]},_E={hiragana:[{id:"basic",name:"Base"},{id:"dakuten",name:"Dakuten"},{id:"handakuten",name:"Handakuten"}],katakana:[{id:"basic",name:"Base"},{id:"dakuten",name:"Dakuten"},{id:"handakuten",name:"Handakuten"}]},ow=[{id:"n-single",label:"N"},{id:"w",label:"W"},{id:"r",label:"R"},{id:"y",label:"Y"},{id:"m",label:"M"},{id:"h",label:"H"},{id:"n",label:"N"},{id:"t",label:"T"},{id:"s",label:"S"},{id:"k",label:"K"},{id:"vowel",label:"A"},{id:"g",label:"G"},{id:"z",label:"Z"},{id:"d",label:"D"},{id:"b",label:"B"},{id:"p",label:"P"}],lw=[{id:1,label:"a"},{id:2,label:"i"},{id:3,label:"u"},{id:4,label:"e"},{id:5,label:"o"}],mD=s=>{if(!Hh[s])return new Set;const t=new Set;return Hh[s].forEach(e=>{e.type==="basic"&&t.add(e.char)}),t},yE=(s,t)=>{const e=Hh[s];if(!e)return{header:[],rows:[]};const a=e.filter(d=>d.type===t).reduce((d,g)=>{const m=g.row,T=g.col;return!m||!T||(d[m]||(d[m]={}),d[m][T]=g),d},{}),c=ow.filter(d=>a[d.id]),f=lw.map(d=>{const g=c.map(m=>a[m.id]?.[d.id]||null);return{id:d.id,label:d.label,chars:g}});return{header:c,rows:f}},Lh=s=>{if(!(!s||!("speechSynthesis"in window)))try{window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(s);t.lang="ja-JP",t.rate=.9,window.speechSynthesis.speak(t)}catch(t){console.error("Sintesi vocale non riuscita:",t)}},v1=(s,t,e)=>s+(t-s)*e,Py={RED:{r:220,g:38,b:38},YELLOW:{r:202,g:138,b:4},GREEN:{r:21,g:128,b:61}},vE=s=>s.reduce((t,e)=>{const i=e.char;return t[i]||(t[i]={char:i,attempts:0,correct:0,accuracy:0}),t[i].attempts+=1,e.isCorrect&&(t[i].correct+=1),t[i].accuracy=t[i].attempts>0?t[i].correct/t[i].attempts*100:0,t},{}),Ig=(s,t)=>{if(!t||s===null)return{backgroundColor:"#E5E7EB",color:"#6B7280"};let e,i,a;s<=50?(a=s/50,e=Py.RED,i=Py.YELLOW):(a=(s-50)/50,e=Py.YELLOW,i=Py.GREEN);const c=Math.round(v1(e.r,i.r,a)),f=Math.round(v1(e.g,i.g,a)),d=Math.round(v1(e.b,i.b,a)),g=`rgb(${c}, ${f}, ${d})`,m=`rgba(${c}, ${f}, ${d}, 0.2)`,T=s>70?"white":"black";return{backgroundImage:`linear-gradient(to top, ${g} ${s}%, ${m} ${s}%)`,color:T}},ga={SOUND_EFFECTS:"kana:soundEffects",SPEECH:"kana:speech",AUTO_SKIP:"kana:autoSkip",DIRECTION:"kana:direction",TIMED_MODE:"kana:timedMode",SELECTION_MAP:"kana:selectionMap",SELECTED_SETS:"kana:selectedSets",SESSION_HISTORY:"kana:sessionHistory",SESSION_STATS:"kana:sessionStats",CURRENT_STREAK:"kana:currentStreak"};function Fo(s,t){const e=(c,f)=>{try{if(typeof window<"u"){const d=window.localStorage.getItem(c);if(d){const g=JSON.parse(d);if(s===ga.SELECTION_MAP){const m={};for(const T in g)m[T]=new Set(g[T]);return m}return g}}}catch(d){console.warn(`Error reading localStorage key "${c}":`,d)}return f},[i,a]=Ft.useState(()=>e(s,t));return Ft.useEffect(()=>{try{if(typeof window<"u"){let c;if(s===ga.SELECTION_MAP){const f={};for(const d in i)f[d]=Array.from(i[d]);c=JSON.stringify(f)}else c=JSON.stringify(i);window.localStorage.setItem(s,c)}}catch(c){console.warn(`Error setting localStorage key "${s}":`,c)}},[s,i]),[i,a]}const gD=()=>{};var Vb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(s){const t=[];let e=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},_D=function(s){const t=[];let e=0,i=0;for(;e<s.length;){const a=s[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[e++];t[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[e++],f=s[e++],d=s[e++],g=((a&7)<<18|(c&63)<<12|(f&63)<<6|d&63)-65536;t[i++]=String.fromCharCode(55296+(g>>10)),t[i++]=String.fromCharCode(56320+(g&1023))}else{const c=s[e++],f=s[e++];t[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return t.join("")},wE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],f=a+1<s.length,d=f?s[a+1]:0,g=a+2<s.length,m=g?s[a+2]:0,T=c>>2,w=(c&3)<<4|d>>4;let E=(d&15)<<2|m>>6,N=m&63;g||(N=64,f||(E=64)),i.push(e[T],e[w],e[E],e[N])}return i.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(TE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):_D(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=e[s.charAt(a++)],d=a<s.length?e[s.charAt(a)]:0;++a;const m=a<s.length?e[s.charAt(a)]:64;++a;const w=a<s.length?e[s.charAt(a)]:64;if(++a,c==null||d==null||m==null||w==null)throw new yD;const E=c<<2|d>>4;if(i.push(E),m!==64){const N=d<<4&240|m>>2;if(i.push(N),w!==64){const O=m<<6&192|w;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class yD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vD=function(s){const t=TE(s);return wE.encodeByteArray(t,!0)},f0=function(s){return vD(s).replace(/\./g,"")},TD=function(s){try{return wE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=()=>wD().__FIREBASE_DEFAULTS__,SD=()=>{if(typeof process>"u"||typeof Vb>"u")return;const s=Vb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},AD=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&TD(s[1]);return t&&JSON.parse(t)},cw=()=>{try{return gD()||bD()||SD()||AD()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},ED=s=>cw()?.emulatorHosts?.[s],CD=s=>{const t=ED(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},bE=()=>cw()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RD(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[f0(JSON.stringify(e)),f0(JSON.stringify(f)),""].join(".")}const ng={};function ID(){const s={prod:[],emulator:[]};for(const t of Object.keys(ng))ng[t]?s.emulator.push(t):s.prod.push(t);return s}function OD(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let jb=!1;function DD(s,t){if(typeof window>"u"||typeof document>"u"||!uw(window.location.host)||ng[s]===t||ng[s]||jb)return;ng[s]=t;function e(E){return`__firebase__banner__${E}`}const i="__firebase__banner",c=ID().prod.length>0;function f(){const E=document.getElementById(i);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,N){E.setAttribute("width","24"),E.setAttribute("id",N),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{jb=!0,f()},E}function T(E,N){E.setAttribute("id",N),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=OD(i),N=e("text"),O=document.getElementById(N)||document.createElement("span"),U=e("learnmore"),D=document.getElementById(U)||document.createElement("a"),z=e("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Q=E.element;d(Q),T(D,U);const nt=m();g($,z),Q.append($,O,D,nt),document.body.appendChild(Q)}c?(O.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kD(){const s=cw()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VD(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function jD(){return!kD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SE(){try{return typeof indexedDB=="object"}catch{return!1}}function AE(){return new Promise((s,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}function LD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="FirebaseError";class du extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=PD,Object.setPrototypeOf(this,du.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W0.prototype.create)}}class W0{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,c=this.errors[t],f=c?UD(c,i):"Error",d=`${this.serviceName}: ${f} (${a}).`;return new du(a,d,i)}}function UD(s,t){return s.replace(zD,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const zD=/\{\$([^}]+)}/g;function ug(s,t){if(s===t)return!0;const e=Object.keys(s),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const c=s[a],f=t[a];if(Lb(c)&&Lb(f)){if(!ug(c,f))return!1}else if(c!==f)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function Lb(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=1e3,qD=2,FD=14400*1e3,HD=.5;function Pb(s,t=BD,e=qD){const i=t*Math.pow(e,s),a=Math.round(HD*i*(Math.random()-.5)*2);return Math.min(FD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(s){return s&&s._delegate?s._delegate:s}class Ll{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new xD;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($D(t))try{this.getOrInitializeService({instanceIdentifier:Ph})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(t=Ph){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ph){return this.instances.has(t)}getOptions(t=Ph){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[c,f]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(c);i===d&&f.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&t(c,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:KD(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ph){return this.component?this.component.multipleInstances?t:Ph:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KD(s){return s===Ph?void 0:s}function $D(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new GD(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(He||(He={}));const YD={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},QD=He.INFO,XD={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},ZD=(s,t,...e)=>{if(t<s.logLevel)return;const i=new Date().toISOString(),a=XD[t];if(a)console[a](`[${i}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class hw{constructor(t){this.name=t,this._logLevel=QD,this._logHandler=ZD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in He))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?YD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...t),this._logHandler(this,He.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...t),this._logHandler(this,He.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,He.INFO,...t),this._logHandler(this,He.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,He.WARN,...t),this._logHandler(this,He.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...t),this._logHandler(this,He.ERROR,...t)}}const JD=(s,t)=>t.some(e=>s instanceof e);let Ub,zb;function tM(){return Ub||(Ub=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eM(){return zb||(zb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EE=new WeakMap,Z1=new WeakMap,CE=new WeakMap,T1=new WeakMap,fw=new WeakMap;function nM(s){const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{e(Yc(s.result)),a()},f=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",f)});return t.then(e=>{e instanceof IDBCursor&&EE.set(e,s)}).catch(()=>{}),fw.set(t,s),t}function iM(s){if(Z1.has(s))return;const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{e(),a()},f=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Z1.set(s,t)}let J1={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Z1.get(s);if(t==="objectStoreNames")return s.objectStoreNames||CE.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Yc(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function sM(s){J1=s(J1)}function rM(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=s.call(w1(this),t,...e);return CE.set(i,t.sort?t.sort():[t]),Yc(i)}:eM().includes(s)?function(...t){return s.apply(w1(this),t),Yc(EE.get(this))}:function(...t){return Yc(s.apply(w1(this),t))}}function aM(s){return typeof s=="function"?rM(s):(s instanceof IDBTransaction&&iM(s),JD(s,tM())?new Proxy(s,J1):s)}function Yc(s){if(s instanceof IDBRequest)return nM(s);if(T1.has(s))return T1.get(s);const t=aM(s);return t!==s&&(T1.set(s,t),fw.set(t,s)),t}const w1=s=>fw.get(s);function xE(s,t,{blocked:e,upgrade:i,blocking:a,terminated:c}={}){const f=indexedDB.open(s,t),d=Yc(f);return i&&f.addEventListener("upgradeneeded",g=>{i(Yc(f.result),g.oldVersion,g.newVersion,Yc(f.transaction),g)}),e&&f.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),d.then(g=>{c&&g.addEventListener("close",()=>c()),a&&g.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const oM=["get","getKey","getAll","getAllKeys","count"],lM=["put","add","delete","clear"],b1=new Map;function Bb(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(b1.get(t))return b1.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=lM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||oM.includes(e)))return;const c=async function(f,...d){const g=this.transaction(f,a?"readwrite":"readonly");let m=g.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[e](...d),a&&g.done]))[0]};return b1.set(t,c),c}sM(s=>({...s,get:(t,e,i)=>Bb(t,e)||s.get(t,e,i),has:(t,e)=>!!Bb(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(uM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function uM(s){return s.getComponent()?.type==="VERSION"}const tT="@firebase/app",qb="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new hw("@firebase/app"),hM="@firebase/app-compat",fM="@firebase/analytics-compat",dM="@firebase/analytics",pM="@firebase/app-check-compat",mM="@firebase/app-check",gM="@firebase/auth",_M="@firebase/auth-compat",yM="@firebase/database",vM="@firebase/data-connect",TM="@firebase/database-compat",wM="@firebase/functions",bM="@firebase/functions-compat",SM="@firebase/installations",AM="@firebase/installations-compat",EM="@firebase/messaging",CM="@firebase/messaging-compat",xM="@firebase/performance",RM="@firebase/performance-compat",NM="@firebase/remote-config",IM="@firebase/remote-config-compat",OM="@firebase/storage",DM="@firebase/storage-compat",MM="@firebase/firestore",kM="@firebase/ai",VM="@firebase/firestore-compat",jM="firebase",LM="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="[DEFAULT]",PM={[tT]:"fire-core",[hM]:"fire-core-compat",[dM]:"fire-analytics",[fM]:"fire-analytics-compat",[mM]:"fire-app-check",[pM]:"fire-app-check-compat",[gM]:"fire-auth",[_M]:"fire-auth-compat",[yM]:"fire-rtdb",[vM]:"fire-data-connect",[TM]:"fire-rtdb-compat",[wM]:"fire-fn",[bM]:"fire-fn-compat",[SM]:"fire-iid",[AM]:"fire-iid-compat",[EM]:"fire-fcm",[CM]:"fire-fcm-compat",[xM]:"fire-perf",[RM]:"fire-perf-compat",[NM]:"fire-rc",[IM]:"fire-rc-compat",[OM]:"fire-gcs",[DM]:"fire-gcs-compat",[MM]:"fire-fst",[VM]:"fire-fst-compat",[kM]:"fire-vertex","fire-js":"fire-js",[jM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new Map,UM=new Map,nT=new Map;function Fb(s,t){try{s.container.addComponent(t)}catch(e){Pl.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function nu(s){const t=s.name;if(nT.has(t))return Pl.debug(`There were multiple attempts to register component ${t}.`),!1;nT.set(t,s);for(const e of d0.values())Fb(e,s);for(const e of UM.values())Fb(e,s);return!0}function Og(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function zM(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qc=new W0("app","Firebase",BM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=LM;function RE(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const i={name:eT,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw Qc.create("bad-app-name",{appName:String(a)});if(e||(e=bE()),!e)throw Qc.create("no-options");const c=d0.get(a);if(c){if(ug(e,c.options)&&ug(i,c.config))return c;throw Qc.create("duplicate-app",{appName:a})}const f=new WD(a);for(const g of nT.values())f.addComponent(g);const d=new qM(e,i,f);return d0.set(a,d),d}function NE(s=eT){const t=d0.get(s);if(!t&&s===eT&&bE())return RE();if(!t)throw Qc.create("no-app",{appName:s});return t}function Go(s,t,e){let i=PM[s]??s;e&&(i+=`-${e}`);const a=i.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const f=[`Unable to register library "${i}" with version "${t}":`];a&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Pl.warn(f.join(" "));return}nu(new Ll(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="firebase-heartbeat-database",GM=1,hg="firebase-heartbeat-store";let S1=null;function IE(){return S1||(S1=xE(HM,GM,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(hg)}catch(e){console.warn(e)}}}}).catch(s=>{throw Qc.create("idb-open",{originalErrorMessage:s.message})})),S1}async function KM(s){try{const e=(await IE()).transaction(hg),i=await e.objectStore(hg).get(OE(s));return await e.done,i}catch(t){if(t instanceof du)Pl.warn(t.message);else{const e=Qc.create("idb-get",{originalErrorMessage:t?.message});Pl.warn(e.message)}}}async function Hb(s,t){try{const i=(await IE()).transaction(hg,"readwrite");await i.objectStore(hg).put(t,OE(s)),await i.done}catch(e){if(e instanceof du)Pl.warn(e.message);else{const i=Qc.create("idb-set",{originalErrorMessage:e?.message});Pl.warn(i.message)}}}function OE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=1024,WM=30;class YM{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new XM(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>WM){const a=ZM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Pl.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gb(),{heartbeatsToSend:e,unsentEntries:i}=QM(this._heartbeatsCache.heartbeats),a=f0(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Pl.warn(t),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function QM(s,t=$M){const e=[];let i=s.slice();for(const a of s){const c=e.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),Kb(e)>t){c.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Kb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class XM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SE()?AE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await KM(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Kb(s){return f0(JSON.stringify({version:2,heartbeats:s})).length}function ZM(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let i=1;i<s.length;i++)s[i].date<e&&(e=s[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(s){nu(new Ll("platform-logger",t=>new cM(t),"PRIVATE")),nu(new Ll("heartbeat",t=>new YM(t),"PRIVATE")),Go(tT,qb,s),Go(tT,qb,"esm2020"),Go("fire-js","")}JM("");var t3="firebase",e3="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Go(t3,e3,"app");const DE="@firebase/installations",dw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=1e4,kE=`w:${dw}`,VE="FIS_v2",n3="https://firebaseinstallations.googleapis.com/v1",i3=3600*1e3,s3="installations",r3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wh=new W0(s3,r3,a3);function jE(s){return s instanceof du&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE({projectId:s}){return`${n3}/projects/${s}/installations`}function PE(s){return{token:s.token,requestStatus:2,expiresIn:l3(s.expiresIn),creationTime:Date.now()}}async function UE(s,t){const i=(await t.json()).error;return Wh.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function zE({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function o3(s,{refreshToken:t}){const e=zE(s);return e.append("Authorization",c3(t)),e}async function BE(s){const t=await s();return t.status>=500&&t.status<600?s():t}function l3(s){return Number(s.replace("s","000"))}function c3(s){return`${VE} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3({appConfig:s,heartbeatServiceProvider:t},{fid:e}){const i=LE(s),a=zE(s),c=t.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const f={fid:e,authVersion:VE,appId:s.appId,sdkVersion:kE},d={method:"POST",headers:a,body:JSON.stringify(f)},g=await BE(()=>fetch(i,d));if(g.ok){const m=await g.json();return{fid:m.fid||e,registrationStatus:2,refreshToken:m.refreshToken,authToken:PE(m.authToken)}}else throw await UE("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=/^[cdef][\w-]{21}$/,iT="";function d3(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const e=p3(s);return f3.test(e)?e:iT}catch{return iT}}function p3(s){return h3(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Map;function HE(s,t){const e=Y0(s);GE(e,t),m3(e,t)}function GE(s,t){const e=FE.get(s);if(e)for(const i of e)i(t)}function m3(s,t){const e=g3();e&&e.postMessage({key:s,fid:t}),_3()}let zh=null;function g3(){return!zh&&"BroadcastChannel"in self&&(zh=new BroadcastChannel("[Firebase] FID Change"),zh.onmessage=s=>{GE(s.data.key,s.data.fid)}),zh}function _3(){FE.size===0&&zh&&(zh.close(),zh=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="firebase-installations-database",v3=1,Yh="firebase-installations-store";let A1=null;function pw(){return A1||(A1=xE(y3,v3,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Yh)}}})),A1}async function p0(s,t){const e=Y0(s),a=(await pw()).transaction(Yh,"readwrite"),c=a.objectStore(Yh),f=await c.get(e);return await c.put(t,e),await a.done,(!f||f.fid!==t.fid)&&HE(s,t.fid),t}async function KE(s){const t=Y0(s),i=(await pw()).transaction(Yh,"readwrite");await i.objectStore(Yh).delete(t),await i.done}async function Q0(s,t){const e=Y0(s),a=(await pw()).transaction(Yh,"readwrite"),c=a.objectStore(Yh),f=await c.get(e),d=t(f);return d===void 0?await c.delete(e):await c.put(d,e),await a.done,d&&(!f||f.fid!==d.fid)&&HE(s,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(s){let t;const e=await Q0(s.appConfig,i=>{const a=T3(i),c=w3(s,a);return t=c.registrationPromise,c.installationEntry});return e.fid===iT?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function T3(s){const t=s||{fid:d3(),registrationStatus:0};return $E(t)}function w3(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Wh.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=b3(s,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:S3(s)}:{installationEntry:t}}async function b3(s,t){try{const e=await u3(s,t);return p0(s.appConfig,e)}catch(e){throw jE(e)&&e.customData.serverCode===409?await KE(s.appConfig):await p0(s.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function S3(s){let t=await $b(s.appConfig);for(;t.registrationStatus===1;)await qE(100),t=await $b(s.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await mw(s);return i||e}return t}function $b(s){return Q0(s,t=>{if(!t)throw Wh.create("installation-not-found");return $E(t)})}function $E(s){return A3(s)?{fid:s.fid,registrationStatus:0}:s}function A3(s){return s.registrationStatus===1&&s.registrationTime+ME<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3({appConfig:s,heartbeatServiceProvider:t},e){const i=C3(s,e),a=o3(s,e),c=t.getImmediate({optional:!0});if(c){const m=await c.getHeartbeatsHeader();m&&a.append("x-firebase-client",m)}const f={installation:{sdkVersion:kE,appId:s.appId}},d={method:"POST",headers:a,body:JSON.stringify(f)},g=await BE(()=>fetch(i,d));if(g.ok){const m=await g.json();return PE(m)}else throw await UE("Generate Auth Token",g)}function C3(s,{fid:t}){return`${LE(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(s,t=!1){let e;const i=await Q0(s.appConfig,c=>{if(!WE(c))throw Wh.create("not-registered");const f=c.authToken;if(!t&&N3(f))return c;if(f.requestStatus===1)return e=x3(s,t),c;{if(!navigator.onLine)throw Wh.create("app-offline");const d=O3(c);return e=R3(s,d),d}});return e?await e:i.authToken}async function x3(s,t){let e=await Wb(s.appConfig);for(;e.authToken.requestStatus===1;)await qE(100),e=await Wb(s.appConfig);const i=e.authToken;return i.requestStatus===0?gw(s,t):i}function Wb(s){return Q0(s,t=>{if(!WE(t))throw Wh.create("not-registered");const e=t.authToken;return D3(e)?{...t,authToken:{requestStatus:0}}:t})}async function R3(s,t){try{const e=await E3(s,t),i={...t,authToken:e};return await p0(s.appConfig,i),e}catch(e){if(jE(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await KE(s.appConfig);else{const i={...t,authToken:{requestStatus:0}};await p0(s.appConfig,i)}throw e}}function WE(s){return s!==void 0&&s.registrationStatus===2}function N3(s){return s.requestStatus===2&&!I3(s)}function I3(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+i3}function O3(s){const t={requestStatus:1,requestTime:Date.now()};return{...s,authToken:t}}function D3(s){return s.requestStatus===1&&s.requestTime+ME<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(s){const t=s,{installationEntry:e,registrationPromise:i}=await mw(t);return i?i.catch(console.error):gw(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(s,t=!1){const e=s;return await V3(e),(await gw(e,t)).token}async function V3(s){const{registrationPromise:t}=await mw(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(s){if(!s||!s.options)throw E1("App Configuration");if(!s.name)throw E1("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!s.options[e])throw E1(e);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function E1(s){return Wh.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="installations",L3="installations-internal",P3=s=>{const t=s.getProvider("app").getImmediate(),e=j3(t),i=Og(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},U3=s=>{const t=s.getProvider("app").getImmediate(),e=Og(t,YE).getImmediate();return{getId:()=>M3(e),getToken:a=>k3(e,a)}};function z3(){nu(new Ll(YE,P3,"PUBLIC")),nu(new Ll(L3,U3,"PRIVATE"))}z3();Go(DE,dw);Go(DE,dw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="analytics",B3="firebase_id",q3="origin",F3=60*1e3,H3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_w="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new hw("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qr=new W0("analytics","Analytics",G3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(s){if(!s.startsWith(_w)){const t=Qr.create("invalid-gtag-resource",{gtagURL:s});return Ys.warn(t.message),""}return s}function QE(s){return Promise.all(s.map(t=>t.catch(e=>e)))}function $3(s,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(s,t)),e}function W3(s,t){const e=$3("firebase-js-sdk-policy",{createScriptURL:K3}),i=document.createElement("script"),a=`${_w}?l=${s}&id=${t}`;i.src=e?e?.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function Y3(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function Q3(s,t,e,i,a,c){const f=i[a];try{if(f)await t[f];else{const g=(await QE(e)).find(m=>m.measurementId===a);g&&await t[g.appId]}}catch(d){Ys.error(d)}s("config",a,c)}async function X3(s,t,e,i,a){try{let c=[];if(a&&a.send_to){let f=a.send_to;Array.isArray(f)||(f=[f]);const d=await QE(e);for(const g of f){const m=d.find(w=>w.measurementId===g),T=m&&t[m.appId];if(T)c.push(T);else{c=[];break}}}c.length===0&&(c=Object.values(t)),await Promise.all(c),s("event",i,a||{})}catch(c){Ys.error(c)}}function Z3(s,t,e,i){async function a(c,...f){try{if(c==="event"){const[d,g]=f;await X3(s,t,e,d,g)}else if(c==="config"){const[d,g]=f;await Q3(s,t,e,i,d,g)}else if(c==="consent"){const[d,g]=f;s("consent",d,g)}else if(c==="get"){const[d,g,m]=f;s("get",d,g,m)}else if(c==="set"){const[d]=f;s("set",d)}else s(c,...f)}catch(d){Ys.error(d)}}return a}function J3(s,t,e,i,a){let c=function(...f){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(c=window[a]),window[a]=Z3(c,s,t,e),{gtagCore:c,wrappedGtag:window[a]}}function t5(s){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(_w)&&e.src.includes(s))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=30,n5=1e3;class i5{constructor(t={},e=n5){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const XE=new i5;function s5(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function r5(s){const{appId:t,apiKey:e}=s,i={method:"GET",headers:s5(e)},a=H3.replace("{app-id}",t),c=await fetch(a,i);if(c.status!==200&&c.status!==304){let f="";try{const d=await c.json();d.error?.message&&(f=d.error.message)}catch{}throw Qr.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function a5(s,t=XE,e){const{appId:i,apiKey:a,measurementId:c}=s.options;if(!i)throw Qr.create("no-app-id");if(!a){if(c)return{measurementId:c,appId:i};throw Qr.create("no-api-key")}const f=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new c5;return setTimeout(async()=>{d.abort()},F3),ZE({appId:i,apiKey:a,measurementId:c},f,d,t)}async function ZE(s,{throttleEndTimeMillis:t,backoffCount:e},i,a=XE){const{appId:c,measurementId:f}=s;try{await o5(i,t)}catch(d){if(f)return Ys.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:f};throw d}try{const d=await r5(s);return a.deleteThrottleMetadata(c),d}catch(d){const g=d;if(!l5(g)){if(a.deleteThrottleMetadata(c),f)return Ys.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:f};throw d}const m=Number(g?.customData?.httpStatus)===503?Pb(e,a.intervalMillis,e5):Pb(e,a.intervalMillis),T={throttleEndTimeMillis:Date.now()+m,backoffCount:e+1};return a.setThrottleMetadata(c,T),Ys.debug(`Calling attemptFetch again in ${m} millis`),ZE(s,T,i,a)}}function o5(s,t){return new Promise((e,i)=>{const a=Math.max(t-Date.now(),0),c=setTimeout(e,a);s.addEventListener(()=>{clearTimeout(c),i(Qr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function l5(s){if(!(s instanceof du)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class c5{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function u5(s,t,e,i,a){if(a&&a.global){s("event",e,i);return}else{const c=await t,f={...i,send_to:c};s("event",e,f)}}async function h5(s,t,e,i){if(i&&i.global){const a={};for(const c of Object.keys(e))a[`user_properties.${c}`]=e[c];return s("set",a),Promise.resolve()}else{const a=await t;s("config",a,{update:!0,user_properties:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(){if(SE())try{await AE()}catch(s){return Ys.warn(Qr.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return Ys.warn(Qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function d5(s,t,e,i,a,c,f){const d=a5(s);d.then(E=>{e[E.measurementId]=E.appId,s.options.measurementId&&E.measurementId!==s.options.measurementId&&Ys.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Ys.error(E)),t.push(d);const g=f5().then(E=>{if(E)return i.getId()}),[m,T]=await Promise.all([d,g]);t5(c)||W3(c,m.measurementId),a("js",new Date);const w=f?.config??{};return w[q3]="firebase",w.update=!0,T!=null&&(w[B3]=T),a("config",m.measurementId,w),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(t){this.app=t}_delete(){return delete Dd[this.app.options.appId],Promise.resolve()}}let Dd={},Yb=[];const Qb={};let C1="dataLayer",m5="gtag",Xb,yw,Zb=!1;function g5(){const s=[];if(VD()&&s.push("This is a browser extension environment."),LD()||s.push("Cookies are not available."),s.length>0){const t=s.map((i,a)=>`(${a+1}) ${i}`).join(" "),e=Qr.create("invalid-analytics-context",{errorInfo:t});Ys.warn(e.message)}}function _5(s,t,e){g5();const i=s.options.appId;if(!i)throw Qr.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Ys.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qr.create("no-api-key");if(Dd[i]!=null)throw Qr.create("already-exists",{id:i});if(!Zb){Y3(C1);const{wrappedGtag:c,gtagCore:f}=J3(Dd,Yb,Qb,C1,m5);yw=c,Xb=f,Zb=!0}return Dd[i]=d5(s,Yb,Qb,t,Xb,C1,e),new p5(s)}function y5(s=NE()){s=br(s);const t=Og(s,m0);return t.isInitialized()?t.getImmediate():v5(s)}function v5(s,t={}){const e=Og(s,m0);if(e.isInitialized()){const a=e.getImmediate();if(ug(t,e.getOptions()))return a;throw Qr.create("already-initialized")}return e.initialize({options:t})}function T5(s,t,e){s=br(s),h5(yw,Dd[s.app.options.appId],t,e).catch(i=>Ys.error(i))}function w5(s,t,e,i){s=br(s),u5(yw,Dd[s.app.options.appId],t,e,i).catch(a=>Ys.error(a))}const Jb="@firebase/analytics",tS="0.10.19";function b5(){nu(new Ll(m0,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();return _5(i,a,e)},"PUBLIC")),nu(new Ll("analytics-internal",s,"PRIVATE")),Go(Jb,tS),Go(Jb,tS,"esm2020");function s(t){try{const e=t.getProvider(m0).getImmediate();return{logEvent:(i,a,c)=>w5(e,i,a,c),setUserProperties:(i,a)=>T5(e,i,a)}}catch(e){throw Qr.create("interop-component-reg-failed",{reason:e})}}}b5();var eS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xc,JE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,C){function M(){}M.prototype=C.prototype,R.F=C.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(V,P,F){for(var B=Array(arguments.length-2),At=2;At<arguments.length;At++)B[At-2]=arguments[At];return C.prototype[P].apply(V,B)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,C,M){M||(M=0);const V=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)V[P]=C.charCodeAt(M++)|C.charCodeAt(M++)<<8|C.charCodeAt(M++)<<16|C.charCodeAt(M++)<<24;else for(P=0;P<16;++P)V[P]=C[M++]|C[M++]<<8|C[M++]<<16|C[M++]<<24;C=R.g[0],M=R.g[1],P=R.g[2];let F=R.g[3],B;B=C+(F^M&(P^F))+V[0]+3614090360&4294967295,C=M+(B<<7&4294967295|B>>>25),B=F+(P^C&(M^P))+V[1]+3905402710&4294967295,F=C+(B<<12&4294967295|B>>>20),B=P+(M^F&(C^M))+V[2]+606105819&4294967295,P=F+(B<<17&4294967295|B>>>15),B=M+(C^P&(F^C))+V[3]+3250441966&4294967295,M=P+(B<<22&4294967295|B>>>10),B=C+(F^M&(P^F))+V[4]+4118548399&4294967295,C=M+(B<<7&4294967295|B>>>25),B=F+(P^C&(M^P))+V[5]+1200080426&4294967295,F=C+(B<<12&4294967295|B>>>20),B=P+(M^F&(C^M))+V[6]+2821735955&4294967295,P=F+(B<<17&4294967295|B>>>15),B=M+(C^P&(F^C))+V[7]+4249261313&4294967295,M=P+(B<<22&4294967295|B>>>10),B=C+(F^M&(P^F))+V[8]+1770035416&4294967295,C=M+(B<<7&4294967295|B>>>25),B=F+(P^C&(M^P))+V[9]+2336552879&4294967295,F=C+(B<<12&4294967295|B>>>20),B=P+(M^F&(C^M))+V[10]+4294925233&4294967295,P=F+(B<<17&4294967295|B>>>15),B=M+(C^P&(F^C))+V[11]+2304563134&4294967295,M=P+(B<<22&4294967295|B>>>10),B=C+(F^M&(P^F))+V[12]+1804603682&4294967295,C=M+(B<<7&4294967295|B>>>25),B=F+(P^C&(M^P))+V[13]+4254626195&4294967295,F=C+(B<<12&4294967295|B>>>20),B=P+(M^F&(C^M))+V[14]+2792965006&4294967295,P=F+(B<<17&4294967295|B>>>15),B=M+(C^P&(F^C))+V[15]+1236535329&4294967295,M=P+(B<<22&4294967295|B>>>10),B=C+(P^F&(M^P))+V[1]+4129170786&4294967295,C=M+(B<<5&4294967295|B>>>27),B=F+(M^P&(C^M))+V[6]+3225465664&4294967295,F=C+(B<<9&4294967295|B>>>23),B=P+(C^M&(F^C))+V[11]+643717713&4294967295,P=F+(B<<14&4294967295|B>>>18),B=M+(F^C&(P^F))+V[0]+3921069994&4294967295,M=P+(B<<20&4294967295|B>>>12),B=C+(P^F&(M^P))+V[5]+3593408605&4294967295,C=M+(B<<5&4294967295|B>>>27),B=F+(M^P&(C^M))+V[10]+38016083&4294967295,F=C+(B<<9&4294967295|B>>>23),B=P+(C^M&(F^C))+V[15]+3634488961&4294967295,P=F+(B<<14&4294967295|B>>>18),B=M+(F^C&(P^F))+V[4]+3889429448&4294967295,M=P+(B<<20&4294967295|B>>>12),B=C+(P^F&(M^P))+V[9]+568446438&4294967295,C=M+(B<<5&4294967295|B>>>27),B=F+(M^P&(C^M))+V[14]+3275163606&4294967295,F=C+(B<<9&4294967295|B>>>23),B=P+(C^M&(F^C))+V[3]+4107603335&4294967295,P=F+(B<<14&4294967295|B>>>18),B=M+(F^C&(P^F))+V[8]+1163531501&4294967295,M=P+(B<<20&4294967295|B>>>12),B=C+(P^F&(M^P))+V[13]+2850285829&4294967295,C=M+(B<<5&4294967295|B>>>27),B=F+(M^P&(C^M))+V[2]+4243563512&4294967295,F=C+(B<<9&4294967295|B>>>23),B=P+(C^M&(F^C))+V[7]+1735328473&4294967295,P=F+(B<<14&4294967295|B>>>18),B=M+(F^C&(P^F))+V[12]+2368359562&4294967295,M=P+(B<<20&4294967295|B>>>12),B=C+(M^P^F)+V[5]+4294588738&4294967295,C=M+(B<<4&4294967295|B>>>28),B=F+(C^M^P)+V[8]+2272392833&4294967295,F=C+(B<<11&4294967295|B>>>21),B=P+(F^C^M)+V[11]+1839030562&4294967295,P=F+(B<<16&4294967295|B>>>16),B=M+(P^F^C)+V[14]+4259657740&4294967295,M=P+(B<<23&4294967295|B>>>9),B=C+(M^P^F)+V[1]+2763975236&4294967295,C=M+(B<<4&4294967295|B>>>28),B=F+(C^M^P)+V[4]+1272893353&4294967295,F=C+(B<<11&4294967295|B>>>21),B=P+(F^C^M)+V[7]+4139469664&4294967295,P=F+(B<<16&4294967295|B>>>16),B=M+(P^F^C)+V[10]+3200236656&4294967295,M=P+(B<<23&4294967295|B>>>9),B=C+(M^P^F)+V[13]+681279174&4294967295,C=M+(B<<4&4294967295|B>>>28),B=F+(C^M^P)+V[0]+3936430074&4294967295,F=C+(B<<11&4294967295|B>>>21),B=P+(F^C^M)+V[3]+3572445317&4294967295,P=F+(B<<16&4294967295|B>>>16),B=M+(P^F^C)+V[6]+76029189&4294967295,M=P+(B<<23&4294967295|B>>>9),B=C+(M^P^F)+V[9]+3654602809&4294967295,C=M+(B<<4&4294967295|B>>>28),B=F+(C^M^P)+V[12]+3873151461&4294967295,F=C+(B<<11&4294967295|B>>>21),B=P+(F^C^M)+V[15]+530742520&4294967295,P=F+(B<<16&4294967295|B>>>16),B=M+(P^F^C)+V[2]+3299628645&4294967295,M=P+(B<<23&4294967295|B>>>9),B=C+(P^(M|~F))+V[0]+4096336452&4294967295,C=M+(B<<6&4294967295|B>>>26),B=F+(M^(C|~P))+V[7]+1126891415&4294967295,F=C+(B<<10&4294967295|B>>>22),B=P+(C^(F|~M))+V[14]+2878612391&4294967295,P=F+(B<<15&4294967295|B>>>17),B=M+(F^(P|~C))+V[5]+4237533241&4294967295,M=P+(B<<21&4294967295|B>>>11),B=C+(P^(M|~F))+V[12]+1700485571&4294967295,C=M+(B<<6&4294967295|B>>>26),B=F+(M^(C|~P))+V[3]+2399980690&4294967295,F=C+(B<<10&4294967295|B>>>22),B=P+(C^(F|~M))+V[10]+4293915773&4294967295,P=F+(B<<15&4294967295|B>>>17),B=M+(F^(P|~C))+V[1]+2240044497&4294967295,M=P+(B<<21&4294967295|B>>>11),B=C+(P^(M|~F))+V[8]+1873313359&4294967295,C=M+(B<<6&4294967295|B>>>26),B=F+(M^(C|~P))+V[15]+4264355552&4294967295,F=C+(B<<10&4294967295|B>>>22),B=P+(C^(F|~M))+V[6]+2734768916&4294967295,P=F+(B<<15&4294967295|B>>>17),B=M+(F^(P|~C))+V[13]+1309151649&4294967295,M=P+(B<<21&4294967295|B>>>11),B=C+(P^(M|~F))+V[4]+4149444226&4294967295,C=M+(B<<6&4294967295|B>>>26),B=F+(M^(C|~P))+V[11]+3174756917&4294967295,F=C+(B<<10&4294967295|B>>>22),B=P+(C^(F|~M))+V[2]+718787259&4294967295,P=F+(B<<15&4294967295|B>>>17),B=M+(F^(P|~C))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(P+(B<<21&4294967295|B>>>11))&4294967295,R.g[2]=R.g[2]+P&4294967295,R.g[3]=R.g[3]+F&4294967295}i.prototype.v=function(R,C){C===void 0&&(C=R.length);const M=C-this.blockSize,V=this.C;let P=this.h,F=0;for(;F<C;){if(P==0)for(;F<=M;)a(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<C;)if(V[P++]=R.charCodeAt(F++),P==this.blockSize){a(this,V),P=0;break}}else for(;F<C;)if(V[P++]=R[F++],P==this.blockSize){a(this,V),P=0;break}}this.h=P,this.o+=C},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;C=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=C&255,C/=256;for(this.v(R),R=Array(16),C=0,M=0;M<4;++M)for(let V=0;V<32;V+=8)R[C++]=this.g[M]>>>V&255;return R};function c(R,C){var M=d;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=C(R)}function f(R,C){this.h=C;const M=[];let V=!0;for(let P=R.length-1;P>=0;P--){const F=R[P]|0;V&&F==C||(M[P]=F,V=!1)}this.g=M}var d={};function g(R){return-128<=R&&R<128?c(R,function(C){return new f([C|0],C<0?-1:0)}):new f([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return w;if(R<0)return D(m(-R));const C=[];let M=1;for(let V=0;R>=M;V++)C[V]=R/M|0,M*=4294967296;return new f(C,0)}function T(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return D(T(R.substring(1),C));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(C,8));let V=w;for(let F=0;F<R.length;F+=8){var P=Math.min(8,R.length-F);const B=parseInt(R.substring(F,F+P),C);P<8?(P=m(Math.pow(C,P)),V=V.j(P).add(m(B))):(V=V.j(M),V=V.add(m(B)))}return V}var w=g(0),E=g(1),N=g(16777216);s=f.prototype,s.m=function(){if(U(this))return-D(this).m();let R=0,C=1;for(let M=0;M<this.g.length;M++){const V=this.i(M);R+=(V>=0?V:4294967296+V)*C,C*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O(this))return"0";if(U(this))return"-"+D(this).toString(R);const C=m(Math.pow(R,6));var M=this;let V="";for(;;){const P=nt(M,C).g;M=z(M,P.j(C));let F=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=P,O(M))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function O(R){if(R.h!=0)return!1;for(let C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function U(R){return R.h==-1}s.l=function(R){return R=z(this,R),U(R)?-1:O(R)?0:1};function D(R){const C=R.g.length,M=[];for(let V=0;V<C;V++)M[V]=~R.g[V];return new f(M,~R.h).add(E)}s.abs=function(){return U(this)?D(this):this},s.add=function(R){const C=Math.max(this.g.length,R.g.length),M=[];let V=0;for(let P=0;P<=C;P++){let F=V+(this.i(P)&65535)+(R.i(P)&65535),B=(F>>>16)+(this.i(P)>>>16)+(R.i(P)>>>16);V=B>>>16,F&=65535,B&=65535,M[P]=B<<16|F}return new f(M,M[M.length-1]&-2147483648?-1:0)};function z(R,C){return R.add(D(C))}s.j=function(R){if(O(this)||O(R))return w;if(U(this))return U(R)?D(this).j(D(R)):D(D(this).j(R));if(U(R))return D(this.j(D(R)));if(this.l(N)<0&&R.l(N)<0)return m(this.m()*R.m());const C=this.g.length+R.g.length,M=[];for(var V=0;V<2*C;V++)M[V]=0;for(V=0;V<this.g.length;V++)for(let P=0;P<R.g.length;P++){const F=this.i(V)>>>16,B=this.i(V)&65535,At=R.i(P)>>>16,Mt=R.i(P)&65535;M[2*V+2*P]+=B*Mt,$(M,2*V+2*P),M[2*V+2*P+1]+=F*Mt,$(M,2*V+2*P+1),M[2*V+2*P+1]+=B*At,$(M,2*V+2*P+1),M[2*V+2*P+2]+=F*At,$(M,2*V+2*P+2)}for(R=0;R<C;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=C;R<2*C;R++)M[R]=0;return new f(M,0)};function $(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function Q(R,C){this.g=R,this.h=C}function nt(R,C){if(O(C))throw Error("division by zero");if(O(R))return new Q(w,w);if(U(R))return C=nt(D(R),C),new Q(D(C.g),D(C.h));if(U(C))return C=nt(R,D(C)),new Q(D(C.g),C.h);if(R.g.length>30){if(U(R)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var M=E,V=C;V.l(R)<=0;)M=K(M),V=K(V);var P=X(M,1),F=X(V,1);for(V=X(V,2),M=X(M,2);!O(V);){var B=F.add(V);B.l(R)<=0&&(P=P.add(M),F=B),V=X(V,1),M=X(M,1)}return C=z(R,P.j(C)),new Q(P,C)}for(P=w;R.l(C)>=0;){for(M=Math.max(1,Math.floor(R.m()/C.m())),V=Math.ceil(Math.log(M)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=m(M),B=F.j(C);U(B)||B.l(R)>0;)M-=V,F=m(M),B=F.j(C);O(F)&&(F=E),P=P.add(F),R=z(R,B)}return new Q(P,R)}s.B=function(R){return nt(this,R).h},s.and=function(R){const C=Math.max(this.g.length,R.g.length),M=[];for(let V=0;V<C;V++)M[V]=this.i(V)&R.i(V);return new f(M,this.h&R.h)},s.or=function(R){const C=Math.max(this.g.length,R.g.length),M=[];for(let V=0;V<C;V++)M[V]=this.i(V)|R.i(V);return new f(M,this.h|R.h)},s.xor=function(R){const C=Math.max(this.g.length,R.g.length),M=[];for(let V=0;V<C;V++)M[V]=this.i(V)^R.i(V);return new f(M,this.h^R.h)};function K(R){const C=R.g.length+1,M=[];for(let V=0;V<C;V++)M[V]=R.i(V)<<1|R.i(V-1)>>>31;return new f(M,R.h)}function X(R,C){const M=C>>5;C%=32;const V=R.g.length-M,P=[];for(let F=0;F<V;F++)P[F]=C>0?R.i(F+M)>>>C|R.i(F+M+1)<<32-C:R.i(F+M);return new f(P,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,JE=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=m,f.fromString=T,Xc=f}).apply(typeof eS<"u"?eS:typeof self<"u"?self:typeof window<"u"?window:{});var Uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t2,Zm,e2,Wy,sT,n2,i2,s2;(function(){var s,t=Object.defineProperty;function e(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uy=="object"&&Uy];for(var S=0;S<p.length;++S){var x=p[S];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=e(this);function a(p,S){if(S)t:{var x=i;p=p.split(".");for(var H=0;H<p.length-1;H++){var ot=p[H];if(!(ot in x))break t;x=x[ot]}p=p[p.length-1],H=x[p],S=S(H),S!=H&&S!=null&&t(x,p,{configurable:!0,writable:!0,value:S})}}a("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(p){return p||function(S){var x=[],H;for(H in S)Object.prototype.hasOwnProperty.call(S,H)&&x.push([H,S[H]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function d(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function g(p,S,x){return p.call.apply(p.bind,arguments)}function m(p,S,x){return m=g,m.apply(null,arguments)}function T(p,S){var x=Array.prototype.slice.call(arguments,1);return function(){var H=x.slice();return H.push.apply(H,arguments),p.apply(this,H)}}function w(p,S){function x(){}x.prototype=S.prototype,p.Z=S.prototype,p.prototype=new x,p.prototype.constructor=p,p.Ob=function(H,ot,dt){for(var Lt=Array(arguments.length-2),me=2;me<arguments.length;me++)Lt[me-2]=arguments[me];return S.prototype[ot].apply(H,Lt)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function N(p){const S=p.length;if(S>0){const x=Array(S);for(let H=0;H<S;H++)x[H]=p[H];return x}return[]}function O(p,S){for(let H=1;H<arguments.length;H++){const ot=arguments[H];var x=typeof ot;if(x=x!="object"?x:ot?Array.isArray(ot)?"array":x:"null",x=="array"||x=="object"&&typeof ot.length=="number"){x=p.length||0;const dt=ot.length||0;p.length=x+dt;for(let Lt=0;Lt<dt;Lt++)p[x+Lt]=ot[Lt]}else p.push(ot)}}class U{constructor(S,x){this.i=S,this.j=x,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function D(p){f.setTimeout(()=>{throw p},0)}function z(){var p=R;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class ${constructor(){this.h=this.g=null}add(S,x){const H=Q.get();H.set(S,x),this.h?this.h.next=H:this.g=H,this.h=H}}var Q=new U(()=>new nt,p=>p.reset());class nt{constructor(){this.next=this.g=this.h=null}set(S,x){this.h=S,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let K,X=!1,R=new $,C=()=>{const p=Promise.resolve(void 0);K=()=>{p.then(M)}};function M(){for(var p;p=z();){try{p.h.call(p.g)}catch(x){D(x)}var S=Q;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}X=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const x=()=>{};f.addEventListener("test",x,S),f.removeEventListener("test",x,S)}catch{}return p})();function B(p){return/^[\s\xa0]*$/.test(p)}function At(p,S){P.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}w(At,P),At.prototype.init=function(p,S){const x=this.type=p.type,H=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(x=="mouseover"?S=p.fromElement:x=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&At.Z.h.call(this)},At.prototype.h=function(){At.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Mt="closure_listenable_"+(Math.random()*1e6|0),Z=0;function rt(p,S,x,H,ot){this.listener=p,this.proxy=null,this.src=S,this.type=x,this.capture=!!H,this.ha=ot,this.key=++Z,this.da=this.fa=!1}function _t(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ht(p,S,x){for(const H in p)S.call(x,p[H],H,p)}function ft(p,S){for(const x in p)S.call(void 0,p[x],x,p)}function G(p){const S={};for(const x in p)S[x]=p[x];return S}const at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wt(p,S){let x,H;for(let ot=1;ot<arguments.length;ot++){H=arguments[ot];for(x in H)p[x]=H[x];for(let dt=0;dt<at.length;dt++)x=at[dt],Object.prototype.hasOwnProperty.call(H,x)&&(p[x]=H[x])}}function Tt(p){this.src=p,this.g={},this.h=0}Tt.prototype.add=function(p,S,x,H,ot){const dt=p.toString();p=this.g[dt],p||(p=this.g[dt]=[],this.h++);const Lt=jt(p,S,H,ot);return Lt>-1?(S=p[Lt],x||(S.fa=!1)):(S=new rt(S,this.src,dt,!!H,ot),S.fa=x,p.push(S)),S};function It(p,S){const x=S.type;if(x in p.g){var H=p.g[x],ot=Array.prototype.indexOf.call(H,S,void 0),dt;(dt=ot>=0)&&Array.prototype.splice.call(H,ot,1),dt&&(_t(S),p.g[x].length==0&&(delete p.g[x],p.h--))}}function jt(p,S,x,H){for(let ot=0;ot<p.length;++ot){const dt=p[ot];if(!dt.da&&dt.listener==S&&dt.capture==!!x&&dt.ha==H)return ot}return-1}var $t="closure_lm_"+(Math.random()*1e6|0),kt={};function Zt(p,S,x,H,ot){if(Array.isArray(S)){for(let dt=0;dt<S.length;dt++)Zt(p,S[dt],x,H,ot);return null}return x=Bt(x),p&&p[Mt]?p.J(S,x,d(H)?!!H.capture:!1,ot):an(p,S,x,!1,H,ot)}function an(p,S,x,H,ot,dt){if(!S)throw Error("Invalid event type");const Lt=d(ot)?!!ot.capture:!!ot;let me=Pt(p);if(me||(p[$t]=me=new Tt(p)),x=me.add(S,x,H,Lt,dt),x.proxy)return x;if(H=Ve(),x.proxy=H,H.src=p,H.listener=x,p.addEventListener)F||(ot=Lt),ot===void 0&&(ot=!1),p.addEventListener(S.toString(),H,ot);else if(p.attachEvent)p.attachEvent(ae(S.toString()),H);else if(p.addListener&&p.removeListener)p.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ve(){function p(x){return S.call(p.src,p.listener,x)}const S=gt;return p}function be(p,S,x,H,ot){if(Array.isArray(S))for(var dt=0;dt<S.length;dt++)be(p,S[dt],x,H,ot);else H=d(H)?!!H.capture:!!H,x=Bt(x),p&&p[Mt]?(p=p.i,dt=String(S).toString(),dt in p.g&&(S=p.g[dt],x=jt(S,x,H,ot),x>-1&&(_t(S[x]),Array.prototype.splice.call(S,x,1),S.length==0&&(delete p.g[dt],p.h--)))):p&&(p=Pt(p))&&(S=p.g[S.toString()],p=-1,S&&(p=jt(S,x,H,ot)),(x=p>-1?S[p]:null)&&yn(x))}function yn(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[Mt])It(S.i,p);else{var x=p.type,H=p.proxy;S.removeEventListener?S.removeEventListener(x,H,p.capture):S.detachEvent?S.detachEvent(ae(x),H):S.addListener&&S.removeListener&&S.removeListener(H),(x=Pt(S))?(It(x,p),x.h==0&&(x.src=null,S[$t]=null)):_t(p)}}}function ae(p){return p in kt?kt[p]:kt[p]="on"+p}function gt(p,S){if(p.da)p=!0;else{S=new At(S,this);const x=p.listener,H=p.ha||p.src;p.fa&&yn(p),p=x.call(H,S)}return p}function Pt(p){return p=p[$t],p instanceof Tt?p:null}var Yt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bt(p){return typeof p=="function"?p:(p[Yt]||(p[Yt]=function(S){return p.handleEvent(S)}),p[Yt])}function Ot(){V.call(this),this.i=new Tt(this),this.M=this,this.G=null}w(Ot,V),Ot.prototype[Mt]=!0,Ot.prototype.removeEventListener=function(p,S,x,H){be(this,p,S,x,H)};function Vt(p,S){var x,H=p.G;if(H)for(x=[];H;H=H.G)x.push(H);if(p=p.M,H=S.type||S,typeof S=="string")S=new P(S,p);else if(S instanceof P)S.target=S.target||p;else{var ot=S;S=new P(H,p),wt(S,ot)}ot=!0;let dt,Lt;if(x)for(Lt=x.length-1;Lt>=0;Lt--)dt=S.g=x[Lt],ot=te(dt,H,!0,S)&&ot;if(dt=S.g=p,ot=te(dt,H,!0,S)&&ot,ot=te(dt,H,!1,S)&&ot,x)for(Lt=0;Lt<x.length;Lt++)dt=S.g=x[Lt],ot=te(dt,H,!1,S)&&ot}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const x=p.g[S];for(let H=0;H<x.length;H++)_t(x[H]);delete p.g[S],p.h--}}this.G=null},Ot.prototype.J=function(p,S,x,H){return this.i.add(String(p),S,!1,x,H)},Ot.prototype.K=function(p,S,x,H){return this.i.add(String(p),S,!0,x,H)};function te(p,S,x,H){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let ot=!0;for(let dt=0;dt<S.length;++dt){const Lt=S[dt];if(Lt&&!Lt.da&&Lt.capture==x){const me=Lt.listener,jn=Lt.ha||Lt.src;Lt.fa&&It(p.i,Lt),ot=me.call(jn,H)!==!1&&ot}}return ot&&!H.defaultPrevented}function oe(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:f.setTimeout(p,S||0)}function We(p){p.g=oe(()=>{p.g=null,p.i&&(p.i=!1,We(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class tn extends V{constructor(S,x){super(),this.m=S,this.l=x,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(p){V.call(this),this.h=p,this.g={}}w(Rn,V);var Fi=[];function ai(p){ht(p.g,function(S,x){this.g.hasOwnProperty(x)&&yn(S)},p),p.g={}}Rn.prototype.N=function(){Rn.Z.N.call(this),ai(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=f.JSON.stringify,ts=f.JSON.parse,Sa=class{stringify(p){return f.JSON.stringify(p,void 0)}parse(p){return f.JSON.parse(p,void 0)}};function es(){}function lo(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vn(){P.call(this,"d")}w(Vn,P);function ki(){P.call(this,"c")}w(ki,P);var fn={},ns=null;function Zr(){return ns=ns||new Ot}fn.Ia="serverreachability";function Hl(p){P.call(this,fn.Ia,p)}w(Hl,P);function Xs(p){const S=Zr();Vt(S,new Hl(S))}fn.STAT_EVENT="statevent";function Jr(p,S){P.call(this,fn.STAT_EVENT,p),this.stat=S}w(Jr,P);function Nn(p){const S=Zr();Vt(S,new Jr(S,p))}fn.Ja="timingevent";function Zs(p,S){P.call(this,fn.Ja,p),this.size=S}w(Zs,P);function Js(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){p()},S)}function Es(){this.g=!0}Es.prototype.ua=function(){this.g=!1};function co(p,S,x,H,ot,dt){p.info(function(){if(p.g)if(dt){var Lt="",me=dt.split("&");for(let ze=0;ze<me.length;ze++){var jn=me[ze].split("=");if(jn.length>1){const mn=jn[0];jn=jn[1];const as=mn.split("_");Lt=as.length>=2&&as[1]=="type"?Lt+(mn+"="+jn+"&"):Lt+(mn+"=redacted&")}}}else Lt=null;else Lt=dt;return"XMLHTTP REQ ("+H+") [attempt "+ot+"]: "+S+`
`+x+`
`+Lt})}function uo(p,S,x,H,ot,dt,Lt){p.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ot+"]: "+S+`
`+x+`
`+dt+" "+Lt})}function is(p,S,x,H){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+gu(p,x)+(H?" "+H:"")})}function Aa(p,S){p.info(function(){return"TIMEOUT: "+S})}Es.prototype.info=function(){};function gu(p,S){if(!p.g)return S;if(!S)return null;try{const dt=JSON.parse(S);if(dt){for(p=0;p<dt.length;p++)if(Array.isArray(dt[p])){var x=dt[p];if(!(x.length<2)){var H=x[1];if(Array.isArray(H)&&!(H.length<1)){var ot=H[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(let Lt=1;Lt<H.length;Lt++)H[Lt]=""}}}}return Mi(dt)}catch{return S}}var Sr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},el={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ea;function Ca(){}w(Ca,es),Ca.prototype.g=function(){return new XMLHttpRequest},Ea=new Ca;function Ar(p){return encodeURIComponent(String(p))}function ho(p){var S=1;p=p.split(":");const x=[];for(;S>0&&p.length;)x.push(p.shift()),S--;return p.length&&x.push(p.join(":")),x}function Nt(p,S,x,H){this.j=p,this.i=S,this.l=x,this.S=H||1,this.V=new Rn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ht}function Ht(){this.i=null,this.g="",this.h=!1}var Ut={},zt={};function ee(p,S,x){p.M=1,p.A=ea(Hn(S)),p.u=x,p.R=!0,Ge(p,null)}function Ge(p,S){p.F=Date.now(),Zn(p),p.B=Hn(p.A);var x=p.B,H=p.S;Array.isArray(H)||(H=[String(H)]),sl(x.i,"t",H),p.C=0,x=p.j.L,p.h=new Ht,p.g=Ir(p.j,x?S:null,!p.u),p.P>0&&(p.O=new tn(m(p.Y,p,p.g),p.P)),S=p.V,x=p.g,H=p.ba;var ot="readystatechange";Array.isArray(ot)||(ot&&(Fi[0]=ot.toString()),ot=Fi);for(let dt=0;dt<ot.length;dt++){const Lt=Zt(x,ot[dt],H||S.handleEvent,!1,S.h||S);if(!Lt)break;S.g[Lt.key]=Lt}S=p.J?G(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),Xs(),co(p.i,p.v,p.B,p.l,p.S,p.u)}Nt.prototype.ba=function(p){p=p.target;const S=this.O;S&&Nr(p)==3?S.j():this.Y(p)},Nt.prototype.Y=function(p){try{if(p==this.g)t:{const me=Nr(this.g),jn=this.g.ya(),ze=this.g.ca();if(!(me<3)&&(me!=3||this.g&&(this.h.h||this.g.la()||Ai(this.g)))){this.K||me!=4||jn==7||(jn==8||ze<=0?Xs(3):Xs(2)),ss(this);var S=this.g.ca();this.X=S;var x=Fn(this);if(this.o=S==200,uo(this.i,this.v,this.B,this.l,this.S,me,S),this.o){if(this.U&&!this.L){e:{if(this.g){var H,ot=this.g;if((H=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(H)){var dt=H;break e}}dt=null}if(p=dt)is(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rs(this,p);else{this.o=!1,this.m=3,Nn(12),xs(this),Hi(this);break t}}if(this.R){p=!0;let mn;for(;!this.K&&this.C<x.length;)if(mn=pi(this,x),mn==zt){me==4&&(this.m=4,Nn(14),p=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Ut){this.m=4,Nn(15),is(this.i,this.l,x,"[Invalid Chunk]"),p=!1;break}else is(this.i,this.l,mn,null),Rs(this,mn);if(en(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),me!=4||x.length!=0||this.h.h||(this.m=1,Nn(16),p=!1),this.o=this.o&&p,!p)is(this.i,this.l,x,"[Invalid Chunked Response]"),xs(this),Hi(this);else if(x.length>0&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.aa&&!Lt.P&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Xl(Lt),Lt.P=!0,Nn(11))}}else is(this.i,this.l,x,null),Rs(this,x);me==4&&xs(this),this.o&&!this.K&&(me==4?ji(this.j,this):(this.o=!1,Zn(this)))}else Oa(this.g),S==400&&x.indexOf("Unknown SID")>0?(this.m=3,Nn(12)):(this.m=0,Nn(13)),xs(this),Hi(this)}}}catch{}finally{}};function Fn(p){if(!en(p))return p.g.la();const S=Ai(p.g);if(S==="")return"";let x="";const H=S.length,ot=Nr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return xs(p),Hi(p),"";p.h.i=new f.TextDecoder}for(let dt=0;dt<H;dt++)p.h.h=!0,x+=p.h.i.decode(S[dt],{stream:!(ot&&dt==H-1)});return S.length=0,p.h.g+=x,p.C=0,p.h.g}function en(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function pi(p,S){var x=p.C,H=S.indexOf(`
`,x);return H==-1?zt:(x=Number(S.substring(x,H)),isNaN(x)?Ut:(H+=1,H+x>S.length?zt:(S=S.slice(H,H+x),p.C=H+x,S)))}Nt.prototype.cancel=function(){this.K=!0,xs(this)};function Zn(p){p.T=Date.now()+p.H,Cs(p,p.H)}function Cs(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=Js(m(p.aa,p),S)}function ss(p){p.D&&(f.clearTimeout(p.D),p.D=null)}Nt.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Aa(this.i,this.B),this.M!=2&&(Xs(),Nn(17)),xs(this),this.m=2,Hi(this)):Cs(this,this.T-p)};function Hi(p){p.j.I==0||p.K||ji(p.j,p)}function xs(p){ss(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,ai(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function Rs(p,S){try{var x=p.j;if(x.I!=0&&(x.g==p||Cr(x.h,p))){if(!p.L&&Cr(x.h,p)&&x.I==3){try{var H=x.Ba.g.parse(S)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ot=H;if(ot[0]==0){t:if(!x.v){if(x.g)if(x.g.F+3e3<p.F)hl(x),bn(x);else break t;mo(x),Nn(18)}}else x.xa=ot[1],0<x.xa-x.K&&ot[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Js(m(x.Va,x),6e3));Er(x.h)<=1&&x.ta&&(x.ta=void 0)}else Gn(x,11)}else if((p.L||x.g==p)&&hl(x),!B(S))for(ot=x.Ba.g.parse(S),S=0;S<ot.length;S++){let ze=ot[S];const mn=ze[0];if(!(mn<=x.K))if(x.K=mn,ze=ze[1],x.I==2)if(ze[0]=="c"){x.M=ze[1],x.ba=ze[2];const as=ze[3];as!=null&&(x.ka=as,x.j.info("VER="+x.ka));const Dr=ze[4];Dr!=null&&(x.za=Dr,x.j.info("SVER="+x.za));const Mr=ze[5];Mr!=null&&typeof Mr=="number"&&Mr>0&&(H=1.5*Mr,x.O=H,x.j.info("backChannelRequestTimeoutMs_="+H)),H=x;const Is=p.g;if(Is){const ka=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var dt=H.h;dt.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(dt.j=dt.l,dt.g=new Set,dt.h&&(Gl(dt,dt.h),dt.h=null))}if(H.G){const Jl=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Jl&&(H.wa=Jl,Ye(H.J,H.G,Jl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-p.F,x.j.info("Handshake RTT: "+x.T+"ms")),H=x;var Lt=p;if(H.na=Du(H,H.L?H.ba:null,H.W),Lt.L){vu(H.h,Lt);var me=Lt,jn=H.O;jn&&(me.H=jn),me.D&&(ss(me),Zn(me)),H.g=Lt}else Iu(H);x.i.length>0&&Vi(x)}else ze[0]!="stop"&&ze[0]!="close"||Gn(x,7);else x.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Gn(x,7):Ru(x):ze[0]!="noop"&&x.l&&x.l.qa(ze),x.A=0)}}Xs(4)}catch{}}var Jn=class{constructor(p,S){this.g=p,this.map=S}};function _u(p){this.l=p||10,f.PerformanceNavigationTiming?(p=f.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yu(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Er(p){return p.h?1:p.g?p.g.size:0}function Cr(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Gl(p,S){p.g?p.g.add(S):p.h=S}function vu(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}_u.prototype.cancel=function(){if(this.i=Tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Tu(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const x of p.g.values())S=S.concat(x.G);return S}return N(p.i)}var sf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kl(p,S){if(p){p=p.split("&");for(let x=0;x<p.length;x++){const H=p[x].indexOf("=");let ot,dt=null;H>=0?(ot=p[x].substring(0,H),dt=p[x].substring(H+1)):ot=p[x],S(ot,dt?decodeURIComponent(dt.replace(/\+/g," ")):"")}}}function rs(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof rs?(this.l=p.l,oi(this,p.j),this.o=p.o,this.g=p.g,ta(this,p.u),this.h=p.h,wu(this,Eu(p.i)),this.m=p.m):p&&(S=String(p).match(sf))?(this.l=!1,oi(this,S[1]||"",!0),this.o=xr(S[2]||""),this.g=xr(S[3]||"",!0),ta(this,S[4]),this.h=xr(S[5]||"",!0),wu(this,S[6]||"",!0),this.m=xr(S[7]||"")):(this.l=!1,this.i=new na(null,this.l))}rs.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(nl(S,il,!0),":");var x=this.g;return(x||S=="file")&&(p.push("//"),(S=this.o)&&p.push(nl(S,il,!0),"@"),p.push(Ar(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&p.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&p.push("/"),p.push(nl(x,x.charAt(0)=="/"?bu:$l,!0))),(x=this.i.toString())&&p.push("?",x),(x=this.m)&&p.push("#",nl(x,Wl)),p.join("")},rs.prototype.resolve=function(p){const S=Hn(this);let x=!!p.j;x?oi(S,p.j):x=!!p.o,x?S.o=p.o:x=!!p.g,x?S.g=p.g:x=p.u!=null;var H=p.h;if(x)ta(S,p.u);else if(x=!!p.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ot=S.h.lastIndexOf("/");ot!=-1&&(H=S.h.slice(0,ot+1)+H)}if(ot=H,ot==".."||ot==".")H="";else if(ot.indexOf("./")!=-1||ot.indexOf("/.")!=-1){H=ot.lastIndexOf("/",0)==0,ot=ot.split("/");const dt=[];for(let Lt=0;Lt<ot.length;){const me=ot[Lt++];me=="."?H&&Lt==ot.length&&dt.push(""):me==".."?((dt.length>1||dt.length==1&&dt[0]!="")&&dt.pop(),H&&Lt==ot.length&&dt.push("")):(dt.push(me),H=!0)}H=dt.join("/")}else H=ot}return x?S.h=H:x=p.i.toString()!=="",x?wu(S,Eu(p.i)):x=!!p.m,x&&(S.m=p.m),S};function Hn(p){return new rs(p)}function oi(p,S,x){p.j=x?xr(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function ta(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function wu(p,S,x){S instanceof na?(p.i=S,rl(p.i,p.l)):(x||(S=nl(S,xa)),p.i=new na(S,p.l))}function Ye(p,S,x){p.i.set(S,x)}function ea(p){return Ye(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function xr(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function nl(p,S,x){return typeof p=="string"?(p=encodeURI(p).replace(S,Gi),x&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Gi(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var il=/[#\/\?@]/g,$l=/[#\?:]/g,bu=/[#\?]/g,xa=/[#\?@]/g,Wl=/#/g;function na(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function li(p){p.g||(p.g=new Map,p.h=0,p.i&&Kl(p.i,function(S,x){p.add(decodeURIComponent(S.replace(/\+/g," ")),x)}))}s=na.prototype,s.add=function(p,S){li(this),this.i=null,p=Ra(this,p);let x=this.g.get(p);return x||this.g.set(p,x=[]),x.push(S),this.h+=1,this};function Su(p,S){li(p),S=Ra(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function Yl(p,S){return li(p),S=Ra(p,S),p.g.has(S)}s.forEach=function(p,S){li(this),this.g.forEach(function(x,H){x.forEach(function(ot){p.call(S,ot,H,this)},this)},this)};function Au(p,S){li(p);let x=[];if(typeof S=="string")Yl(p,S)&&(x=x.concat(p.g.get(Ra(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)x=x.concat(p[S]);return x}s.set=function(p,S){return li(this),this.i=null,p=Ra(this,p),Yl(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},s.get=function(p,S){return p?(p=Au(this,p),p.length>0?String(p[0]):S):S};function sl(p,S,x){Su(p,S),x.length>0&&(p.i=null,p.g.set(Ra(p,S),N(x)),p.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let H=0;H<S.length;H++){var x=S[H];const ot=Ar(x);x=Au(this,x);for(let dt=0;dt<x.length;dt++){let Lt=ot;x[dt]!==""&&(Lt+="="+Ar(x[dt])),p.push(Lt)}}return this.i=p.join("&")};function Eu(p){const S=new na;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function Ra(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function rl(p,S){S&&!p.j&&(li(p),p.i=null,p.g.forEach(function(x,H){const ot=H.toLowerCase();H!=ot&&(Su(this,H),sl(this,ot,x))},p)),p.j=S}function Rr(p,S){const x=new Es;if(f.Image){const H=new Image;H.onload=T(tr,x,"TestLoadImage: loaded",!0,S,H),H.onerror=T(tr,x,"TestLoadImage: error",!1,S,H),H.onabort=T(tr,x,"TestLoadImage: abort",!1,S,H),H.ontimeout=T(tr,x,"TestLoadImage: timeout",!1,S,H),f.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=p}else S(!1)}function Cu(p,S){const x=new Es,H=new AbortController,ot=setTimeout(()=>{H.abort(),tr(x,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:H.signal}).then(dt=>{clearTimeout(ot),dt.ok?tr(x,"TestPingServer: ok",!0,S):tr(x,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ot),tr(x,"TestPingServer: error",!1,S)})}function tr(p,S,x,H,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),H(x)}catch{}}function Na(){this.g=new Sa}function ia(p){this.i=p.Sb||null,this.h=p.ab||!1}w(ia,es),ia.prototype.g=function(){return new al(this.i,this.h)};function al(p,S){Ot.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(al,Ot),s=al.prototype,s.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,Ns(this)},s.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||f).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fo(this)),this.readyState=0},s.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ql(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ql(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}s.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?fo(this):Ns(this),this.readyState==3&&Ql(this)}},s.Oa=function(p){this.g&&(this.response=this.responseText=p,fo(this))},s.Na=function(p){this.g&&(this.response=p,fo(this))},s.ga=function(){this.g&&fo(this)};function fo(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Ns(p)}s.setRequestHeader=function(p,S){this.A.append(p,S)},s.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var x=S.next();!x.done;)x=x.value,p.push(x[0]+": "+x[1]),x=S.next();return p.join(`\r
`)};function Ns(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function er(p){let S="";return ht(p,function(x,H){S+=H,S+=":",S+=x,S+=`\r
`}),S}function ol(p,S,x){t:{for(H in x){var H=!1;break t}H=!0}H||(x=er(x),typeof p=="string"?x!=null&&Ar(x):Ye(p,S,x))}function on(p){Ot.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(on,Ot);var sa=/^https?$/i,xu=["POST","PUT"];s=on.prototype,s.Fa=function(p){this.H=p},s.ea=function(p,S,x,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ea.g(),this.g.onreadystatechange=E(m(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(dt){Ke(this,dt);return}if(p=x||"",x=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ot in H)x.set(ot,H[ot]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const dt of H.keys())x.set(dt,H.get(dt));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(x.keys()).find(dt=>dt.toLowerCase()=="content-type"),ot=f.FormData&&p instanceof f.FormData,!(Array.prototype.indexOf.call(xu,S,void 0)>=0)||H||ot||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[dt,Lt]of x)this.g.setRequestHeader(dt,Lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(dt){Ke(this,dt)}};function Ke(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,Qe(p),Ia(p)}function Qe(p){p.A||(p.A=!0,Vt(p,"complete"),Vt(p,"error"))}s.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Vt(this,"complete"),Vt(this,"abort"),Ia(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),on.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ll(this):this.Xa())},s.Xa=function(){ll(this)};function ll(p){if(p.h&&typeof c<"u"){if(p.v&&Nr(p)==4)setTimeout(p.Ca.bind(p),0);else if(Vt(p,"readystatechange"),Nr(p)==4){p.h=!1;try{const dt=p.ca();t:switch(dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break t;default:S=!1}var x;if(!(x=S)){var H;if(H=dt===0){let Lt=String(p.D).match(sf)[1]||null;!Lt&&f.self&&f.self.location&&(Lt=f.self.location.protocol.slice(0,-1)),H=!sa.test(Lt?Lt.toLowerCase():"")}x=H}if(x)Vt(p,"complete"),Vt(p,"success");else{p.o=6;try{var ot=Nr(p)>2?p.g.statusText:""}catch{ot=""}p.l=ot+" ["+p.ca()+"]",Qe(p)}}finally{Ia(p)}}}}function Ia(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const x=p.g;p.g=null,S||Vt(p,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Nr(p){return p.g?p.g.readyState:0}s.ca=function(){try{return Nr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),ts(S)}};function Ai(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Oa(p){const S={};p=(p.g&&Nr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<p.length;H++){if(B(p[H]))continue;var x=ho(p[H]);const ot=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const dt=S[ot]||[];S[ot]=dt,dt.push(x)}ft(S,function(H){return H.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(p,S,x){return x&&x.internalChannelParams&&x.internalChannelParams[p]||S}function Da(p){this.za=0,this.i=[],this.j=new Es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ra("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ra("baseRetryDelayMs",5e3,p),this.Za=ra("retryDelaySeedMs",1e4,p),this.Ta=ra("forwardChannelMaxRetries",2,p),this.va=ra("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new _u(p&&p.concurrentRequestLimit),this.Ba=new Na,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Da.prototype,s.ka=8,s.I=1,s.connect=function(p,S,x,H){Nn(0),this.W=p,this.H=S||{},x&&H!==void 0&&(this.H.OSID=x,this.H.OAID=H),this.F=this.X,this.J=Du(this,null,this.W),Vi(this)};function Ru(p){if(po(p),p.I==3){var S=p.V++,x=Hn(p.J);if(Ye(x,"SID",p.M),Ye(x,"RID",S),Ye(x,"TYPE","terminate"),mi(p,x),S=new Nt(p,p.j,S),S.M=2,S.A=ea(Hn(x)),x=!1,f.navigator&&f.navigator.sendBeacon)try{x=f.navigator.sendBeacon(S.A.toString(),"")}catch{}!x&&f.Image&&(new Image().src=S.A,x=!0),x||(S.g=Ir(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Zn(S)}af(p)}function bn(p){p.g&&(Xl(p),p.g.cancel(),p.g=null)}function po(p){bn(p),p.v&&(f.clearTimeout(p.v),p.v=null),hl(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&f.clearTimeout(p.m),p.m=null)}function Vi(p){if(!yu(p.h)&&!p.m){p.m=!0;var S=p.Ea;K||C(),X||(K(),X=!0),R.add(S,p),p.D=0}}function cl(p,S){return Er(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=Js(m(p.Ea,p,S),rf(p,p.D)),p.D++,!0)}s.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ot=new Nt(this,this.j,p);let dt=this.o;if(this.U&&(dt?(dt=G(dt),wt(dt,this.U)):dt=this.U),this.u!==null||this.R||(ot.J=dt,dt=null),this.S)t:{for(var S=0,x=0;x<this.i.length;x++){e:{var H=this.i[x];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break e}H=void 0}if(H===void 0)break;if(S+=H,S>4096){S=x;break t}if(S===4096||x===this.i.length-1){S=x+1;break t}}S=1e3}else S=1e3;S=Nu(this,ot,S),x=Hn(this.J),Ye(x,"RID",p),Ye(x,"CVER",22),this.G&&Ye(x,"X-HTTP-Session-Id",this.G),mi(this,x),dt&&(this.R?S="headers="+Ar(er(dt))+"&"+S:this.u&&ol(x,this.u,dt)),Gl(this.h,ot),this.Ra&&Ye(x,"TYPE","init"),this.S?(Ye(x,"$req",S),Ye(x,"SID","null"),ot.U=!0,ee(ot,x,null)):ee(ot,x,S),this.I=2}}else this.I==3&&(p?ul(this,p):this.i.length==0||yu(this.h)||ul(this))};function ul(p,S){var x;S?x=S.l:x=p.V++;const H=Hn(p.J);Ye(H,"SID",p.M),Ye(H,"RID",x),Ye(H,"AID",p.K),mi(p,H),p.u&&p.o&&ol(H,p.u,p.o),x=new Nt(p,p.j,x,p.D+1),p.u===null&&(x.J=p.o),S&&(p.i=S.G.concat(p.i)),S=Nu(p,x,1e3),x.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Gl(p.h,x),ee(x,H,S)}function mi(p,S){p.H&&ht(p.H,function(x,H){Ye(S,H,x)}),p.l&&ht({},function(x,H){Ye(S,H,x)})}function Nu(p,S,x){x=Math.min(p.i.length,x);const H=p.l?m(p.l.Ka,p.l,p):null;t:{var ot=p.i;let me=-1;for(;;){const jn=["count="+x];me==-1?x>0?(me=ot[0].g,jn.push("ofs="+me)):me=0:jn.push("ofs="+me);let ze=!0;for(let mn=0;mn<x;mn++){var dt=ot[mn].g;const as=ot[mn].map;if(dt-=me,dt<0)me=Math.max(0,ot[mn].g-100),ze=!1;else try{dt="req"+dt+"_"||"";try{var Lt=as instanceof Map?as:Object.entries(as);for(const[Dr,Mr]of Lt){let Is=Mr;d(Mr)&&(Is=Mi(Mr)),jn.push(dt+Dr+"="+encodeURIComponent(Is))}}catch(Dr){throw jn.push(dt+"type="+encodeURIComponent("_badmap")),Dr}}catch{H&&H(as)}}if(ze){Lt=jn.join("&");break t}}Lt=void 0}return p=p.i.splice(0,x),S.G=p,Lt}function Iu(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;K||C(),X||(K(),X=!0),R.add(S,p),p.A=0}}function mo(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=Js(m(p.Da,p),rf(p,p.A)),p.A++,!0)}s.Da=function(){if(this.v=null,Ou(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=Js(m(this.Wa,this),p)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nn(10),bn(this),Ou(this))};function Xl(p){p.B!=null&&(f.clearTimeout(p.B),p.B=null)}function Ou(p){p.g=new Nt(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=Hn(p.na);Ye(S,"RID","rpc"),Ye(S,"SID",p.M),Ye(S,"AID",p.K),Ye(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&Ye(S,"TO",p.ia),Ye(S,"TYPE","xmlhttp"),mi(p,S),p.u&&p.o&&ol(S,p.u,p.o),p.O&&(p.g.H=p.O);var x=p.g;p=p.ba,x.M=1,x.A=ea(Hn(S)),x.u=null,x.R=!0,Ge(x,p)}s.Va=function(){this.C!=null&&(this.C=null,bn(this),mo(this),Nn(19))};function hl(p){p.C!=null&&(f.clearTimeout(p.C),p.C=null)}function ji(p,S){var x=null;if(p.g==S){hl(p),Xl(p),p.g=null;var H=2}else if(Cr(p.h,S))x=S.G,vu(p.h,S),H=1;else return;if(p.I!=0){if(S.o)if(H==1){x=S.u?S.u.length:0,S=Date.now()-S.F;var ot=p.D;H=Zr(),Vt(H,new Zs(H,x)),Vi(p)}else Iu(p);else if(ot=S.m,ot==3||ot==0&&S.X>0||!(H==1&&cl(p,S)||H==2&&mo(p)))switch(x&&x.length>0&&(S=p.h,S.i=S.i.concat(x)),ot){case 1:Gn(p,5);break;case 4:Gn(p,10);break;case 3:Gn(p,6);break;default:Gn(p,2)}}}function rf(p,S){let x=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(x*=2),x*S}function Gn(p,S){if(p.j.info("Error code "+S),S==2){var x=m(p.bb,p),H=p.Ua;const ot=!H;H=new rs(H||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||oi(H,"https"),ea(H),ot?Rr(H.toString(),x):Cu(H.toString(),x)}else Nn(2);p.I=0,p.l&&p.l.pa(S),af(p),po(p)}s.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Nn(2)):(this.j.info("Failed to ping google.com"),Nn(1))};function af(p){if(p.I=0,p.ja=[],p.l){const S=Tu(p.h);(S.length!=0||p.i.length!=0)&&(O(p.ja,S),O(p.ja,p.i),p.h.i.length=0,N(p.i),p.i.length=0),p.l.oa()}}function Du(p,S,x){var H=x instanceof rs?Hn(x):new rs(x);if(H.g!="")S&&(H.g=S+"."+H.g),ta(H,H.u);else{var ot=f.location;H=ot.protocol,S=S?S+"."+ot.hostname:ot.hostname,ot=+ot.port;const dt=new rs(null);H&&oi(dt,H),S&&(dt.g=S),ot&&ta(dt,ot),x&&(dt.h=x),H=dt}return x=p.G,S=p.wa,x&&S&&Ye(H,x,S),Ye(H,"VER",p.ka),mi(p,H),H}function Ir(p,S,x){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new on(new ia({ab:x})):new on(p.ma),S.Fa(p.L),S}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function fl(){}s=fl.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function aa(){}aa.prototype.g=function(p,S){return new Ae(p,S)};function Ae(p,S){Ot.call(this),this.g=new Da(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!B(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!B(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Ma(this)}w(Ae,Ot),Ae.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ae.prototype.close=function(){Ru(this.g)},Ae.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var x={};x.__data__=p,p=x}else this.v&&(x={},x.__data__=Mi(p),p=x);S.i.push(new Jn(S.Ya++,p)),S.I==3&&Vi(S)},Ae.prototype.N=function(){this.g.l=null,delete this.j,Ru(this.g),delete this.g,Ae.Z.N.call(this)};function Or(p){Vn.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){t:{for(const x in S){p=x;break t}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}w(Or,Vn);function Zl(){ki.call(this),this.status=1}w(Zl,ki);function Ma(p){this.g=p}w(Ma,fl),Ma.prototype.ra=function(){Vt(this.g,"a")},Ma.prototype.qa=function(p){Vt(this.g,new Or(p))},Ma.prototype.pa=function(p){Vt(this.g,new Zl)},Ma.prototype.oa=function(){Vt(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,Ae.prototype.send=Ae.prototype.o,Ae.prototype.open=Ae.prototype.m,Ae.prototype.close=Ae.prototype.close,s2=function(){return new aa},i2=function(){return Zr()},n2=fn,sT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Wy=Sr,el.COMPLETE="complete",e2=el,lo.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Zm=lo,on.prototype.listenOnce=on.prototype.K,on.prototype.getLastError=on.prototype.Ha,on.prototype.getLastErrorCode=on.prototype.ya,on.prototype.getStatus=on.prototype.ca,on.prototype.getResponseJson=on.prototype.La,on.prototype.getResponseText=on.prototype.la,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Fa,t2=on}).apply(typeof Uy<"u"?Uy:typeof self<"u"?self:typeof window<"u"?window:{});const nS="@firebase/firestore",iS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ws.UNAUTHENTICATED=new ws(null),ws.GOOGLE_CREDENTIALS=new ws("google-credentials-uid"),ws.FIRST_PARTY=new ws("first-party-uid"),ws.MOCK_USER=new ws("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new hw("@firebase/firestore");function Sd(){return Qh.logLevel}function Wt(s,...t){if(Qh.logLevel<=He.DEBUG){const e=t.map(vw);Qh.debug(`Firestore (${ap}): ${s}`,...e)}}function Ul(s,...t){if(Qh.logLevel<=He.ERROR){const e=t.map(vw);Qh.error(`Firestore (${ap}): ${s}`,...e)}}function Kd(s,...t){if(Qh.logLevel<=He.WARN){const e=t.map(vw);Qh.warn(`Firestore (${ap}): ${s}`,...e)}}function vw(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(s,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,r2(s,i,e)}function r2(s,t,e){let i=`FIRESTORE (${ap}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ul(i),new Error(i)}function hn(s,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,s||r2(t,a,i)}function Te(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kt extends du{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class S5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ws.UNAUTHENTICATED)))}shutdown(){}}class A5{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class E5{constructor(t){this.t=t,this.currentUser=ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){hn(this.o===void 0,42304);let i=this.i;const a=g=>this.i!==i?(i=this.i,e(g)):Promise.resolve();let c=new Zc;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zc,t.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const g=c;t.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},d=g=>{Wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(Wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zc)}}),0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(Wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(hn(typeof i.accessToken=="string",31837,{l:i}),new a2(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return hn(t===null||typeof t=="string",2055,{h:t}),new ws(t)}}class C5{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=ws.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class x5{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new C5(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(ws.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sS{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R5{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zM(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){hn(this.o===void 0,3512);const i=c=>{c.error!=null&&Wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Wt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?e(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>i(c)))};const a=c=>{Wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sS(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(hn(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new sS(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<s;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=N5(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<e&&(i+=t.charAt(a[c]%62))}return i}}function je(s,t){return s<t?-1:s>t?1:0}function rT(s,t){const e=Math.min(s.length,t.length);for(let i=0;i<e;i++){const a=s.charAt(i),c=t.charAt(i);if(a!==c)return x1(a)===x1(c)?je(a,c):x1(a)?1:-1}return je(s.length,t.length)}const I5=55296,O5=57343;function x1(s){const t=s.charCodeAt(0);return t>=I5&&t<=O5}function $d(s,t,e){return s.length===t.length&&s.every(((i,a)=>e(i,t[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="__name__";class Ho{constructor(t,e,i){e===void 0?e=0:e>t.length&&he(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&he(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Ho.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ho?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const c=Ho.compareSegments(t.get(a),e.get(a));if(c!==0)return c}return je(t.length,e.length)}static compareSegments(t,e){const i=Ho.isNumericId(t),a=Ho.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?Ho.extractNumericId(t).compare(Ho.extractNumericId(e)):rT(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xc.fromString(t.substring(4,t.length-2))}}class Cn extends Ho{construct(t,e,i){return new Cn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Kt(Ct.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((a=>a.length>0)))}return new Cn(e)}static emptyPath(){return new Cn([])}}const D5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xi extends Ho{construct(t,e,i){return new Xi(t,e,i)}static isValidIdentifier(t){return D5.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rS}static keyField(){return new Xi([rS])}static fromServerFormat(t){const e=[];let i="",a=0;const c=()=>{if(i.length===0)throw new Kt(Ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let f=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new Kt(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Kt(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=g,a+=2}else d==="`"?(f=!f,a++):d!=="."||f?(i+=d,a++):(c(),a++)}if(c(),f)throw new Kt(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xi(e)}static emptyPath(){return new Xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.path=t}static fromPath(t){return new ie(Cn.fromString(t))}static fromName(t){return new ie(Cn.fromString(t).popFirst(5))}static empty(){return new ie(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Cn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Cn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ie(new Cn(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(s,t,e){if(!e)throw new Kt(Ct.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function M5(s,t,e,i){if(t===!0&&i===!0)throw new Kt(Ct.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function aS(s){if(!ie.isDocumentKey(s))throw new Kt(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function oS(s){if(ie.isDocumentKey(s))throw new Kt(Ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function l2(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function X0(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":he(12329,{type:typeof s})}function iu(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Kt(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=X0(s);throw new Kt(Ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(s,t){const e={typeString:s};return t&&(e.value=t),e}function Dg(s,t){if(!l2(s))throw new Kt(Ct.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,c="value"in t[i]?{value:t[i].value}:void 0;if(!(i in s)){e=`JSON missing required field: '${i}'`;break}const f=s[i];if(a&&typeof f!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){e=`Expected '${i}' field to equal '${c.value}'`;break}}if(e)throw new Kt(Ct.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=-62135596800,cS=1e6;class Mn{static now(){return Mn.fromMillis(Date.now())}static fromDate(t){return Mn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*cS);return new Mn(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Kt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Kt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<lS)throw new Kt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Kt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cS}_compareTo(t){return this.seconds===t.seconds?je(this.nanoseconds,t.nanoseconds):je(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Dg(t,Mn._jsonSchema))return new Mn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-lS;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mn._jsonSchemaVersion="firestore/timestamp/1.0",Mn._jsonSchema={type:Si("string",Mn._jsonSchemaVersion),seconds:Si("number"),nanoseconds:Si("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(t){return new pe(t)}static min(){return new pe(new Mn(0,0))}static max(){return new pe(new Mn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=-1;function k5(s,t){const e=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=pe.fromTimestamp(i===1e9?new Mn(e+1,0):new Mn(e,i));return new su(a,ie.empty(),t)}function V5(s){return new su(s.readTime,s.key,fg)}class su{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new su(pe.min(),ie.empty(),fg)}static max(){return new su(pe.max(),ie.empty(),fg)}}function j5(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=ie.comparator(s.documentKey,t.documentKey),e!==0?e:je(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(s){if(s.code!==Ct.FAILED_PRECONDITION||s.message!==L5)throw s;Wt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Rt(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(e,c).next(i,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Rt?e:Rt.resolve(e)}catch(e){return Rt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Rt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Rt.reject(e)}static resolve(t){return new Rt(((e,i)=>{e(t)}))}static reject(t){return new Rt(((e,i)=>{i(t)}))}static waitFor(t){return new Rt(((e,i)=>{let a=0,c=0,f=!1;t.forEach((d=>{++a,d.next((()=>{++c,f&&c===a&&e()}),(g=>i(g)))})),f=!0,c===a&&e()}))}static or(t){let e=Rt.resolve(!1);for(const i of t)e=e.next((a=>a?Rt.resolve(a):i()));return e}static forEach(t,e){const i=[];return t.forEach(((a,c)=>{i.push(e.call(this,a,c))})),this.waitFor(i)}static mapArray(t,e){return new Rt(((i,a)=>{const c=t.length,f=new Array(c);let d=0;for(let g=0;g<c;g++){const m=g;e(t[m]).next((T=>{f[m]=T,++d,d===c&&i(f)}),(T=>a(T)))}}))}static doWhile(t,e){return new Rt(((i,a)=>{const c=()=>{t()===!0?e().next((()=>{c()}),a):i()};c()}))}}function U5(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function lp(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Z0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=-1;function J0(s){return s==null}function g0(s){return s===0&&1/s==-1/0}function z5(s){return typeof s=="number"&&Number.isInteger(s)&&!g0(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="";function B5(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=uS(t)),t=q5(s.get(e),t);return uS(t)}function q5(s,t){let e=t;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":e+="";break;case c2:e+="";break;default:e+=c}}return e}function uS(s){return s+c2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function pu(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function u2(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t,e){this.comparator=t,this.root=e||Qi.EMPTY}insert(t,e){return new Qn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(t){return new Qn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zy(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zy(this.root,t,this.comparator,!1)}getReverseIterator(){return new zy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zy(this.root,t,this.comparator,!0)}}class zy{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,e&&a&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qi{constructor(t,e,i,a,c){this.key=t,this.value=e,this.color=i??Qi.RED,this.left=a??Qi.EMPTY,this.right=c??Qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,c){return new Qi(t??this.key,e??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,e,i),null):c===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Qi.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw he(27949);return t+(this.isRed()?0:1)}}Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1;Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(t,e,i,a,c){return this}insert(t,e,i){return new Qi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t){this.comparator=t,this.data=new Qn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new fS(this.data.getIterator())}getIteratorFrom(t){return new fS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Oi)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Oi(this.comparator);return e.data=t,e}}class fS{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t){this.fields=t,t.sort(Xi.comparator)}static empty(){return new Yr([])}unionWith(t){let e=new Oi(Xi.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Yr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return $d(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new h2("Invalid base64 string: "+c):c}})(t);return new Zi(e)}static fromUint8Array(t){const e=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(t);return new Zi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return je(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zi.EMPTY_BYTE_STRING=new Zi("");const F5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ru(s){if(hn(!!s,39018),typeof s=="string"){let t=0;const e=F5.exec(s);if(hn(!!e,46558,{timestamp:s}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fi(s.seconds),nanos:fi(s.nanos)}}function fi(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function au(s){return typeof s=="string"?Zi.fromBase64String(s):Zi.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="server_timestamp",d2="__type__",p2="__previous_value__",m2="__local_write_time__";function bw(s){return(s?.mapValue?.fields||{})[d2]?.stringValue===f2}function tv(s){const t=s.mapValue.fields[p2];return bw(t)?tv(t):t}function dg(s){const t=ru(s.mapValue.fields[m2].timestampValue);return new Mn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(t,e,i,a,c,f,d,g,m,T){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=T}}const _0="(default)";class pg{constructor(t,e){this.projectId=t,this.database=e||_0}static empty(){return new pg("","")}get isDefaultDatabase(){return this.database===_0}isEqual(t){return t instanceof pg&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="__type__",G5="__max__",By={mapValue:{}},_2="__vector__",y0="value";function ou(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?bw(s)?4:$5(s)?9007199254740991:K5(s)?10:11:he(28295,{value:s})}function Xo(s,t){if(s===t)return!0;const e=ou(s);if(e!==ou(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return dg(s).isEqual(dg(t));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=ru(a.timestampValue),d=ru(c.timestampValue);return f.seconds===d.seconds&&f.nanos===d.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(a,c){return au(a.bytesValue).isEqual(au(c.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(a,c){return fi(a.geoPointValue.latitude)===fi(c.geoPointValue.latitude)&&fi(a.geoPointValue.longitude)===fi(c.geoPointValue.longitude)})(s,t);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return fi(a.integerValue)===fi(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=fi(a.doubleValue),d=fi(c.doubleValue);return f===d?g0(f)===g0(d):isNaN(f)&&isNaN(d)}return!1})(s,t);case 9:return $d(s.arrayValue.values||[],t.arrayValue.values||[],Xo);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},d=c.mapValue.fields||{};if(hS(f)!==hS(d))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(d[g]===void 0||!Xo(f[g],d[g])))return!1;return!0})(s,t);default:return he(52216,{left:s})}}function mg(s,t){return(s.values||[]).find((e=>Xo(e,t)))!==void 0}function Wd(s,t){if(s===t)return 0;const e=ou(s),i=ou(t);if(e!==i)return je(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return je(s.booleanValue,t.booleanValue);case 2:return(function(c,f){const d=fi(c.integerValue||c.doubleValue),g=fi(f.integerValue||f.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(s,t);case 3:return dS(s.timestampValue,t.timestampValue);case 4:return dS(dg(s),dg(t));case 5:return rT(s.stringValue,t.stringValue);case 6:return(function(c,f){const d=au(c),g=au(f);return d.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(c,f){const d=c.split("/"),g=f.split("/");for(let m=0;m<d.length&&m<g.length;m++){const T=je(d[m],g[m]);if(T!==0)return T}return je(d.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(c,f){const d=je(fi(c.latitude),fi(f.latitude));return d!==0?d:je(fi(c.longitude),fi(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return pS(s.arrayValue,t.arrayValue);case 10:return(function(c,f){const d=c.fields||{},g=f.fields||{},m=d[y0]?.arrayValue,T=g[y0]?.arrayValue,w=je(m?.values?.length||0,T?.values?.length||0);return w!==0?w:pS(m,T)})(s.mapValue,t.mapValue);case 11:return(function(c,f){if(c===By.mapValue&&f===By.mapValue)return 0;if(c===By.mapValue)return 1;if(f===By.mapValue)return-1;const d=c.fields||{},g=Object.keys(d),m=f.fields||{},T=Object.keys(m);g.sort(),T.sort();for(let w=0;w<g.length&&w<T.length;++w){const E=rT(g[w],T[w]);if(E!==0)return E;const N=Wd(d[g[w]],m[T[w]]);if(N!==0)return N}return je(g.length,T.length)})(s.mapValue,t.mapValue);default:throw he(23264,{he:e})}}function dS(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return je(s,t);const e=ru(s),i=ru(t),a=je(e.seconds,i.seconds);return a!==0?a:je(e.nanos,i.nanos)}function pS(s,t){const e=s.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const c=Wd(e[a],i[a]);if(c)return c}return je(e.length,i.length)}function Yd(s){return aT(s)}function aT(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const i=ru(e);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return au(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return ie.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let i="[",a=!0;for(const c of e.values||[])a?a=!1:i+=",",i+=aT(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(e){const i=Object.keys(e.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${aT(e.fields[f])}`;return a+"}"})(s.mapValue):he(61005,{value:s})}function Yy(s){switch(ou(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=tv(s);return t?16+Yy(t):16;case 5:return 2*s.stringValue.length;case 6:return au(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+Yy(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return pu(i.fields,((c,f)=>{a+=c.length+Yy(f)})),a})(s.mapValue);default:throw he(13486,{value:s})}}function mS(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function oT(s){return!!s&&"integerValue"in s}function Sw(s){return!!s&&"arrayValue"in s}function gS(s){return!!s&&"nullValue"in s}function _S(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Qy(s){return!!s&&"mapValue"in s}function K5(s){return(s?.mapValue?.fields||{})[g2]?.stringValue===_2}function ig(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return pu(s.mapValue.fields,((e,i)=>t.mapValue.fields[e]=ig(i))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ig(s.arrayValue.values[e]);return t}return{...s}}function $5(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===G5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t){this.value=t}static empty(){return new yr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Qy(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ig(e)}setAll(t){let e=Xi.emptyPath(),i={},a=[];t.forEach(((f,d)=>{if(!e.isImmediateParentOf(d)){const g=this.getFieldsMap(e);this.applyChanges(g,i,a),i={},a=[],e=d.popLast()}f?i[d.lastSegment()]=ig(f):a.push(d.lastSegment())}));const c=this.getFieldsMap(e);this.applyChanges(c,i,a)}delete(t){const e=this.field(t.popLast());Qy(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Xo(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];Qy(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){pu(e,((a,c)=>t[a]=c));for(const a of i)delete t[a]}clone(){return new yr(ig(this.value))}}function y2(s){const t=[];return pu(s.fields,((e,i)=>{const a=new Xi([e]);if(Qy(i)){const c=y2(i.mapValue).fields;if(c.length===0)t.push(a);else for(const f of c)t.push(a.child(f))}else t.push(a)})),new Yr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(t,e,i,a,c,f,d){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=c,this.data=f,this.documentState=d}static newInvalidDocument(t){return new bs(t,0,pe.min(),pe.min(),pe.min(),yr.empty(),0)}static newFoundDocument(t,e,i,a){return new bs(t,1,e,pe.min(),i,a,0)}static newNoDocument(t,e){return new bs(t,2,e,pe.min(),pe.min(),yr.empty(),0)}static newUnknownDocument(t,e){return new bs(t,3,e,pe.min(),pe.min(),yr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof bs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new bs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,e){this.position=t,this.inclusive=e}}function yS(s,t,e){let i=0;for(let a=0;a<s.position.length;a++){const c=t[a],f=s.position[a];if(c.field.isKeyField()?i=ie.comparator(ie.fromName(f.referenceValue),e.key):i=Wd(f,e.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function vS(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Xo(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(t,e="asc"){this.field=t,this.dir=e}}function W5(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{}class wi extends v2{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Q5(t,e,i):e==="array-contains"?new J5(t,i):e==="in"?new tk(t,i):e==="not-in"?new ek(t,i):e==="array-contains-any"?new nk(t,i):new wi(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new X5(t,i):new Z5(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Wd(e,this.value)):e!==null&&ou(this.value)===ou(e)&&this.matchesComparison(Wd(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class so extends v2{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new so(t,e)}matches(t){return T2(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function T2(s){return s.op==="and"}function w2(s){return Y5(s)&&T2(s)}function Y5(s){for(const t of s.filters)if(t instanceof so)return!1;return!0}function lT(s){if(s instanceof wi)return s.field.canonicalString()+s.op.toString()+Yd(s.value);if(w2(s))return s.filters.map((t=>lT(t))).join(",");{const t=s.filters.map((e=>lT(e))).join(",");return`${s.op}(${t})`}}function b2(s,t){return s instanceof wi?(function(i,a){return a instanceof wi&&i.op===a.op&&i.field.isEqual(a.field)&&Xo(i.value,a.value)})(s,t):s instanceof so?(function(i,a){return a instanceof so&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,f,d)=>c&&b2(f,a.filters[d])),!0):!1})(s,t):void he(19439)}function S2(s){return s instanceof wi?(function(e){return`${e.field.canonicalString()} ${e.op} ${Yd(e.value)}`})(s):s instanceof so?(function(e){return e.op.toString()+" {"+e.getFilters().map(S2).join(" ,")+"}"})(s):"Filter"}class Q5 extends wi{constructor(t,e,i){super(t,e,i),this.key=ie.fromName(i.referenceValue)}matches(t){const e=ie.comparator(t.key,this.key);return this.matchesComparison(e)}}class X5 extends wi{constructor(t,e){super(t,"in",e),this.keys=A2("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Z5 extends wi{constructor(t,e){super(t,"not-in",e),this.keys=A2("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function A2(s,t){return(t.arrayValue?.values||[]).map((e=>ie.fromName(e.referenceValue)))}class J5 extends wi{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Sw(e)&&mg(e.arrayValue,this.value)}}class tk extends wi{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&mg(this.value.arrayValue,e)}}class ek extends wi{constructor(t,e){super(t,"not-in",e)}matches(t){if(mg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!mg(this.value.arrayValue,e)}}class nk extends wi{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Sw(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>mg(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(t,e=null,i=[],a=[],c=null,f=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=f,this.endAt=d,this.Te=null}}function TS(s,t=null,e=[],i=[],a=null,c=null,f=null){return new ik(s,t,e,i,a,c,f)}function Aw(s){const t=Te(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>lT(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),J0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>Yd(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>Yd(i))).join(",")),t.Te=e}return t.Te}function Ew(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!W5(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!b2(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!vS(s.startAt,t.startAt)&&vS(s.endAt,t.endAt)}function cT(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,e=null,i=[],a=[],c=null,f="F",d=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=f,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sk(s,t,e,i,a,c,f,d){return new Mg(s,t,e,i,a,c,f,d)}function E2(s){return new Mg(s)}function wS(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function C2(s){return s.collectionGroup!==null}function sg(s){const t=Te(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),e.add(c.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let d=new Oi(Xi.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(t).forEach((c=>{e.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new T0(c,i))})),e.has(Xi.keyField().canonicalString())||t.Ie.push(new T0(Xi.keyField(),i))}return t.Ie}function Ko(s){const t=Te(s);return t.Ee||(t.Ee=rk(t,sg(s))),t.Ee}function rk(s,t){if(s.limitType==="F")return TS(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new T0(a.field,c)}));const e=s.endAt?new v0(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new v0(s.startAt.position,s.startAt.inclusive):null;return TS(s.path,s.collectionGroup,t,s.filters,s.limit,e,i)}}function uT(s,t){const e=s.filters.concat([t]);return new Mg(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function hT(s,t,e){return new Mg(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function ev(s,t){return Ew(Ko(s),Ko(t))&&s.limitType===t.limitType}function x2(s){return`${Aw(Ko(s))}|lt:${s.limitType}`}function Ad(s){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((a=>S2(a))).join(", ")}]`),J0(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>Yd(a))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>Yd(a))).join(",")),`Target(${i})`})(Ko(s))}; limitType=${s.limitType})`}function nv(s,t){return t.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ie.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,t)&&(function(i,a){for(const c of sg(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,t)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,t)&&(function(i,a){return!(i.startAt&&!(function(f,d,g){const m=yS(f,d,g);return f.inclusive?m<=0:m<0})(i.startAt,sg(i),a)||i.endAt&&!(function(f,d,g){const m=yS(f,d,g);return f.inclusive?m>=0:m>0})(i.endAt,sg(i),a))})(s,t)}function ak(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function R2(s){return(t,e)=>{let i=!1;for(const a of sg(s)){const c=ok(a,t,e);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function ok(s,t,e){const i=s.field.isKeyField()?ie.comparator(t.key,e.key):(function(c,f,d){const g=f.data.field(c),m=d.data.field(c);return g!==null&&m!==null?Wd(g,m):he(42886)})(s.field,t,e);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return he(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,t))return c}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],t))return void(a[c]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){pu(this.inner,((e,i)=>{for(const[a,c]of i)t(a,c)}))}isEmpty(){return u2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new Qn(ie.comparator);function zl(){return lk}const N2=new Qn(ie.comparator);function Jm(...s){let t=N2;for(const e of s)t=t.insert(e.key,e);return t}function I2(s){let t=N2;return s.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Bh(){return rg()}function O2(){return rg()}function rg(){return new ef((s=>s.toString()),((s,t)=>s.isEqual(t)))}const ck=new Qn(ie.comparator),uk=new Oi(ie.comparator);function Pe(...s){let t=uk;for(const e of s)t=t.add(e);return t}const hk=new Oi(je);function fk(){return hk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:g0(t)?"-0":t}}function D2(s){return{integerValue:""+s}}function dk(s,t){return z5(t)?D2(t):Cw(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this._=void 0}}function pk(s,t,e){return s instanceof w0?(function(a,c){const f={fields:{[d2]:{stringValue:f2},[m2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&bw(c)&&(c=tv(c)),c&&(f.fields[p2]=c),{mapValue:f}})(e,t):s instanceof gg?k2(s,t):s instanceof _g?V2(s,t):(function(a,c){const f=M2(a,c),d=bS(f)+bS(a.Ae);return oT(f)&&oT(a.Ae)?D2(d):Cw(a.serializer,d)})(s,t)}function mk(s,t,e){return s instanceof gg?k2(s,t):s instanceof _g?V2(s,t):e}function M2(s,t){return s instanceof b0?(function(i){return oT(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(t)?t:{integerValue:0}:null}class w0 extends iv{}class gg extends iv{constructor(t){super(),this.elements=t}}function k2(s,t){const e=j2(t);for(const i of s.elements)e.some((a=>Xo(a,i)))||e.push(i);return{arrayValue:{values:e}}}class _g extends iv{constructor(t){super(),this.elements=t}}function V2(s,t){let e=j2(t);for(const i of s.elements)e=e.filter((a=>!Xo(a,i)));return{arrayValue:{values:e}}}class b0 extends iv{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function bS(s){return fi(s.integerValue||s.doubleValue)}function j2(s){return Sw(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function gk(s,t){return s.field.isEqual(t.field)&&(function(i,a){return i instanceof gg&&a instanceof gg||i instanceof _g&&a instanceof _g?$d(i.elements,a.elements,Xo):i instanceof b0&&a instanceof b0?Xo(i.Ae,a.Ae):i instanceof w0&&a instanceof w0})(s.transform,t.transform)}class _k{constructor(t,e){this.version=t,this.transformResults=e}}class Tr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Tr}static exists(t){return new Tr(void 0,t)}static updateTime(t){return new Tr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xy(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class sv{}function L2(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new rv(s.key,Tr.none()):new kg(s.key,s.data,Tr.none());{const e=s.data,i=yr.empty();let a=new Oi(Xi.comparator);for(let c of t.fields)if(!a.has(c)){let f=e.field(c);f===null&&c.length>1&&(c=c.popLast(),f=e.field(c)),f===null?i.delete(c):i.set(c,f),a=a.add(c)}return new mu(s.key,i,new Yr(a.toArray()),Tr.none())}}function yk(s,t,e){s instanceof kg?(function(a,c,f){const d=a.value.clone(),g=AS(a.fieldTransforms,c,f.transformResults);d.setAll(g),c.convertToFoundDocument(f.version,d).setHasCommittedMutations()})(s,t,e):s instanceof mu?(function(a,c,f){if(!Xy(a.precondition,c))return void c.convertToUnknownDocument(f.version);const d=AS(a.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(P2(a)),g.setAll(d),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,t,e):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,e)}function ag(s,t,e,i){return s instanceof kg?(function(c,f,d,g){if(!Xy(c.precondition,f))return d;const m=c.value.clone(),T=ES(c.fieldTransforms,g,f);return m.setAll(T),f.convertToFoundDocument(f.version,m).setHasLocalMutations(),null})(s,t,e,i):s instanceof mu?(function(c,f,d,g){if(!Xy(c.precondition,f))return d;const m=ES(c.fieldTransforms,g,f),T=f.data;return T.setAll(P2(c)),T.setAll(m),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),d===null?null:d.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,t,e,i):(function(c,f,d){return Xy(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):d})(s,t,e)}function vk(s,t){let e=null;for(const i of s.fieldTransforms){const a=t.data.field(i.field),c=M2(i.transform,a||null);c!=null&&(e===null&&(e=yr.empty()),e.set(i.field,c))}return e||null}function SS(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&$d(i,a,((c,f)=>gk(c,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class kg extends sv{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class mu extends sv{constructor(t,e,i,a,c=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function P2(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=s.data.field(e);t.set(e,i)}})),t}function AS(s,t,e){const i=new Map;hn(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let a=0;a<e.length;a++){const c=s[a],f=c.transform,d=t.data.field(c.field);i.set(c.field,mk(f,d,e[a]))}return i}function ES(s,t,e){const i=new Map;for(const a of s){const c=a.transform,f=e.data.field(a.field);i.set(a.field,pk(c,f,t))}return i}class rv extends sv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tk extends sv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(t.key)&&yk(c,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=ag(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=ag(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=O2();return this.mutations.forEach((a=>{const c=t.get(a.key),f=c.overlayedDocument;let d=this.applyToLocalView(f,c.mutatedFields);d=e.has(a.key)?null:d;const g=L2(f,d);g!==null&&i.set(a.key,g),f.isValidDocument()||f.convertToNoDocument(pe.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Pe())}isEqual(t){return this.batchId===t.batchId&&$d(this.mutations,t.mutations,((e,i)=>SS(e,i)))&&$d(this.baseMutations,t.baseMutations,((e,i)=>SS(e,i)))}}class xw{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){hn(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let a=(function(){return ck})();const c=t.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,i[f].version);return new xw(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yi,Fe;function Ak(s){switch(s){case Ct.OK:return he(64938);case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0;default:return he(15467,{code:s})}}function U2(s){if(s===void 0)return Ul("GRPC error has no .code"),Ct.UNKNOWN;switch(s){case yi.OK:return Ct.OK;case yi.CANCELLED:return Ct.CANCELLED;case yi.UNKNOWN:return Ct.UNKNOWN;case yi.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case yi.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case yi.INTERNAL:return Ct.INTERNAL;case yi.UNAVAILABLE:return Ct.UNAVAILABLE;case yi.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case yi.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case yi.NOT_FOUND:return Ct.NOT_FOUND;case yi.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case yi.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case yi.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case yi.ABORTED:return Ct.ABORTED;case yi.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case yi.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case yi.DATA_LOSS:return Ct.DATA_LOSS;default:return he(39323,{code:s})}}(Fe=yi||(yi={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Xc([4294967295,4294967295],0);function CS(s){const t=Ek().encode(s),e=new JE;return e.update(t),new Uint8Array(e.digest())}function xS(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Xc([e,i],0),new Xc([a,c],0)]}class Rw{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new tg(`Invalid padding: ${e}`);if(i<0)throw new tg(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new tg(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new tg(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Xc.fromNumber(this.ge)}ye(t,e,i){let a=t.add(e.multiply(Xc.fromNumber(i)));return a.compare(Ck)===1&&(a=new Xc([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=CS(t),[i,a]=xS(e);for(let c=0;c<this.hashCount;c++){const f=this.ye(i,a,c);if(!this.we(f))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Rw(c,a,e);return i.forEach((d=>f.insert(d))),f}insert(t){if(this.ge===0)return;const e=CS(t),[i,a]=xS(e);for(let c=0;c<this.hashCount;c++){const f=this.ye(i,a,c);this.Se(f)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class tg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,e,i,a,c){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,Vg.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new av(pe.min(),a,new Qn(je),zl(),Pe())}}class Vg{constructor(t,e,i,a,c){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Vg(i,e,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,e,i,a){this.be=t,this.removedTargetIds=e,this.key=i,this.De=a}}class z2{constructor(t,e){this.targetId=t,this.Ce=e}}class B2{constructor(t,e,i=Zi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class RS{constructor(){this.ve=0,this.Fe=NS(),this.Me=Zi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pe(),e=Pe(),i=Pe();return this.Fe.forEach(((a,c)=>{switch(c){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:he(38017,{changeType:c})}})),new Vg(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=NS()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,hn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xk{constructor(t){this.Ge=t,this.ze=new Map,this.je=zl(),this.Je=qy(),this.He=qy(),this.Ye=new Qn(je)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:he(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,i=t.Ce.count,a=this.ot(e);if(a){const c=a.target;if(cT(c))if(i===0){const f=new ie(c.path);this.et(e,f,bs.newNoDocument(f,pe.min()))}else hn(i===1,20013,{expectedCount:i});else{const f=this._t(e);if(f!==i){const d=this.ut(t),g=d?this.ct(d,t,f):1;if(g!==0){this.it(e);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,m)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=e;let f,d;try{f=au(i).toUint8Array()}catch(g){if(g instanceof h2)return Kd("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Rw(f,a,c)}catch(g){return Kd(g instanceof tg?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let a=0;return i.forEach((c=>{const f=this.Ge.ht(),d=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(d)||(this.et(e,c,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((c,f)=>{const d=this.ot(f);if(d){if(c.current&&cT(d.target)){const g=new ie(d.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,bs.newNoDocument(g,t))}c.Be&&(e.set(f,c.ke()),c.qe())}}));let i=Pe();this.He.forEach(((c,f)=>{let d=!0;f.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const a=new av(t,e,this.Ye,this.je,i);return this.je=zl(),this.Je=qy(),this.He=qy(),this.Ye=new Qn(je),a}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.Qe(e,1):a.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new RS,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Oi(je),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Oi(je),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||Wt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new RS),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function qy(){return new Qn(ie.comparator)}function NS(){return new Qn(ie.comparator)}const Rk={asc:"ASCENDING",desc:"DESCENDING"},Nk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ik={and:"AND",or:"OR"};class Ok{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function fT(s,t){return s.useProto3Json||J0(t)?t:{value:t}}function S0(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function q2(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Dk(s,t){return S0(s,t.toTimestamp())}function $o(s){return hn(!!s,49232),pe.fromTimestamp((function(e){const i=ru(e);return new Mn(i.seconds,i.nanos)})(s))}function Nw(s,t){return dT(s,t).canonicalString()}function dT(s,t){const e=(function(a){return new Cn(["projects",a.projectId,"databases",a.database])})(s).child("documents");return t===void 0?e:e.child(t)}function F2(s){const t=Cn.fromString(s);return hn(W2(t),10190,{key:t.toString()}),t}function pT(s,t){return Nw(s.databaseId,t.path)}function R1(s,t){const e=F2(t);if(e.get(1)!==s.databaseId.projectId)throw new Kt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new Kt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new ie(G2(e))}function H2(s,t){return Nw(s.databaseId,t)}function Mk(s){const t=F2(s);return t.length===4?Cn.emptyPath():G2(t)}function mT(s){return new Cn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function G2(s){return hn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function IS(s,t,e){return{name:pT(s,t),fields:e.value.mapValue.fields}}function kk(s,t){let e;if("targetChange"in t){t.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:he(39313,{state:m})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],c=(function(m,T){return m.useProto3Json?(hn(T===void 0||typeof T=="string",58123),Zi.fromBase64String(T||"")):(hn(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Zi.fromUint8Array(T||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,d=f&&(function(m){const T=m.code===void 0?Ct.UNKNOWN:U2(m.code);return new Kt(T,m.message||"")})(f);e=new B2(i,a,c,d||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=R1(s,i.document.name),c=$o(i.document.updateTime),f=i.document.createTime?$o(i.document.createTime):pe.min(),d=new yr({mapValue:{fields:i.document.fields}}),g=bs.newFoundDocument(a,c,f,d),m=i.targetIds||[],T=i.removedTargetIds||[];e=new Zy(m,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=R1(s,i.document),c=i.readTime?$o(i.readTime):pe.min(),f=bs.newNoDocument(a,c),d=i.removedTargetIds||[];e=new Zy([],d,f.key,f)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=R1(s,i.document),c=i.removedTargetIds||[];e=new Zy([],c,a,null)}else{if(!("filter"in t))return he(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,f=new Sk(a,c),d=i.targetId;e=new z2(d,f)}}return e}function Vk(s,t){let e;if(t instanceof kg)e={update:IS(s,t.key,t.value)};else if(t instanceof rv)e={delete:pT(s,t.key)};else if(t instanceof mu)e={update:IS(s,t.key,t.data),updateMask:Hk(t.fieldMask)};else{if(!(t instanceof Tk))return he(16599,{Vt:t.type});e={verify:pT(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(c,f){const d=f.transform;if(d instanceof w0)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof gg)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _g)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof b0)return{fieldPath:f.field.canonicalString(),increment:d.Ae};throw he(20930,{transform:f.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Dk(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:he(27497)})(s,t.precondition)),e}function jk(s,t){return s&&s.length>0?(hn(t!==void 0,14353),s.map((e=>(function(a,c){let f=a.updateTime?$o(a.updateTime):$o(c);return f.isEqual(pe.min())&&(f=$o(c)),new _k(f,a.transformResults||[])})(e,t)))):[]}function Lk(s,t){return{documents:[H2(s,t.path)]}}function Pk(s,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=H2(s,a);const c=(function(m){if(m.length!==0)return $2(so.create(m,"and"))})(t.filters);c&&(e.structuredQuery.where=c);const f=(function(m){if(m.length!==0)return m.map((T=>(function(E){return{field:Ed(E.field),direction:Bk(E.dir)}})(T)))})(t.orderBy);f&&(e.structuredQuery.orderBy=f);const d=fT(s,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(t.endAt)),{ft:e,parent:a}}function Uk(s){let t=Mk(s.parent);const e=s.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){hn(i===1,65062);const T=e.from[0];T.allDescendants?a=T.collectionId:t=t.child(T.collectionId)}let c=[];e.where&&(c=(function(w){const E=K2(w);return E instanceof so&&w2(E)?E.getFilters():[E]})(e.where));let f=[];e.orderBy&&(f=(function(w){return w.map((E=>(function(O){return new T0(Cd(O.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(E)))})(e.orderBy));let d=null;e.limit&&(d=(function(w){let E;return E=typeof w=="object"?w.value:w,J0(E)?null:E})(e.limit));let g=null;e.startAt&&(g=(function(w){const E=!!w.before,N=w.values||[];return new v0(N,E)})(e.startAt));let m=null;return e.endAt&&(m=(function(w){const E=!w.before,N=w.values||[];return new v0(N,E)})(e.endAt)),sk(t,a,f,c,d,"F",g,m)}function zk(s,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function K2(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Cd(e.unaryFilter.field);return wi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Cd(e.unaryFilter.field);return wi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Cd(e.unaryFilter.field);return wi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Cd(e.unaryFilter.field);return wi.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(s):s.fieldFilter!==void 0?(function(e){return wi.create(Cd(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return so.create(e.compositeFilter.filters.map((i=>K2(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(e.compositeFilter.op))})(s):he(30097,{filter:s})}function Bk(s){return Rk[s]}function qk(s){return Nk[s]}function Fk(s){return Ik[s]}function Ed(s){return{fieldPath:s.canonicalString()}}function Cd(s){return Xi.fromServerFormat(s.fieldPath)}function $2(s){return s instanceof wi?(function(e){if(e.op==="=="){if(_S(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NAN"}};if(gS(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(_S(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NOT_NAN"}};if(gS(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(e.field),op:qk(e.op),value:e.value}}})(s):s instanceof so?(function(e){const i=e.getFilters().map((a=>$2(a)));return i.length===1?i[0]:{compositeFilter:{op:Fk(e.op),filters:i}}})(s):he(54877,{filter:s})}function Hk(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function W2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,e,i,a,c=pe.min(),f=pe.min(),d=Zi.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new $c(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(t){this.yt=t}}function Kk(s){const t=Uk({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?hT(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.Cn=new Wk}addToCollectionParentIndex(t,e){return this.Cn.add(e),Rt.resolve()}getCollectionParents(t,e){return Rt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return Rt.resolve()}deleteFieldIndex(t,e){return Rt.resolve()}deleteAllFieldIndexes(t){return Rt.resolve()}createTargetIndexes(t,e){return Rt.resolve()}getDocumentsMatchingTarget(t,e){return Rt.resolve(null)}getIndexType(t,e){return Rt.resolve(0)}getFieldIndexes(t,e){return Rt.resolve([])}getNextCollectionGroupToUpdate(t){return Rt.resolve(null)}getMinOffset(t,e){return Rt.resolve(su.min())}getMinOffsetFromCollectionGroup(t,e){return Rt.resolve(su.min())}updateCollectionGroup(t,e,i){return Rt.resolve()}updateIndexEntries(t,e){return Rt.resolve()}}class Wk{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new Oi(Cn.comparator),c=!a.has(i);return this.index[e]=a.add(i),c}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new Oi(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y2=41943040;class gr{static withCacheSize(t){return new gr(t,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(Y2,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Qd(0)}static cr(){return new Qd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="LruGarbageCollector",Yk=1048576;function MS([s,t],[e,i]){const a=je(s,e);return a===0?je(t,i):a}class Qk{constructor(t){this.Ir=t,this.buffer=new Oi(MS),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();MS(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Xk{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Wt(DS,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){lp(e)?Wt(DS,"Ignoring IndexedDB error during garbage collection: ",e):await op(e)}await this.Vr(3e5)}))}}class Zk{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return Rt.resolve(Z0.ce);const i=new Qk(e);return this.mr.forEachTarget(t,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(t,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Wt("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(OS)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OS):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,a,c,f,d,g,m;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,f=Date.now(),this.nthSequenceNumber(t,a)))).next((w=>(i=w,d=Date.now(),this.removeTargets(t,i,e)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(t,i)))).next((w=>(m=Date.now(),Sd()<=He.DEBUG&&Wt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${a} in `+(d-f)+`ms
	Removed ${c} targets in `+(g-d)+`ms
	Removed ${w} documents in `+(m-g)+`ms
Total Duration: ${m-T}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:w}))))}}function Jk(s,t){return new Zk(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.changes=new ef((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,bs.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?Rt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(i=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(i!==null&&ag(i.mutation,a,Yr.empty(),Mn.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Pe()){const a=Bh();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,i).next((c=>{let f=Jm();return c.forEach(((d,g)=>{f=f.insert(d,g.overlayedDocument)})),f}))))}getOverlayedDocuments(t,e){const i=Bh();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Pe())))}populateOverlays(t,e,i){const a=[];return i.forEach((c=>{e.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(t,a).next((c=>{c.forEach(((f,d)=>{e.set(f,d)}))}))}computeViews(t,e,i,a){let c=zl();const f=rg(),d=(function(){return rg()})();return e.forEach(((g,m)=>{const T=i.get(m.key);a.has(m.key)&&(T===void 0||T.mutation instanceof mu)?c=c.insert(m.key,m):T!==void 0?(f.set(m.key,T.mutation.getFieldMask()),ag(T.mutation,m,T.mutation.getFieldMask(),Mn.now())):f.set(m.key,Yr.empty())})),this.recalculateAndSaveOverlays(t,c).next((g=>(g.forEach(((m,T)=>f.set(m,T))),e.forEach(((m,T)=>d.set(m,new e6(T,f.get(m)??null)))),d)))}recalculateAndSaveOverlays(t,e){const i=rg();let a=new Qn(((f,d)=>f-d)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((f=>{for(const d of f)d.keys().forEach((g=>{const m=e.get(g);if(m===null)return;let T=i.get(g)||Yr.empty();T=d.applyToLocalView(m,T),i.set(g,T);const w=(a.get(d.batchId)||Pe()).add(g);a=a.insert(d.batchId,w)}))})).next((()=>{const f=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,T=g.value,w=O2();T.forEach((E=>{if(!c.has(E)){const N=L2(e.get(E),i.get(E));N!==null&&w.set(E,N),c=c.add(E)}})),f.push(this.documentOverlayCache.saveOverlays(t,m,w))}return Rt.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,a){return(function(f){return ie.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):C2(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-c.size):Rt.resolve(Bh());let d=fg,g=c;return f.next((m=>Rt.forEach(m,((T,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),c.get(T)?Rt.resolve():this.remoteDocumentCache.getEntry(t,T).next((E=>{g=g.insert(T,E)}))))).next((()=>this.populateOverlays(t,m,c))).next((()=>this.computeViews(t,g,m,Pe()))).next((T=>({batchId:d,changes:I2(T)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ie(e)).next((i=>{let a=Jm();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const c=e.collectionGroup;let f=Jm();return this.indexManager.getCollectionParents(t,c).next((d=>Rt.forEach(d,(g=>{const m=(function(w,E){return new Mg(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(e,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,m,i,a).next((T=>{T.forEach(((w,E)=>{f=f.insert(w,E)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,e,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,c,a)))).next((f=>{c.forEach(((g,m)=>{const T=m.getKey();f.get(T)===null&&(f=f.insert(T,bs.newInvalidDocument(T)))}));let d=Jm();return f.forEach(((g,m)=>{const T=c.get(g);T!==void 0&&ag(T.mutation,m,Yr.empty(),Mn.now()),nv(e,m)&&(d=d.insert(g,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return Rt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:$o(a.createTime)}})(e)),Rt.resolve()}getNamedQuery(t,e){return Rt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(a){return{name:a.name,query:Kk(a.bundledQuery),readTime:$o(a.readTime)}})(e)),Rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.overlays=new Qn(ie.comparator),this.qr=new Map}getOverlay(t,e){return Rt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Bh();return Rt.forEach(e,(a=>this.getOverlay(t,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((a,c)=>{this.St(t,e,c)})),Rt.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),Rt.resolve()}getOverlaysForCollection(t,e,i){const a=Bh(),c=e.length+1,f=new ie(e.child("")),d=this.overlays.getIteratorFrom(f);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===c&&g.largestBatchId>i&&a.set(g.getKey(),g)}return Rt.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let c=new Qn(((m,T)=>m-T));const f=this.overlays.getIterator();for(;f.hasNext();){const m=f.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let T=c.get(m.largestBatchId);T===null&&(T=Bh(),c=c.insert(m.largestBatchId,T)),T.set(m.getKey(),m)}}const d=Bh(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,T)=>d.set(m,T))),!(d.size()>=a)););return Rt.resolve(d)}St(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const f=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new bk(e,i));let c=this.qr.get(e);c===void 0&&(c=Pe(),this.qr.set(e,c)),this.qr.set(e,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this.sessionToken=Zi.EMPTY_BYTE_STRING}getSessionToken(t){return Rt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.Qr=new Oi(zi.$r),this.Ur=new Oi(zi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new zi(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Gr(new zi(t,e))}zr(t,e){t.forEach((i=>this.removeReference(i,e)))}jr(t){const e=new ie(new Cn([])),i=new zi(e,t),a=new zi(e,t+1),c=[];return this.Ur.forEachInRange([i,a],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ie(new Cn([])),i=new zi(e,t),a=new zi(e,t+1);let c=Pe();return this.Ur.forEachInRange([i,a],(f=>{c=c.add(f.key)})),c}containsKey(t){const e=new zi(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class zi{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ie.comparator(t.key,e.key)||je(t.Yr,e.Yr)}static Kr(t,e){return je(t.Yr,e.Yr)||ie.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Oi(zi.$r)}checkEmpty(t){return Rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new wk(c,e,i,a);this.mutationQueue.push(f);for(const d of a)this.Zr=this.Zr.add(new zi(d.key,c)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return Rt.resolve(f)}lookupMutationBatch(t,e){return Rt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.ei(i),c=a<0?0:a;return Rt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(this.mutationQueue.length===0?ww:this.tr-1)}getAllMutationBatches(t){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new zi(e,0),a=new zi(e,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,a],(f=>{const d=this.Xr(f.Yr);c.push(d)})),Rt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Oi(je);return e.forEach((a=>{const c=new zi(a,0),f=new zi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(d=>{i=i.add(d.Yr)}))})),Rt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let c=i;ie.isDocumentKey(c)||(c=c.child(""));const f=new zi(new ie(c),0);let d=new Oi(je);return this.Zr.forEachWhile((g=>{const m=g.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(d=d.add(g.Yr)),!0)}),f),Rt.resolve(this.ti(d))}ti(t){const e=[];return t.forEach((i=>{const a=this.Xr(i);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){hn(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Rt.forEach(e.mutations,(a=>{const c=new zi(a.key,e.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,e){const i=new zi(e,0),a=this.Zr.firstAfterOrEqual(i);return Rt.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Rt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(t){this.ri=t,this.docs=(function(){return new Qn(ie.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),c=a?a.size:0,f=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Rt.resolve(i?i.document.mutableCopy():bs.newInvalidDocument(e))}getEntries(t,e){let i=zl();return e.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():bs.newInvalidDocument(a))})),Rt.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let c=zl();const f=e.path,d=new ie(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:T}}=g.getNext();if(!f.isPrefixOf(m.path))break;m.path.length>f.length+1||j5(V5(T),i)<=0||(a.has(T.key)||nv(e,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Rt.resolve(c)}getAllFromCollectionGroup(t,e,i,a){he(9500)}ii(t,e){return Rt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new l6(this)}getSize(t){return Rt.resolve(this.size)}}class l6 extends t6{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?e.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(i)})),Rt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(t){this.persistence=t,this.si=new ef((e=>Aw(e)),Ew),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Iw,this.targetCount=0,this.ai=Qd.ur()}forEachTarget(t,e){return this.si.forEach(((i,a)=>e(a))),Rt.resolve()}getLastRemoteSnapshotVersion(t){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),Rt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Qd(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,Rt.resolve()}updateTargetData(t,e){return this.Pr(e),Rt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(t,e,i){let a=0;const c=[];return this.si.forEach(((f,d)=>{d.sequenceNumber<=e&&i.get(d.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)})),Rt.waitFor(c).next((()=>a))}getTargetCount(t){return Rt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return Rt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),Rt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const a=this.persistence.referenceDelegate,c=[];return a&&e.forEach((f=>{c.push(a.markPotentiallyOrphaned(t,f))})),Rt.waitFor(c)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),Rt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return Rt.resolve(i)}containsKey(t,e){return Rt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,e){this.ui={},this.overlays={},this.ci=new Z0(0),this.li=!1,this.li=!0,this.hi=new r6,this.referenceDelegate=t(this),this.Pi=new c6(this),this.indexManager=new $k,this.remoteDocumentCache=(function(a){return new o6(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Gk(e),this.Ii=new i6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new s6,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new a6(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){Wt("MemoryPersistence","Starting transaction:",t);const a=new u6(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(t,e){return Rt.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,e))))}}class u6 extends P5{constructor(t){super(),this.currentSequenceNumber=t}}class Ow{constructor(t){this.persistence=t,this.Ri=new Iw,this.Vi=null}static mi(t){return new Ow(t)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),Rt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),Rt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),Rt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.fi,(i=>{const a=ie.fromPath(i);return this.gi(t,a).next((c=>{c||e.removeEntry(a,pe.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return Rt.or([()=>Rt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class A0{constructor(t,e){this.persistence=t,this.pi=new ef((i=>B5(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=Jk(this,e)}static mi(t,e){return new A0(t,e)}Ei(){}di(t){return Rt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((a=>i+a))))}wr(t){let e=0;return this.pr(t,(i=>{e++})).next((()=>e))}pr(t,e){return Rt.forEach(this.pi,((i,a)=>this.br(t,i,a).next((c=>c?Rt.resolve():e(a)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(t,(f=>this.br(t,f,e).next((d=>{d||(i++,c.removeEntry(f,pe.min()))})))).next((()=>c.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),Rt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),Rt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),Rt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),Rt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Yy(t.data.value)),e}br(t,e,i){return Rt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.pi.get(e);return Rt.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=a}static As(t,e){let i=Pe(),a=Pe();for(const c of e.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Dw(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jD()?8:U5(MD())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,a){const c={result:null};return this.ys(t,e).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,e,a,i).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new h6;return this.Ss(t,e,f).next((d=>{if(c.result=d,this.Vs)return this.bs(t,e,f,d.size)}))})).next((()=>c.result))}bs(t,e,i,a){return i.documentReadCount<this.fs?(Sd()<=He.DEBUG&&Wt("QueryEngine","SDK will not create cache indexes for query:",Ad(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Rt.resolve()):(Sd()<=He.DEBUG&&Wt("QueryEngine","Query:",Ad(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Sd()<=He.DEBUG&&Wt("QueryEngine","The SDK decides to create cache indexes for query:",Ad(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ko(e))):Rt.resolve())}ys(t,e){if(wS(e))return Rt.resolve(null);let i=Ko(e);return this.indexManager.getIndexType(t,i).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=hT(e,null,"F"),i=Ko(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((c=>{const f=Pe(...c);return this.ps.getDocuments(t,f).next((d=>this.indexManager.getMinOffset(t,i).next((g=>{const m=this.Ds(e,d);return this.Cs(e,m,f,g.readTime)?this.ys(t,hT(e,null,"F")):this.vs(t,m,e,g)}))))})))))}ws(t,e,i,a){return wS(e)||a.isEqual(pe.min())?Rt.resolve(null):this.ps.getDocuments(t,i).next((c=>{const f=this.Ds(e,c);return this.Cs(e,f,i,a)?Rt.resolve(null):(Sd()<=He.DEBUG&&Wt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ad(e)),this.vs(t,f,e,k5(a,fg)).next((d=>d)))}))}Ds(t,e){let i=new Oi(R2(t));return e.forEach(((a,c)=>{nv(t,c)&&(i=i.add(c))})),i}Cs(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const c=t.limitType==="F"?e.last():e.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(t,e,i){return Sd()<=He.DEBUG&&Wt("QueryEngine","Using full collection scan to execute query:",Ad(e)),this.ps.getDocumentsMatchingQuery(t,e,su.min(),i)}vs(t,e,i,a){return this.ps.getDocumentsMatchingQuery(t,i,a).next((c=>(e.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="LocalStore",d6=3e8;class p6{constructor(t,e,i,a){this.persistence=t,this.Fs=e,this.serializer=a,this.Ms=new Qn(je),this.xs=new ef((c=>Aw(c)),Ew),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new n6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function m6(s,t,e,i){return new p6(s,t,e,i)}async function X2(s,t){const e=Te(s);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,e.Bs(t),e.mutationQueue.getAllMutationBatches(i)))).next((c=>{const f=[],d=[];let g=Pe();for(const m of a){f.push(m.batchId);for(const T of m.mutations)g=g.add(T.key)}for(const m of c){d.push(m.batchId);for(const T of m.mutations)g=g.add(T.key)}return e.localDocuments.getDocuments(i,g).next((m=>({Ls:m,removedBatchIds:f,addedBatchIds:d})))}))}))}function g6(s,t){const e=Te(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=t.batch.keys(),c=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,m,T){const w=m.batch,E=w.keys();let N=Rt.resolve();return E.forEach((O=>{N=N.next((()=>T.getEntry(g,O))).next((U=>{const D=m.docVersions.get(O);hn(D!==null,48541),U.version.compareTo(D)<0&&(w.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),T.addEntry(U)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(g,w)))})(e,i,t,c).next((()=>c.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let g=Pe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(i,a)))}))}function Z2(s){const t=Te(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function _6(s,t){const e=Te(s),i=t.snapshotVersion;let a=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=e.Ns.newChangeBuffer({trackRemovals:!0});a=e.Ms;const d=[];t.targetChanges.forEach(((T,w)=>{const E=a.get(w);if(!E)return;d.push(e.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>e.Pi.addMatchingKeys(c,T.addedDocuments,w))));let N=E.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?N=N.withResumeToken(Zi.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):T.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(T.resumeToken,i)),a=a.insert(w,N),(function(U,D,z){return U.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=d6?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(E,N,T)&&d.push(e.Pi.updateTargetData(c,N))}));let g=zl(),m=Pe();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(c,T))})),d.push(y6(c,f,t.documentUpdates).next((T=>{g=T.ks,m=T.qs}))),!i.isEqual(pe.min())){const T=e.Pi.getLastRemoteSnapshotVersion(c).next((w=>e.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));d.push(T)}return Rt.waitFor(d).next((()=>f.apply(c))).next((()=>e.localDocuments.getLocalViewOfDocuments(c,g,m))).next((()=>g))})).then((c=>(e.Ms=a,c)))}function y6(s,t,e){let i=Pe(),a=Pe();return e.forEach((c=>i=i.add(c))),t.getEntries(s,i).next((c=>{let f=zl();return e.forEach(((d,g)=>{const m=c.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(pe.min())?(t.removeEntry(d,g.readTime),f=f.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(g),f=f.insert(d,g)):Wt(Mw,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)})),{ks:f,qs:a}}))}function v6(s,t){const e=Te(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=ww),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function T6(s,t){const e=Te(s);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return e.Pi.getTargetData(i,t).next((c=>c?(a=c,Rt.resolve(a)):e.Pi.allocateTargetId(i).next((f=>(a=new $c(t,f,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=e.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i}))}async function gT(s,t,e){const i=Te(s),a=i.Ms.get(t),c=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",c,(f=>i.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!lp(f))throw f;Wt(Mw,`Failed to update sequence numbers for target ${t}: ${f}`)}i.Ms=i.Ms.remove(t),i.xs.delete(a.target)}function kS(s,t,e){const i=Te(s);let a=pe.min(),c=Pe();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,m,T){const w=Te(g),E=w.xs.get(T);return E!==void 0?Rt.resolve(w.Ms.get(E)):w.Pi.getTargetData(m,T)})(i,f,Ko(t)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,d.targetId).next((g=>{c=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,t,e?a:pe.min(),e?c:Pe()))).next((d=>(w6(i,ak(t),d),{documents:d,Qs:c})))))}function w6(s,t,e){let i=s.Os.get(t)||pe.min();e.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(t,i)}class VS{constructor(){this.activeTargetIds=fk()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class b6{constructor(){this.Mo=new VS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new VS,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="ConnectivityMonitor";class LS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Wt(jS,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Wt(jS,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy=null;function _T(){return Fy===null?Fy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fy++,"0x"+Fy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="RestConnection",A6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class E6{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===_0?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(t,e,i,a,c){const f=_T(),d=this.zo(t,e.toUriEncodedString());Wt(N1,`Sending RPC '${t}' ${f}:`,d,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,c);const{host:m}=new URL(d),T=uw(m);return this.Jo(t,d,g,i,T).then((w=>(Wt(N1,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw Kd(N1,`RPC '${t}' ${f} failed with error: `,w,"url: ",d,"request:",i),w}))}Ho(t,e,i,a,c,f){return this.Go(t,e,i,a,c)}jo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ap})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,c)=>t[c]=a)),i&&i.headers.forEach(((a,c)=>t[c]=a))}zo(t,e){const i=A6[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="WebChannelConnection";class x6 extends E6{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,a,c){const f=_T();return new Promise(((d,g)=>{const m=new t2;m.setWithCredentials(!0),m.listenOnce(e2.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Wy.NO_ERROR:const w=m.getResponseJson();Wt(Ts,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),d(w);break;case Wy.TIMEOUT:Wt(Ts,`RPC '${t}' ${f} timed out`),g(new Kt(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case Wy.HTTP_ERROR:const E=m.getStatus();if(Wt(Ts,`RPC '${t}' ${f} failed with status:`,E,"response text:",m.getResponseText()),E>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const O=N?.error;if(O&&O.status&&O.message){const U=(function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf($)>=0?$:Ct.UNKNOWN})(O.status);g(new Kt(U,O.message))}else g(new Kt(Ct.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new Kt(Ct.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:t,streamId:f,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Wt(Ts,`RPC '${t}' ${f} completed.`)}}));const T=JSON.stringify(a);Wt(Ts,`RPC '${t}' ${f} sending request:`,a),m.send(e,"POST",T,i,15)}))}T_(t,e,i){const a=_T(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=s2(),d=i2(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,i),g.encodeInitMessageHeaders=!0;const T=c.join("");Wt(Ts,`Creating RPC '${t}' stream ${a}: ${T}`,g);const w=f.createWebChannel(T,g);this.I_(w);let E=!1,N=!1;const O=new C6({Yo:D=>{N?Wt(Ts,`Not sending because RPC '${t}' stream ${a} is closed:`,D):(E||(Wt(Ts,`Opening RPC '${t}' stream ${a} transport.`),w.open(),E=!0),Wt(Ts,`RPC '${t}' stream ${a} sending:`,D),w.send(D))},Zo:()=>w.close()}),U=(D,z,$)=>{D.listen(z,(Q=>{try{$(Q)}catch(nt){setTimeout((()=>{throw nt}),0)}}))};return U(w,Zm.EventType.OPEN,(()=>{N||(Wt(Ts,`RPC '${t}' stream ${a} transport opened.`),O.o_())})),U(w,Zm.EventType.CLOSE,(()=>{N||(N=!0,Wt(Ts,`RPC '${t}' stream ${a} transport closed`),O.a_(),this.E_(w))})),U(w,Zm.EventType.ERROR,(D=>{N||(N=!0,Kd(Ts,`RPC '${t}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),O.a_(new Kt(Ct.UNAVAILABLE,"The operation could not be completed")))})),U(w,Zm.EventType.MESSAGE,(D=>{if(!N){const z=D.data[0];hn(!!z,16349);const $=z,Q=$?.error||$[0]?.error;if(Q){Wt(Ts,`RPC '${t}' stream ${a} received error:`,Q);const nt=Q.status;let K=(function(C){const M=yi[C];if(M!==void 0)return U2(M)})(nt),X=Q.message;K===void 0&&(K=Ct.INTERNAL,X="Unknown error status: "+nt+" with message "+Q.message),N=!0,O.a_(new Kt(K,X)),w.close()}else Wt(Ts,`RPC '${t}' stream ${a} received:`,z),O.u_(z)}})),U(d,n2.STAT_EVENT,(D=>{D.stat===sT.PROXY?Wt(Ts,`RPC '${t}' stream ${a} detected buffering proxy`):D.stat===sT.NOPROXY&&Wt(Ts,`RPC '${t}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function I1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(s){return new Ok(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t,e,i=1e3,a=1.5,c=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-i);a>0&&Wt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="PersistentStream";class tC{constructor(t,e,i,a,c,f,d,g){this.Mi=t,this.S_=i,this.b_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J2(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Ct.RESOURCE_EXHAUSTED?(Ul(e.toString()),Ul("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===e&&this.G_(i,a)}),(i=>{t((()=>{const a=new Kt(Ct.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Wt(PS,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(Wt(PS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class R6 extends tC{constructor(t,e,i,a,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,f),this.serializer=c}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=kk(this.serializer,t),i=(function(c){if(!("targetChange"in c))return pe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?pe.min():f.readTime?$o(f.readTime):pe.min()})(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=mT(this.serializer),e.addTarget=(function(c,f){let d;const g=f.target;if(d=cT(g)?{documents:Lk(c,g)}:{query:Pk(c,g).ft},d.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){d.resumeToken=q2(c,f.resumeToken);const m=fT(c,f.expectedCount);m!==null&&(d.expectedCount=m)}else if(f.snapshotVersion.compareTo(pe.min())>0){d.readTime=S0(c,f.snapshotVersion.toTimestamp());const m=fT(c,f.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,t);const i=zk(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=mT(this.serializer),e.removeTarget=t,this.q_(e)}}class N6 extends tC{constructor(t,e,i,a,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return hn(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,hn(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){hn(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=jk(t.writeResults,t.commitTime),i=$o(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=mT(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>Vk(this.serializer,i)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{}class O6 extends I6{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Kt(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,dT(e,i),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Kt(Ct.UNKNOWN,c.toString())}))}Ho(t,e,i,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,d])=>this.connection.Ho(t,dT(e,i),a,f,d,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Kt(Ct.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class D6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ul(e),this.aa=!1):Wt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="RemoteStore";class M6{constructor(t,e,i,a,c){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{nf(this)&&(Wt(Xh,"Restarting streams for network reachability change."),await(async function(g){const m=Te(g);m.Ea.add(4),await jg(m),m.Ra.set("Unknown"),m.Ea.delete(4),await lv(m)})(this))}))})),this.Ra=new D6(i,a)}}async function lv(s){if(nf(s))for(const t of s.da)await t(!0)}async function jg(s){for(const t of s.da)await t(!1)}function eC(s,t){const e=Te(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Lw(e)?jw(e):cp(e).O_()&&Vw(e,t))}function kw(s,t){const e=Te(s),i=cp(e);e.Ia.delete(t),i.O_()&&nC(e,t),e.Ia.size===0&&(i.O_()?i.L_():nf(e)&&e.Ra.set("Unknown"))}function Vw(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pe.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}cp(s).Y_(t)}function nC(s,t){s.Va.Ue(t),cp(s).Z_(t)}function jw(s){s.Va=new xk({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),cp(s).start(),s.Ra.ua()}function Lw(s){return nf(s)&&!cp(s).x_()&&s.Ia.size>0}function nf(s){return Te(s).Ea.size===0}function iC(s){s.Va=void 0}async function k6(s){s.Ra.set("Online")}async function V6(s){s.Ia.forEach(((t,e)=>{Vw(s,t)}))}async function j6(s,t){iC(s),Lw(s)?(s.Ra.ha(t),jw(s)):s.Ra.set("Unknown")}async function L6(s,t,e){if(s.Ra.set("Online"),t instanceof B2&&t.state===2&&t.cause)try{await(async function(a,c){const f=c.cause;for(const d of c.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,f),a.Ia.delete(d),a.Va.removeTarget(d))})(s,t)}catch(i){Wt(Xh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await E0(s,i)}else if(t instanceof Zy?s.Va.Ze(t):t instanceof z2?s.Va.st(t):s.Va.tt(t),!e.isEqual(pe.min()))try{const i=await Z2(s.localStore);e.compareTo(i)>=0&&await(function(c,f){const d=c.Va.Tt(f);return d.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(m);T&&c.Ia.set(m,T.withResumeToken(g.resumeToken,f))}})),d.targetMismatches.forEach(((g,m)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Zi.EMPTY_BYTE_STRING,T.snapshotVersion)),nC(c,g);const w=new $c(T.target,g,m,T.sequenceNumber);Vw(c,w)})),c.remoteSyncer.applyRemoteEvent(d)})(s,e)}catch(i){Wt(Xh,"Failed to raise snapshot:",i),await E0(s,i)}}async function E0(s,t,e){if(!lp(t))throw t;s.Ea.add(1),await jg(s),s.Ra.set("Offline"),e||(e=()=>Z2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Wt(Xh,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await lv(s)}))}function sC(s,t){return t().catch((e=>E0(s,e,t)))}async function cv(s){const t=Te(s),e=lu(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ww;for(;P6(t);)try{const a=await v6(t.localStore,i);if(a===null){t.Ta.length===0&&e.L_();break}i=a.batchId,U6(t,a)}catch(a){await E0(t,a)}rC(t)&&aC(t)}function P6(s){return nf(s)&&s.Ta.length<10}function U6(s,t){s.Ta.push(t);const e=lu(s);e.O_()&&e.X_&&e.ea(t.mutations)}function rC(s){return nf(s)&&!lu(s).x_()&&s.Ta.length>0}function aC(s){lu(s).start()}async function z6(s){lu(s).ra()}async function B6(s){const t=lu(s);for(const e of s.Ta)t.ea(e.mutations)}async function q6(s,t,e){const i=s.Ta.shift(),a=xw.from(i,t,e);await sC(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await cv(s)}async function F6(s,t){t&&lu(s).X_&&await(async function(i,a){if((function(f){return Ak(f)&&f!==Ct.ABORTED})(a.code)){const c=i.Ta.shift();lu(i).B_(),await sC(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await cv(i)}})(s,t),rC(s)&&aC(s)}async function US(s,t){const e=Te(s);e.asyncQueue.verifyOperationInProgress(),Wt(Xh,"RemoteStore received new credentials");const i=nf(e);e.Ea.add(3),await jg(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await lv(e)}async function H6(s,t){const e=Te(s);t?(e.Ea.delete(2),await lv(e)):t||(e.Ea.add(2),await jg(e),e.Ra.set("Unknown"))}function cp(s){return s.ma||(s.ma=(function(e,i,a){const c=Te(e);return c.sa(),new R6(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Xo:k6.bind(null,s),t_:V6.bind(null,s),r_:j6.bind(null,s),H_:L6.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Lw(s)?jw(s):s.Ra.set("Unknown")):(await s.ma.stop(),iC(s))}))),s.ma}function lu(s){return s.fa||(s.fa=(function(e,i,a){const c=Te(e);return c.sa(),new N6(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:z6.bind(null,s),r_:F6.bind(null,s),ta:B6.bind(null,s),na:q6.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await cv(s)):(await s.fa.stop(),s.Ta.length>0&&(Wt(Xh,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,e,i,a,c){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Zc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,c){const f=Date.now()+i,d=new Pw(t,e,f,a,c);return d.start(i),d}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Kt(Ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uw(s,t){if(Ul("AsyncQueue",`${t}: ${s}`),lp(s))return new Kt(Ct.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{static emptySet(t){return new Md(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||ie.comparator(e.key,i.key):(e,i)=>ie.comparator(e.key,i.key),this.keyedMap=Jm(),this.sortedSet=new Qn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Md)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Md;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.ga=new Qn(ie.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):he(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Xd{constructor(t,e,i,a,c,f,d,g,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,a,c){const f=[];return e.forEach((d=>{f.push({type:0,doc:d})})),new Xd(t,e,Md.emptySet(e),f,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ev(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class K6{constructor(){this.queries=BS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const a=Te(e),c=a.queries;a.queries=BS(),c.forEach(((f,d)=>{for(const g of d.Sa)g.onError(i)}))})(this,new Kt(Ct.ABORTED,"Firestore shutting down"))}}function BS(){return new ef((s=>x2(s)),ev)}async function $6(s,t){const e=Te(s);let i=3;const a=t.query;let c=e.queries.get(a);c?!c.ba()&&t.Da()&&(i=2):(c=new G6,i=t.Da()?0:1);try{switch(i){case 0:c.wa=await e.onListen(a,!0);break;case 1:c.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(f){const d=Uw(f,`Initialization of query '${Ad(t.query)}' failed`);return void t.onError(d)}e.queries.set(a,c),c.Sa.push(t),t.va(e.onlineState),c.wa&&t.Fa(c.wa)&&zw(e)}async function W6(s,t){const e=Te(s),i=t.query;let a=3;const c=e.queries.get(i);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=t.Da()?0:1:!c.ba()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function Y6(s,t){const e=Te(s);let i=!1;for(const a of t){const c=a.query,f=e.queries.get(c);if(f){for(const d of f.Sa)d.Fa(a)&&(i=!0);f.wa=a}}i&&zw(e)}function Q6(s,t,e){const i=Te(s),a=i.queries.get(t);if(a)for(const c of a.Sa)c.onError(e);i.queries.delete(t)}function zw(s){s.Ca.forEach((t=>{t.next()}))}var yT,qS;(qS=yT||(yT={})).Ma="default",qS.Cache="cache";class X6{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new Xd(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Xd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==yT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.key=t}}class lC{constructor(t){this.key=t}}class Z6{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=R2(t),this.tu=new Md(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new zS,a=e?e.tu:this.tu;let c=e?e.mutatedKeys:this.mutatedKeys,f=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((T,w)=>{const E=a.get(T),N=nv(this.query,w)?w:null,O=!!E&&this.mutatedKeys.has(E.key),U=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let D=!1;E&&N?E.data.isEqual(N.data)?O!==U&&(i.track({type:3,doc:N}),D=!0):this.su(E,N)||(i.track({type:2,doc:N}),D=!0,(g&&this.eu(N,g)>0||m&&this.eu(N,m)<0)&&(d=!0)):!E&&N?(i.track({type:0,doc:N}),D=!0):E&&!N&&(i.track({type:1,doc:E}),D=!0,(g||m)&&(d=!0)),D&&(N?(f=f.add(N),c=U?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),i.track({type:1,doc:T})}return{tu:f,iu:i,Cs:d,mutatedKeys:c}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((T,w)=>(function(N,O){const U=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:D})}};return U(N)-U(O)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(i),a=a??!1;const d=e&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,m=g!==this.Za;return this.Za=g,f.length!==0||m?{snapshot:new Xd(this.query,t.tu,c,f,t.mutatedKeys,g===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const e=[];return t.forEach((i=>{this.Xa.has(i)||e.push(new lC(i))})),this.Xa.forEach((i=>{t.has(i)||e.push(new oC(i))})),e}cu(t){this.Ya=t.Qs,this.Xa=Pe();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Xd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bw="SyncEngine";class J6{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class tV{constructor(t){this.key=t,this.hu=!1}}class eV{constructor(t,e,i,a,c,f){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ef((d=>x2(d)),ev),this.Iu=new Map,this.Eu=new Set,this.du=new Qn(ie.comparator),this.Au=new Map,this.Ru=new Iw,this.Vu={},this.mu=new Map,this.fu=Qd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nV(s,t,e=!0){const i=pC(s);let a;const c=i.Tu.get(t);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await cC(i,t,e,!0),a}async function iV(s,t){const e=pC(s);await cC(e,t,!0,!1)}async function cC(s,t,e,i){const a=await T6(s.localStore,Ko(t)),c=a.targetId,f=s.sharedClientState.addLocalQueryTarget(c,e);let d;return i&&(d=await sV(s,t,c,f==="current",a.resumeToken)),s.isPrimaryClient&&e&&eC(s.remoteStore,a),d}async function sV(s,t,e,i,a){s.pu=(w,E,N)=>(async function(U,D,z,$){let Q=D.view.ru(z);Q.Cs&&(Q=await kS(U.localStore,D.query,!1).then((({documents:R})=>D.view.ru(R,Q))));const nt=$&&$.targetChanges.get(D.targetId),K=$&&$.targetMismatches.get(D.targetId)!=null,X=D.view.applyChanges(Q,U.isPrimaryClient,nt,K);return HS(U,D.targetId,X.au),X.snapshot})(s,w,E,N);const c=await kS(s.localStore,t,!0),f=new Z6(t,c.Qs),d=f.ru(c.documents),g=Vg.createSynthesizedTargetChangeForCurrentChange(e,i&&s.onlineState!=="Offline",a),m=f.applyChanges(d,s.isPrimaryClient,g);HS(s,e,m.au);const T=new J6(t,e,f);return s.Tu.set(t,T),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),m.snapshot}async function rV(s,t,e){const i=Te(s),a=i.Tu.get(t),c=i.Iu.get(a.targetId);if(c.length>1)return i.Iu.set(a.targetId,c.filter((f=>!ev(f,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await gT(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),e&&kw(i.remoteStore,a.targetId),vT(i,a.targetId)})).catch(op)):(vT(i,a.targetId),await gT(i.localStore,a.targetId,!0))}async function aV(s,t){const e=Te(s),i=e.Tu.get(t),a=e.Iu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),kw(e.remoteStore,i.targetId))}async function oV(s,t,e){const i=pV(s);try{const a=await(function(f,d){const g=Te(f),m=Mn.now(),T=d.reduce(((N,O)=>N.add(O.key)),Pe());let w,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let O=zl(),U=Pe();return g.Ns.getEntries(N,T).next((D=>{O=D,O.forEach(((z,$)=>{$.isValidDocument()||(U=U.add(z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,O))).next((D=>{w=D;const z=[];for(const $ of d){const Q=vk($,w.get($.key).overlayedDocument);Q!=null&&z.push(new mu($.key,Q,y2(Q.value.mapValue),Tr.exists(!0)))}return g.mutationQueue.addMutationBatch(N,m,z,d)})).next((D=>{E=D;const z=D.applyToLocalDocumentSet(w,U);return g.documentOverlayCache.saveOverlays(N,D.batchId,z)}))})).then((()=>({batchId:E.batchId,changes:I2(w)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),(function(f,d,g){let m=f.Vu[f.currentUser.toKey()];m||(m=new Qn(je)),m=m.insert(d,g),f.Vu[f.currentUser.toKey()]=m})(i,a.batchId,e),await Lg(i,a.changes),await cv(i.remoteStore)}catch(a){const c=Uw(a,"Failed to persist write");e.reject(c)}}async function uC(s,t){const e=Te(s);try{const i=await _6(e.localStore,t);t.targetChanges.forEach(((a,c)=>{const f=e.Au.get(c);f&&(hn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.hu=!0:a.modifiedDocuments.size>0?hn(f.hu,14607):a.removedDocuments.size>0&&(hn(f.hu,42227),f.hu=!1))})),await Lg(e,i,t)}catch(i){await op(i)}}function FS(s,t,e){const i=Te(s);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Tu.forEach(((c,f)=>{const d=f.view.va(t);d.snapshot&&a.push(d.snapshot)})),(function(f,d){const g=Te(f);g.onlineState=d;let m=!1;g.queries.forEach(((T,w)=>{for(const E of w.Sa)E.va(d)&&(m=!0)})),m&&zw(g)})(i.eventManager,t),a.length&&i.Pu.H_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function lV(s,t,e){const i=Te(s);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Au.get(t),c=a&&a.key;if(c){let f=new Qn(ie.comparator);f=f.insert(c,bs.newNoDocument(c,pe.min()));const d=Pe().add(c),g=new av(pe.min(),new Map,new Qn(je),f,d);await uC(i,g),i.du=i.du.remove(c),i.Au.delete(t),qw(i)}else await gT(i.localStore,t,!1).then((()=>vT(i,t,e))).catch(op)}async function cV(s,t){const e=Te(s),i=t.batch.batchId;try{const a=await g6(e.localStore,t);fC(e,i,null),hC(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Lg(e,a)}catch(a){await op(a)}}async function uV(s,t,e){const i=Te(s);try{const a=await(function(f,d){const g=Te(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let T;return g.mutationQueue.lookupMutationBatch(m,d).next((w=>(hn(w!==null,37113),T=w.keys(),g.mutationQueue.removeMutationBatch(m,w)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,T,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,T))).next((()=>g.localDocuments.getDocuments(m,T)))}))})(i.localStore,t);fC(i,t,e),hC(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Lg(i,a)}catch(a){await op(a)}}function hC(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function fC(s,t,e){const i=Te(s);let a=i.Vu[i.currentUser.toKey()];if(a){const c=a.get(t);c&&(e?c.reject(e):c.resolve(),a=a.remove(t)),i.Vu[i.currentUser.toKey()]=a}}function vT(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const i of s.Iu.get(t))s.Tu.delete(i),e&&s.Pu.yu(i,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((i=>{s.Ru.containsKey(i)||dC(s,i)}))}function dC(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(kw(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),qw(s))}function HS(s,t,e){for(const i of e)i instanceof oC?(s.Ru.addReference(i.key,t),hV(s,i)):i instanceof lC?(Wt(Bw,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,t),s.Ru.containsKey(i.key)||dC(s,i.key)):he(19791,{wu:i})}function hV(s,t){const e=t.key,i=e.path.canonicalString();s.du.get(e)||s.Eu.has(i)||(Wt(Bw,"New document in limbo: "+e),s.Eu.add(i),qw(s))}function qw(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new ie(Cn.fromString(t)),i=s.fu.next();s.Au.set(i,new tV(e)),s.du=s.du.insert(e,i),eC(s.remoteStore,new $c(Ko(E2(e.path)),i,"TargetPurposeLimboResolution",Z0.ce))}}async function Lg(s,t,e){const i=Te(s),a=[],c=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,g)=>{f.push(i.pu(g,t,e).then((m=>{if((m||e)&&i.isPrimaryClient){const T=m?!m.fromCache:e?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(m){a.push(m);const T=Dw.As(g.targetId,m);c.push(T)}})))})),await Promise.all(f),i.Pu.H_(a),await(async function(g,m){const T=Te(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>Rt.forEach(m,(E=>Rt.forEach(E.Es,(N=>T.persistence.referenceDelegate.addReference(w,E.targetId,N))).next((()=>Rt.forEach(E.ds,(N=>T.persistence.referenceDelegate.removeReference(w,E.targetId,N)))))))))}catch(w){if(!lp(w))throw w;Wt(Mw,"Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const N=T.Ms.get(E),O=N.snapshotVersion,U=N.withLastLimboFreeSnapshotVersion(O);T.Ms=T.Ms.insert(E,U)}}})(i.localStore,c))}async function fV(s,t){const e=Te(s);if(!e.currentUser.isEqual(t)){Wt(Bw,"User change. New user:",t.toKey());const i=await X2(e.localStore,t);e.currentUser=t,(function(c,f){c.mu.forEach((d=>{d.forEach((g=>{g.reject(new Kt(Ct.CANCELLED,f))}))})),c.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Lg(e,i.Ls)}}function dV(s,t){const e=Te(s),i=e.Au.get(t);if(i&&i.hu)return Pe().add(i.key);{let a=Pe();const c=e.Iu.get(t);if(!c)return a;for(const f of c){const d=e.Tu.get(f);a=a.unionWith(d.view.nu)}return a}}function pC(s){const t=Te(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=uC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lV.bind(null,t),t.Pu.H_=Y6.bind(null,t.eventManager),t.Pu.yu=Q6.bind(null,t.eventManager),t}function pV(s){const t=Te(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uV.bind(null,t),t}class C0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ov(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return m6(this.persistence,new f6,t.initialUser,this.serializer)}Cu(t){return new Q2(Ow.mi,this.serializer)}Du(t){return new b6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}C0.provider={build:()=>new C0};class mV extends C0{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){hn(this.persistence.referenceDelegate instanceof A0,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Xk(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new Q2((i=>A0.mi(i,e)),this.serializer)}}class TT{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fV.bind(null,this.syncEngine),await H6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new K6})()}createDatastore(t){const e=ov(t.databaseInfo.databaseId),i=(function(c){return new x6(c)})(t.databaseInfo);return(function(c,f,d,g){return new O6(c,f,d,g)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,a,c,f,d){return new M6(i,a,c,f,d)})(this.localStore,this.datastore,t.asyncQueue,(e=>FS(this.syncEngine,e,0)),(function(){return LS.v()?new LS:new S6})())}createSyncEngine(t,e){return(function(a,c,f,d,g,m,T){const w=new eV(a,c,f,d,g,m);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const i=Te(e);Wt(Xh,"RemoteStore shutting down."),i.Ea.add(5),await jg(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}TT.provider={build:()=>new TT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ul("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="FirestoreClient";class _V{constructor(t,e,i,a,c){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=ws.UNAUTHENTICATED,this.clientId=Tw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async f=>{Wt(cu,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Wt(cu,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Uw(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function O1(s,t){s.asyncQueue.verifyOperationInProgress(),Wt(cu,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let i=e.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await X2(t.localStore,a),i=a)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function GS(s,t){s.asyncQueue.verifyOperationInProgress();const e=await yV(s);Wt(cu,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((i=>US(t.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>US(t.remoteStore,a))),s._onlineComponents=t}async function yV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Wt(cu,"Using user provided OfflineComponentProvider");try{await O1(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===Ct.FAILED_PRECONDITION||a.code===Ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;Kd("Error using user provided cache. Falling back to memory cache: "+e),await O1(s,new C0)}}else Wt(cu,"Using default OfflineComponentProvider"),await O1(s,new mV(void 0));return s._offlineComponents}async function mC(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Wt(cu,"Using user provided OnlineComponentProvider"),await GS(s,s._uninitializedComponentsProvider._online)):(Wt(cu,"Using default OnlineComponentProvider"),await GS(s,new TT))),s._onlineComponents}function vV(s){return mC(s).then((t=>t.syncEngine))}async function TV(s){const t=await mC(s),e=t.eventManager;return e.onListen=nV.bind(null,t.syncEngine),e.onUnlisten=rV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=iV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=aV.bind(null,t.syncEngine),e}function wV(s,t,e={}){const i=new Zc;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,d,g,m){const T=new gV({next:E=>{T.Nu(),f.enqueueAndForget((()=>W6(c,w))),E.fromCache&&g.source==="server"?m.reject(new Kt(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new X6(d,T,{includeMetadataChanges:!0,qa:!0});return $6(c,w)})(await TV(s),s.asyncQueue,t,e,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firestore.googleapis.com",$S=!0;class WS{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Kt(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_C,this.ssl=$S}else this.host=t.host,this.ssl=t.ssl??$S;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Y2;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Yk)throw new Kt(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}M5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gC(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Kt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Kt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Kt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class uv{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kt(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Kt(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new S5;switch(i.type){case"firstParty":return new x5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Kt(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=KS.get(e);i&&(Wt("ComponentProvider","Removing Datastore"),KS.delete(e),i.terminate())})(this),Promise.resolve()}}function bV(s,t,e,i={}){s=iu(s,uv);const a=uw(t),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},d=`${t}:${e}`;a&&(RD(`https://${d}`),DD("Firestore",!0)),c.host!==_C&&c.host!==d&&Kd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:d,ssl:a,emulatorOptions:i};if(!ug(g,f)&&(s._setSettings(g),i.mockUserToken)){let m,T;if(typeof i.mockUserToken=="string")m=i.mockUserToken,T=ws.MOCK_USER;else{m=ND(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Kt(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new ws(w)}s._authCredentials=new A5(new a2(m,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new up(this.firestore,t,this._query)}}class Ii{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ii(this.firestore,t,this._key)}toJSON(){return{type:Ii._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Dg(e,Ii._jsonSchema))return new Ii(t,i||null,new ie(Cn.fromString(e.referencePath)))}}Ii._jsonSchemaVersion="firestore/documentReference/1.0",Ii._jsonSchema={type:Si("string",Ii._jsonSchemaVersion),referencePath:Si("string")};class Jc extends up{constructor(t,e,i){super(t,e,E2(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ii(this.firestore,null,new ie(t))}withConverter(t){return new Jc(this.firestore,t,this._path)}}function Pg(s,t,...e){if(s=br(s),o2("collection","path",t),s instanceof uv){const i=Cn.fromString(t,...e);return oS(i),new Jc(s,null,i)}{if(!(s instanceof Ii||s instanceof Jc))throw new Kt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Cn.fromString(t,...e));return oS(i),new Jc(s.firestore,null,i)}}function hv(s,t,...e){if(s=br(s),arguments.length===1&&(t=Tw.newId()),o2("doc","path",t),s instanceof uv){const i=Cn.fromString(t,...e);return aS(i),new Ii(s,null,new ie(i))}{if(!(s instanceof Ii||s instanceof Jc))throw new Kt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Cn.fromString(t,...e));return aS(i),new Ii(s.firestore,s instanceof Jc?s.converter:null,new ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="AsyncQueue";class QS{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J2(this,"async_queue_retry"),this._c=()=>{const i=I1();i&&Wt(YS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=I1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=I1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Zc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!lp(t))throw t;Wt(YS,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ul("INTERNAL UNHANDLED ERROR: ",XS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=Pw.createAndSchedule(this,t,e,i,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&he(47125,{Pc:XS(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function XS(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class hp extends uv{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new QS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new QS(t),this._firestoreClient=void 0,await t}}}function SV(s,t){const e=typeof s=="object"?s:NE(),i=typeof s=="string"?s:_0,a=Og(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=CD("firestore");c&&bV(a,...c)}return a}function Fw(s){if(s._terminated)throw new Kt(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||AV(s),s._firestoreClient}function AV(s){const t=s._freezeSettings(),e=(function(a,c,f,d){return new H5(a,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new _V(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _a(Zi.fromBase64String(t))}catch(e){throw new Kt(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new _a(Zi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:_a._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Dg(t,_a._jsonSchema))return _a.fromBase64String(t.bytes)}}_a._jsonSchemaVersion="firestore/bytes/1.0",_a._jsonSchema={type:Si("string",_a._jsonSchemaVersion),bytes:Si("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Kt(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Kt(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Kt(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return je(this._lat,t._lat)||je(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wo._jsonSchemaVersion}}static fromJSON(t){if(Dg(t,Wo._jsonSchema))return new Wo(t.latitude,t.longitude)}}Wo._jsonSchemaVersion="firestore/geoPoint/1.0",Wo._jsonSchema={type:Si("string",Wo._jsonSchemaVersion),latitude:Si("number"),longitude:Si("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Yo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Dg(t,Yo._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Yo(t.vectorValues);throw new Kt(Ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yo._jsonSchemaVersion="firestore/vectorValue/1.0",Yo._jsonSchema={type:Si("string",Yo._jsonSchemaVersion),vectorValues:Si("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=/^__.*__$/;class CV{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new mu(t,this.data,this.fieldMask,e,this.fieldTransforms):new kg(t,this.data,e,this.fieldTransforms)}}class yC{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new mu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function vC(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:s})}}class Gw{constructor(t,e,i,a,c,f){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Gw({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return x0(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(vC(this.Ac)&&EV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class xV{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ov(t)}Cc(t,e,i,a=!1){return new Gw({Ac:t,methodName:e,Dc:i,path:Xi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fv(s){const t=s._freezeSettings(),e=ov(s._databaseId);return new xV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function TC(s,t,e,i,a,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,t,e,a);Kw("Data must be an object, but it was:",f,i);const d=SC(i,f);let g,m;if(c.merge)g=new Yr(f.fieldMask),m=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const E=wT(t,w,e);if(!f.contains(E))throw new Kt(Ct.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);EC(T,E)||T.push(E)}g=new Yr(T),m=f.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,m=f.fieldTransforms;return new CV(new yr(d),g,m)}class dv extends Hw{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dv}}function wC(s,t,e,i){const a=s.Cc(1,t,e);Kw("Data must be an object, but it was:",a,i);const c=[],f=yr.empty();pu(i,((g,m)=>{const T=$w(t,g,e);m=br(m);const w=a.yc(T);if(m instanceof dv)c.push(T);else{const E=zg(m,w);E!=null&&(c.push(T),f.set(T,E))}}));const d=new Yr(c);return new yC(f,d,a.fieldTransforms)}function bC(s,t,e,i,a,c){const f=s.Cc(1,t,e),d=[wT(t,i,e)],g=[a];if(c.length%2!=0)throw new Kt(Ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<c.length;E+=2)d.push(wT(t,c[E])),g.push(c[E+1]);const m=[],T=yr.empty();for(let E=d.length-1;E>=0;--E)if(!EC(m,d[E])){const N=d[E];let O=g[E];O=br(O);const U=f.yc(N);if(O instanceof dv)m.push(N);else{const D=zg(O,U);D!=null&&(m.push(N),T.set(N,D))}}const w=new Yr(m);return new yC(T,w,f.fieldTransforms)}function RV(s,t,e,i=!1){return zg(e,s.Cc(i?4:3,t))}function zg(s,t){if(AC(s=br(s)))return Kw("Unsupported field value:",t,s),SC(s,t);if(s instanceof Hw)return(function(i,a){if(!vC(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,a){const c=[];let f=0;for(const d of i){let g=zg(d,a.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}})(s,t)}return(function(i,a){if((i=br(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dk(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Mn.fromDate(i);return{timestampValue:S0(a.serializer,c)}}if(i instanceof Mn){const c=new Mn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:S0(a.serializer,c)}}if(i instanceof Wo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _a)return{bytesValue:q2(a.serializer,i._byteString)};if(i instanceof Ii){const c=a.databaseId,f=i.firestore._databaseId;if(!f.isEqual(c))throw a.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Nw(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Yo)return(function(f,d){return{mapValue:{fields:{[g2]:{stringValue:_2},[y0]:{arrayValue:{values:f.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Cw(d.serializer,m)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${X0(i)}`)})(s,t)}function SC(s,t){const e={};return u2(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pu(s,((i,a)=>{const c=zg(a,t.mc(i));c!=null&&(e[i]=c)})),{mapValue:{fields:e}}}function AC(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Mn||s instanceof Wo||s instanceof _a||s instanceof Ii||s instanceof Hw||s instanceof Yo)}function Kw(s,t,e){if(!AC(e)||!l2(e)){const i=X0(e);throw i==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+i)}}function wT(s,t,e){if((t=br(t))instanceof Ug)return t._internalPath;if(typeof t=="string")return $w(s,t);throw x0("Field path arguments must be of type string or ",s,!1,void 0,e)}const NV=new RegExp("[~\\*/\\[\\]]");function $w(s,t,e){if(t.search(NV)>=0)throw x0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new Ug(...t.split("."))._internalPath}catch{throw x0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function x0(s,t,e,i,a){const c=i&&!i.isEmpty(),f=a!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${i}`),f&&(g+=` in document ${a}`),g+=")"),new Kt(Ct.INVALID_ARGUMENT,d+s+g)}function EC(s,t){return s.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t,e,i,a,c){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ii(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new IV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ww("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class IV extends CC{data(){return super.data()}}function Ww(s,t){return typeof t=="string"?$w(s,t):t instanceof Ug?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Kt(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yw{}class DV extends Yw{}function xC(s,t,...e){let i=[];t instanceof Yw&&i.push(t),i=i.concat(e),(function(c){const f=c.filter((g=>g instanceof Qw)).length,d=c.filter((g=>g instanceof pv)).length;if(f>1||f>0&&d>0)throw new Kt(Ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class pv extends DV{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new pv(t,e,i)}_apply(t){const e=this._parse(t);return NC(t._query,e),new up(t.firestore,t.converter,uT(t._query,e))}_parse(t){const e=fv(t.firestore);return(function(c,f,d,g,m,T,w){let E;if(m.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Kt(Ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){JS(w,T);const O=[];for(const U of w)O.push(ZS(g,c,U));E={arrayValue:{values:O}}}else E=ZS(g,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||JS(w,T),E=RV(d,f,w,T==="in"||T==="not-in");return wi.create(m,T,E)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function RC(s,t,e){const i=t,a=Ww("where",s);return pv._create(a,i,e)}class Qw extends Yw{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Qw(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:so.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(a,c){let f=a;const d=c.getFlattenedFilters();for(const g of d)NC(f,g),f=uT(f,g)})(t._query,e),new up(t.firestore,t.converter,uT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ZS(s,t,e){if(typeof(e=br(e))=="string"){if(e==="")throw new Kt(Ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C2(t)&&e.indexOf("/")!==-1)throw new Kt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Cn.fromString(e));if(!ie.isDocumentKey(i))throw new Kt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return mS(s,new ie(i))}if(e instanceof Ii)return mS(s,e._key);throw new Kt(Ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X0(e)}.`)}function JS(s,t){if(!Array.isArray(s)||s.length===0)throw new Kt(Ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function NC(s,t){const e=(function(a,c){for(const f of a)for(const d of f.getFlattenedFilters())if(c.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Kt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Kt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class MV{convertValue(t,e="none"){switch(ou(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(au(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw he(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return pu(t,((a,c)=>{i[a]=this.convertValue(c,e)})),i}convertVectorValue(t){const e=t.fields?.[y0].arrayValue?.values?.map((i=>fi(i.doubleValue)));return new Yo(e)}convertGeoPoint(t){return new Wo(fi(t.latitude),fi(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=tv(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(dg(t));default:return null}}convertTimestamp(t){const e=ru(t);return new Mn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Cn.fromString(t);hn(W2(i),9688,{name:t});const a=new pg(i.get(1),i.get(3)),c=new ie(i.popFirst(5));return a.isEqual(e)||Ul(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(s,t,e){let i;return i=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,i}class Hy{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class kd extends CC{constructor(t,e,i,a,c,f){super(t,e,i,a,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Jy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Ww("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=kd._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}kd._jsonSchemaVersion="firestore/documentSnapshot/1.0",kd._jsonSchema={type:Si("string",kd._jsonSchemaVersion),bundleSource:Si("string","DocumentSnapshot"),bundleName:Si("string"),bundle:Si("string")};class Jy extends kd{data(t={}){return super.data(t)}}class Vd{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Hy(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Jy(this._firestore,this._userDataWriter,i.key,i,new Hy(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Kt(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((d=>{const g=new Jy(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Hy(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>c||d.type!==3)).map((d=>{const g=new Jy(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Hy(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,T=-1;return d.type!==0&&(m=f.indexOf(d.doc.key),f=f.delete(d.doc.key)),d.type!==1&&(f=f.add(d.doc),T=f.indexOf(d.doc.key)),{type:kV(d.type),doc:g,oldIndex:m,newIndex:T}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Vd._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Tw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(e.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function kV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:s})}}Vd._jsonSchemaVersion="firestore/querySnapshot/1.0",Vd._jsonSchema={type:Si("string",Vd._jsonSchemaVersion),bundleSource:Si("string","QuerySnapshot"),bundleName:Si("string"),bundle:Si("string")};class VV extends MV{constructor(t){super(),this.firestore=t}convertBytes(t){return new _a(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ii(this.firestore,null,e)}}function Xw(s){s=iu(s,up);const t=iu(s.firestore,hp),e=Fw(t),i=new VV(t);return OV(s._query),wV(e,s._query).then((a=>new Vd(t,i,s,a)))}function jV(s,t,e,...i){s=iu(s,Ii);const a=iu(s.firestore,hp),c=fv(a);let f;return f=typeof(t=br(t))=="string"||t instanceof Ug?bC(c,"updateDoc",s._key,t,e,i):wC(c,"updateDoc",s._key,t),mv(a,[f.toMutation(s._key,Tr.exists(!0))])}function LV(s){return mv(iu(s.firestore,hp),[new rv(s._key,Tr.none())])}function OC(s,t){const e=iu(s.firestore,hp),i=hv(s),a=IC(s.converter,t);return mv(e,[TC(fv(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,Tr.exists(!1))]).then((()=>i))}function mv(s,t){return(function(i,a){const c=new Zc;return i.asyncQueue.enqueueAndForget((async()=>oV(await vV(i),a,c))),c.promise})(Fw(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fv(t)}set(t,e,i){this._verifyNotCommitted();const a=D1(t,this._firestore),c=IC(a.converter,e,i),f=TC(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,i);return this._mutations.push(f.toMutation(a._key,Tr.none())),this}update(t,e,i,...a){this._verifyNotCommitted();const c=D1(t,this._firestore);let f;return f=typeof(e=br(e))=="string"||e instanceof Ug?bC(this._dataReader,"WriteBatch.update",c._key,e,i,a):wC(this._dataReader,"WriteBatch.update",c._key,e),this._mutations.push(f.toMutation(c._key,Tr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=D1(t,this._firestore);return this._mutations=this._mutations.concat(new rv(e._key,Tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Kt(Ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function D1(s,t){if((s=br(s)).firestore!==t)throw new Kt(Ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(s){return Fw(s=iu(s,hp)),new PV(s,(t=>mv(s,t)))}(function(t,e=!0){(function(a){ap=a})(FM),nu(new Ll("firestore",((i,{instanceIdentifier:a,options:c})=>{const f=i.getProvider("app").getImmediate(),d=new hp(new E5(i.getProvider("auth-internal")),new R5(f,i.getProvider("app-check-internal")),(function(m,T){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Kt(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pg(m.options.projectId,T)})(f,a),f);return c={useFetchStreams:e,...c},d._setSettings(c),d}),"PUBLIC").setMultipleInstances(!0)),Go(nS,iS,t),Go(nS,iS,"esm2020")})();const zV={apiKey:"AIzaSyB0deMtV2CpYVzRrnA9hXmbdLs7t7NciiM",authDomain:"kanamate.firebaseapp.com",projectId:"kanamate",storageBucket:"kanamate.firebasestorage.app",messagingSenderId:"995286381047",appId:"1:995286381047:web:6d1fd272f557a7aa68fef2",measurementId:"G-YNV2CP7K1E"},DC=RE(zV);y5(DC);const Vl=SV(DC),MC=async()=>{const s=Pg(Vl,"studySets");return(await Xw(s)).docs.map(i=>({...i.data(),id:i.id}))},BV=async s=>{const t=Pg(Vl,"studySets"),e=await OC(t,s);return{...s,id:e.id}},qV=async s=>{const t=xC(Pg(Vl,"kanji"),RC("setId","==",s)),e=await Xw(t),i=UV(Vl);e.docs.forEach(c=>{i.delete(c.ref)});const a=hv(Vl,"studySets",s);i.delete(a),await i.commit()},kC=async s=>{const t=xC(Pg(Vl,"kanji"),RC("setId","==",s));return(await Xw(t)).docs.map(a=>({...a.data(),id:a.id}))},FV=async s=>{const t=Pg(Vl,"kanji"),e=await OC(t,s);return{...s,id:e.id}},HV=async s=>{const t=hv(Vl,"kanji",s);await LV(t)},GV=async(s,t)=>{const e=hv(Vl,"kanji",s);await jV(e,t)};var M1={exports:{}},k1={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function KV(){if(tA)return k1;tA=1;var s=R0().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return k1.c=function(t){return s.H.useMemoCache(t)},k1}var eA;function $V(){return eA||(eA=1,M1.exports=KV()),M1.exports}var wn=$V();const VC=s=>{const t=wn.c(10),{item:e}=s;let i;t[0]!==e.accuracy||t[1]!==e.isAttempted?(i=Ig(e.accuracy,e.isAttempted),t[0]=e.accuracy,t[1]=e.isAttempted,t[2]=i):i=t[2];const a=i,c=e.isAttempted?`${e.char} (${e.romajiList||e.readingList}): ${e.accuracy?.toFixed(0)}% (${e.stats?.correct}/${e.stats?.attempts})`:`${e.char} (${e.romajiList||e.readingList}): Non tentato`;let f;t[3]!==e.char?(f=k.jsx("div",{className:"text-3xl font-bold",children:e.char}),t[3]=e.char,t[4]=f):f=t[4];let d;return t[5]!==e.char||t[6]!==a||t[7]!==f||t[8]!==c?(d=k.jsx("div",{className:`p-3 text-center rounded-lg shadow-sm japanese-char 
                        flex items-center justify-center`,title:c,style:a,children:f},e.char),t[5]=e.char,t[6]=a,t[7]=f,t[8]=c,t[9]=d):d=t[9],d},WV=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})}),s[0]=t):t=s[0],t},YV=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),s[0]=t):t=s[0],t},QV=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),s[0]=t):t=s[0],t},gv=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),s[0]=t):t=s[0],t},nA=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),s[0]=t):t=s[0],t},jC=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:[k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"})]}),s[0]=t):t=s[0],t},LC=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})}),s[0]=t):t=s[0],t},PC=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.747 0-3.332.477-4.5 1.253"})}),s[0]=t):t=s[0],t},UC=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:k.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),s[0]=t):t=s[0],t},zC=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:k.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),s[0]=t):t=s[0],t},BC=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s[0]=t):t=s[0],t},qC=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s[0]=t):t=s[0],t},iA=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s[0]=t):t=s[0],t},XV=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 h-5 w-5",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})}),s[0]=t):t=s[0],t},ZV=()=>{const s=wn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),s[0]=t):t=s[0],t},JV=({history:s,allSets:t,onClose:e,dynamicSets:i,dynamicKanjiMap:a})=>{const[c,f]=Ft.useState("hiragana"),[d,g]=Ft.useState(null),m=Ft.useMemo(()=>vE(s),[s]),T=(D,z)=>{const $=t[D];if(!$)return{header:[],rows:[]};const nt=$.filter(R=>R.type===z).reduce((R,C)=>{const M=C.row,V=C.col;if(!M||!V)return R;R[M]||(R[M]={});const P=m[C.char];return R[M][V]={...C,stats:P,isAttempted:!!P,accuracy:P?P.accuracy:null},R},{}),K=ow.filter(R=>nt[R.id]),X=lw.map(R=>{const C=K.map(M=>nt[M.id]?.[R.id]||null);return{id:R.id,label:R.label,chars:C}});return{header:K,rows:X}},w=Ft.useMemo(()=>{const D={};return["hiragana","katakana"].forEach(z=>{t[z]&&(D[z]={},D[z].basic=T(z,"basic"),D[z].dakuten=T(z,"dakuten"),D[z].handakuten=T(z,"handakuten"))}),D},[t,m]),E=Ft.useMemo(()=>i.map(D=>{const z=a[D.id]||[],$=z.map(R=>m[R.char]).filter(Boolean),Q=$.reduce((R,C)=>R+C.attempts,0),nt=$.reduce((R,C)=>R+C.correct,0),K=Q>0?nt/Q*100:null,X=z.map(R=>{const C=m[R.char],M=!!C;return{...R,stats:C,isAttempted:M,accuracy:M?C.accuracy:null,romajiList:R.romaji}});return{id:D.id,name:D.name,accuracy:K,isAttempted:Q>0,kanjiList:X}}),[i,a,m]),N=D=>{const z=w[D];return z?k.jsxs("div",{className:"space-y-6",children:[z.basic&&z.basic.header.length>0&&k.jsx(V1,{title:"Base",gridData:z.basic}),z.dakuten&&z.dakuten.header.length>0&&k.jsx(V1,{title:"Dakuten",gridData:z.dakuten}),z.handakuten&&z.handakuten.header.length>0&&k.jsx(V1,{title:"Handakuten",gridData:z.handakuten})]}):k.jsxs("p",{className:"text-gray-500",children:["Nessun dato per ",D,"."]})},O=()=>k.jsx("div",{className:"space-y-6",children:k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:E.map(D=>{const z=Ig(D.accuracy,D.isAttempted),$=D.isAttempted?`${D.name}: ${D.accuracy?.toFixed(0)}%`:`${D.name}: Non ancora praticato`;return k.jsxs("button",{onClick:()=>g(D.id),title:$,style:z,className:`w-full h-36 p-4 flex flex-col items-center justify-center text-xl font-bold rounded-xl
                              transition-all japanese-char shadow-md hover:shadow-lg hover:-translate-y-1`,children:[k.jsx("span",{className:"text-5xl mb-2",children:""}),k.jsx("span",{className:"text-lg font-semibold capitalize truncate w-full px-2 text-center",children:D.name})]},D.id)})})}),U=D=>{const z=E.find($=>$.id===D);return z?k.jsx("div",{className:"space-y-6",children:k.jsxs("div",{children:[k.jsx("div",{className:"flex justify-between items-center mb-4",children:k.jsxs("button",{onClick:()=>g(null),className:"flex items-center text-gray-500 hover:text-blue-600",children:[k.jsx(gv,{}),k.jsx("span",{className:"ml-1",children:"Tutti i Set"})]})}),k.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize japanese-char mb-4",children:z.name}),k.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-y-2",children:z.kanjiList.map($=>k.jsx(VC,{item:$},$.id||$.char))})]},z.id)}):null};return k.jsxs("div",{className:"bg-white w-full h-full p-6 overflow-y-auto shadow-2xl",children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Statistiche"}),k.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 text-3xl font-light leading-none",children:""})]}),k.jsxs("div",{className:"flex border-b mb-4",children:[k.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="hiragana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("hiragana"),g(null)},children:"Hiragana"},"hiragana"),k.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="katakana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("katakana"),g(null)},children:"Katakana"},"katakana"),k.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="kanji"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("kanji")},children:"Kanji"},"kanji")]}),k.jsxs("div",{className:"mt-6",children:[c==="hiragana"&&N("hiragana"),c==="katakana"&&N("katakana"),c==="kanji"&&(d?U(d):O())]})]})},V1=s=>{const t=wn.c(28),{title:e,gridData:i}=s;let a;t[0]!==e?(a=k.jsx("h4",{className:"text-md font-semibold text-gray-600 mb-2",children:e}),t[0]=e,t[1]=a):a=t[1];const c=`repeat(${i.header.length}, minmax(0, 1fr))`;let f;t[2]!==c?(f={gridTemplateColumns:c},t[2]=c,t[3]=f):f=t[3];let d;t[4]!==i.header?(d=i.header.map(tj),t[4]=i.header,t[5]=d):d=t[5];let g;t[6]!==f||t[7]!==d?(g=k.jsx("div",{className:"grid",style:f,children:d}),t[6]=f,t[7]=d,t[8]=g):g=t[8];let m;if(t[9]!==i.header.length||t[10]!==i.rows){let D;t[12]!==i.header.length?(D=z=>k.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${i.header.length}, minmax(0, 1fr))`},children:z.chars.map(($,Q)=>{if(!$)return k.jsx("div",{className:"w-full h-12 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${z.id}-${Q}`);const nt=Ig($.accuracy??null,$.isAttempted??!1),K=$.isAttempted?`${$.char}: ${$.accuracy?.toFixed(0)}% (${$.stats.correct}/${$.stats.attempts})`:`${$.char}: Non tentato`;return k.jsx("div",{className:"w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2 border-white cursor-help japanese-char",title:K,style:nt,children:$.char},$.char)})},z.id),t[12]=i.header.length,t[13]=D):D=t[13],m=i.rows.map(D),t[9]=i.header.length,t[10]=i.rows,t[11]=m}else m=t[11];let T;t[14]!==g||t[15]!==m?(T=k.jsxs("div",{className:"grow flex flex-col space-y-1",children:[g,m]}),t[14]=g,t[15]=m,t[16]=T):T=t[16];let w;t[17]===Symbol.for("react.memo_cache_sentinel")?(w={paddingTop:"28px"},t[17]=w):w=t[17];let E;t[18]!==i.rows?(E=i.rows.map(ej),t[18]=i.rows,t[19]=E):E=t[19];let N;t[20]!==E?(N=k.jsx("div",{className:"flex flex-col space-y-1",style:w,children:E}),t[20]=E,t[21]=N):N=t[21];let O;t[22]!==N||t[23]!==T?(O=k.jsxs("div",{className:"flex space-x-1",children:[T,N]}),t[22]=N,t[23]=T,t[24]=O):O=t[24];let U;return t[25]!==a||t[26]!==O?(U=k.jsxs("div",{children:[a,O]}),t[25]=a,t[26]=O,t[27]=U):U=t[27],U};function tj(s){return k.jsx("div",{className:"w-full text-center py-1 text-sm font-medium text-gray-500",children:s.label},s.id)}function ej(s){return k.jsx("div",{className:"w-8 h-12 flex items-center justify-center font-bold text-gray-600 text-xs",children:s.label.toUpperCase()},s.id)}const nj=s=>{const t=wn.c(62),{onClose:e,visibleSets:i,allSetNames:a,onPlayClick:c,isSpeechEnabled:f,setIsSpeechEnabled:d,initAudio:g}=s,[m,T]=Ft.useState(i[0]||a[0]);let w,E;t[0]!==m||t[1]!==a?(w=()=>{a.includes(m)||T(a[0])},E=[a,m],t[0]=m,t[1]=a,t[2]=w,t[3]=E):(w=t[2],E=t[3]),Ft.useEffect(w,E);let N;t[4]!==e||t[5]!==c?(N=()=>{c(),e()},t[4]=e,t[5]=c,t[6]=N):N=t[6];const O=N;let U;t[7]!==g||t[8]!==f||t[9]!==c?(U=(P,F)=>{g(),c(),f&&Lh(P)},t[7]=g,t[8]=f,t[9]=c,t[10]=U):U=t[10];const D=U,z=m;if(!z)return null;const $=z;let Q,nt,K,X,R,C;if(t[11]!==m||t[12]!==a||t[13]!==D||t[14]!==O||t[15]!==f||t[16]!==c||t[17]!==d||t[18]!==$){const P=_E[$]||[];X="bg-white w-full h-full p-6 overflow-y-auto shadow-2xl",R=ij;let F;t[25]===Symbol.for("react.memo_cache_sentinel")?(F=k.jsx("h2",{className:"text-2xl font-bold capitalize",children:"Study Panel"}),t[25]=F):F=t[25];let B;t[26]!==c||t[27]!==d?(B=()=>{c(),d(sj)},t[26]=c,t[27]=d,t[28]=B):B=t[28];const At=`p-2 rounded-full transition-colors
                        ${f?"text-green-600 bg-green-100":"text-gray-400 hover:bg-gray-100"}`,Mt=f?"Disattiva sintesi vocale":"Attiva sintesi vocale";let Z;t[29]!==f?(Z=f?k.jsx(BC,{}):k.jsx(qC,{}),t[29]=f,t[30]=Z):Z=t[30];let rt;t[31]!==B||t[32]!==At||t[33]!==Mt||t[34]!==Z?(rt=k.jsx("button",{onClick:B,className:At,title:Mt,children:Z}),t[31]=B,t[32]=At,t[33]=Mt,t[34]=Z,t[35]=rt):rt=t[35];let _t;t[36]!==O?(_t=k.jsx("button",{onClick:O,className:"text-gray-500 hover:text-gray-800 text-3xl font-light leading-none",children:""}),t[36]=O,t[37]=_t):_t=t[37],t[38]!==rt||t[39]!==_t?(C=k.jsxs("div",{className:"flex justify-between items-center mb-2 border-b",children:[F,k.jsxs("div",{className:"flex items-center space-x-2",children:[rt,_t]})]}),t[38]=rt,t[39]=_t,t[40]=C):C=t[40];let ht;if(t[41]!==m||t[42]!==a||t[43]!==c){let G;t[45]!==m||t[46]!==c?(G=at=>k.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${m===at?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{c(),T(at)},children:at.replace("_"," ")},at),t[45]=m,t[46]=c,t[47]=G):G=t[47],ht=a.map(G),t[41]=m,t[42]=a,t[43]=c,t[44]=ht}else ht=t[44];t[48]!==ht?(Q=k.jsx("div",{className:"flex border-b mb-4",children:ht}),t[48]=ht,t[49]=Q):Q=t[49],nt="space-y-6";let ft;t[50]!==D||t[51]!==$?(ft=G=>{if($==="kanji_basic"){const wt=Hh[$];return k.jsxs("div",{children:[k.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-2",children:G.name}),k.jsx("div",{className:"grid grid-cols-5 gap-2",children:wt.map(Tt=>k.jsxs("button",{onClick:()=>D(Tt.char,Tt.romaji),className:`w-full h-16 flex flex-col items-center justify-center text-xl font-bold rounded-md border-2
                                  transition-all japanese-char bg-gray-100 text-gray-700 border-gray-200 hover:border-gray-400 hover:bg-gray-200`,children:[k.jsx("span",{className:"text-2xl",children:Tt.char}),k.jsx("span",{className:"text-xs font-normal",children:Array.isArray(Tt.romaji)?Tt.romaji[0]:Tt.romaji})]},Tt.char))})]},"kanji-grid")}const at=yE($,G.id);return at.header.length===0?null:k.jsxs("div",{children:[k.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-2",children:G.name}),k.jsxs("div",{className:"flex space-x-1",children:[k.jsxs("div",{className:"grow flex flex-col space-y-1",children:[k.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${at.header.length}, minmax(0, 1fr))`},children:at.header.map(rj)}),at.rows.map(wt=>k.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${at.header.length}, minmax(0, 1fr))`},children:wt.chars.map((Tt,It)=>{if(!Tt)return k.jsx("div",{className:"w-full h-16 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${wt.id}-${It}`);const jt=Array.isArray(Tt.romaji)?Tt.romaji[0]:Tt.romaji;return k.jsxs("button",{onClick:()=>D(Tt.char,jt),className:`w-full h-16 flex flex-col items-center justify-center text-xl font-bold rounded-sm border-2
                                        transition-all japanese-char bg-gray-100 text-gray-700 border-gray-200 hover:border-gray-400 hover:bg-gray-200`,children:[k.jsx("span",{className:"text-2xl",children:Tt.char}),k.jsx("span",{className:"text-xs font-normal",children:jt})]},Tt.char)})},wt.id))]}),k.jsx("div",{className:"flex flex-col space-y-1",style:{paddingTop:"28px"},children:at.rows.map(aj)})]})]},G.id)},t[50]=D,t[51]=$,t[52]=ft):ft=t[52],K=P.map(ft),t[11]=m,t[12]=a,t[13]=D,t[14]=O,t[15]=f,t[16]=c,t[17]=d,t[18]=$,t[19]=Q,t[20]=nt,t[21]=K,t[22]=X,t[23]=R,t[24]=C}else Q=t[19],nt=t[20],K=t[21],X=t[22],R=t[23],C=t[24];let M;t[53]!==nt||t[54]!==K?(M=k.jsx("div",{className:nt,children:K}),t[53]=nt,t[54]=K,t[55]=M):M=t[55];let V;return t[56]!==Q||t[57]!==M||t[58]!==X||t[59]!==R||t[60]!==C?(V=k.jsxs("div",{className:X,onClick:R,children:[C,Q,M]}),t[56]=Q,t[57]=M,t[58]=X,t[59]=R,t[60]=C,t[61]=V):V=t[61],V};function ij(s){return s.stopPropagation()}function sj(s){return!s}function rj(s){return k.jsx("div",{className:"w-full text-center py-1 text-sm font-medium text-gray-500 rounded-md",children:s.label},s.id)}function aj(s){return k.jsx("div",{className:"w-8 h-16 flex items-center justify-center font-bold text-gray-600 text-xs rounded-md",children:s.label.toUpperCase()},s.id)}const Gy=s=>{const t=wn.c(5),{label:e,icon:i,isActive:a,onClick:c}=s,f=`flex items-center justify-center space-x-3 w-full p-3 rounded-lg text-left transition-colors
                  ${a?"bg-blue-600 text-white":"text-gray-600 hover:bg-blue-50 hover:text-blue-600"}`;let d;return t[0]!==i||t[1]!==e||t[2]!==c||t[3]!==f?(d=k.jsx("button",{onClick:c,title:e,className:f,children:i}),t[0]=i,t[1]=e,t[2]=c,t[3]=f,t[4]=d):d=t[4],d},oj=s=>{const t=wn.c(41),{activeView:e,setActiveView:i,initAudio:a,isSoundEffectsEnabled:c,setIsSoundEffectsEnabled:f,handlePlayClick:d}=s;let g;t[0]!==d||t[1]!==a||t[2]!==c||t[3]!==f?(g=()=>k.jsx("button",{onClick:()=>{d(),a(),f(lj)},className:`flex items-center justify-center w-full p-3 rounded-lg text-left transition-colors
                       text-gray-600 hover:bg-blue-50 hover:text-blue-600`,title:c?"Disattiva effetti sonori":"Attiva effetti sonori",children:c?k.jsx(UC,{}):k.jsx(zC,{})}),t[0]=d,t[1]=a,t[2]=c,t[3]=f,t[4]=g):g=t[4];const m=g;let T;t[5]===Symbol.for("react.memo_cache_sentinel")?(T=k.jsx(QV,{}),t[5]=T):T=t[5];const w=e==="quiz";let E;t[6]!==i?(E=()=>i("quiz"),t[6]=i,t[7]=E):E=t[7];let N;t[8]!==w||t[9]!==E?(N=k.jsx(Gy,{label:"Pratica",icon:T,isActive:w,onClick:E}),t[8]=w,t[9]=E,t[10]=N):N=t[10];let O;t[11]===Symbol.for("react.memo_cache_sentinel")?(O=k.jsx(PC,{}),t[11]=O):O=t[11];const U=e==="kanjiManager";let D;t[12]!==i?(D=()=>i("kanjiManager"),t[12]=i,t[13]=D):D=t[13];let z;t[14]!==U||t[15]!==D?(z=k.jsx(Gy,{label:"I Miei Kanji",icon:O,isActive:U,onClick:D}),t[14]=U,t[15]=D,t[16]=z):z=t[16];let $;t[17]===Symbol.for("react.memo_cache_sentinel")?($=k.jsx(YV,{}),t[17]=$):$=t[17];const Q=e==="dashboard";let nt;t[18]!==i?(nt=()=>i("dashboard"),t[18]=i,t[19]=nt):nt=t[19];let K;t[20]!==Q||t[21]!==nt?(K=k.jsx(Gy,{label:"Progressi",icon:$,isActive:Q,onClick:nt}),t[20]=Q,t[21]=nt,t[22]=K):K=t[22];let X;t[23]!==K||t[24]!==N||t[25]!==z?(X=k.jsxs("nav",{className:"flex flex-col space-y-2 grow",children:[N,z,K]}),t[23]=K,t[24]=N,t[25]=z,t[26]=X):X=t[26];let R;t[27]!==m?(R=k.jsx(m,{}),t[27]=m,t[28]=R):R=t[28];let C;t[29]===Symbol.for("react.memo_cache_sentinel")?(C=k.jsx(WV,{}),t[29]=C):C=t[29];const M=e==="settings";let V;t[30]!==i?(V=()=>i("settings"),t[30]=i,t[31]=V):V=t[31];let P;t[32]!==M||t[33]!==V?(P=k.jsx(Gy,{label:"Impostazioni",icon:C,isActive:M,onClick:V}),t[32]=M,t[33]=V,t[34]=P):P=t[34];let F;t[35]!==R||t[36]!==P?(F=k.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-200 space-y-2",children:[R,P]}),t[35]=R,t[36]=P,t[37]=F):F=t[37];let B;return t[38]!==X||t[39]!==F?(B=k.jsxs("div",{className:`h-screen bg-white text-gray-800 p-5 flex flex-col border-r border-gray-200 
                  w-20`,children:[X,F]}),t[38]=X,t[39]=F,t[40]=B):B=t[40],B};function lj(s){return!s}const cj=({history:s,allSets:t,onClose:e,dynamicSets:i,dynamicKanjiMap:a})=>{const[c,f]=Ft.useState("hiragana"),[d,g]=Ft.useState(null),m=Ft.useMemo(()=>vE(s),[s]),T=(D,z)=>{const $=t[D];if(!$)return{header:[],rows:[]};const nt=$.filter(R=>R.type===z).reduce((R,C)=>{const M=C.row,V=C.col;if(!M||!V)return R;R[M]||(R[M]={});const P=m[C.char];return R[M][V]={...C,stats:P,isAttempted:!!P,accuracy:P?P.accuracy:null},R},{}),K=ow.filter(R=>nt[R.id]),X=lw.map(R=>{const C=K.map(M=>nt[M.id]?.[R.id]||null);return{id:R.id,label:R.label,chars:C}});return{header:K,rows:X}},w=Ft.useMemo(()=>{const D={};return["hiragana","katakana"].forEach(z=>{t[z]&&(D[z]={},D[z].basic=T(z,"basic"),D[z].dakuten=T(z,"dakuten"),D[z].handakuten=T(z,"handakuten"))}),D},[t,m]),E=Ft.useMemo(()=>i.map(D=>{const z=a[D.id]||[],$=z.map(R=>m[R.char]).filter(Boolean),Q=$.reduce((R,C)=>R+C.attempts,0),nt=$.reduce((R,C)=>R+C.correct,0),K=Q>0?nt/Q*100:null,X=z.map(R=>{const C=m[R.char],M=!!C;return{...R,stats:C,isAttempted:M,accuracy:M?C.accuracy:null,romajiList:R.romaji}});return{id:D.id,name:D.name,accuracy:K,isAttempted:Q>0,kanjiList:X}}),[i,a,m]),N=D=>{const z=w[D];return z?k.jsxs("div",{className:"space-y-6",children:[z.basic&&z.basic.header.length>0&&k.jsx(j1,{title:"Base",gridData:z.basic}),z.dakuten&&z.dakuten.header.length>0&&k.jsx(j1,{title:"Dakuten",gridData:z.dakuten}),z.handakuten&&z.handakuten.header.length>0&&k.jsx(j1,{title:"Handakuten",gridData:z.handakuten})]}):k.jsxs("p",{className:"text-gray-500 text-center p-4",children:["Nessuna statistica ancora per ",D,"."]})},O=()=>k.jsx("div",{className:"space-y-6",children:k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:E.map(D=>{const z=Ig(D.accuracy,D.isAttempted),$=D.isAttempted?`${D.name}: ${D.accuracy?.toFixed(0)}%`:`${D.name}: Non ancora praticato`;return k.jsxs("button",{onClick:()=>g(D.id),title:$,style:z,className:`w-full h-36 p-4 flex flex-col items-center justify-center text-xl font-bold rounded-xl
                              transition-all japanese-char shadow-md hover:shadow-lg hover:-translate-y-1`,children:[k.jsx("span",{className:"text-5xl mb-2",children:""}),k.jsx("span",{className:"text-lg font-semibold capitalize truncate w-full px-2 text-center",children:D.name})]},D.id)})})}),U=D=>{const z=E.find($=>$.id===D);return z?k.jsx("div",{className:"space-y-6",children:k.jsxs("div",{children:[k.jsx("div",{className:"flex justify-between items-center mb-4",children:k.jsxs("button",{onClick:()=>g(null),className:"flex items-center text-gray-500 hover:text-blue-600",children:[k.jsx(gv,{}),k.jsx("span",{className:"ml-1",children:"Tutti i Set"})]})}),k.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize japanese-char mb-4",children:z.name}),k.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-y-2",children:z.kanjiList.map($=>k.jsx(VC,{item:$},$.id||$.char))})]},z.id)}):null};return k.jsxs("div",{className:"bg-white w-full h-full p-6 overflow-y-auto shadow-2xl",children:[k.jsxs("div",{className:"flex justify-between items-center mb-6",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Statistiche"}),k.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 text-3xl font-light leading-none",children:""})]}),s.length===0&&k.jsx("div",{className:"p-6 text-center",children:k.jsx("p",{className:"text-gray-600",children:'Completa qualche quiz nella sezione "Pratica" per vedere le tue statistiche qui!'})}),s.length>0&&k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex border-b mb-4",children:[k.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="hiragana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("hiragana"),g(null)},children:"Hiragana"},"hiragana"),k.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="katakana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("katakana"),g(null)},children:"Katakana"},"katakana"),k.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="kanji"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("kanji")},children:"Kanji"},"kanji")]}),k.jsxs("div",{className:"mt-6",children:[c==="hiragana"&&N("hiragana"),c==="katakana"&&N("katakana"),c==="kanji"&&(d?U(d):O())]})]})]})},j1=s=>{const t=wn.c(28),{title:e,gridData:i}=s;let a;t[0]!==e?(a=k.jsx("h4",{className:"text-md font-semibold text-gray-600 mb-2",children:e}),t[0]=e,t[1]=a):a=t[1];const c=`repeat(${i.header.length}, minmax(0, 1fr))`;let f;t[2]!==c?(f={gridTemplateColumns:c},t[2]=c,t[3]=f):f=t[3];let d;t[4]!==i.header?(d=i.header.map(uj),t[4]=i.header,t[5]=d):d=t[5];let g;t[6]!==f||t[7]!==d?(g=k.jsx("div",{className:"grid",style:f,children:d}),t[6]=f,t[7]=d,t[8]=g):g=t[8];let m;if(t[9]!==i.header.length||t[10]!==i.rows){let D;t[12]!==i.header.length?(D=z=>k.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${i.header.length}, minmax(0, 1fr))`},children:z.chars.map(($,Q)=>{if(!$)return k.jsx("div",{className:"w-full h-12 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${z.id}-${Q}`);const nt=Ig($.accuracy??null,$.isAttempted??!1),K=$.isAttempted?`${$.char}: ${$.accuracy?.toFixed(0)}% (${$.stats.correct}/${$.stats.attempts})`:`${$.char}: Non tentato`;return k.jsx("div",{className:"w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2 border-white cursor-help japanese-char",title:K,style:nt,children:$.char},$.char)})},z.id),t[12]=i.header.length,t[13]=D):D=t[13],m=i.rows.map(D),t[9]=i.header.length,t[10]=i.rows,t[11]=m}else m=t[11];let T;t[14]!==g||t[15]!==m?(T=k.jsxs("div",{className:"grow flex flex-col space-y-1",children:[g,m]}),t[14]=g,t[15]=m,t[16]=T):T=t[16];let w;t[17]===Symbol.for("react.memo_cache_sentinel")?(w={paddingTop:"28px"},t[17]=w):w=t[17];let E;t[18]!==i.rows?(E=i.rows.map(hj),t[18]=i.rows,t[19]=E):E=t[19];let N;t[20]!==E?(N=k.jsx("div",{className:"flex flex-col space-y-1",style:w,children:E}),t[20]=E,t[21]=N):N=t[21];let O;t[22]!==N||t[23]!==T?(O=k.jsxs("div",{className:"flex space-x-1",children:[T,N]}),t[22]=N,t[23]=T,t[24]=O):O=t[24];let U;return t[25]!==a||t[26]!==O?(U=k.jsxs("div",{children:[a,O]}),t[25]=a,t[26]=O,t[27]=U):U=t[27],U};function uj(s){return k.jsx("div",{className:"w-full text-center py-1 text-sm font-medium text-gray-500",children:s.label},s.id)}function hj(s){return k.jsx("div",{className:"w-8 h-12 flex items-center justify-center font-bold text-gray-600 text-xs",children:s.label.toUpperCase()},s.id)}function Zd(s){return s===null?"null":s!==Object(s)?typeof s:{}.toString.call(s).slice(8,-1).toLowerCase()}function ba(s){return Zd(s)!=="string"?!0:!s.length}function fp(s="",t,e){if(ba(s))return!1;const i=s.charCodeAt(0);return t<=i&&i<=e}const sA={HIRAGANA:"toHiragana",KATAKANA:"toKatakana"},FC={HEPBURN:"hepburn"},fj={useObsoleteKana:!1,passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:FC.HEPBURN},dj=65,pj=90,Zw=12353,mj=12438,Jw=12449,gj=12540,_j=19968,yj=40879,vj=12293,Tj=12540,wj=12539,bj=[0,127],Sj=[[256,257],[274,275],[298,299],[332,333],[362,363]],Aj=[[8216,8217],[8220,8221]],Ej=[bj,...Sj],Cj=[[32,47],[58,63],[91,96],[123,126],...Aj];var rA=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function xj(s,t){return!!(s===t||rA(s)&&rA(t))}function Rj(s,t){if(s.length!==t.length)return!1;for(var e=0;e<s.length;e++)if(!xj(s[e],t[e]))return!1;return!0}function HC(s,t){t===void 0&&(t=Rj);var e=null;function i(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(e&&e.lastThis===this&&t(a,e.lastArgs))return e.lastResult;var f=s.apply(this,a);return e={lastResult:f,lastArgs:a,lastThis:this},f}return i.clear=function(){e=null},i}var aA=Object.prototype.hasOwnProperty;function oA(s,t,e){for(e of s.keys())if(jd(e,t))return e}function jd(s,t){var e,i,a;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((i=s.length)===t.length)for(;i--&&jd(s[i],t[i]););return i===-1}if(e===Set){if(s.size!==t.size)return!1;for(i of s)if(a=i,a&&typeof a=="object"&&(a=oA(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(i of s)if(a=i[0],a&&typeof a=="object"&&(a=oA(t,a),!a)||!jd(i[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((i=s.byteLength)===t.byteLength)for(;i--&&s.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(s)){if((i=s.byteLength)===t.byteLength)for(;i--&&s[i]===t[i];);return i===-1}if(!e||typeof s=="object"){i=0;for(e in s)if(aA.call(s,e)&&++i&&!aA.call(t,e)||!(e in t)||!jd(s[e],t[e]))return!1;return Object.keys(t).length===i}}return s!==s&&t!==t}const tb=(s={})=>Object.assign({},fj,s);function GC(s,t,e){const i=t;function a(d,g){if(d[g]!==void 0)return Object.assign({"":d[""]+g},d[g])}function c(d,g){const m=d.charAt(0);return f(Object.assign({"":m},i[m]),d.slice(1),g,g+1)}function f(d,g,m,T){if(!g)return e||Object.keys(d).length===1?d[""]?[[m,T,d[""]]]:[]:[[m,T,null]];if(Object.keys(d).length===1)return[[m,T,d[""]]].concat(c(g,T));const w=a(d,g.charAt(0));return w===void 0?[[m,T,d[""]]].concat(c(g,T)):f(w,g.slice(1),m,T+1)}return c(s,0)}function eb(s){return Object.entries(s).reduce((t,[e,i])=>{const a=Zd(i)==="string";return t[e]=a?{"":i}:eb(i),t},{})}function KC(s,t){return t.split("").reduce((e,i)=>(e[i]===void 0&&(e[i]={}),e[i]),s)}function $C(s={}){const t={};return Zd(s)==="object"&&Object.entries(s).forEach(([e,i])=>{let a=t;e.split("").forEach(c=>{a[c]===void 0&&(a[c]={}),a=a[c]}),a[""]=i}),function(i){const a=JSON.parse(JSON.stringify(i));function c(f,d){return f===void 0||Zd(f)==="string"?d:Object.entries(d).reduce((g,[m,T])=>(g[m]=c(f[m],T),g),f)}return c(a,t)}}function WC(s,t){return t?Zd(t)==="function"?t(s):$C(t)(s):s}const Nj={a:"",i:"",u:"",e:"",o:"",k:{a:"",i:"",u:"",e:"",o:""},s:{a:"",i:"",u:"",e:"",o:""},t:{a:"",i:"",u:"",e:"",o:""},n:{a:"",i:"",u:"",e:"",o:""},h:{a:"",i:"",u:"",e:"",o:""},m:{a:"",i:"",u:"",e:"",o:""},y:{a:"",u:"",o:""},r:{a:"",i:"",u:"",e:"",o:""},w:{a:"",i:"",e:"",o:""},g:{a:"",i:"",u:"",e:"",o:""},z:{a:"",i:"",u:"",e:"",o:""},d:{a:"",i:"",u:"",e:"",o:""},b:{a:"",i:"",u:"",e:"",o:""},p:{a:"",i:"",u:"",e:"",o:""},v:{a:"",i:"",u:"",e:"",o:""}},Ij={".":"",",":"",":":"","/":"","!":"","?":"","~":"","-":"","":"","":"","":"","":"","[":"","]":"","(":"",")":"","{":"","}":""},lA={k:"",s:"",t:"",n:"",h:"",m:"",r:"",g:"",z:"",d:"",b:"",p:"",v:"",q:"",f:""},YC={ya:"",yi:"",yu:"",ye:"",yo:""},QC={a:"",i:"",u:"",e:"",o:""},cA={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},Oj=Object.assign({tu:"",wa:"",ka:"",ke:""},QC,YC),Dj={yi:"",wu:"",ye:"",wi:"",we:"",kwa:"",whu:"",tha:"",thu:"",tho:"",dha:"",dhu:"",dho:""},Mj={wh:"",kw:"",qw:"",q:"",gw:"",sw:"",ts:"",th:"",tw:"",dh:"",dw:"",fw:"",f:""};function kj(){const s=eb(Nj),t=a=>KC(s,a);Object.entries(lA).forEach(([a,c])=>{Object.entries(YC).forEach(([f,d])=>{t(a+f)[""]=c+d})}),Object.entries(Ij).forEach(([a,c])=>{t(a)[""]=c}),Object.entries(Mj).forEach(([a,c])=>{Object.entries(QC).forEach(([f,d])=>{const g=t(a+f);g[""]=c+d})}),["n","n'","xn"].forEach(a=>{t(a)[""]=""}),s.c=JSON.parse(JSON.stringify(s.k)),Object.entries(cA).forEach(([a,c])=>{const f=a.slice(0,a.length-1),d=a.charAt(a.length-1),g=t(f);g[d]=JSON.parse(JSON.stringify(t(c)))});function e(a){return[...Object.entries(cA),["c","k"]].reduce((c,[f,d])=>a.startsWith(d)?c.concat(a.replace(d,f)):c,[])}Object.entries(Oj).forEach(([a,c])=>{const f=w=>w.charAt(w.length-1),d=w=>w.slice(0,w.length-1),g=`x${a}`,m=t(g);m[""]=c;const T=t(`l${d(a)}`);T[f(a)]=m,e(a).forEach(w=>{["l","x"].forEach(E=>{const N=t(E+d(w));N[f(w)]=t(E+a)})})}),Object.entries(Dj).forEach(([a,c])=>{t(a)[""]=c});function i(a){return Object.entries(a).reduce((c,[f,d])=>(f?c[f]=i(d):c[f]=`${d}`,c),{})}return[...Object.keys(lA),"c","y","w","j"].forEach(a=>{const c=s[a];c[a]=i(c)}),delete s.n.n,Object.freeze(JSON.parse(JSON.stringify(s)))}let L1=null;function Vj(){return L1==null&&(L1=kj()),L1}const jj=$C({wi:"",we:""});function Lj(s){const t=JSON.parse(JSON.stringify(s));return t.n.n={"":""},t.n[" "]={"":""},t}function Pj(s=""){return ba(s)?!1:fp(s,dj,pj)}function Bg(s=""){return ba(s)?!1:s.charCodeAt(0)===Tj}function XC(s=""){return ba(s)?!1:s.charCodeAt(0)===wj}function ZC(s=""){return ba(s)?!1:Bg(s)?!0:fp(s,Zw,mj)}function Uj(s=""){const t=[];return s.split("").forEach(e=>{if(Bg(e)||XC(e))t.push(e);else if(ZC(e)){const i=e.charCodeAt(0)+(Jw-Zw),a=String.fromCharCode(i);t.push(a)}else t.push(e)}),t.join("")}const JC=HC((s,t,e)=>{let i=Vj();return i=s?Lj(i):i,i=t?jj(i):i,e&&(i=WC(i,e)),i},jd);function bT(s="",t={},e){let i;return e?i=t:(i=tb(t),e=JC(i.IMEMode,i.useObsoleteKana,i.customKanaMapping)),zj(s,i,e).map(a=>{const[c,f,d]=a;if(d===null)return s.slice(c);const g=i.IMEMode===sA.HIRAGANA,m=i.IMEMode===sA.KATAKANA||[...s.slice(c,f)].every(Pj);return g||!m?d:Uj(d)}).join("")}function zj(s="",t={},e){const{IMEMode:i,useObsoleteKana:a,customKanaMapping:c}=t;return e||(e=JC(i,a,c)),GC(s.toLowerCase(),e,!i)}function Bj(s=""){return ba(s)?!1:Ej.some(([t,e])=>fp(s,t,e))}function tx(s="",t){const e=Zd(t)==="regexp";return ba(s)?!1:[...s].every(i=>{const a=Bj(i);return e?a||t.test(i):a})}function ST(s=""){return fp(s,Jw,gj)}function qj(s=""){return ba(s)?!1:[...s].every(ZC)}function ex(s=""){return ba(s)?!1:[...s].every(ST)}function Fj(s=""){return ba(s)?!1:s.charCodeAt(0)===vj}function Hj(s=""){return fp(s,_j,yj)||Fj(s)}function Gj(s=""){return ba(s)?!1:[...s].every(Hj)}function Kj(s="",t={passKanji:!0}){const e=[...s];let i=!1;return t.passKanji||(i=e.some(Gj)),(e.some(qj)||e.some(ex))&&e.some(tx)&&!i}const $j=(s,t)=>Bg(s)&&t<1,Wj=(s,t)=>Bg(s)&&t>0,Yj=s=>["",""].includes(s),Qj={a:"",i:"",u:"",e:"",o:""};function t0(s="",t,{isDestinationRomaji:e,convertLongVowelMark:i}={}){let a="";return s.split("").reduce((c,f,d)=>{if(XC(f)||$j(f,d)||Yj(f))return c.concat(f);if(i&&a&&Wj(f,d)){const g=t(a).slice(-1);return ST(s[d-1])&&g==="o"&&e?c.concat(""):c.concat(Qj[g])}if(!Bg(f)&&ST(f)){const g=f.charCodeAt(0)+(Zw-Jw),m=String.fromCharCode(g);return a=m,c.concat(m)}return a="",c.concat(f)},[]).join("")}let P1=null;const Xj={:"a",:"i",:"u",:"e",:"o",:"ka",:"ki",:"ku",:"ke",:"ko",:"sa",:"shi",:"su",:"se",:"so",:"ta",:"chi",:"tsu",:"te",:"to",:"na",:"ni",:"nu",:"ne",:"no",:"ha",:"hi",:"fu",:"he",:"ho",:"ma",:"mi",:"mu",:"me",:"mo",:"ra",:"ri",:"ru",:"re",:"ro",:"ya",:"yu",:"yo",:"wa",:"wi",:"we",:"wo",:"n",:"ga",:"gi",:"gu",:"ge",:"go",:"za",:"ji",:"zu",:"ze",:"zo",:"da",:"ji",:"zu",:"de",:"do",:"ba",:"bi",:"bu",:"be",:"bo",:"pa",:"pi",:"pu",:"pe",:"po",:"va",:"vi",:"vu",:"ve",:"vo"},Zj={"":".","":",","":":","":"/","":"!","":"?","":"~",:"-","":"","":"","":"","":"","":"[","":"]","":"(","":")","":"{","":"}","":" "},Jj=["","","","","","","",""],U1={:"ya",:"yu",:"yo"},t9={:"yi",:"ye"},e9={:"a",:"i",:"u",:"e",:"o"},n9=["","","","","","","","","","",""],i9={:"sh",:"ch",:"j",:"j"},s9={:"",:"ya",:"yu",:"yo",:"a",:"i",:"u",:"e",:"o"},uA={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function r9(){return P1==null&&(P1=o9()),P1}function a9(s){switch(s){case FC.HEPBURN:return r9();default:return{}}}function o9(){const s=eb(Xj),t=i=>KC(s,i),e=(i,a)=>{t(i)[""]=a};return Object.entries(Zj).forEach(([i,a])=>{t(i)[""]=a}),[...Object.entries(U1),...Object.entries(e9)].forEach(([i,a])=>{e(i,a)}),n9.forEach(i=>{const a=t(i)[""][0];Object.entries(U1).forEach(([c,f])=>{e(i+c,a+f)}),Object.entries(t9).forEach(([c,f])=>{e(i+c,a+f)})}),Object.entries(i9).forEach(([i,a])=>{Object.entries(U1).forEach(([c,f])=>{e(i+c,a+f[1])}),e(`${i}`,`${a}yi`),e(`${i}`,`${a}e`)}),s.=nx(s),Object.entries(s9).forEach(([i,a])=>{e(i,a)}),Jj.forEach(i=>{e(`${i}`,`n'${t(i)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(s)))}function nx(s){return Object.entries(s).reduce((t,[e,i])=>{if(e)t[e]=nx(i);else{const a=i.charAt(0);t[e]=Object.keys(uA).includes(a)?uA[a]+i:i}return t},{})}const ix=HC((s,t)=>{let e=a9(s);return t&&(e=WC(e,t)),e},jd);function Ld(s="",t={},e){const i=tb(t);return e||(e=ix(i.romanization,i.customRomajiMapping)),l9(s,i,e).map(a=>{const[c,f,d]=a;return i.upcaseKatakana&&ex(s.slice(c,f))?d.toUpperCase():d}).join("")}function l9(s,t,e){e||(e=ix(t.romanization,t.customRomajiMapping));const i=Object.assign({},{isDestinationRomaji:!0},t);return GC(t0(s,Ld,i),e,!t.IMEMode)}function c9(s=""){return ba(s)?!1:Cj.some(([t,e])=>fp(s,t,e))}function u9(s="",t={}){const e=tb(t);if(e.passRomaji)return t0(s,Ld,e);if(Kj(s,{passKanji:!0})){const i=t0(s,Ld,e);return bT(i.toLowerCase(),e)}return tx(s)||c9(s)?bT(s.toLowerCase(),e):t0(s,Ld,e)}const h9=({refreshDynamicData:s})=>{const[t,e]=Ft.useState([]),[i,a]=Ft.useState([]),[c,f]=Ft.useState(null),[,d]=Ft.useState(!0),[,g]=Ft.useState(!1),[m,T]=Ft.useState(null),[w,E]=Ft.useState(""),[N,O]=Ft.useState(""),[U,D]=Ft.useState(""),[z,$]=Ft.useState(null),[Q,nt]=Ft.useState("list");Ft.useEffect(()=>{(async()=>{d(!0),T(null);try{const ft=await MC();e(ft)}catch{}finally{d(!1)}})()},[]);const K=ht=>{const ft=ht.target.value,G=bT(ft,{isIME:!0,useObsoleteKana:!1});O(G)},X=async ht=>{f(ht),g(!0),T(null);try{const ft=await kC(ht.id);a(ft)}catch{}finally{g(!1)}},R=()=>{f(null),a([]),T(null),P(),nt("list")},C=async ht=>{if(ht.trim()==="")return;const ft={name:ht.trim()};try{const G=await BV(ft);G&&G.id?(e([...t,G]),await s(),await X(G)):T("Impossibile creare il set. ID non ricevuto.")}catch(G){T(G instanceof Error?G.message:"Errore sconosciuto")}},M=async()=>{const ht=window.prompt("Come vuoi chiamare il nuovo set?");ht&&ht.trim()!==""&&await C(ht.trim())},V=async ht=>{if(window.confirm("Sei sicuro? Questo eliminer il set E TUTTI i kanji al suo interno."))try{await qV(ht),e(t.filter(ft=>ft.id!==ht)),await s()}catch{}},P=()=>{$(null),E(""),O(""),D("")},F=ht=>{$(ht),E(ht.char),O(ht.reading),D(ht.meaning)},B=async()=>{if(!z)return;const ht=Ld(N),ft={char:w,reading:N,romaji:ht,meaning:U};try{await GV(z.id,ft),a(i.map(G=>G.id===z.id?{...G,...ft}:G)),P(),await s()}catch{}},At=async()=>{if(!c||!w.trim()||!N.trim()||!U.trim())return;const ht=Ld(N),ft={char:w,reading:N,romaji:ht,meaning:U,setId:c.id};try{const G=await FV(ft);a([...i,G]),E(""),O(""),D(""),await s()}catch{}},Mt=async ht=>{try{await HV(ht),a(i.filter(ft=>ft.id!==ht)),await s()}catch{}},Z=ht=>{const ft=ht.length;return ft<=1?"text-8xl":ft===2?"text-7xl":ft===3?"text-6xl":ft===4?"text-5xl":ft<=6?"text-4xl":"text-3xl"},rt=()=>k.jsx(k.Fragment,{children:k.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 mt-6",children:[k.jsx("button",{onClick:M,className:"w-full h-48 p-4 flex flex-col justify-center items-center rounded-2xl shadow-lg bg-white text-gray-400 hover:text-blue-600 hover:shadow-xl transition transform hover:-translate-y-1 border-2 border-dashed border-gray-300 hover:border-blue-500 cursor-pointer group",title:"Crea un nuovo set",children:k.jsx("span",{className:"text-8xl font-light text-gray-400 group-hover:text-blue-500 transition-colors pb-4",children:"+"})}),t.map(ht=>k.jsxs("div",{className:"relative w-full h-48 rounded-2xl shadow-lg bg-white text-gray-800 transition transform hover:shadow-xl hover:-translate-y-1",children:[k.jsxs("button",{onClick:()=>X(ht),className:"w-full h-full p-4 flex flex-col justify-between items-center rounded-2xl",children:[k.jsx("span",{className:"text-7xl font-bold japanese-char text-blue-600 mt-6",children:""}),k.jsx("span",{className:"text-xl font-semibold japanese-char truncate w-full text-center",children:ht.name})]}),k.jsx("button",{onClick:()=>V(ht.id),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-100 rounded-full z-10 transition",title:`Elimina set ${ht.name}`,children:k.jsx(nA,{})})]},ht.id))]})}),_t=()=>{const ht=Z(w);return k.jsxs(k.Fragment,{children:[k.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:c?.name}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-8",children:[k.jsxs("div",{className:"md:col-span-4 md:col-start-2 space-y-4",children:[k.jsxs("div",{className:"w-full h-64 p-6 flex flex-col items-center justify-center space-y-4 rounded-2xl shadow-lg bg-white",children:[k.jsx("input",{type:"text",value:w,onChange:ft=>E(ft.target.value),placeholder:"",className:`w-full border-none focus:ring-0 focus:outline-none bg-transparent font-bold japanese-char text-blue-600 text-center placeholder:text-blue-100 
                          ${ht}`}),k.jsx("input",{type:"text",value:N,onChange:K,placeholder:"Lettura",className:"w-full border-none focus:ring-0 focus:outline-none bg-transparent text-3xl font-semibold japanese-char text-gray-800 text-center placeholder:text-gray-300",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})]}),k.jsx("input",{type:"text",value:U,onChange:ft=>D(ft.target.value),placeholder:"Significato (es. io)",className:"w-full p-4 bg-white rounded-lg focus:outline-none focus:ring-0 border-none text-lg shadow-lg"}),k.jsx("button",{onClick:z?B:At,className:"w-full p-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",children:z?"Salva Modifiche":"Aggiungi"}),z&&k.jsx("button",{onClick:P,className:"w-full p-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition",children:"Annulla"})]}),k.jsx("div",{className:"md:col-span-4 md:col-start-7",children:k.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[k.jsxs("div",{className:"flex justify-end mb-4",children:[k.jsx("button",{onClick:()=>nt("list"),className:`p-2 rounded-l-lg ${Q==="list"?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:"Vista Lista",children:k.jsx(ZV,{})}),k.jsx("button",{onClick:()=>nt("grid"),className:`p-2 rounded-r-lg ${Q==="grid"?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:"Vista Griglia",children:k.jsx(XV,{})})]}),k.jsxs("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto hide-scrollbar",children:[Q==="list"&&i.map(ft=>k.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center p-3 bg-gray-50 rounded-lg",children:[k.jsx("span",{className:"font-bold text-2xl japanese-char",children:ft.char}),k.jsx("span",{className:"japanese-char",children:ft.reading}),k.jsx("span",{children:ft.meaning}),k.jsxs("div",{className:"flex justify-end items-center",children:[k.jsx("button",{onClick:()=>F(ft),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-full",children:k.jsx(LC,{})}),k.jsx("button",{onClick:()=>Mt(ft.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-full",children:k.jsx(nA,{})})]})]},ft.id)),Q==="grid"&&k.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:i.map(ft=>k.jsx("div",{className:"flex justify-center items-center p-2 bg-gray-50 rounded-lg aspect-square",title:`${ft.reading} (${ft.meaning})`,children:k.jsx("span",{className:"font-bold text-2xl japanese-char",children:ft.char})},ft.id))})]})]})})]})]})};return k.jsxs("div",{className:"w-full p-8 relative",children:[k.jsx("style",{children:`
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}),m&&k.jsx("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg mb-4",children:m}),c&&k.jsx("button",{onClick:R,className:"absolute top-8 right-8 p-2 text-gray-500 hover:text-gray-800 transition rounded-full hover:bg-gray-100",title:"Torna ai set",children:k.jsx(gv,{})}),c?_t():rt()]})},z1=s=>{const t=wn.c(10),{char:e,title:i,isSelected:a,onClick:c}=s,f=`w-28 h-28 md:w-64 md:h-64 p-4 md:p-6 flex flex-col justify-between items-center rounded-2xl shadow-lg
                transition-all duration-300 transform
                ${a?"bg-blue-600 text-white shadow-blue-300 scale-105":"bg-white text-gray-800 hover:shadow-xl hover:-translate-y-1"}`,d=`text-5xl md:text-8xl font-bold japanese-char ${a?"text-white":"text-blue-600"}`;let g;t[0]!==e||t[1]!==d?(g=k.jsx("div",{className:d,children:e}),t[0]=e,t[1]=d,t[2]=g):g=t[2];let m;t[3]!==i?(m=k.jsx("div",{className:"text-lg md:text-3xl font-semibold japanese-char",children:i}),t[3]=i,t[4]=m):m=t[4];let T;return t[5]!==c||t[6]!==f||t[7]!==g||t[8]!==m?(T=k.jsxs("button",{onClick:c,className:f,children:[g,m]}),t[5]=c,t[6]=f,t[7]=g,t[8]=m,t[9]=T):T=t[9],T},f9=s=>{const t=wn.c(19),{direction:e,setDirection:i,onPlayClick:a}=s,c=e==="charToRomaji",f=`absolute top-1 bottom-1 w-1/2 bg-blue-600 rounded-full shadow-md
                      transition-all duration-300 ease-out
                      ${c?"transform translate-x-0":"transform translate-x-full"}`;let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={width:"calc(50% - 4px)",left:"2px",right:"2px"},t[0]=d):d=t[0];let g;t[1]!==f?(g=k.jsx("span",{className:f,style:d}),t[1]=f,t[2]=g):g=t[2];const m=`relative z-10 w-1/2 text-center py-2 rounded-full transition-colors duration-300 japanese-char
                      ${c?"text-white font-semibold":"text-gray-600"}`;let T;t[3]!==a||t[4]!==i?(T=()=>{a(),i("charToRomaji")},t[3]=a,t[4]=i,t[5]=T):T=t[5];let w;t[6]!==m||t[7]!==T?(w=k.jsx("div",{className:m,onClick:T,children:"  a"}),t[6]=m,t[7]=T,t[8]=w):w=t[8];const E=`relative z-10 w-1/2 text-center py-2 rounded-full transition-colors duration-300 japanese-char
                      ${c?"text-gray-600":"text-white font-semibold"}`;let N;t[9]!==a||t[10]!==i?(N=()=>{a(),i("romajiToChar")},t[9]=a,t[10]=i,t[11]=N):N=t[11];let O;t[12]!==E||t[13]!==N?(O=k.jsx("div",{className:E,onClick:N,children:"a  "}),t[12]=E,t[13]=N,t[14]=O):O=t[14];let U;return t[15]!==g||t[16]!==w||t[17]!==O?(U=k.jsx("div",{className:"w-full max-w-lg p-6 bg-white rounded-xl shadow-lg",children:k.jsxs("div",{className:"relative flex w-full bg-gray-200 rounded-full p-1 cursor-pointer",children:[g,w,O]})}),t[15]=g,t[16]=w,t[17]=O,t[18]=U):U=t[18],U},d9=s=>{const t=wn.c(66),{screen:e,handlePlayClick:i,selectedSets:a,toggleMode:c,direction:f,setDirection:d,setShowStudyPanel:g,startQuiz:m,available:T,isTimedMode:w,setIsTimedMode:E}=s,N=`w-full h-full p-8 flex flex-col justify-center items-center relative
                        transition-all duration-500 ease-in-out
                        ${e==="quiz"?"-translate-x-full opacity-70":"translate-x-0 opacity-100"}`;let O;t[0]!==a?(O=a.includes("hiragana"),t[0]=a,t[1]=O):O=t[1];let U;t[2]!==i||t[3]!==c?(U=()=>{i(),c("hiragana")},t[2]=i,t[3]=c,t[4]=U):U=t[4];let D;t[5]!==O||t[6]!==U?(D=k.jsx(z1,{char:"",title:"Hiragana",isSelected:O,onClick:U}),t[5]=O,t[6]=U,t[7]=D):D=t[7];let z;t[8]!==a?(z=a.includes("katakana"),t[8]=a,t[9]=z):z=t[9];let $;t[10]!==i||t[11]!==c?($=()=>{i(),c("katakana")},t[10]=i,t[11]=c,t[12]=$):$=t[12];let Q;t[13]!==z||t[14]!==$?(Q=k.jsx(z1,{char:"",title:"Katakana",isSelected:z,onClick:$}),t[13]=z,t[14]=$,t[15]=Q):Q=t[15];let nt;t[16]!==a?(nt=a.includes("kanji"),t[16]=a,t[17]=nt):nt=t[17];let K;t[18]!==i||t[19]!==c?(K=()=>{i(),c("kanji")},t[18]=i,t[19]=c,t[20]=K):K=t[20];let X;t[21]!==nt||t[22]!==K?(X=k.jsx(z1,{char:"",title:"Kanji",isSelected:nt,onClick:K}),t[21]=nt,t[22]=K,t[23]=X):X=t[23];let R;t[24]!==X||t[25]!==D||t[26]!==Q?(R=k.jsxs("div",{className:"flex flex-row space-x-4 md:space-x-8 mb-10 mt-10",children:[D,Q,X]}),t[24]=X,t[25]=D,t[26]=Q,t[27]=R):R=t[27];let C;t[28]!==f||t[29]!==i||t[30]!==d?(C=k.jsx("div",{className:"w-full max-w-lg mt-4 mb-10",children:k.jsx(f9,{direction:f,setDirection:d,onPlayClick:i})}),t[28]=f,t[29]=i,t[30]=d,t[31]=C):C=t[31];let M;t[32]!==i||t[33]!==g?(M=()=>{i(),g(!0)},t[32]=i,t[33]=g,t[34]=M):M=t[34];const V=T.length===0;let P;t[35]===Symbol.for("react.memo_cache_sentinel")?(P=k.jsx(PC,{}),t[35]=P):P=t[35];let F;t[36]!==M||t[37]!==V?(F=k.jsx("button",{onClick:M,disabled:V,className:`p-4 rounded-xl transition-all shadow-md bg-gray-200 text-gray-500 hover:bg-gray-300
                         disabled:bg-gray-100 disabled:text-gray-300 disabled:cursor-not-allowed`,title:"Modalit Studio",children:P}),t[36]=M,t[37]=V,t[38]=F):F=t[38];let B;t[39]!==i||t[40]!==m?(B=()=>{i(),m()},t[39]=i,t[40]=m,t[41]=B):B=t[41];const At=T.length===0;let Mt;t[42]!==B||t[43]!==At?(Mt=k.jsx("button",{onClick:B,disabled:At,className:`grow bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg shadow-lg hover:bg-blue-700 transition
                         disabled:bg-gray-300 disabled:cursor-not-allowed disabled:shadow-none`,children:"Start!"}),t[42]=B,t[43]=At,t[44]=Mt):Mt=t[44];let Z;t[45]!==i||t[46]!==E?(Z=()=>{i(),E(p9)},t[45]=i,t[46]=E,t[47]=Z):Z=t[47];const rt=`p-4 rounded-xl transition-all shadow-md
                          ${w?"bg-orange-500 text-white shadow-orange-200":"bg-gray-200 text-gray-500 hover:bg-gray-300"}`,_t=w?"Disattiva Modalit a Tempo":"Attiva Modalit a Tempo";let ht;t[48]===Symbol.for("react.memo_cache_sentinel")?(ht=k.jsx(jC,{}),t[48]=ht):ht=t[48];let ft;t[49]!==Z||t[50]!==rt||t[51]!==_t?(ft=k.jsx("button",{onClick:Z,className:rt,title:_t,children:ht}),t[49]=Z,t[50]=rt,t[51]=_t,t[52]=ft):ft=t[52];let G;t[53]!==F||t[54]!==Mt||t[55]!==ft?(G=k.jsxs("div",{className:"flex w-full max-w-sm space-x-2",children:[F,Mt,ft]}),t[53]=F,t[54]=Mt,t[55]=ft,t[56]=G):G=t[56];const at=w?"(Blitz Mode Active)":"";let wt;t[57]!==T.length||t[58]!==at?(wt=k.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[T.length," characters ",at]}),t[57]=T.length,t[58]=at,t[59]=wt):wt=t[59];let Tt;return t[60]!==N||t[61]!==R||t[62]!==C||t[63]!==G||t[64]!==wt?(Tt=k.jsxs("div",{className:N,children:[R,C,G,wt]}),t[60]=N,t[61]=R,t[62]=C,t[63]=G,t[64]=wt,t[65]=Tt):Tt=t[65],Tt};function p9(s){return!s}const m9=s=>{const t=wn.c(83),{selectedModes:e,selectionMap:i,setSelectionMap:a,resetProgress:c,direction:f,isAutoSkipEnabled:d,setIsAutoSkipEnabled:g,onPlayClick:m,dynamicSets:T,dynamicKanjiMap:w}=s,[E,N]=Ft.useState("hiragana"),[O,U]=Ft.useState(null);let D;t[0]!==e[0]?(D=()=>{const gt=e[0];gt==="hiragana"||gt==="katakana"?N(gt):gt&&N("kanji")},t[0]=e[0],t[1]=D):D=t[1];let z;t[2]!==e?(z=[e],t[2]=e,t[3]=z):z=t[3],Ft.useEffect(D,z);let $;t[4]!==m||t[5]!==a?($=(gt,Pt)=>{m(),a(Yt=>{const Bt={...Yt},Ot=new Set(Bt[Pt]||[]);return Ot.has(gt)?Ot.delete(gt):Ot.add(gt),Bt[Pt]=Ot,Bt})},t[4]=m,t[5]=a,t[6]=$):$=t[6];const Q=$;let nt;t[7]!==m||t[8]!==a?(nt=(gt,Pt)=>{m(),a(Yt=>{const Bt={...Yt},Ot=new Set(Bt[Pt]||[]),Vt=gt.filter(g9).map(_9);return Vt.length===0?Yt:(Vt.every(oe=>Ot.has(oe))?Vt.forEach(oe=>Ot.delete(oe)):Vt.forEach(oe=>Ot.add(oe)),Bt[Pt]=Ot,Bt)})},t[7]=m,t[8]=a,t[9]=nt):nt=t[9];const K=nt;let X;t[10]!==m||t[11]!==a?(X=(gt,Pt)=>{m(),a(Yt=>{const Bt={...Yt},Ot=new Set(Bt[Pt]||[]),Vt=gt.rows.flatMap(y9).filter(v9).map(T9);return Vt.length===0?Yt:(Vt.every(oe=>Ot.has(oe))?Vt.forEach(oe=>Ot.delete(oe)):Vt.forEach(oe=>Ot.add(oe)),Bt[Pt]=Ot,Bt)})},t[10]=m,t[11]=a,t[12]=X):X=t[12];const R=X;let C;t[13]!==m||t[14]!==a?(C=(gt,Pt)=>{m(),a(Yt=>{const Bt={...Yt},Ot=new Set(Bt[Pt]||[]),Vt=gt.map(w9).filter(Boolean);return Vt.length===0?Yt:(Vt.every(oe=>Ot.has(oe))?Vt.forEach(oe=>Ot.delete(oe)):Vt.forEach(oe=>Ot.add(oe)),Bt[Pt]=Ot,Bt)})},t[13]=m,t[14]=a,t[15]=C):C=t[15];const M=C;let V;t[16]!==R||t[17]!==i||t[18]!==Q||t[19]!==K?(V=gt=>{const Pt=_E[gt]||[];return k.jsx("div",{className:"space-y-6",children:Pt.map(Yt=>{const Bt=yE(gt,Yt.id);return Bt.header.length===0?null:k.jsxs("div",{children:[k.jsxs("div",{className:"flex justify-between items-center mb-2",children:[k.jsx("h3",{className:"text-md font-semibold text-gray-600",children:Yt.name}),k.jsx("button",{onClick:()=>R(Bt,gt),className:"text-gray-500 hover:text-blue-600 p-1 rounded-full hover:bg-gray-100",title:"Seleziona/Deseleziona Tutti",children:k.jsx(iA,{})})]}),k.jsxs("div",{className:"flex space-x-1",children:[k.jsxs("div",{className:"grow flex flex-col space-y-1",children:[k.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${Bt.header.length}, minmax(0, 1fr))`},children:Bt.header.map((Ot,Vt)=>k.jsx("button",{onClick:()=>K(Bt.rows.map(te=>te.chars[Vt]),gt),className:"w-full text-center py-1 text-sm font-medium text-gray-500 rounded-md hover:bg-gray-200",title:`Seleziona/Deseleziona colonna ${Ot.label}`,children:Ot.label},Ot.id))}),Bt.rows.map(Ot=>k.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${Bt.header.length}, minmax(0, 1fr))`},children:Ot.chars.map((Vt,te)=>{if(!Vt)return k.jsx("div",{className:"w-full h-12 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${Ot.id}-${te}`);const oe=i[gt]?.has(Vt.char);return k.jsx("button",{onClick:()=>Q(Vt.char,gt),className:`w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2
                                        transition-all japanese-char
                                        ${oe?"bg-blue-600 text-white border-blue-600":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,children:Vt.char},Vt.char)})},Ot.id))]}),k.jsx("div",{className:"flex flex-col space-y-1",style:{paddingTop:"28px"},children:Bt.rows.map(Ot=>k.jsx("button",{onClick:()=>K(Ot.chars,gt),className:"w-8 h-12 flex items-center justify-center font-bold text-gray-600 text-xs rounded-md hover:bg-gray-200",title:`Seleziona/Deseleziona riga ${Ot.label.toUpperCase()}`,children:Ot.label.toUpperCase()},Ot.id))})]})]},Yt.id)})})},t[16]=R,t[17]=i,t[18]=Q,t[19]=K,t[20]=V):V=t[20];const P=V;let F;t[21]!==w||t[22]!==T||t[23]!==M||t[24]!==m||t[25]!==i?(F=()=>k.jsx("div",{className:"space-y-6",children:k.jsx("div",{children:k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:T.map(gt=>{const Pt=w[gt.id]||[],Yt=Pt.map(b9),Bt=i[gt.id]||new Set,Ot=Yt.length>0&&Yt.every(We=>Bt.has(We)),Vt=!Ot&&Yt.some(We=>Bt.has(We));let te,oe="text-gray-500 hover:text-blue-700";return Ot?(te="bg-blue-600 text-white border-blue-600 shadow-lg",oe="text-white hover:text-white/80"):Vt?(te="bg-blue-50 text-blue-700 border-transparent shadow-md",oe="text-blue-600 hover:text-blue-800"):te="bg-white text-gray-800 border-transparent shadow-md hover:shadow-lg hover:-translate-y-1",k.jsxs("div",{className:"relative",children:[k.jsxs("button",{onClick:()=>M(Pt,gt.id),title:`Clicca to Seleziona/Deseleziona tutti i ${Pt.length} kanji in "${gt.name}"`,className:`w-full h-36 p-4 flex flex-col items-center justify-center text-xl font-bold rounded-xl border-2
                                transition-all japanese-char ${te}`,children:[k.jsx("span",{className:"text-5xl mb-2",children:""}),k.jsx("span",{className:"text-lg font-semibold capitalize truncate w-full px-2 text-center",children:gt.name}),k.jsxs("span",{className:"text-xs font-normal",children:[Bt.size," / ",Yt.length]})]}),k.jsx("button",{onClick:We=>{We.stopPropagation(),m(),U(gt.id)},title:`Modifica kanji in "${gt.name}"`,className:`absolute top-2 right-2 p-2 transition ${oe}`,children:k.jsx(LC,{})})]},gt.id)})})})}),t[21]=w,t[22]=T,t[23]=M,t[24]=m,t[25]=i,t[26]=F):F=t[26];const B=F;let At;t[27]!==w||t[28]!==T||t[29]!==M||t[30]!==i||t[31]!==Q?(At=gt=>{const Pt=w[gt]||[],Yt=T.find(Bt=>Bt.id===gt);return k.jsx("div",{className:"space-y-6",children:k.jsxs("div",{children:[k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsxs("button",{onClick:()=>U(null),className:"flex items-center text-gray-500 hover:text-blue-600",children:[k.jsx(gv,{}),k.jsx("span",{className:"ml-1",children:"Tutti i Set"})]}),k.jsx("button",{onClick:()=>M(Pt,gt),className:"text-gray-500 hover:text-blue-600 p-1 rounded-full hover:bg-gray-100",title:"Seleziona/Deseleziona Tutti",children:k.jsx(iA,{})})]}),k.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize japanese-char mb-4",children:Yt?.name}),k.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-y-2",children:Pt.map(Bt=>{const Ot=Bt.id,Vt=i[gt]?.has(Ot);return k.jsx("button",{onClick:()=>Q(Ot,gt),title:`${Bt.reading} (${Bt.meaning})`,className:`w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2
                              transition-all japanese-char
                              ${Vt?"bg-blue-600 text-white border-blue-600":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,children:Bt.char},Ot)})})]},gt)})},t[27]=w,t[28]=T,t[29]=M,t[30]=i,t[31]=Q,t[32]=At):At=t[32];const Mt=At,Z=`py-2 px-4 capitalize japanese-char ${E==="hiragana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`;let rt;t[33]!==m?(rt=()=>{m(),N("hiragana"),U(null)},t[33]=m,t[34]=rt):rt=t[34];let _t;t[35]!==Z||t[36]!==rt?(_t=k.jsx("button",{className:Z,onClick:rt,children:"Hiragana"},"hiragana"),t[35]=Z,t[36]=rt,t[37]=_t):_t=t[37];const ht=`py-2 px-4 capitalize japanese-char ${E==="katakana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`;let ft;t[38]!==m?(ft=()=>{m(),N("katakana"),U(null)},t[38]=m,t[39]=ft):ft=t[39];let G;t[40]!==ht||t[41]!==ft?(G=k.jsx("button",{className:ht,onClick:ft,children:"Katakana"},"katakana"),t[40]=ht,t[41]=ft,t[42]=G):G=t[42];const at=`py-2 px-4 capitalize japanese-char ${E==="kanji"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`;let wt;t[43]!==m?(wt=()=>{m(),N("kanji")},t[43]=m,t[44]=wt):wt=t[44];let Tt;t[45]!==at||t[46]!==wt?(Tt=k.jsx("button",{className:at,onClick:wt,children:"Kanji"},"kanji"),t[45]=at,t[46]=wt,t[47]=Tt):Tt=t[47];let It;t[48]!==_t||t[49]!==G||t[50]!==Tt?(It=k.jsxs("div",{className:"flex border-b mb-4",children:[_t,G,Tt]}),t[48]=_t,t[49]=G,t[50]=Tt,t[51]=It):It=t[51];let jt;t[52]!==E||t[53]!==P?(jt=E==="hiragana"&&P("hiragana"),t[52]=E,t[53]=P,t[54]=jt):jt=t[54];let $t;t[55]!==E||t[56]!==P?($t=E==="katakana"&&P("katakana"),t[55]=E,t[56]=P,t[57]=$t):$t=t[57];let kt;t[58]!==E||t[59]!==O||t[60]!==Mt||t[61]!==B?(kt=E==="kanji"&&(O?Mt(O):B()),t[58]=E,t[59]=O,t[60]=Mt,t[61]=B,t[62]=kt):kt=t[62];let Zt;t[63]!==jt||t[64]!==$t||t[65]!==kt?(Zt=k.jsxs("div",{className:"mt-6",children:[jt,$t,kt]}),t[63]=jt,t[64]=$t,t[65]=kt,t[66]=Zt):Zt=t[66];let an;t[67]!==f||t[68]!==d||t[69]!==m||t[70]!==g?(an=f==="charToRomaji"&&k.jsxs("div",{children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Training Options"}),k.jsxs("label",{className:"flex items-center justify-between cursor-pointer p-2 rounded-md hover:bg-gray-50",children:[k.jsx("span",{className:"text-sm text-gray-700",children:"Auto-Skip"}),k.jsx("input",{type:"checkbox",checked:d,onChange:gt=>{m(),g(gt.target.checked)},className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})]}),k.jsx("p",{className:"text-xs text-gray-500 mt-2 pl-2",children:"If enabled, it skips to the next question as soon as you type the correct answer."})]}),t[67]=f,t[68]=d,t[69]=m,t[70]=g,t[71]=an):an=t[71];let Ve;t[72]===Symbol.for("react.memo_cache_sentinel")?(Ve=k.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Data Management"}),t[72]=Ve):Ve=t[72];let be;t[73]!==m||t[74]!==c?(be=k.jsxs("div",{children:[Ve,k.jsx("button",{onClick:()=>{m(),c()},className:"w-full px-6 bg-red-100 text-red-600 py-3 rounded-xl font-semibold hover:bg-red-200 transition shadow-md",children:"Reset Progress..."})]}),t[73]=m,t[74]=c,t[75]=be):be=t[75];let yn;t[76]!==an||t[77]!==be?(yn=k.jsxs("div",{className:"border-t pt-6 mt-6 space-y-6",children:[an,be]}),t[76]=an,t[77]=be,t[78]=yn):yn=t[78];let ae;return t[79]!==It||t[80]!==Zt||t[81]!==yn?(ae=k.jsx("div",{className:"w-full p-8",children:k.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md mt-6",children:[It,Zt,yn]})}),t[79]=It,t[80]=Zt,t[81]=yn,t[82]=ae):ae=t[82],ae};function g9(s){return s!==null}function _9(s){return s.char}function y9(s){return s.chars}function v9(s){return s!==null}function T9(s){return s.char}function w9(s){return s.id}function b9(s){return s.id}const S9=s=>{const t=wn.c(42),[e,i]=Ft.useState("quiz");let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=O=>{i(O)},t[0]=a):a=t[0];const c=a,f=`flex w-full min-h-screen absolute top-0 left-0
                  transition-all duration-500 ease-in-out
                  ${s.screen==="quiz"?"-translate-x-full opacity-70":"translate-x-0 opacity-100"}`;let d;t[1]!==e||t[2]!==s.handlePlayClick||t[3]!==s.initAudio||t[4]!==s.isSoundEffectsEnabled||t[5]!==s.setIsSoundEffectsEnabled?(d=k.jsx(oj,{activeView:e,setActiveView:c,initAudio:s.initAudio,isSoundEffectsEnabled:s.isSoundEffectsEnabled,setIsSoundEffectsEnabled:s.setIsSoundEffectsEnabled,handlePlayClick:s.handlePlayClick}),t[1]=e,t[2]=s.handlePlayClick,t[3]=s.initAudio,t[4]=s.isSoundEffectsEnabled,t[5]=s.setIsSoundEffectsEnabled,t[6]=d):d=t[6];let g;t[7]!==e||t[8]!==s?(g=e==="quiz"&&k.jsx(d9,{...s}),t[7]=e,t[8]=s,t[9]=g):g=t[9];let m;t[10]!==e||t[11]!==s.allSetNames||t[12]!==s.allSets||t[13]!==s.dynamicKanjiMap||t[14]!==s.dynamicSets||t[15]!==s.handlePlayClick||t[16]!==s.sessionHistory?(m=e==="dashboard"&&k.jsx(cj,{history:s.sessionHistory,allSets:s.allSets,visibleSets:Object.keys(s.allSets),allSetNames:s.allSetNames,onPlayClick:s.handlePlayClick,dynamicSets:s.dynamicSets,dynamicKanjiMap:s.dynamicKanjiMap,onClose:A9}),t[10]=e,t[11]=s.allSetNames,t[12]=s.allSets,t[13]=s.dynamicKanjiMap,t[14]=s.dynamicSets,t[15]=s.handlePlayClick,t[16]=s.sessionHistory,t[17]=m):m=t[17];let T;t[18]!==e||t[19]!==s.direction||t[20]!==s.dynamicKanjiMap||t[21]!==s.dynamicSets||t[22]!==s.handlePlayClick||t[23]!==s.isAutoSkipEnabled||t[24]!==s.resetProgress||t[25]!==s.selectedSets||t[26]!==s.selectionMap||t[27]!==s.setIsAutoSkipEnabled||t[28]!==s.setSelectionMap?(T=e==="settings"&&k.jsx(m9,{selectedModes:s.selectedSets,selectionMap:s.selectionMap,setSelectionMap:s.setSelectionMap,resetProgress:s.resetProgress,direction:s.direction,isAutoSkipEnabled:s.isAutoSkipEnabled,setIsAutoSkipEnabled:s.setIsAutoSkipEnabled,onPlayClick:s.handlePlayClick,dynamicSets:s.dynamicSets,dynamicKanjiMap:s.dynamicKanjiMap}),t[18]=e,t[19]=s.direction,t[20]=s.dynamicKanjiMap,t[21]=s.dynamicSets,t[22]=s.handlePlayClick,t[23]=s.isAutoSkipEnabled,t[24]=s.resetProgress,t[25]=s.selectedSets,t[26]=s.selectionMap,t[27]=s.setIsAutoSkipEnabled,t[28]=s.setSelectionMap,t[29]=T):T=t[29];let w;t[30]!==e||t[31]!==s.refreshDynamicData?(w=e==="kanjiManager"&&k.jsx(h9,{refreshDynamicData:s.refreshDynamicData}),t[30]=e,t[31]=s.refreshDynamicData,t[32]=w):w=t[32];let E;t[33]!==g||t[34]!==m||t[35]!==T||t[36]!==w?(E=k.jsxs("main",{className:"flex-1 h-screen overflow-y-auto bg-gray-50",children:[g,m,T,w]}),t[33]=g,t[34]=m,t[35]=T,t[36]=w,t[37]=E):E=t[37];let N;return t[38]!==f||t[39]!==d||t[40]!==E?(N=k.jsxs("div",{className:f,children:[d,E]}),t[38]=f,t[39]=d,t[40]=E,t[41]=N):N=t[41],N};function A9(){}const E9=s=>{const t=wn.c(73),{screen:e,handlePlayClick:i,setScreen:a,setShowStats:c,showStats:f,currentStreak:d,progressBarStyle:g,correctInLast10:m,last10Length:T,uniqueCharsSeen:w,sessionStats:E,sessionHistoryLength:N,currentQuestion:O,timerKey:U,cardBgClass:D,cardState:z,setCardState:$,isSpeechEnabled:Q,setIsSpeechEnabled:nt,initAudio:K,isSoundEffectsEnabled:X,setIsSoundEffectsEnabled:R,isTimedMode:C,isCharToRomajiTyping:M,feedback:V,isAutoSkipEnabled:P,nextQuestion:F,isRomajiToCharMultipleChoice:B,wrongGuesses:At,selectedAnswer:Mt,handleMultipleChoiceClick:Z,userAnswer:rt,handleInputChange:_t,manualCheckAnswer:ht,inputColorClass:ft,isKanjiQuestion:G,inputState:at}=s,wt=`w-full min-h-screen p-4 md:p-8 absolute top-0 left-0
                                transition-all duration-500 ease-in-out
                                ${e==="quiz"?"translate-x-0 opacity-100":"translate-x-full opacity-70"}`;let Tt;t[0]!==i||t[1]!==a?(Tt=k.jsx("div",{className:"flex justify-start",children:k.jsx("button",{onClick:()=>{i(),a("home")},className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-semibold hover:bg-blue-200 transition",children:"Home"})}),t[0]=i,t[1]=a,t[2]=Tt):Tt=t[2];const It=`flex items-center font-bold text-lg ${d>0?"text-orange-500":"text-gray-400"}`;let jt;t[3]===Symbol.for("react.memo_cache_sentinel")?(jt=k.jsx(jC,{}),t[3]=jt):jt=t[3];let $t;t[4]!==d?($t=k.jsx("span",{className:"ml-1",children:d}),t[4]=d,t[5]=$t):$t=t[5];let kt;t[6]!==It||t[7]!==$t?(kt=k.jsx("div",{className:"flex justify-center",children:k.jsxs("div",{className:It,children:[jt,$t]})}),t[6]=It,t[7]=$t,t[8]=kt):kt=t[8];let Zt;t[9]!==i||t[10]!==c?(Zt=()=>{i(),c(!0)},t[9]=i,t[10]=c,t[11]=Zt):Zt=t[11];const an=f?"Nascondi":"Stats";let Ve;t[12]!==Zt||t[13]!==an?(Ve=k.jsx("div",{className:"flex justify-end",children:k.jsx("button",{onClick:Zt,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-semibold hover:bg-purple-200 transition",children:an})}),t[12]=Zt,t[13]=an,t[14]=Ve):Ve=t[14];let be;t[15]!==Tt||t[16]!==kt||t[17]!==Ve?(be=k.jsxs("div",{className:"grid grid-cols-3 items-center mb-3",children:[Tt,kt,Ve]}),t[15]=Tt,t[16]=kt,t[17]=Ve,t[18]=be):be=t[18];let yn;t[19]!==g?(yn=k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:k.jsx("div",{className:"h-2.5 rounded-full transition-all duration-300",style:g})}),t[19]=g,t[20]=yn):yn=t[20];let ae;t[21]!==m||t[22]!==T?(ae=k.jsxs("span",{children:[m," / ",T]}),t[21]=m,t[22]=T,t[23]=ae):ae=t[23];let gt;t[24]!==w?(gt=k.jsxs("span",{children:["Seen: ",w]}),t[24]=w,t[25]=gt):gt=t[25];let Pt;t[26]!==E.attempts||t[27]!==E.correct?(Pt=E.attempts>0?Math.round(E.correct/E.attempts*100):0,t[26]=E.attempts,t[27]=E.correct,t[28]=Pt):Pt=t[28];let Yt;t[29]!==N||t[30]!==Pt?(Yt=k.jsxs("span",{children:["Acc: ",Pt,"% (",N,")"]}),t[29]=N,t[30]=Pt,t[31]=Yt):Yt=t[31];let Bt;t[32]!==ae||t[33]!==gt||t[34]!==Yt?(Bt=k.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2 px-1",children:[ae,gt,Yt]}),t[32]=ae,t[33]=gt,t[34]=Yt,t[35]=Bt):Bt=t[35];let Ot;t[36]!==be||t[37]!==yn||t[38]!==Bt?(Ot=k.jsxs("div",{className:"mb-4 bg-white p-4 rounded-xl shadow-md",children:[be,yn,Bt]}),t[36]=be,t[37]=yn,t[38]=Bt,t[39]=Ot):Ot=t[39];let Vt;t[40]!==D||t[41]!==z||t[42]!==O||t[43]!==V||t[44]!==_t||t[45]!==Z||t[46]!==i||t[47]!==K||t[48]!==ft||t[49]!==at||t[50]!==P||t[51]!==M||t[52]!==G||t[53]!==B||t[54]!==X||t[55]!==Q||t[56]!==C||t[57]!==ht||t[58]!==F||t[59]!==Mt||t[60]!==$||t[61]!==R||t[62]!==nt||t[63]!==U||t[64]!==rt||t[65]!==At?(Vt=O&&k.jsx("div",{className:`rounded-xl shadow-2xl p-8 transform transition-all duration-300 ${D} 
                                    ${z==="correct"?"animate-pop":z==="incorrect"?"animate-shake":"animate-slideIn"}`,onAnimationEnd:()=>$("default"),children:k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"text-center mb-8 relative",children:[k.jsx("div",{className:"text-sm text-gray-500 mb-4 font-medium h-5",children:O.type==="charToRomaji"?"":"Seleziona il carattere corretto"}),k.jsx("div",{className:"absolute top-0 right-0 flex space-x-2",children:k.jsx("button",{onClick:()=>{i(),nt(C9)},className:`p-2 rounded-full transition-colors
                                            ${Q?"text-green-600 bg-green-100":"text-gray-400 hover:bg-gray-100"}`,title:Q?"Disattiva sintesi vocale":"Attiva sintesi vocale",children:Q?k.jsx(BC,{}):k.jsx(qC,{})})}),k.jsx("div",{className:"absolute top-0 left-0",children:k.jsx("button",{onClick:()=>{K(),R(x9)},className:`p-2 rounded-full transition-colors
                                            ${X?"text-blue-600 bg-blue-100":"text-gray-400 hover:bg-gray-100"}`,title:X?"Disattiva effetti sonori":"Attiva effetti sonori",children:X?k.jsx(UC,{}):k.jsx(zC,{})})}),k.jsx("div",{className:"text-9xl mb-4 font-extrabold text-gray-900 leading-none japanese-char",children:O.prompt}),O.charObj.meaning&&O.type==="romajiToChar"&&k.jsxs("div",{className:"text-gray-500 text-sm italic",children:["(Suggerimento: ",O.charObj.meaning,")"]})]}),C&&M&&!V&&k.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 my-4 overflow-hidden",children:k.jsx("div",{className:"h-2.5 bg-orange-500 rounded-full animate-timerBar"},U)}),M&&V&&k.jsxs("div",{className:"text-center",children:[V.isCorrect&&!P&&k.jsx("div",{className:"text-3xl font-extrabold mb-4 p-2 rounded-lg text-green-600",children:" Corretto!"}),!V.isCorrect&&k.jsxs("div",{className:"text-xl mb-6 text-gray-700",children:["Risposta corretta:",k.jsx("span",{className:"font-bold text-gray-900 japanese-char",children:V.correctReading||V.correctAnswer})]}),!P&&!C&&k.jsx("button",{onClick:F,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-blue-700 transition shadow-lg mt-4",autoFocus:!0,children:"Prossima Domanda"}),(P||C)&&!V.isCorrect&&k.jsx("div",{className:"h-16"}),(P||C)&&V.isCorrect&&k.jsx("div",{className:"h-16"})]}),B&&k.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:O.options?.map((We,tn)=>{const Rn=At.has(We.char),Fi=Mt===We.char;let ai="border-gray-200 hover:border-blue-300 bg-white";return Rn?ai="bg-gray-200 text-gray-400 border-gray-200 cursor-not-allowed":Fi&&z==="correct"?ai="border-green-500 bg-green-100 scale-[1.02]":Fi&&z==="incorrect"&&(ai="border-red-500 bg-red-100"),k.jsx("button",{disabled:Rn,onClick:()=>Z(We),className:`p-6 md:p-8 text-5xl border-4 rounded-xl transition shadow-md japanese-char
                                      ${ai}
                                    `,children:We.char},tn)})}),M&&!V&&G&&k.jsxs("div",{className:"relative w-full mb-6",children:[k.jsx("div",{className:`absolute inset-0 p-4 text-2xl text-center 
                 flex items-center justify-center 
                 japanese-char pointer-events-none
                 font-bold
                 ${at==="incorrect"?"text-red-500":"text-gray-900"}`,children:rt.length===0?k.jsx("span",{className:"text-gray-400",children:"Type here..."}):k.jsx("span",{children:u9(rt.toLowerCase(),{isIME:!0})})}),k.jsx("input",{type:"text",value:rt,onChange:_t,onKeyPress:We=>{We.key==="Enter"&&!P&&(i(),ht())},className:`w-full p-4 text-2xl border-4 rounded-xl text-center 
                  focus:outline-none transition-all duration-200 
                  shadow-inner font-bold ${ft} 
                  text-transparent caret-gray-900`,autoFocus:!0,disabled:!!V,placeholder:""})]}),M&&!V&&!G&&k.jsx("input",{type:"text",value:rt,onChange:_t,onKeyPress:We=>{We.key==="Enter"&&!P&&(i(),ht())},className:`w-full p-4 text-2xl border-4 rounded-xl mb-6 text-center 
                focus:outline-none transition-all duration-200 
                shadow-inner ${ft}`,placeholder:"Type here...",autoFocus:!0,disabled:!!V}),M&&!P&&!C&&!V&&k.jsx("button",{onClick:()=>{i(),ht()},disabled:!rt.trim(),className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-blue-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed shadow-lg",children:"Controlla"})]})},O.prompt+U),t[40]=D,t[41]=z,t[42]=O,t[43]=V,t[44]=_t,t[45]=Z,t[46]=i,t[47]=K,t[48]=ft,t[49]=at,t[50]=P,t[51]=M,t[52]=G,t[53]=B,t[54]=X,t[55]=Q,t[56]=C,t[57]=ht,t[58]=F,t[59]=Mt,t[60]=$,t[61]=R,t[62]=nt,t[63]=U,t[64]=rt,t[65]=At,t[66]=Vt):Vt=t[66];let te;t[67]!==Ot||t[68]!==Vt?(te=k.jsxs("div",{className:"max-w-2xl mx-auto",children:[Ot,Vt]}),t[67]=Ot,t[68]=Vt,t[69]=te):te=t[69];let oe;return t[70]!==wt||t[71]!==te?(oe=k.jsx("div",{className:wt,children:te}),t[70]=wt,t[71]=te,t[72]=oe):oe=t[72],oe};function C9(s){return!s}function x9(s){return!s}function R9(){const[s,t]=Ft.useState("home"),[e,i]=Ft.useState(!1),[a,c]=Ft.useState([]),[f,d]=Ft.useState({}),[g,m]=Ft.useState(!0),T=Ft.useMemo(()=>{const Nt={};return Object.keys(Hh).forEach(Ht=>{Nt[Ht]=mD(Ht)}),Nt},[]),[w,E]=Fo(ga.SELECTED_SETS,["hiragana"]),[N,O]=Fo(ga.SELECTION_MAP,T),[U,D]=Fo(ga.DIRECTION,"charToRomaji"),[z,$]=Fo(ga.AUTO_SKIP,!0),[Q,nt]=Fo(ga.SOUND_EFFECTS,!0),[K,X]=Fo(ga.SPEECH,!1),[R,C]=Fo(ga.TIMED_MODE,!1),[,M]=Ft.useState("type"),[V,P]=Ft.useState(null),[F,B]=Ft.useState(""),[At,Mt]=Ft.useState(null),[Z,rt]=Ft.useState({}),[_t,ht]=Fo(ga.SESSION_STATS,{attempts:0,correct:0}),[ft,G]=Ft.useState(!0),[at,wt]=Ft.useState("typing"),[Tt,It]=Fo(ga.SESSION_HISTORY,[]),[jt,$t]=Ft.useState(!1),[kt,Zt]=Ft.useState("default"),[an,Ve]=Fo(ga.CURRENT_STREAK,0),[be,yn]=Ft.useState(!1),ae=Ft.useRef(null),gt=Ft.useRef(0),[Pt,Yt]=Ft.useState(new Set),[Bt,Ot]=Ft.useState(null),[Vt]=Ft.useState(()=>typeof window<"u"?{correct:new Fh({oscillator:{type:"sine"},envelope:{attack:.01,decay:.1,sustain:0,release:.2}}).toDestination(),incorrect:new Fh({oscillator:{type:"square"},envelope:{attack:.01,decay:.2,sustain:0,release:.2}}).toDestination(),click:new Fh({oscillator:{type:"triangle"},envelope:{attack:.001,decay:.05,sustain:0,release:.1}}).toDestination()}:null);Ft.useEffect(()=>{const Nt=Object.keys(Hh).filter(Ut=>Ut!=="kanji_basic");E(Ut=>{const zt=Ut.filter(ee=>Nt.includes(ee));return Ut.includes("kanji_basic")&&!zt.includes("kanji")&&zt.push("kanji"),zt.length===0&&Ut.length>0?["hiragana"]:zt}),O(Ut=>{const zt={};return Nt.forEach(ee=>{zt[ee]=Ut[ee]||T[ee]}),Object.keys(Ut).forEach(ee=>{!Nt.includes(ee)&&ee!=="kanji_basic"&&(zt[ee]=Ut[ee])}),zt}),(()=>{try{if(typeof window<"u"){const Ut={};for(let zt=0;zt<window.localStorage.length;zt++){const ee=window.localStorage.key(zt);if(ee&&ee.startsWith("mistake:")){const Ge=ee.replace("mistake:",""),Fn=window.localStorage.getItem(ee);Fn&&(Ut[Ge]=JSON.parse(Fn))}}rt(Ut)}}catch{console.log("Nessun dato errore esistente, inizio da zero")}finally{G(!1)}})()},[]);const te=Ft.useCallback(async()=>{try{const Nt=await MC();c(Nt);const Ht={},Ut=Nt.map(async zt=>{const ee=await kC(zt.id);Ht[zt.id]=ee});await Promise.all(Ut),d(Ht),O(zt=>{const ee={...zt};return Nt.forEach(Ge=>{const Fn=Ge.id,en=ee[Fn];if(!en)return;const pi=new Set(Ht[Fn].map(Cs=>Cs.id)),Zn=new Set;en.forEach(Cs=>{pi.has(Cs)&&Zn.add(Cs)}),ee[Fn]=Zn}),ee})}catch(Nt){console.error("Errore nel caricamento dei set kanji dinamici:",Nt)}},[O]),oe=Ft.useCallback(async()=>{m(!0),await te(),m(!1)},[te]),We=Ft.useCallback(async()=>{await te()},[te]);Ft.useEffect(()=>{ft||oe()},[ft,oe]);const tn=Ft.useMemo(()=>{const Nt={...Hh};return a.forEach(Ht=>{const Ut=f[Ht.id]||[];Nt[Ht.id]=Ut.map(zt=>({char:zt.char,romaji:zt.romaji,reading:zt.reading,meaning:zt.meaning,type:"kanji",category:{id:Ht.id,name:Ht.name},id:zt.id}))}),Nt},[a,f]),Rn=Ft.useCallback(async()=>{!be&&Vt&&(await $O(),yn(!0),console.log("Audio context started"))},[be,Vt]),Fi=Ft.useCallback(()=>{!be||!Vt||!Q||Vt.correct.triggerAttackRelease("C5","0.1",y1())},[be,Vt,Q]),ai=Ft.useCallback(()=>{!be||!Vt||!Q||Vt.incorrect.triggerAttackRelease("C3","0.1",y1())},[be,Vt,Q]),Mi=Ft.useCallback(()=>{!be||!Vt||!Q||Vt.click.triggerAttackRelease("G5","0.01",y1())},[be,Vt,Q]),ts=Ft.useCallback(()=>{Rn(),Mi()},[Rn,Mi]),Sa=Ft.useCallback(async(Nt,Ht)=>{if(typeof window>"u")return;const Ut=`mistake:${Nt}`;let zt=Z[Nt]||{count:0,lastMistake:null};Ht||(zt={count:zt.count+1,lastMistake:Date.now()});try{window.localStorage.setItem(Ut,JSON.stringify(zt)),rt(ee=>({...ee,[Nt]:zt}))}catch(ee){console.error("Salvataggio dati errore fallito:",ee)}},[Z]),es=Ft.useCallback(async(Nt,Ht,Ut)=>{It(zt=>[...zt,{char:Nt.char,isCorrect:Ut,answer:Ht,correct:Array.isArray(Nt.romaji)?Nt.romaji.join(" / "):Nt.romaji,timestamp:Date.now()}]),ht(zt=>({attempts:zt.attempts+1,correct:zt.correct+(Ut?1:0)})),Ve(Ut?zt=>zt+1:0),await Sa(Nt.char,Ut)},[Sa]),lo=Nt=>{E(Ht=>Ht.includes(Nt)?Ht.filter(Ut=>Ut!==Nt):[...Ht,Nt])},Xn=Ft.useCallback(()=>{let Nt=[];if(w.includes("hiragana")){const Ht=tn.hiragana||[],Ut=N.hiragana;Ut&&Ut.size>0&&Ht.forEach(zt=>{Ut.has(zt.char)&&Nt.push(zt)})}if(w.includes("katakana")){const Ht=tn.katakana||[],Ut=N.katakana;Ut&&Ut.size>0&&Ht.forEach(zt=>{Ut.has(zt.char)&&Nt.push(zt)})}return w.includes("kanji")&&a.forEach(Ht=>{const Ut=Ht.id,zt=tn[Ut]||[],ee=N[Ut];ee&&ee.size>0&&zt.forEach(Ge=>{const Fn="id"in Ge?Ge.id:Ge.char;Fn&&ee.has(Fn)&&Nt.push(Ge)})}),Nt},[w,N,tn,a]),Vn=Ft.useCallback(()=>{const Nt=Xn();if(Nt.length===0)return null;const Ht=Tt.reduce((en,pi)=>(en[pi.char]=(en[pi.char]||0)+1,en),{});let Ut=1/0;Nt.forEach(en=>{const pi=Ht[en.char]||0;pi<Ut&&(Ut=pi)});const zt=Nt.map(en=>{const pi=Z[en.char]?.count||0,Zn=Ht[en.char]||0,Cs=Math.pow(2,pi);let ss=1;return Zn===Ut?ss=4:Zn===Ut+1&&(ss=2),Math.min(Cs*ss,100)}),ee=g1.sum(zt),Ge=Math.random()*ee;let Fn=0;for(let en=0;en<Nt.length;en++)if(Fn+=zt[en],Ge<=Fn)return Nt[en];return Nt[Nt.length-1]},[Xn,Z,Tt]),ki=(Nt,Ht)=>{const Ut=[Nt],zt=Ht.filter(Ge=>Ge.char!==Nt.char),ee=g1.shuffle(zt);return Ut.push(...ee.slice(0,3)),g1.shuffle(Ut)},fn=Ft.useCallback((Nt,Ht)=>{if(!V)return{isCorrect:!1,correctAnswer:""};let Ut=!1,zt;const ee=Nt.romaji,Ge=Nt.reading;if(V.type==="charToRomaji"){const en=Array.isArray(ee)?ee.map(Zn=>Zn.toLowerCase()):[ee.toLowerCase()],pi=Ht.toLowerCase().trim();Ut=en.some(Zn=>Zn===pi),zt=Array.isArray(ee)?ee.join(" / "):ee}else Ut=V.correctAnswer===Ht,zt=V.correctAnswer;let Fn;return Ge&&(Fn=Array.isArray(Ge)?Ge.join(" / "):Ge),{isCorrect:Ut,correctAnswer:zt,correctReading:Fn}},[V]),ns=Ft.useCallback(()=>{ae.current&&clearTimeout(ae.current);const Nt=Vn();if(!Nt){t("home"),console.error("Nessun carattere disponibile per la selezione.");return}const Ht=Nt,Ut=Xn(),zt=Array.isArray(Nt.romaji)?Nt.romaji:[Nt.romaji],Ge=(Array.isArray(Nt.reading)&&Nt.reading.length>0?Nt.reading:[Nt.char])[0];M(U==="romajiToChar"?"multipleChoice":"type");let en;U==="charToRomaji"?en={prompt:Nt.char,correctAnswer:zt.map(pi=>pi.toLowerCase()),type:"charToRomaji",charObj:Ht}:(en={prompt:Ge,correctAnswer:Nt.char,type:"romajiToChar",charObj:Ht,options:ki(Ht,Ut)},K&&Lh(Ge)),P(en),B(""),Mt(null),wt("typing"),Zt("default"),gt.current+=1,Yt(new Set),Ot(null)},[U,Vn,Xn,K]),Zr=Ft.useCallback((Nt,Ht)=>{ae.current&&clearTimeout(ae.current),es(Nt,Ht,!1),ai(),wt("incorrect"),Zt("incorrect"),K&&U==="charToRomaji"&&Lh(Nt.char);const{correctAnswer:Ut,correctReading:zt}=fn(Nt,Ht);Mt({isCorrect:!1,correctAnswer:Ut,correctReading:zt}),setTimeout(()=>{ns()},800)},[es,ns,K,ai,U,fn]),Hl=Ft.useCallback((Nt,Ht)=>{ae.current&&clearTimeout(ae.current),es(Nt,Ht,!0),Fi(),wt("correct"),Zt("correct"),Mt(null),K&&Lh(Nt.char),setTimeout(()=>{ns()},400)},[es,ns,K,Fi]),Xs=Nt=>{if(Pt.has(Nt.char)||(ts(),Ot(Nt.char),!V))return;Nt.char===V.correctAnswer?(ae.current&&clearTimeout(ae.current),es(V.charObj,Nt.char,!0),Fi(),Zt("correct"),K&&Nt.char&&Lh(Nt.char),setTimeout(()=>ns(),400)):(es(V.charObj,Nt.char,!1),ai(),Zt("incorrect"),Yt(Ut=>new Set(Ut).add(Nt.char)))};Ft.useEffect(()=>{if(R&&s==="quiz"&&V&&!At){ae.current&&clearTimeout(ae.current);const Nt=V&&V.options;ae.current=window.setTimeout(()=>{V&&(Nt||Zr(V.charObj,"timeout"))},2e3)}return()=>{ae.current&&clearTimeout(ae.current)}},[R,s,V,At,Zr]);const Jr=()=>{if(Rn(),Xn().length===0){console.error("Per favore seleziona almeno una categoria con caratteri!");return}Ve(0),t("quiz"),ns()},Nn=Nt=>{const Ht=Nt.target.value;if(B(Ht),!(V&&V.type==="charToRomaji")||!z)return;const zt=Ht.toLowerCase().trim(),ee=V.correctAnswer,Ge=V.charObj;if(ee.includes(zt)){Hl(Ge,zt);return}if(!ee.some(en=>en.startsWith(zt))&&zt.length>0){Zr(Ge,zt);return}wt("typing")},Zs=()=>{if(!F.trim()||!V)return;ae.current&&clearTimeout(ae.current);const{charObj:Nt}=V,{isCorrect:Ht,correctAnswer:Ut,correctReading:zt}=fn(Nt,F);es(Nt,F,Ht),Zt(Ht?"correct":"incorrect"),Ht?Fi():ai(),Mt({isCorrect:Ht,correctAnswer:Ut,correctReading:zt}),K&&(U==="romajiToChar"&&Ht||U==="charToRomaji")&&Lh(Nt.char)},Js=()=>{ts(),ns()},Es=Ft.useCallback(async()=>{console.warn("Reset progressi avviato.");try{if(ht({attempts:0,correct:0}),It([]),typeof window<"u"){const Nt=[];for(let Ht=0;Ht<window.localStorage.length;Ht++){const Ut=window.localStorage.key(Ht);Ut&&Ut.startsWith("mistake:")&&Nt.push(Ut)}Nt.forEach(Ht=>window.localStorage.removeItem(Ht))}rt({}),ht({attempts:0,correct:0}),It([]),Ve(0),console.log("Progressi resettati con successo!")}catch(Nt){console.error("Reset progressi fallito:",Nt)}},[It,ht,Ve]),co=Tt.slice(-10),uo=co.filter(Nt=>Nt.isCorrect).length,is=co.length>0?uo/co.length*100:0,Aa=Ft.useMemo(()=>new Set(Tt.map(Nt=>Nt.char)).size,[Tt]),gu={width:`${is}%`,backgroundColor:is>75?"#15803d":is>40?"#ca8a04":"#dc2626"},Sr={typing:"border-gray-300 focus:border-blue-500 text-gray-700",correct:"border-green-500 ring-4 ring-green-100 text-green-700",incorrect:"border-red-500 ring-4 ring-red-100 text-red-500 font-bold"}[at],el={default:"bg-white",correct:"bg-green-100",incorrect:"bg-red-100"}[kt];if(ft||g)return k.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",style:{fontFamily:"'Inter', sans-serif"},children:k.jsx("div",{className:"text-xl font-medium text-gray-700",children:"Caricamento..."})});const Ea=Xn(),Ca=V&&V.type==="charToRomaji",Ar=V&&V.type==="romajiToChar"&&V.options,ho=Object.keys(tn);return k.jsxs("div",{className:"min-h-screen bg-gray-100 relative overflow-x-hidden",style:{fontFamily:"'Inter', sans-serif"},children:[k.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Noto+Sans+JP:wght@400;700;900&display=swap');
          
          .japanese-char {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
          }

          @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
          }
          .animate-pop { animation: pop 0.2s ease-out; }

          @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
          }
          .animate-shake { animation: shake 0.3s ease-in-out; }

          @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-slideIn { animation: slideIn 0.3s ease-out; }
          
          /* Animazione per la barra del timer */
          @keyframes shrinkTimer {
            from { width: 100%; }
            to { width: 0%; }
          }
          .animate-timerBar {
            animation: shrinkTimer 2s linear 1;
            animation-fill-mode: forwards;
          }
        `}),k.jsxs("div",{className:"relative w-full min-h-screen",children:[k.jsx(S9,{screen:s,handlePlayClick:ts,initAudio:Rn,isSoundEffectsEnabled:Q,setIsSoundEffectsEnabled:nt,selectedSets:w,toggleMode:lo,direction:U,setDirection:D,setShowStudyPanel:i,startQuiz:Jr,available:Ea,isTimedMode:R,setIsTimedMode:C,sessionHistory:Tt,allSets:tn,visibleSets:w,allSetNames:ho,selectionMap:N,setSelectionMap:O,resetProgress:Es,isAutoSkipEnabled:z,setIsAutoSkipEnabled:$,dynamicSets:a,dynamicKanjiMap:f,refreshDynamicData:We}),k.jsx("div",{className:`w-full min-h-screen p-4 md:p-8 absolute top-0 left-0
                transition-all duration-500 ease-in-out
                ${s==="quiz"?"translate-x-0 opacity-100":"translate-x-full opacity-70"}`,children:k.jsx(E9,{screen:s,handlePlayClick:ts,setScreen:t,setShowStats:$t,showStats:jt,currentStreak:an,progressBarStyle:gu,correctInLast10:uo,last10Length:co.length,uniqueCharsSeen:Aa,sessionStats:_t,sessionHistoryLength:Tt.length,currentQuestion:V,timerKey:gt.current,cardBgClass:el,cardState:kt,setCardState:Zt,isSpeechEnabled:K,setIsSpeechEnabled:nt,initAudio:Rn,isSoundEffectsEnabled:Q,setIsSoundEffectsEnabled:nt,isTimedMode:R,isCharToRomajiTyping:!!Ca,feedback:At,isAutoSkipEnabled:z,nextQuestion:Js,isRomajiToCharMultipleChoice:!!Ar,wrongGuesses:Pt,selectedAnswer:Bt,handleMultipleChoiceClick:Xs,userAnswer:F,handleInputChange:Nn,manualCheckAnswer:Zs,inputColorClass:Sr,isKanjiQuestion:!!(V&&V.charObj.reading),inputState:at})}),(jt||e)&&k.jsx("div",{className:"fixed inset-0 bg-black opacity-30 z-40 transition-opacity duration-500 ease-in-out",onClick:()=>{ts(),$t(!1),i(!1)}}),k.jsx("div",{className:`fixed top-0 right-0 h-full w-full max-w-lg z-50 transition-transform duration-500 ease-in-out
                      ${jt?"translate-x-0":"translate-x-full"}`,children:k.jsx(JV,{history:Tt,allSets:tn,allSetNames:ho,dynamicSets:a,dynamicKanjiMap:f,onClose:()=>{ts(),$t(!1)},visibleSets:w,onPlayClick:ts})}),k.jsx("div",{className:`fixed top-0 right-0 h-full w-full max-w-lg z-50 transition-transform duration-500 ease-in-out
                      ${e?"translate-x-0":"translate-x-full"}`,children:k.jsx(nj,{onClose:()=>{i(!1)},visibleSets:w,onPlayClick:ts,isSpeechEnabled:K,allSetNames:ho,setIsSpeechEnabled:X,initAudio:Rn})})]})]})}vx.createRoot(document.getElementById("root")).render(k.jsx(Ft.StrictMode,{children:k.jsx(R9,{})}));

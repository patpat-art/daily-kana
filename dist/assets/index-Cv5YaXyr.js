(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function e(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=e(a);fetch(a.href,c)}})();var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ox(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var u1={exports:{}},Ym={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function lx(){if(ib)return Ym;ib=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,c){var f=null;if(c!==void 0&&(f=""+c),a.key!==void 0&&(f=""+a.key),"key"in a){c={};for(var d in a)d!=="key"&&(c[d]=a[d])}else c=a;return a=c.ref,{$$typeof:s,type:i,key:f,ref:a!==void 0?a:null,props:c}}return Ym.Fragment=t,Ym.jsx=e,Ym.jsxs=e,Ym}var sb;function cx(){return sb||(sb=1,u1.exports=lx()),u1.exports}var L=cx(),h1={exports:{}},Te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function ux(){if(rb)return Te;rb=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),C=Symbol.iterator;function I(G){return G===null||typeof G!="object"?null:(G=C&&G[C]||G["@@iterator"],typeof G=="function"?G:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,D={};function z(G,at,St){this.props=G,this.context=at,this.refs=D,this.updater=St||O}z.prototype.isReactComponent={},z.prototype.setState=function(G,at){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,at,"setState")},z.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function X(){}X.prototype=z.prototype;function Y(G,at,St){this.props=G,this.context=at,this.refs=D,this.updater=St||O}var it=Y.prototype=new X;it.constructor=Y,k(it,z.prototype),it.isPureReactComponent=!0;var K=Array.isArray;function W(){}var R={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function M(G,at,St){var Dt=St.ref;return{$$typeof:s,type:G,key:at,ref:Dt!==void 0?Dt:null,props:St}}function B(G,at){return M(G.type,at,G.props)}function P(G){return typeof G=="object"&&G!==null&&G.$$typeof===s}function F(G){var at={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(St){return at[St]})}var U=/\/+/g;function vt(G,at){return typeof G=="object"&&G!==null&&G.key!=null?F(""+G.key):at.toString(36)}function Rt(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(W,W):(G.status="pending",G.then(function(at){G.status==="pending"&&(G.status="fulfilled",G.value=at)},function(at){G.status==="pending"&&(G.status="rejected",G.reason=at)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Z(G,at,St,Dt,Nt){var jt=typeof G;(jt==="undefined"||jt==="boolean")&&(G=null);var Ft=!1;if(G===null)Ft=!0;else switch(jt){case"bigint":case"string":case"number":Ft=!0;break;case"object":switch(G.$$typeof){case s:case t:Ft=!0;break;case T:return Ft=G._init,Z(Ft(G._payload),at,St,Dt,Nt)}}if(Ft)return Nt=Nt(G),Ft=Dt===""?"."+vt(G,0):Dt,K(Nt)?(St="",Ft!=null&&(St=Ft.replace(U,"$&/")+"/"),Z(Nt,at,St,"",function(Ae){return Ae})):Nt!=null&&(P(Nt)&&(Nt=B(Nt,St+(Nt.key==null||G&&G.key===Nt.key?"":(""+Nt.key).replace(U,"$&/")+"/")+Ft)),at.push(Nt)),1;Ft=0;var kt=Dt===""?".":Dt+":";if(K(G))for(var te=0;te<G.length;te++)Dt=G[te],jt=kt+vt(Dt,te),Ft+=Z(Dt,at,St,jt,Nt);else if(te=I(G),typeof te=="function")for(G=te.call(G),te=0;!(Dt=G.next()).done;)Dt=Dt.value,jt=kt+vt(Dt,te++),Ft+=Z(Dt,at,St,jt,Nt);else if(jt==="object"){if(typeof G.then=="function")return Z(Rt(G),at,St,Dt,Nt);throw at=String(G),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return Ft}function nt(G,at,St){if(G==null)return G;var Dt=[],Nt=0;return Z(G,Dt,"","",function(jt){return at.call(St,jt,Nt++)}),Dt}function Tt(G){if(G._status===-1){var at=G._result;at=at(),at.then(function(St){(G._status===0||G._status===-1)&&(G._status=1,G._result=St)},function(St){(G._status===0||G._status===-1)&&(G._status=2,G._result=St)}),G._status===-1&&(G._status=0,G._result=at)}if(G._status===1)return G._result.default;throw G._result}var dt=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},pt={map:nt,forEach:function(G,at,St){nt(G,function(){at.apply(this,arguments)},St)},count:function(G){var at=0;return nt(G,function(){at++}),at},toArray:function(G){return nt(G,function(at){return at})||[]},only:function(G){if(!P(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Te.Activity=w,Te.Children=pt,Te.Component=z,Te.Fragment=e,Te.Profiler=a,Te.PureComponent=Y,Te.StrictMode=i,Te.Suspense=m,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Te.__COMPILER_RUNTIME={__proto__:null,c:function(G){return R.H.useMemoCache(G)}},Te.cache=function(G){return function(){return G.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(G,at,St){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var Dt=k({},G.props),Nt=G.key;if(at!=null)for(jt in at.key!==void 0&&(Nt=""+at.key),at)!E.call(at,jt)||jt==="key"||jt==="__self"||jt==="__source"||jt==="ref"&&at.ref===void 0||(Dt[jt]=at[jt]);var jt=arguments.length-2;if(jt===1)Dt.children=St;else if(1<jt){for(var Ft=Array(jt),kt=0;kt<jt;kt++)Ft[kt]=arguments[kt+2];Dt.children=Ft}return M(G.type,Nt,Dt)},Te.createContext=function(G){return G={$$typeof:f,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:c,_context:G},G},Te.createElement=function(G,at,St){var Dt,Nt={},jt=null;if(at!=null)for(Dt in at.key!==void 0&&(jt=""+at.key),at)E.call(at,Dt)&&Dt!=="key"&&Dt!=="__self"&&Dt!=="__source"&&(Nt[Dt]=at[Dt]);var Ft=arguments.length-2;if(Ft===1)Nt.children=St;else if(1<Ft){for(var kt=Array(Ft),te=0;te<Ft;te++)kt[te]=arguments[te+2];Nt.children=kt}if(G&&G.defaultProps)for(Dt in Ft=G.defaultProps,Ft)Nt[Dt]===void 0&&(Nt[Dt]=Ft[Dt]);return M(G,jt,Nt)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(G){return{$$typeof:d,render:G}},Te.isValidElement=P,Te.lazy=function(G){return{$$typeof:T,_payload:{_status:-1,_result:G},_init:Tt}},Te.memo=function(G,at){return{$$typeof:_,type:G,compare:at===void 0?null:at}},Te.startTransition=function(G){var at=R.T,St={};R.T=St;try{var Dt=G(),Nt=R.S;Nt!==null&&Nt(St,Dt),typeof Dt=="object"&&Dt!==null&&typeof Dt.then=="function"&&Dt.then(W,dt)}catch(jt){dt(jt)}finally{at!==null&&St.types!==null&&(at.types=St.types),R.T=at}},Te.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Te.use=function(G){return R.H.use(G)},Te.useActionState=function(G,at,St){return R.H.useActionState(G,at,St)},Te.useCallback=function(G,at){return R.H.useCallback(G,at)},Te.useContext=function(G){return R.H.useContext(G)},Te.useDebugValue=function(){},Te.useDeferredValue=function(G,at){return R.H.useDeferredValue(G,at)},Te.useEffect=function(G,at){return R.H.useEffect(G,at)},Te.useEffectEvent=function(G){return R.H.useEffectEvent(G)},Te.useId=function(){return R.H.useId()},Te.useImperativeHandle=function(G,at,St){return R.H.useImperativeHandle(G,at,St)},Te.useInsertionEffect=function(G,at){return R.H.useInsertionEffect(G,at)},Te.useLayoutEffect=function(G,at){return R.H.useLayoutEffect(G,at)},Te.useMemo=function(G,at){return R.H.useMemo(G,at)},Te.useOptimistic=function(G,at){return R.H.useOptimistic(G,at)},Te.useReducer=function(G,at,St){return R.H.useReducer(G,at,St)},Te.useRef=function(G){return R.H.useRef(G)},Te.useState=function(G){return R.H.useState(G)},Te.useSyncExternalStore=function(G,at,St){return R.H.useSyncExternalStore(G,at,St)},Te.useTransition=function(){return R.H.useTransition()},Te.version="19.2.0",Te}var ab;function R0(){return ab||(ab=1,h1.exports=ux()),h1.exports}var Ht=R0(),f1={exports:{}},Qm={},d1={exports:{}},p1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ob;function hx(){return ob||(ob=1,(function(s){function t(Z,nt){var Tt=Z.length;Z.push(nt);t:for(;0<Tt;){var dt=Tt-1>>>1,pt=Z[dt];if(0<a(pt,nt))Z[dt]=nt,Z[Tt]=pt,Tt=dt;else break t}}function e(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var nt=Z[0],Tt=Z.pop();if(Tt!==nt){Z[0]=Tt;t:for(var dt=0,pt=Z.length,G=pt>>>1;dt<G;){var at=2*(dt+1)-1,St=Z[at],Dt=at+1,Nt=Z[Dt];if(0>a(St,Tt))Dt<pt&&0>a(Nt,St)?(Z[dt]=Nt,Z[Dt]=Tt,dt=Dt):(Z[dt]=St,Z[at]=Tt,dt=at);else if(Dt<pt&&0>a(Nt,Tt))Z[dt]=Nt,Z[Dt]=Tt,dt=Dt;else break t}}return nt}function a(Z,nt){var Tt=Z.sortIndex-nt.sortIndex;return Tt!==0?Tt:Z.id-nt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,d=f.now();s.unstable_now=function(){return f.now()-d}}var m=[],_=[],T=1,w=null,C=3,I=!1,O=!1,k=!1,D=!1,z=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function it(Z){for(var nt=e(_);nt!==null;){if(nt.callback===null)i(_);else if(nt.startTime<=Z)i(_),nt.sortIndex=nt.expirationTime,t(m,nt);else break;nt=e(_)}}function K(Z){if(k=!1,it(Z),!O)if(e(m)!==null)O=!0,W||(W=!0,F());else{var nt=e(_);nt!==null&&Rt(K,nt.startTime-Z)}}var W=!1,R=-1,E=5,M=-1;function B(){return D?!0:!(s.unstable_now()-M<E)}function P(){if(D=!1,W){var Z=s.unstable_now();M=Z;var nt=!0;try{t:{O=!1,k&&(k=!1,X(R),R=-1),I=!0;var Tt=C;try{e:{for(it(Z),w=e(m);w!==null&&!(w.expirationTime>Z&&B());){var dt=w.callback;if(typeof dt=="function"){w.callback=null,C=w.priorityLevel;var pt=dt(w.expirationTime<=Z);if(Z=s.unstable_now(),typeof pt=="function"){w.callback=pt,it(Z),nt=!0;break e}w===e(m)&&i(m),it(Z)}else i(m);w=e(m)}if(w!==null)nt=!0;else{var G=e(_);G!==null&&Rt(K,G.startTime-Z),nt=!1}}break t}finally{w=null,C=Tt,I=!1}nt=void 0}}finally{nt?F():W=!1}}}var F;if(typeof Y=="function")F=function(){Y(P)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,vt=U.port2;U.port1.onmessage=P,F=function(){vt.postMessage(null)}}else F=function(){z(P,0)};function Rt(Z,nt){R=z(function(){Z(s.unstable_now())},nt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(Z){switch(C){case 1:case 2:case 3:var nt=3;break;default:nt=C}var Tt=C;C=nt;try{return Z()}finally{C=Tt}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(Z,nt){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Tt=C;C=Z;try{return nt()}finally{C=Tt}},s.unstable_scheduleCallback=function(Z,nt,Tt){var dt=s.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?dt+Tt:dt):Tt=dt,Z){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=Tt+pt,Z={id:T++,callback:nt,priorityLevel:Z,startTime:Tt,expirationTime:pt,sortIndex:-1},Tt>dt?(Z.sortIndex=Tt,t(_,Z),e(m)===null&&Z===e(_)&&(k?(X(R),R=-1):k=!0,Rt(K,Tt-dt))):(Z.sortIndex=pt,t(m,Z),O||I||(O=!0,W||(W=!0,F()))),Z},s.unstable_shouldYield=B,s.unstable_wrapCallback=function(Z){var nt=C;return function(){var Tt=C;C=nt;try{return Z.apply(this,arguments)}finally{C=Tt}}}})(p1)),p1}var lb;function fx(){return lb||(lb=1,d1.exports=hx()),d1.exports}var m1={exports:{}},gs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function dx(){if(cb)return gs;cb=1;var s=R0();function t(m){var _="https://react.dev/errors/"+m;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(m,_,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:m,containerInfo:_,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,_){if(m==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,gs.createPortal=function(m,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(m,_,null,T)},gs.flushSync=function(m){var _=f.T,T=i.p;try{if(f.T=null,i.p=2,m)return m()}finally{f.T=_,i.p=T,i.d.f()}},gs.preconnect=function(m,_){typeof m=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(m,_))},gs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},gs.preinit=function(m,_){if(typeof m=="string"&&_&&typeof _.as=="string"){var T=_.as,w=d(T,_.crossOrigin),C=typeof _.integrity=="string"?_.integrity:void 0,I=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?i.d.S(m,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:C,fetchPriority:I}):T==="script"&&i.d.X(m,{crossOrigin:w,integrity:C,fetchPriority:I,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},gs.preinitModule=function(m,_){if(typeof m=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=d(_.as,_.crossOrigin);i.d.M(m,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(m)},gs.preload=function(m,_){if(typeof m=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,w=d(T,_.crossOrigin);i.d.L(m,T,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},gs.preloadModule=function(m,_){if(typeof m=="string")if(_){var T=d(_.as,_.crossOrigin);i.d.m(m,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(m)},gs.requestFormReset=function(m){i.d.r(m)},gs.unstable_batchedUpdates=function(m,_){return m(_)},gs.useFormState=function(m,_,T){return f.H.useFormState(m,_,T)},gs.useFormStatus=function(){return f.H.useHostTransitionStatus()},gs.version="19.2.0",gs}var ub;function px(){if(ub)return m1.exports;ub=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),m1.exports=dx(),m1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function mx(){if(hb)return Qm;hb=1;var s=fx(),t=R0(),e=px();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function f(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(i(188))}function _(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,u=r;;){var g=o.return;if(g===null)break;var v=g.alternate;if(v===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===o)return m(g),n;if(v===u)return m(g),r;v=v.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=v;else{for(var A=!1,V=g.child;V;){if(V===o){A=!0,o=g,u=v;break}if(V===u){A=!0,u=g,o=v;break}V=V.sibling}if(!A){for(V=v.child;V;){if(V===o){A=!0,o=v,u=g;break}if(V===u){A=!0,u=v,o=g;break}V=V.sibling}if(!A)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function T(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=T(n),r!==null)return r;n=n.sibling}return null}var w=Object.assign,C=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var U=Symbol.for("react.client.reference");function vt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===U?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case z:return"Profiler";case D:return"StrictMode";case K:return"Suspense";case W:return"SuspenseList";case M:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case Y:return n.displayName||"Context";case X:return(n._context.displayName||"Context")+".Consumer";case it:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:vt(n.type)||"Memo";case E:r=n._payload,n=n._init;try{return vt(n(r))}catch{}}return null}var Rt=Array.isArray,Z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt={pending:!1,data:null,method:null,action:null},dt=[],pt=-1;function G(n){return{current:n}}function at(n){0>pt||(n.current=dt[pt],dt[pt]=null,pt--)}function St(n,r){pt++,dt[pt]=n.current,n.current=r}var Dt=G(null),Nt=G(null),jt=G(null),Ft=G(null);function kt(n,r){switch(St(jt,r),St(Nt,n),St(Dt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Oh(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Oh(r),n=ps(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}at(Dt),St(Dt,n)}function te(){at(Dt),at(Nt),at(jt)}function Ae(n){n.memoizedState!==null&&St(Ft,n);var r=Dt.current,o=ps(r,n.type);r!==o&&(St(Nt,n),St(Dt,o))}function Ye(n){Nt.current===n&&(at(Dt),at(Nt)),Ft.current===n&&(at(Ft),qc._currentValue=Tt)}var he,gn;function Re(n){if(he===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);he=r&&r[1]||"",gn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+n+gn}var gt=!1;function Lt(n,r){if(!n||gt)return"";gt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(mt){var ut=mt}Reflect.construct(n,[],bt)}else{try{bt.call()}catch(mt){ut=mt}n.call(bt.prototype)}}else{try{throw Error()}catch(mt){ut=mt}(bt=n())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(mt){if(mt&&ut&&typeof mt.stack=="string")return[mt.stack,ut.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),A=v[0],V=v[1];if(A&&V){var Q=A.split(`
`),ct=V.split(`
`);for(g=u=0;u<Q.length&&!Q[u].includes("DetermineComponentFrameRoot");)u++;for(;g<ct.length&&!ct[g].includes("DetermineComponentFrameRoot");)g++;if(u===Q.length||g===ct.length)for(u=Q.length-1,g=ct.length-1;1<=u&&0<=g&&Q[u]!==ct[g];)g--;for(;1<=u&&0<=g;u--,g--)if(Q[u]!==ct[g]){if(u!==1||g!==1)do if(u--,g--,0>g||Q[u]!==ct[g]){var yt=`
`+Q[u].replace(" at new "," at ");return n.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",n.displayName)),yt}while(1<=u&&0<=g);break}}}finally{gt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Re(o):""}function $t(n,r){switch(n.tag){case 26:case 27:case 5:return Re(n.type);case 16:return Re("Lazy");case 13:return n.child!==r&&r!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Lt(n.type,!1);case 11:return Lt(n.type.render,!1);case 1:return Lt(n.type,!0);case 31:return Re("Activity");default:return""}}function Pt(n){try{var r="",o=null;do r+=$t(n,o),o=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ot=Object.prototype.hasOwnProperty,Ut=s.unstable_scheduleCallback,ne=s.unstable_cancelCallback,ae=s.unstable_shouldYield,en=s.unstable_requestPaint,fn=s.unstable_now,Rn=s.unstable_getCurrentPriorityLevel,Qr=s.unstable_ImmediatePriority,fi=s.unstable_UserBlockingPriority,Di=s.unstable_NormalPriority,bs=s.unstable_LowPriority,ao=s.unstable_IdlePriority,Ss=s.log,wa=s.unstable_setDisableYieldValue,Bi=null,Nn=null;function Ln(n){if(typeof Ss=="function"&&wa(n),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(Bi,n)}catch{}}var dn=Math.clz32?Math.clz32:Fl,oo=Math.log,lo=Math.LN2;function Fl(n){return n>>>=0,n===0?32:31-(oo(n)/lo|0)|0}var $s=256,Xr=262144,In=4194304;function Ys(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qi(n,r,o){var u=n.pendingLanes;if(u===0)return 0;var g=0,v=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var V=u&134217727;return V!==0?(u=V&~v,u!==0?g=Ys(u):(A&=V,A!==0?g=Ys(A):o||(o=V&~n,o!==0&&(g=Ys(o))))):(V=u&~v,V!==0?g=Ys(V):A!==0?g=Ys(A):o||(o=u&~n,o!==0&&(g=Ys(o)))),g===0?0:r!==0&&r!==g&&(r&v)===0&&(v=g&-g,o=r&-r,v>=o||v===32&&(o&4194048)!==0)?r:g}function Ji(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Xo(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zo(){var n=In;return In<<=1,(In&62914560)===0&&(In=4194304),n}function Qs(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function ba(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gu(n,r,o,u,g,v){var A=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var V=n.entanglements,Q=n.expirationTimes,ct=n.hiddenUpdates;for(o=A&~o;0<o;){var yt=31-dn(o),bt=1<<yt;V[yt]=0,Q[yt]=-1;var ut=ct[yt];if(ut!==null)for(ct[yt]=null,yt=0;yt<ut.length;yt++){var mt=ut[yt];mt!==null&&(mt.lane&=-536870913)}o&=~bt}u!==0&&Tr(n,u,0),v!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=v&~(A&~r))}function Tr(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-dn(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Jo(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-dn(o),g=1<<u;g&r|n[u]&r&&(n[u]|=r),o&=~g}}function Sa(n,r){var o=r&-r;return o=(o&42)!==0?1:wr(o),(o&(n.suspendedLanes|r))!==0?0:o}function wr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function It(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Xt(){var n=nt.p;return n!==0?n:(n=window.event,n===void 0?32:xy(n.type))}function Bt(n,r){var o=nt.p;try{return nt.p=n,r()}finally{nt.p=o}}var zt=Math.random().toString(36).slice(2),Yt="__reactFiber$"+zt,me="__reactProps$"+zt,an="__reactContainer$"+zt,Be="__reactEvents$"+zt,bi="__reactListeners$"+zt,ts="__reactHandles$"+zt,br="__reactResources$"+zt,es="__reactMarker$"+zt;function Hl(n){delete n[Yt],delete n[me],delete n[Be],delete n[bi],delete n[ts]}function Zr(n){var r=n[Yt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[an]||o[Yt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=uy(n);n!==null;){if(o=n[Yt])return o;n=uy(n)}return r}n=o,o=n.parentNode}return null}function Fi(n){if(n=n[Yt]||n[an]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function As(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Es(n){var r=n[br];return r||(r=n[br]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Zn(n){n[es]=!0}var _u=new Set,yu={};function Sr(n,r){Ar(n,r),Ar(n+"Capture",r)}function Ar(n,r){for(yu[n]=r,n=0;n<r.length;n++)_u.add(r[n])}var Gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vu={},Tu={};function sf(n){return Ot.call(Tu,n)?!0:Ot.call(vu,n)?!1:Gl.test(n)?Tu[n]=!0:(vu[n]=!0,!1)}function Kl(n,r,o){if(sf(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function ns(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Gn(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}function ri(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Jr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wu(n,r,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return g.call(this)},set:function(A){o=""+A,v.call(this,A)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(A){o=""+A},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Qe(n){if(!n._valueTracker){var r=Jr(n)?"checked":"value";n._valueTracker=wu(n,r,""+n[r])}}function ta(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=Jr(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function Er(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var tl=/[\n"\\]/g;function Hi(n){return n.replace(tl,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function el(n,r,o,u,g,v,A,V){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),r!=null?A==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ri(r)):n.value!==""+ri(r)&&(n.value=""+ri(r)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),r!=null?bu(n,A,ri(r)):o!=null?bu(n,A,ri(o)):u!=null&&n.removeAttribute("value"),g==null&&v!=null&&(n.defaultChecked=!!v),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?n.name=""+ri(V):n.removeAttribute("name")}function Wl(n,r,o,u,g,v,A,V){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),r!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Qe(n);return}o=o!=null?""+ri(o):"",r=r!=null?""+ri(r):o,V||r===n.value||(n.value=r),n.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=V?n.checked:!!u,n.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A),Qe(n)}function bu(n,r,o){r==="number"&&Er(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Aa(n,r,o,u){if(n=n.options,r){r={};for(var g=0;g<o.length;g++)r["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=r.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&u&&(n[o].defaultSelected=!0)}else{for(o=""+ri(o),r=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}r!==null||n[g].disabled||(r=n[g])}r!==null&&(r.selected=!0)}}function $l(n,r,o){if(r!=null&&(r=""+ri(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+ri(o):""}function ea(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(Rt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=ri(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Qe(n)}function ai(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Su=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||Su.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Au(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&o[g]!==u&&Yl(n,g,u)}else for(var v in r)r.hasOwnProperty(v)&&Yl(n,v,r[v])}function nl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ea=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(n){return Ea.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Cr(){}var Cu=null;function Xs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ca=null,na=null;function sl(n){var r=Fi(n);if(r&&(n=r.stateNode)){var o=n[me]||null;t:switch(n=r.stateNode,r.type){case"input":if(el(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Hi(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var g=u[me]||null;if(!g)throw Error(i(90));el(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&ta(u)}break t;case"textarea":$l(n,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&Aa(n,!!o.multiple,r,!1)}}}var Ql=!1;function co(n,r,o){if(Ql)return n(r,o);Ql=!0;try{var u=n(r);return u}finally{if(Ql=!1,(Ca!==null||na!==null)&&(Jf(),Ca&&(r=Ca,n=na,na=Ca=null,sl(r),n)))for(r=0;r<n.length;r++)sl(n[r])}}function Cs(n,r){var o=n.stateNode;if(o===null)return null;var u=o[me]||null;if(u===null)return null;o=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=!1;if(Zs)try{var on={};Object.defineProperty(on,"passive",{get:function(){rl=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{rl=!1}var ia=null,xu=null,We=null;function Xe(){if(We)return We;var n,r=xu,o=r.length,u,g="value"in ia?ia.value:ia.textContent,v=g.length;for(n=0;n<o&&r[n]===g[n];n++);var A=o-n;for(u=1;u<=A&&r[o-u]===g[v-u];u++);return We=g.slice(n,1<u?1-u:void 0)}function al(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function xa(){return!0}function xr(){return!1}function Si(n){function r(o,u,g,v,A){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var V in n)n.hasOwnProperty(V)&&(o=n[V],this[V]=o?o(v):v[V]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?xa:xr,this.isPropagationStopped=xr,this}return w(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xa)},persist:function(){},isPersistent:xa}),r}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=Si(Ra),Na=w({},Ra,{view:0,detail:0}),Ru=Si(Na),bn,uo,Mi,ol=w({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mi&&(Mi&&n.type==="mousemove"?(bn=n.screenX-Mi.screenX,uo=n.screenY-Mi.screenY):uo=bn=0,Mi=n),bn)},movementY:function(n){return"movementY"in n?n.movementY:uo}}),ll=Si(ol),di=w({},ol,{dataTransfer:0}),Nu=Si(di),Iu=w({},Na,{relatedTarget:0}),ho=Si(Iu),Xl=w({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),Ou=Si(Xl),cl=w({},Ra,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ki=Si(cl),rf=w({},Ra,{data:0}),Kn=Si(rf),af={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ul(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Rr[n])?!!r[n]:!1}function ra(){return ul}var Ee=w({},Na,{key:function(n){if(n.key){var r=af[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=al(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Du[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(n){return n.type==="keypress"?al(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?al(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Nr=Si(Ee),Zl=w({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ia=Si(Zl),p=w({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra}),S=Si(p),x=w({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Si(x),ot=w({},ol,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ht=Si(ot),Vt=w({},Ra,{newState:0,oldState:0}),ge=Si(Vt),Pn=[9,13,27,32],qe=Zs&&"CompositionEvent"in window,_n=null;Zs&&"documentMode"in document&&(_n=document.documentMode);var is=Zs&&"TextEvent"in window&&!_n,Ir=Zs&&(!qe||_n&&8<_n&&11>=_n),Or=" ",xs=!1;function Oa(n,r){switch(n){case"keyup":return Pn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var hl=!1;function Rs(n,r){switch(n){case"compositionend":return Jl(r);case"keypress":return r.which!==32?null:(xs=!0,Or);case"textInput":return n=r.data,n===Or&&xs?null:n;default:return null}}function dp(n,r){if(hl)return n==="compositionend"||!qe&&Oa(n,r)?(n=Xe(),We=xu=ia=null,hl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ir&&r.locale!=="ko"?null:r.data;default:return null}}var Mu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Mu[n.type]:r==="textarea"}function mp(n,r,o,u){Ca?na?na.push(u):na=[u]:Ca=u,r=xh(r,"onChange"),0<r.length&&(o=new sa("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var ku=null,Vu=null;function _v(n){ey(n,0)}function of(n){var r=As(n);if(ta(r))return n}function qg(n,r){if(n==="change")return r}var fl=!1;if(Zs){var gp;if(Zs){var _p="oninput"in document;if(!_p){var lf=document.createElement("div");lf.setAttribute("oninput","return;"),_p=typeof lf.oninput=="function"}gp=_p}else gp=!1;fl=gp&&(!document.documentMode||9<document.documentMode)}function yp(){ku&&(ku.detachEvent("onpropertychange",Da),Vu=ku=null)}function Da(n){if(n.propertyName==="value"&&of(Vu)){var r=[];mp(r,Vu,n,Xs(n)),co(_v,r)}}function cf(n,r,o){n==="focusin"?(yp(),ku=r,Vu=o,ku.attachEvent("onpropertychange",Da)):n==="focusout"&&yp()}function yv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return of(Vu)}function vv(n,r){if(n==="click")return of(r)}function Tv(n,r){if(n==="input"||n==="change")return of(r)}function tc(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var On=typeof Object.is=="function"?Object.is:tc;function ec(n,r){if(On(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Ot.call(r,g)||!On(n[g],r[g]))return!1}return!0}function Fg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hg(n,r){var o=Fg(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Fg(o)}}function Gg(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Gg(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Kg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Er(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Er(n.document)}return r}function vp(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var nc=Zs&&"documentMode"in document&&11>=document.documentMode,et=null,_t=null,ft=null,Gt=!1;function fe(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Gt||et==null||et!==Er(u)||(u=et,"selectionStart"in u&&vp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ft&&ec(ft,u)||(ft=u,u=xh(_t,"onSelect"),0<u.length&&(r=new sa("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=et)))}function Ne(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Sn={animationend:Ne("Animation","AnimationEnd"),animationiteration:Ne("Animation","AnimationIteration"),animationstart:Ne("Animation","AnimationStart"),transitionrun:Ne("Transition","TransitionRun"),transitionstart:Ne("Transition","TransitionStart"),transitioncancel:Ne("Transition","TransitionCancel"),transitionend:Ne("Transition","TransitionEnd")},nn={},uf={};Zs&&(uf=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);function dl(n){if(nn[n])return nn[n];if(!Sn[n])return n;var r=Sn[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in uf)return nn[n]=r[o];return n}var Ns=dl("animationend"),ju=dl("animationiteration"),Wg=dl("animationstart"),ic=dl("transitionrun"),hf=dl("transitionstart"),ff=dl("transitioncancel"),Ze=dl("transitionend"),$g=new Map,df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");df.push("scrollEnd");function ss(n,r){$g.set(n,r),Sr(r,[n])}var pf=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Js=[],sc=0,rc=0;function Dr(){for(var n=sc,r=rc=sc=0;r<n;){var o=Js[r];Js[r++]=null;var u=Js[r];Js[r++]=null;var g=Js[r];Js[r++]=null;var v=Js[r];if(Js[r++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}v!==0&&Tp(o,g,v)}}function pl(n,r,o,u){Js[sc++]=n,Js[sc++]=r,Js[sc++]=o,Js[sc++]=u,rc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function mf(n,r,o,u){return pl(n,r,o,u),Lu(n)}function aa(n,r){return pl(n,null,null,r),Lu(n)}function Tp(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var g=!1,v=n.return;v!==null;)v.childLanes|=o,u=v.alternate,u!==null&&(u.childLanes|=o),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(g=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,g&&r!==null&&(g=31-dn(o),n=v.hiddenUpdates,u=n[g],u===null?n[g]=[r]:u.push(r),r.lane=o|536870912),v):null}function Lu(n){if(50<Th)throw Th=0,vm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ma={};function Yg(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(n,r,o,u){return new Yg(n,r,o,u)}function ka(n){return n=n.prototype,!(!n||!n.isReactComponent)}function tr(n,r){var o=n.alternate;return o===null?(o=Ai(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Qg(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function gf(n,r,o,u,g,v){var A=0;if(u=n,typeof n=="function")ka(n)&&(A=1);else if(typeof n=="string")A=e1(n,o,Dt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case M:return n=Ai(31,o,r,g),n.elementType=M,n.lanes=v,n;case k:return ml(o.children,g,v,r);case D:A=8,g|=24;break;case z:return n=Ai(12,o,r,g|2),n.elementType=z,n.lanes=v,n;case K:return n=Ai(13,o,r,g),n.elementType=K,n.lanes=v,n;case W:return n=Ai(19,o,r,g),n.elementType=W,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:A=10;break t;case X:A=9;break t;case it:A=11;break t;case R:A=14;break t;case E:A=16,u=null;break t}A=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return r=Ai(A,o,r,g),r.elementType=n,r.type=u,r.lanes=v,r}function ml(n,r,o,u){return n=Ai(7,n,u,r),n.lanes=o,n}function ac(n,r,o){return n=Ai(6,n,null,r),n.lanes=o,n}function Pu(n){var r=Ai(18,null,null,0);return r.stateNode=n,r}function Uu(n,r,o){return r=Ai(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Xg=new WeakMap;function Is(n,r){if(typeof n=="object"&&n!==null){var o=Xg.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Pt(r)},Xg.set(n,r),r)}return{value:n,source:r,stack:Pt(r)}}var oc=[],lc=0,Un=null,Jn=0,er=[],nr=0,Va=null,oa=1,ir="";function Os(n,r){oc[lc++]=Jn,oc[lc++]=Un,Un=n,Jn=r}function _f(n,r,o){er[nr++]=oa,er[nr++]=ir,er[nr++]=Va,Va=n;var u=oa;n=ir;var g=32-dn(u)-1;u&=~(1<<g),o+=1;var v=32-dn(r)+g;if(30<v){var A=g-g%5;v=(u&(1<<A)-1).toString(32),u>>=A,g-=A,oa=1<<32-dn(r)+g|o<<g|u,ir=v+n}else oa=1<<v|o<<g|u,ir=n}function fo(n){n.return!==null&&(Os(n,1),_f(n,1,0))}function gl(n){for(;n===Un;)Un=oc[--lc],oc[lc]=null,Jn=oc[--lc],oc[lc]=null;for(;n===Va;)Va=er[--nr],er[nr]=null,ir=er[--nr],er[nr]=null,oa=er[--nr],er[nr]=null}function cc(n,r){er[nr++]=oa,er[nr++]=ir,er[nr++]=Va,oa=r.id,ir=r.overflow,Va=n}var ti=null,Je=null,ke=!1,po=null,sr=!1,wp=Error(i(519));function mo(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _o(Is(r,n)),wp}function zu(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[Yt]=n,r[me]=u,o){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(o=0;o<Ch.length;o++)Oe(Ch[o],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),Wl(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),ea(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||sy(r.textContent,o)?(u.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),u.onScroll!=null&&Oe("scroll",r),u.onScrollEnd!=null&&Oe("scrollend",r),u.onClick!=null&&(r.onclick=Cr),r=!0):r=!1,r||mo(n,!0)}function uc(n){for(ti=n.return;ti;)switch(ti.tag){case 5:case 31:case 13:sr=!1;return;case 27:case 3:sr=!0;return;default:ti=ti.return}}function _l(n){if(n!==ti)return!1;if(!ke)return uc(n),ke=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Mo(n.type,n.memoizedProps)),o=!o),o&&Je&&mo(n),uc(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Je=cy(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Je=cy(n)}else r===27?(r=Je,oe(n.type)?(n=Um,Um=null,Je=n):Je=r):Je=ti?hr(n.stateNode.nextSibling):null;return!0}function j(){Je=ti=null,ke=!1}function go(){var n=po;return n!==null&&(hs===null?hs=n:hs.push.apply(hs,n),po=null),n}function _o(n){po===null?po=[n]:po.push(n)}var rs=G(null),_e=null,ja=null;function yo(n,r,o){St(rs,r._currentValue),r._currentValue=o}function La(n){n._currentValue=rs.current,at(rs)}function Pa(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function bp(n,r,o,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var v=g.dependencies;if(v!==null){var A=g.child;v=v.firstContext;t:for(;v!==null;){var V=v;v=g;for(var Q=0;Q<r.length;Q++)if(V.context===r[Q]){v.lanes|=o,V=v.alternate,V!==null&&(V.lanes|=o),Pa(v.return,o,n),u||(A=null);break t}v=V.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=o,v=A.alternate,v!==null&&(v.lanes|=o),Pa(A,o,n),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===n){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function hc(n,r,o,u){n=null;for(var g=r,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var V=g.type;On(g.pendingProps.value,A.value)||(n!==null?n.push(V):n=[V])}}else if(g===Ft.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(qc):n=[qc])}g=g.return}n!==null&&bp(r,n,o,u),r.flags|=262144}function yf(n){for(n=n.firstContext;n!==null;){if(!On(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function yl(n){_e=n,ja=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ei(n){return Zg(_e,n)}function rr(n,r){return _e===null&&yl(n),Zg(n,r)}function Zg(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ja===null){if(n===null)throw Error(i(308));ja=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ja=ja.next=r;return o}var wv=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},bv=s.unstable_scheduleCallback,Sv=s.unstable_NormalPriority,ei={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mr(){return{controller:new wv,data:new Map,refCount:0}}function Bu(n){n.refCount--,n.refCount===0&&bv(Sv,function(){n.controller.abort()})}var qu=null,Sp=0,fc=0,dc=null;function vl(n,r){if(qu===null){var o=qu=[];Sp=0,fc=zs(),dc={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Sp++,r.then(Jg,Jg),r}function Jg(){if(--Sp===0&&qu!==null){dc!==null&&(dc.status="fulfilled");var n=qu;qu=null,fc=0,dc=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Av(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<o.length;g++)(0,o[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var ar=Z.S;Z.S=function(n,r){L_=fn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&vl(n,r),ar!==null&&ar(n,r)};var Tl=G(null);function Ap(){var n=Tl.current;return n!==null?n:mn.pooledCache}function vf(n,r){r===null?St(Tl,Tl.current):St(Tl,r.pool)}function t_(){var n=Ap();return n===null?null:{parent:ei._currentValue,pool:n}}var pc=Error(i(460)),Tf=Error(i(474)),Fu=Error(i(542)),wf={then:function(){}};function e_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bf(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Cr,Cr),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ep(n),n;default:if(typeof r.status=="string")r.then(Cr,Cr);else{if(n=mn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ep(n),n}throw la=r,pc}}function kr(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(la=o,pc):o}}var la=null;function n_(){if(la===null)throw Error(i(459));var n=la;return la=null,n}function Ep(n){if(n===pc||n===Fu)throw Error(i(483))}var mc=null,Ds=0;function gc(n){var r=Ds;return Ds+=1,mc===null&&(mc=[]),bf(mc,n,r)}function Vr(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Gi(n,r){throw r.$$typeof===C?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function i_(n){function r(st,tt){if(n){var lt=st.deletions;lt===null?(st.deletions=[tt],st.flags|=16):lt.push(tt)}}function o(st,tt){if(!n)return null;for(;tt!==null;)r(st,tt),tt=tt.sibling;return null}function u(st){for(var tt=new Map;st!==null;)st.key!==null?tt.set(st.key,st):tt.set(st.index,st),st=st.sibling;return tt}function g(st,tt){return st=tr(st,tt),st.index=0,st.sibling=null,st}function v(st,tt,lt){return st.index=lt,n?(lt=st.alternate,lt!==null?(lt=lt.index,lt<tt?(st.flags|=67108866,tt):lt):(st.flags|=67108866,tt)):(st.flags|=1048576,tt)}function A(st){return n&&st.alternate===null&&(st.flags|=67108866),st}function V(st,tt,lt,wt){return tt===null||tt.tag!==6?(tt=ac(lt,st.mode,wt),tt.return=st,tt):(tt=g(tt,lt),tt.return=st,tt)}function Q(st,tt,lt,wt){var ee=lt.type;return ee===k?yt(st,tt,lt.props.children,wt,lt.key):tt!==null&&(tt.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===E&&kr(ee)===tt.type)?(tt=g(tt,lt.props),Vr(tt,lt),tt.return=st,tt):(tt=gf(lt.type,lt.key,lt.props,null,st.mode,wt),Vr(tt,lt),tt.return=st,tt)}function ct(st,tt,lt,wt){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==lt.containerInfo||tt.stateNode.implementation!==lt.implementation?(tt=Uu(lt,st.mode,wt),tt.return=st,tt):(tt=g(tt,lt.children||[]),tt.return=st,tt)}function yt(st,tt,lt,wt,ee){return tt===null||tt.tag!==7?(tt=ml(lt,st.mode,wt,ee),tt.return=st,tt):(tt=g(tt,lt),tt.return=st,tt)}function bt(st,tt,lt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=ac(""+tt,st.mode,lt),tt.return=st,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case I:return lt=gf(tt.type,tt.key,tt.props,null,st.mode,lt),Vr(lt,tt),lt.return=st,lt;case O:return tt=Uu(tt,st.mode,lt),tt.return=st,tt;case E:return tt=kr(tt),bt(st,tt,lt)}if(Rt(tt)||F(tt))return tt=ml(tt,st.mode,lt,null),tt.return=st,tt;if(typeof tt.then=="function")return bt(st,gc(tt),lt);if(tt.$$typeof===Y)return bt(st,rr(st,tt),lt);Gi(st,tt)}return null}function ut(st,tt,lt,wt){var ee=tt!==null?tt.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return ee!==null?null:V(st,tt,""+lt,wt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case I:return lt.key===ee?Q(st,tt,lt,wt):null;case O:return lt.key===ee?ct(st,tt,lt,wt):null;case E:return lt=kr(lt),ut(st,tt,lt,wt)}if(Rt(lt)||F(lt))return ee!==null?null:yt(st,tt,lt,wt,null);if(typeof lt.then=="function")return ut(st,tt,gc(lt),wt);if(lt.$$typeof===Y)return ut(st,tt,rr(st,lt),wt);Gi(st,lt)}return null}function mt(st,tt,lt,wt,ee){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return st=st.get(lt)||null,V(tt,st,""+wt,ee);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case I:return st=st.get(wt.key===null?lt:wt.key)||null,Q(tt,st,wt,ee);case O:return st=st.get(wt.key===null?lt:wt.key)||null,ct(tt,st,wt,ee);case E:return wt=kr(wt),mt(st,tt,lt,wt,ee)}if(Rt(wt)||F(wt))return st=st.get(lt)||null,yt(tt,st,wt,ee,null);if(typeof wt.then=="function")return mt(st,tt,lt,gc(wt),ee);if(wt.$$typeof===Y)return mt(st,tt,lt,rr(tt,wt),ee);Gi(tt,wt)}return null}function Qt(st,tt,lt,wt){for(var ee=null,Fe=null,Zt=tt,be=tt=0,Me=null;Zt!==null&&be<lt.length;be++){Zt.index>be?(Me=Zt,Zt=null):Me=Zt.sibling;var He=ut(st,Zt,lt[be],wt);if(He===null){Zt===null&&(Zt=Me);break}n&&Zt&&He.alternate===null&&r(st,Zt),tt=v(He,tt,be),Fe===null?ee=He:Fe.sibling=He,Fe=He,Zt=Me}if(be===lt.length)return o(st,Zt),ke&&Os(st,be),ee;if(Zt===null){for(;be<lt.length;be++)Zt=bt(st,lt[be],wt),Zt!==null&&(tt=v(Zt,tt,be),Fe===null?ee=Zt:Fe.sibling=Zt,Fe=Zt);return ke&&Os(st,be),ee}for(Zt=u(Zt);be<lt.length;be++)Me=mt(Zt,st,be,lt[be],wt),Me!==null&&(n&&Me.alternate!==null&&Zt.delete(Me.key===null?be:Me.key),tt=v(Me,tt,be),Fe===null?ee=Me:Fe.sibling=Me,Fe=Me);return n&&Zt.forEach(function(Uo){return r(st,Uo)}),ke&&Os(st,be),ee}function re(st,tt,lt,wt){if(lt==null)throw Error(i(151));for(var ee=null,Fe=null,Zt=tt,be=tt=0,Me=null,He=lt.next();Zt!==null&&!He.done;be++,He=lt.next()){Zt.index>be?(Me=Zt,Zt=null):Me=Zt.sibling;var Uo=ut(st,Zt,He.value,wt);if(Uo===null){Zt===null&&(Zt=Me);break}n&&Zt&&Uo.alternate===null&&r(st,Zt),tt=v(Uo,tt,be),Fe===null?ee=Uo:Fe.sibling=Uo,Fe=Uo,Zt=Me}if(He.done)return o(st,Zt),ke&&Os(st,be),ee;if(Zt===null){for(;!He.done;be++,He=lt.next())He=bt(st,He.value,wt),He!==null&&(tt=v(He,tt,be),Fe===null?ee=He:Fe.sibling=He,Fe=He);return ke&&Os(st,be),ee}for(Zt=u(Zt);!He.done;be++,He=lt.next())He=mt(Zt,st,be,He.value,wt),He!==null&&(n&&He.alternate!==null&&Zt.delete(He.key===null?be:He.key),tt=v(He,tt,be),Fe===null?ee=He:Fe.sibling=He,Fe=He);return n&&Zt.forEach(function(c1){return r(st,c1)}),ke&&Os(st,be),ee}function un(st,tt,lt,wt){if(typeof lt=="object"&&lt!==null&&lt.type===k&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case I:t:{for(var ee=lt.key;tt!==null;){if(tt.key===ee){if(ee=lt.type,ee===k){if(tt.tag===7){o(st,tt.sibling),wt=g(tt,lt.props.children),wt.return=st,st=wt;break t}}else if(tt.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===E&&kr(ee)===tt.type){o(st,tt.sibling),wt=g(tt,lt.props),Vr(wt,lt),wt.return=st,st=wt;break t}o(st,tt);break}else r(st,tt);tt=tt.sibling}lt.type===k?(wt=ml(lt.props.children,st.mode,wt,lt.key),wt.return=st,st=wt):(wt=gf(lt.type,lt.key,lt.props,null,st.mode,wt),Vr(wt,lt),wt.return=st,st=wt)}return A(st);case O:t:{for(ee=lt.key;tt!==null;){if(tt.key===ee)if(tt.tag===4&&tt.stateNode.containerInfo===lt.containerInfo&&tt.stateNode.implementation===lt.implementation){o(st,tt.sibling),wt=g(tt,lt.children||[]),wt.return=st,st=wt;break t}else{o(st,tt);break}else r(st,tt);tt=tt.sibling}wt=Uu(lt,st.mode,wt),wt.return=st,st=wt}return A(st);case E:return lt=kr(lt),un(st,tt,lt,wt)}if(Rt(lt))return Qt(st,tt,lt,wt);if(F(lt)){if(ee=F(lt),typeof ee!="function")throw Error(i(150));return lt=ee.call(lt),re(st,tt,lt,wt)}if(typeof lt.then=="function")return un(st,tt,gc(lt),wt);if(lt.$$typeof===Y)return un(st,tt,rr(st,lt),wt);Gi(st,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,tt!==null&&tt.tag===6?(o(st,tt.sibling),wt=g(tt,lt),wt.return=st,st=wt):(o(st,tt),wt=ac(lt,st.mode,wt),wt.return=st,st=wt),A(st)):o(st,tt)}return function(st,tt,lt,wt){try{Ds=0;var ee=un(st,tt,lt,wt);return mc=null,ee}catch(Zt){if(Zt===pc||Zt===Fu)throw Zt;var Fe=Ai(29,Zt,null,st.mode);return Fe.lanes=wt,Fe.return=st,Fe}finally{}}}var vo=i_(!0),Cp=i_(!1),or=!1;function ca(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function To(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function jr(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=Lu(n),Tp(n,null,o),r}return pl(n,u,r,o),Lu(n)}function Hu(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Jo(n,o)}}function Af(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var A={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?g=v=A:v=v.next=A,o=o.next}while(o!==null);v===null?g=v=r:v=v.next=r}else g=v=r;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var oi=!1;function wl(){if(oi){var n=dc;if(n!==null)throw n}}function _c(n,r,o,u){oi=!1;var g=n.updateQueue;or=!1;var v=g.firstBaseUpdate,A=g.lastBaseUpdate,V=g.shared.pending;if(V!==null){g.shared.pending=null;var Q=V,ct=Q.next;Q.next=null,A===null?v=ct:A.next=ct,A=Q;var yt=n.alternate;yt!==null&&(yt=yt.updateQueue,V=yt.lastBaseUpdate,V!==A&&(V===null?yt.firstBaseUpdate=ct:V.next=ct,yt.lastBaseUpdate=Q))}if(v!==null){var bt=g.baseState;A=0,yt=ct=Q=null,V=v;do{var ut=V.lane&-536870913,mt=ut!==V.lane;if(mt?(De&ut)===ut:(u&ut)===ut){ut!==0&&ut===fc&&(oi=!0),yt!==null&&(yt=yt.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});t:{var Qt=n,re=V;ut=r;var un=o;switch(re.tag){case 1:if(Qt=re.payload,typeof Qt=="function"){bt=Qt.call(un,bt,ut);break t}bt=Qt;break t;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=re.payload,ut=typeof Qt=="function"?Qt.call(un,bt,ut):Qt,ut==null)break t;bt=w({},bt,ut);break t;case 2:or=!0}}ut=V.callback,ut!==null&&(n.flags|=64,mt&&(n.flags|=8192),mt=g.callbacks,mt===null?g.callbacks=[ut]:mt.push(ut))}else mt={lane:ut,tag:V.tag,payload:V.payload,callback:V.callback,next:null},yt===null?(ct=yt=mt,Q=bt):yt=yt.next=mt,A|=ut;if(V=V.next,V===null){if(V=g.shared.pending,V===null)break;mt=V,V=mt.next,mt.next=null,g.lastBaseUpdate=mt,g.shared.pending=null}}while(!0);yt===null&&(Q=bt),g.baseState=Q,g.firstBaseUpdate=ct,g.lastBaseUpdate=yt,v===null&&(g.shared.lanes=0),Ro|=A,n.lanes=A,n.memoizedState=bt}}function Lr(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function Ef(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Lr(o[n],r)}var Ua=G(null),ua=G(0);function xp(n,r){n=Fr,St(ua,n),St(Ua,r),Fr=n|r.baseLanes}function Ci(){St(ua,Fr),St(Ua,Ua.current)}function Gu(){Fr=ua.current,at(Ua),at(ua)}var Ms=G(null),lr=null;function wo(n){var r=n.alternate;St(Wn,Wn.current&1),St(Ms,n),lr===null&&(r===null||Ua.current!==null||r.memoizedState!==null)&&(lr=n)}function Ku(n){St(Wn,Wn.current),St(Ms,n),lr===null&&(lr=n)}function s_(n){n.tag===22?(St(Wn,Wn.current),St(Ms,n),lr===null&&(lr=n)):cr()}function cr(){St(Wn,Wn.current),St(Ms,Ms.current)}function as(n){at(Ms),lr===n&&(lr=null),at(Wn)}var Wn=G(0);function Cf(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||cd(o)||jc(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ks=0,ye=null,ln=null,zn=null,Wu=!1,yc=!1,bl=!1,xf=0,vc=0,bo=null,Ev=0;function An(){throw Error(i(321))}function Rf(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!On(n[o],r[o]))return!1;return!0}function Nf(n,r,o,u,g,v){return ks=v,ye=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=n===null||n.memoizedState===null?m_:Pf,bl=!1,v=o(u,g),bl=!1,yc&&(v=$u(r,o,u,g)),Rp(n),v}function Rp(n){Z.H=Ao;var r=ln!==null&&ln.next!==null;if(ks=0,zn=ln=ye=null,Wu=!1,vc=0,bo=null,r)throw Error(i(300));n===null||Dn||(n=n.dependencies,n!==null&&yf(n)&&(Dn=!0))}function $u(n,r,o,u){ye=n;var g=0;do{if(yc&&(bo=null),vc=0,yc=!1,25<=g)throw Error(i(301));if(g+=1,zn=ln=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Z.H=nh,v=r(o,u)}while(yc);return v}function Cv(){var n=Z.H,r=n.useState()[0];return r=typeof r.then=="function"?wc(r):r,n=n.useState()[0],(ln!==null?ln.memoizedState:null)!==n&&(ye.flags|=1024),r}function If(){var n=xf!==0;return xf=0,n}function Of(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Np(n){if(Wu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Wu=!1}ks=0,zn=ln=ye=null,yc=!1,vc=xf=0,bo=null}function Vi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?ye.memoizedState=zn=n:zn=zn.next=n,zn}function $n(){if(ln===null){var n=ye.alternate;n=n!==null?n.memoizedState:null}else n=ln.next;var r=zn===null?ye.memoizedState:zn.next;if(r!==null)zn=r,ln=n;else{if(n===null)throw ye.alternate===null?Error(i(467)):Error(i(310));ln=n,n={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},zn===null?ye.memoizedState=zn=n:zn=zn.next=n}return zn}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(n){var r=vc;return vc+=1,bo===null&&(bo=[]),n=bf(bo,n,r),r=ye,(zn===null?r.memoizedState:zn.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?m_:Pf),n}function bc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return wc(n);if(n.$$typeof===Y)return Ei(n)}throw Error(i(438,String(n)))}function Ip(n){var r=null,o=ye.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=ye.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Tc(),ye.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=B;return r.index++,o}function Pr(n,r){return typeof r=="function"?r(n):r}function ve(n){var r=$n();return Op(r,ln,n)}function Op(n,r,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=n.baseQueue,v=u.pending;if(v!==null){if(g!==null){var A=g.next;g.next=v.next,v.next=A}r.baseQueue=g=v,u.pending=null}if(v=n.baseState,g===null)n.memoizedState=v;else{r=g.next;var V=A=null,Q=null,ct=r,yt=!1;do{var bt=ct.lane&-536870913;if(bt!==ct.lane?(De&bt)===bt:(ks&bt)===bt){var ut=ct.revertLane;if(ut===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),bt===fc&&(yt=!0);else if((ks&ut)===ut){ct=ct.next,ut===fc&&(yt=!0);continue}else bt={lane:0,revertLane:ct.revertLane,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Q===null?(V=Q=bt,A=v):Q=Q.next=bt,ye.lanes|=ut,Ro|=ut;bt=ct.action,bl&&o(v,bt),v=ct.hasEagerState?ct.eagerState:o(v,bt)}else ut={lane:bt,revertLane:ct.revertLane,gesture:ct.gesture,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},Q===null?(V=Q=ut,A=v):Q=Q.next=ut,ye.lanes|=bt,Ro|=bt;ct=ct.next}while(ct!==null&&ct!==r);if(Q===null?A=v:Q.next=V,!On(v,n.memoizedState)&&(Dn=!0,yt&&(o=dc,o!==null)))throw o;n.memoizedState=v,n.baseState=A,n.baseQueue=Q,u.lastRenderedState=v}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Dp(n){var r=$n(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,g=o.pending,v=r.memoizedState;if(g!==null){o.pending=null;var A=g=g.next;do v=n(v,A.action),A=A.next;while(A!==g);On(v,r.memoizedState)||(Dn=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),o.lastRenderedState=v}return[v,u]}function Sc(n,r,o){var u=ye,g=$n(),v=ke;if(v){if(o===void 0)throw Error(i(407));o=o()}else o=r();var A=!On((ln||g).memoizedState,o);if(A&&(g.memoizedState=o,Dn=!0),g=g.queue,Zu(a_.bind(null,u,g,n),[n]),g.getSnapshot!==r||A||zn!==null&&zn.memoizedState.tag&1){if(u.flags|=2048,js(9,{destroy:void 0},r_.bind(null,u,g,o,r),null),mn===null)throw Error(i(349));v||(ks&127)!==0||Mp(u,r,o)}return o}function Mp(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=ye.updateQueue,r===null?(r=Tc(),ye.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function r_(n,r,o,u){r.value=o,r.getSnapshot=u,Vs(r)&&o_(n)}function a_(n,r,o){return o(function(){Vs(r)&&o_(n)})}function Vs(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!On(n,o)}catch{return!0}}function o_(n){var r=aa(n,2);r!==null&&fs(r,n,2)}function Ac(n){var r=Vi();if(typeof n=="function"){var o=n;if(n=o(),bl){Ln(!0);try{o()}finally{Ln(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:n},r}function Df(n,r,o,u){return n.baseState=o,Op(n,ln,typeof u=="function"?u:Pr)}function l_(n,r,o,u,g){if(th(n))throw Error(i(485));if(n=r.action,n!==null){var v={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Z.T!==null?o(!0):v.isTransition=!1,u(v),o=r.pending,o===null?(v.next=r.pending=v,kp(r,v)):(v.next=o.next,r.pending=o.next=v)}}function kp(n,r){var o=r.action,u=r.payload,g=n.state;if(r.isTransition){var v=Z.T,A={};Z.T=A;try{var V=o(g,u),Q=Z.S;Q!==null&&Q(A,V),os(n,r,V)}catch(ct){Yu(n,r,ct)}finally{v!==null&&A.types!==null&&(v.types=A.types),Z.T=v}}else try{v=o(g,u),os(n,r,v)}catch(ct){Yu(n,r,ct)}}function os(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){za(n,r,u)},function(u){return Yu(n,r,u)}):za(n,r,o)}function za(n,r,o){r.status="fulfilled",r.value=o,Vp(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,kp(n,o)))}function Yu(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Vp(r),r=r.next;while(r!==u)}n.action=null}function Vp(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Qu(n,r){return r}function jp(n,r){if(ke){var o=mn.formState;if(o!==null){t:{var u=ye;if(ke){if(Je){e:{for(var g=Je,v=sr;g.nodeType!==8;){if(!v){g=null;break e}if(g=hr(g.nextSibling),g===null){g=null;break e}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Je=hr(g.nextSibling),u=g.data==="F!";break t}}mo(u)}u=!1}u&&(r=o[0])}}return o=Vi(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:r},o.queue=u,o=Wp.bind(null,ye,u),u.dispatch=o,u=Ac(!1),v=Cc.bind(null,ye,!1,u.queue),u=Vi(),g={state:r,dispatch:null,action:n,pending:null},u.queue=g,o=l_.bind(null,ye,g,v,o),g.dispatch=o,u.memoizedState=n,[r,o,!1]}function Mf(n){var r=$n();return Lp(r,ln,n)}function Lp(n,r,o){if(r=Op(n,r,Qu)[0],n=ve(Pr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=wc(r)}catch(A){throw A===pc?Fu:A}else u=r;r=$n();var g=r.queue,v=g.dispatch;return o!==r.memoizedState&&(ye.flags|=2048,js(9,{destroy:void 0},Pp.bind(null,g,o),null)),[u,v,n]}function Pp(n,r){n.action=r}function kf(n){var r=$n(),o=ln;if(o!==null)return Lp(r,o,n);$n(),r=r.memoizedState,o=$n();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function js(n,r,o,u){return n={tag:n,create:o,deps:u,inst:r,next:null},r=ye.updateQueue,r===null&&(r=Tc(),ye.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function c_(){return $n().memoizedState}function Ur(n,r,o,u){var g=Vi();ye.flags|=n,g.memoizedState=js(1|r,{destroy:void 0},o,u===void 0?null:u)}function Xu(n,r,o,u){var g=$n();u=u===void 0?null:u;var v=g.memoizedState.inst;ln!==null&&u!==null&&Rf(u,ln.memoizedState.deps)?g.memoizedState=js(r,v,o,u):(ye.flags|=n,g.memoizedState=js(1|r,v,o,u))}function Up(n,r){Ur(8390656,8,n,r)}function Zu(n,r){Xu(2048,8,n,r)}function xv(n){ye.flags|=4;var r=ye.updateQueue;if(r===null)r=Tc(),ye.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function u_(n){var r=$n().memoizedState;return xv({ref:r,nextImpl:n}),function(){if(($e&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function h_(n,r){return Xu(4,2,n,r)}function zp(n,r){return Xu(4,4,n,r)}function Bp(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function f_(n,r,o){o=o!=null?o.concat([n]):null,Xu(4,4,Bp.bind(null,r,n),o)}function Vf(){}function qp(n,r){var o=$n();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Rf(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function Ki(n,r){var o=$n();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Rf(r,u[1]))return u[0];if(u=n(),bl){Ln(!0);try{n()}finally{Ln(!1)}}return o.memoizedState=[u,r],u}function ur(n,r,o){return o===void 0||(ks&1073741824)!==0&&(De&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=U_(),ye.lanes|=n,Ro|=n,o)}function d_(n,r,o,u){return On(o,r)?o:Ua.current!==null?(n=ur(n,o,u),On(n,r)||(Dn=!0),n):(ks&42)===0||(ks&1073741824)!==0&&(De&261930)===0?(Dn=!0,n.memoizedState=o):(n=U_(),ye.lanes|=n,Ro|=n,r)}function p_(n,r,o,u,g){var v=nt.p;nt.p=v!==0&&8>v?v:8;var A=Z.T,V={};Z.T=V,Cc(n,!1,r,o);try{var Q=g(),ct=Z.S;if(ct!==null&&ct(V,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var yt=Av(Q,u);Ec(n,r,yt,Us(n))}else Ec(n,r,u,Us(n))}catch(bt){Ec(n,r,{then:function(){},status:"rejected",reason:bt},Us())}finally{nt.p=v,A!==null&&V.types!==null&&(A.types=V.types),Z.T=A}}function jf(){}function So(n,r,o,u){if(n.tag!==5)throw Error(i(476));var g=Fp(n).queue;p_(n,g,r,Tt,o===null?jf:function(){return Hp(n),o(u)})}function Fp(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Tt,baseState:Tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:Tt},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Hp(n){var r=Fp(n);r.next===null&&(r=n.alternate.memoizedState),Ec(n,r.next.queue,{},Us())}function Gp(){return Ei(qc)}function Kp(){return $n().memoizedState}function Sl(){return $n().memoizedState}function Ju(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Us();n=To(o);var u=jr(r,n,o);u!==null&&(fs(u,r,o),Hu(u,r,o)),r={cache:Mr()},n.payload=r;return}r=r.return}}function Rv(n,r,o){var u=Us();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},th(n)?eh(r,o):(o=mf(n,r,o,u),o!==null&&(fs(o,n,u),Lf(o,r,u)))}function Wp(n,r,o){var u=Us();Ec(n,r,o,u)}function Ec(n,r,o,u){var g={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(th(n))eh(r,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,V=v(A,o);if(g.hasEagerState=!0,g.eagerState=V,On(V,A))return pl(n,r,g,0),mn===null&&Dr(),!1}catch{}finally{}if(o=mf(n,r,g,u),o!==null)return fs(o,n,u),Lf(o,r,u),!0}return!1}function Cc(n,r,o,u){if(u={lane:2,revertLane:zs(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},th(n)){if(r)throw Error(i(479))}else r=mf(n,o,u,2),r!==null&&fs(r,n,2)}function th(n){var r=n.alternate;return n===ye||r!==null&&r===ye}function eh(n,r){yc=Wu=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function Lf(n,r,o){if((o&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Jo(n,o)}}var Ao={readContext:Ei,use:bc,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An};Ao.useEffectEvent=An;var m_={readContext:Ei,use:bc,useCallback:function(n,r){return Vi().memoizedState=[n,r===void 0?null:r],n},useContext:Ei,useEffect:Up,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Ur(4194308,4,Bp.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Ur(4194308,4,n,r)},useInsertionEffect:function(n,r){Ur(4,2,n,r)},useMemo:function(n,r){var o=Vi();r=r===void 0?null:r;var u=n();if(bl){Ln(!0);try{n()}finally{Ln(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=Vi();if(o!==void 0){var g=o(r);if(bl){Ln(!0);try{o(r)}finally{Ln(!1)}}}else g=r;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=Rv.bind(null,ye,n),[u.memoizedState,n]},useRef:function(n){var r=Vi();return n={current:n},r.memoizedState=n},useState:function(n){n=Ac(n);var r=n.queue,o=Wp.bind(null,ye,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Vf,useDeferredValue:function(n,r){var o=Vi();return ur(o,n,r)},useTransition:function(){var n=Ac(!1);return n=p_.bind(null,ye,n.queue,!0,!1),Vi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=ye,g=Vi();if(ke){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),mn===null)throw Error(i(349));(De&127)!==0||Mp(u,r,o)}g.memoizedState=o;var v={value:o,getSnapshot:r};return g.queue=v,Up(a_.bind(null,u,v,n),[n]),u.flags|=2048,js(9,{destroy:void 0},r_.bind(null,u,v,o,r),null),o},useId:function(){var n=Vi(),r=mn.identifierPrefix;if(ke){var o=ir,u=oa;o=(u&~(1<<32-dn(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=xf++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Ev++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Gp,useFormState:jp,useActionState:jp,useOptimistic:function(n){var r=Vi();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Cc.bind(null,ye,!0,o),o.dispatch=r,[n,r]},useMemoCache:Ip,useCacheRefresh:function(){return Vi().memoizedState=Ju.bind(null,ye)},useEffectEvent:function(n){var r=Vi(),o={impl:n};return r.memoizedState=o,function(){if(($e&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Pf={readContext:Ei,use:bc,useCallback:qp,useContext:Ei,useEffect:Zu,useImperativeHandle:f_,useInsertionEffect:h_,useLayoutEffect:zp,useMemo:Ki,useReducer:ve,useRef:c_,useState:function(){return ve(Pr)},useDebugValue:Vf,useDeferredValue:function(n,r){var o=$n();return d_(o,ln.memoizedState,n,r)},useTransition:function(){var n=ve(Pr)[0],r=$n().memoizedState;return[typeof n=="boolean"?n:wc(n),r]},useSyncExternalStore:Sc,useId:Kp,useHostTransitionStatus:Gp,useFormState:Mf,useActionState:Mf,useOptimistic:function(n,r){var o=$n();return Df(o,ln,n,r)},useMemoCache:Ip,useCacheRefresh:Sl};Pf.useEffectEvent=u_;var nh={readContext:Ei,use:bc,useCallback:qp,useContext:Ei,useEffect:Zu,useImperativeHandle:f_,useInsertionEffect:h_,useLayoutEffect:zp,useMemo:Ki,useReducer:Dp,useRef:c_,useState:function(){return Dp(Pr)},useDebugValue:Vf,useDeferredValue:function(n,r){var o=$n();return ln===null?ur(o,n,r):d_(o,ln.memoizedState,n,r)},useTransition:function(){var n=Dp(Pr)[0],r=$n().memoizedState;return[typeof n=="boolean"?n:wc(n),r]},useSyncExternalStore:Sc,useId:Kp,useHostTransitionStatus:Gp,useFormState:kf,useActionState:kf,useOptimistic:function(n,r){var o=$n();return ln!==null?Df(o,ln,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Ip,useCacheRefresh:Sl};nh.useEffectEvent=u_;function Uf(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:w({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var ih={enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Us(),g=To(u);g.payload=r,o!=null&&(g.callback=o),r=jr(n,g,u),r!==null&&(fs(r,n,u),Hu(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Us(),g=To(u);g.tag=1,g.payload=r,o!=null&&(g.callback=o),r=jr(n,g,u),r!==null&&(fs(r,n,u),Hu(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Us(),u=To(o);u.tag=2,r!=null&&(u.callback=r),r=jr(n,u,o),r!==null&&(fs(r,n,o),Hu(r,n,o))}};function g_(n,r,o,u,g,v,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,v,A):r.prototype&&r.prototype.isPureReactComponent?!ec(o,u)||!ec(g,v):!0}function $p(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&ih.enqueueReplaceState(r,r.state,null)}function Wi(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=w({},o));for(var g in n)o[g]===void 0&&(o[g]=n[g])}return o}function Yp(n){pf(n)}function Qp(n){console.error(n)}function __(n){pf(n)}function sh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function y_(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Xp(n,r,o){return o=To(o),o.tag=3,o.payload={element:null},o.callback=function(){sh(n,r)},o}function ha(n){return n=To(n),n.tag=3,n}function zf(n,r,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var v=u.value;n.payload=function(){return g(v)},n.callback=function(){y_(r,o,u)}}var A=o.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){y_(r,o,u),typeof g!="function"&&(No===null?No=new Set([this]):No.add(this));var V=u.stack;this.componentDidCatch(u.value,{componentStack:V!==null?V:""})})}function Zp(n,r,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&hc(r,o,g,!0),o=Ms.current,o!==null){switch(o.tag){case 31:case 13:return lr===null?td():o.alternate===null&&Mn===0&&(Mn=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===wf?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),xm(n,u,g)),!1;case 22:return o.flags|=65536,u===wf?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),xm(n,u,g)),!1}throw Error(i(435,o.tag))}return xm(n,u,g),td(),!1}if(ke)return r=Ms.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==wp&&(n=Error(i(422),{cause:u}),_o(Is(n,o)))):(u!==wp&&(r=Error(i(423),{cause:u}),_o(Is(r,o))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Is(u,o),g=Xp(n.stateNode,u,g),Af(n,g),Mn!==4&&(Mn=2)),!1;var v=Error(i(520),{cause:u});if(v=Is(v,o),yh===null?yh=[v]:yh.push(v),Mn!==4&&(Mn=2),r===null)return!0;u=Is(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=g&-g,o.lanes|=n,n=Xp(o.stateNode,u,n),Af(o,n),!1;case 1:if(r=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(No===null||!No.has(v))))return o.flags|=65536,g&=-g,o.lanes|=g,g=ha(g),zf(g,n,o,u),Af(o,g),!1}o=o.return}while(o!==null);return!1}var rh=Error(i(461)),Dn=!1;function Bn(n,r,o,u){r.child=n===null?Cp(r,null,o,u):vo(r,n.child,o,u)}function se(n,r,o,u,g){o=o.render;var v=r.ref;if("ref"in u){var A={};for(var V in u)V!=="ref"&&(A[V]=u[V])}else A=u;return yl(r),u=Nf(n,r,o,A,v,g),V=If(),n!==null&&!Dn?(Of(n,r,g),fa(n,r,g)):(ke&&V&&fo(r),r.flags|=1,Bn(n,r,u,g),r.child)}function ah(n,r,o,u,g){if(n===null){var v=o.type;return typeof v=="function"&&!ka(v)&&v.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=v,Bf(n,r,v,u,g)):(n=gf(o.type,null,u,r,r.mode,g),n.ref=r.ref,n.return=r,r.child=n)}if(v=n.child,!Kf(n,g)){var A=v.memoizedProps;if(o=o.compare,o=o!==null?o:ec,o(A,u)&&n.ref===r.ref)return fa(n,r,g)}return r.flags|=1,n=tr(v,u),n.ref=r.ref,n.return=r,r.child=n}function Bf(n,r,o,u,g){if(n!==null){var v=n.memoizedProps;if(ec(v,u)&&n.ref===r.ref)if(Dn=!1,r.pendingProps=u=v,Kf(n,g))(n.flags&131072)!==0&&(Dn=!0);else return r.lanes=n.lanes,fa(n,r,g)}return Hf(n,r,o,u,g)}function Eo(n,r,o,u){var g=u.children,v=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|o:o,n!==null){for(u=r.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~v}else u=0,r.child=null;return qf(n,r,v,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&vf(r,v!==null?v.cachePool:null),v!==null?xp(r,v):Ci(),s_(r);else return u=r.lanes=536870912,qf(n,r,v!==null?v.baseLanes|o:o,o,u)}else v!==null?(vf(r,v.cachePool),xp(r,v),cr(),r.memoizedState=null):(n!==null&&vf(r,null),Ci(),cr());return Bn(n,r,g,o),r.child}function oh(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qf(n,r,o,u,g){var v=Ap();return v=v===null?null:{parent:ei._currentValue,pool:v},r.memoizedState={baseLanes:o,cachePool:v},n!==null&&vf(r,null),Ci(),s_(r),n!==null&&hc(n,r,u,!0),r.childLanes=g,null}function lh(n,r){return r=Gf({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function xi(n,r,o){return vo(r,n.child,null,o),n=lh(r,r.pendingProps),n.flags|=2,as(r),r.memoizedState=null,n}function Nv(n,r,o){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(ke){if(u.mode==="hidden")return n=lh(r,u),r.lanes=536870912,oh(null,n);if(Ku(r),(n=Je)?(n=ly(n,sr),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Va!==null?{id:oa,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},o=Pu(n),o.return=r,r.child=o,ti=r,Je=null)):n=null,n===null)throw mo(r);return r.lanes=536870912,null}return lh(r,u)}var v=n.memoizedState;if(v!==null){var A=v.dehydrated;if(Ku(r),g)if(r.flags&256)r.flags&=-257,r=xi(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(Dn||hc(n,r,o,!1),g=(o&n.childLanes)!==0,Dn||g){if(u=mn,u!==null&&(A=Sa(u,o),A!==0&&A!==v.retryLane))throw v.retryLane=A,aa(n,A),fs(u,n,A),rh;td(),r=xi(n,r,o)}else n=v.treeContext,Je=hr(A.nextSibling),ti=r,ke=!0,po=null,sr=!1,n!==null&&cc(r,n),r=lh(r,u),r.flags|=4096;return r}return n=tr(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Ff(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Hf(n,r,o,u,g){return yl(r),o=Nf(n,r,o,u,void 0,g),u=If(),n!==null&&!Dn?(Of(n,r,g),fa(n,r,g)):(ke&&u&&fo(r),r.flags|=1,Bn(n,r,o,g),r.child)}function v_(n,r,o,u,g,v){return yl(r),r.updateQueue=null,o=$u(r,u,o,g),Rp(n),u=If(),n!==null&&!Dn?(Of(n,r,v),fa(n,r,v)):(ke&&u&&fo(r),r.flags|=1,Bn(n,r,o,v),r.child)}function Jp(n,r,o,u,g){if(yl(r),r.stateNode===null){var v=Ma,A=o.contextType;typeof A=="object"&&A!==null&&(v=Ei(A)),v=new o(u,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=ih,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=u,v.state=r.memoizedState,v.refs={},ca(r),A=o.contextType,v.context=typeof A=="object"&&A!==null?Ei(A):Ma,v.state=r.memoizedState,A=o.getDerivedStateFromProps,typeof A=="function"&&(Uf(r,o,A,u),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&ih.enqueueReplaceState(v,v.state,null),_c(r,u,v,g),wl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){v=r.stateNode;var V=r.memoizedProps,Q=Wi(o,V);v.props=Q;var ct=v.context,yt=o.contextType;A=Ma,typeof yt=="object"&&yt!==null&&(A=Ei(yt));var bt=o.getDerivedStateFromProps;yt=typeof bt=="function"||typeof v.getSnapshotBeforeUpdate=="function",V=r.pendingProps!==V,yt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(V||ct!==A)&&$p(r,v,u,A),or=!1;var ut=r.memoizedState;v.state=ut,_c(r,u,v,g),wl(),ct=r.memoizedState,V||ut!==ct||or?(typeof bt=="function"&&(Uf(r,o,bt,u),ct=r.memoizedState),(Q=or||g_(r,o,Q,u,ut,ct,A))?(yt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=ct),v.props=u,v.state=ct,v.context=A,u=Q):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{v=r.stateNode,Sf(n,r),A=r.memoizedProps,yt=Wi(o,A),v.props=yt,bt=r.pendingProps,ut=v.context,ct=o.contextType,Q=Ma,typeof ct=="object"&&ct!==null&&(Q=Ei(ct)),V=o.getDerivedStateFromProps,(ct=typeof V=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==bt||ut!==Q)&&$p(r,v,u,Q),or=!1,ut=r.memoizedState,v.state=ut,_c(r,u,v,g),wl();var mt=r.memoizedState;A!==bt||ut!==mt||or||n!==null&&n.dependencies!==null&&yf(n.dependencies)?(typeof V=="function"&&(Uf(r,o,V,u),mt=r.memoizedState),(yt=or||g_(r,o,yt,u,ut,mt,Q)||n!==null&&n.dependencies!==null&&yf(n.dependencies))?(ct||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,mt,Q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,mt,Q)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=mt),v.props=u,v.state=mt,v.context=Q,u=yt):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&ut===n.memoizedState||(r.flags|=1024),u=!1)}return v=u,Ff(n,r),u=(r.flags&128)!==0,v||u?(v=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,n!==null&&u?(r.child=vo(r,n.child,null,g),r.child=vo(r,null,o,g)):Bn(n,r,o,g),r.memoizedState=v.state,n=r.child):n=fa(n,r,g),n}function T_(n,r,o,u){return j(),r.flags|=256,Bn(n,r,o,u),r.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(n){return{baseLanes:n,cachePool:t_()}}function zr(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Ps),n}function ji(n,r,o){var u=r.pendingProps,g=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(Wn.current&2)!==0),A&&(g=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,n===null){if(ke){if(g?wo(r):cr(),(n=Je)?(n=ly(n,sr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Va!==null?{id:oa,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},o=Pu(n),o.return=r,r.child=o,ti=r,Je=null)):n=null,n===null)throw mo(r);return jc(n)?r.lanes=32:r.lanes=536870912,null}var V=u.children;return u=u.fallback,g?(cr(),g=r.mode,V=Gf({mode:"hidden",children:V},g),u=ml(u,g,o,null),V.return=r,u.return=r,V.sibling=u,r.child=V,u=r.child,u.memoizedState=em(o),u.childLanes=zr(n,A,o),r.memoizedState=tm,oh(null,u)):(wo(r),ch(r,V))}var Q=n.memoizedState;if(Q!==null&&(V=Q.dehydrated,V!==null)){if(v)r.flags&256?(wo(r),r.flags&=-257,r=uh(n,r,o)):r.memoizedState!==null?(cr(),r.child=n.child,r.flags|=128,r=null):(cr(),V=u.fallback,g=r.mode,u=Gf({mode:"visible",children:u.children},g),V=ml(V,g,o,null),V.flags|=2,u.return=r,V.return=r,u.sibling=V,r.child=u,vo(r,n.child,null,o),u=r.child,u.memoizedState=em(o),u.childLanes=zr(n,A,o),r.memoizedState=tm,r=oh(null,u));else if(wo(r),jc(V)){if(A=V.nextSibling&&V.nextSibling.dataset,A)var ct=A.dgst;A=ct,u=Error(i(419)),u.stack="",u.digest=A,_o({value:u,source:null,stack:null}),r=uh(n,r,o)}else if(Dn||hc(n,r,o,!1),A=(o&n.childLanes)!==0,Dn||A){if(A=mn,A!==null&&(u=Sa(A,o),u!==0&&u!==Q.retryLane))throw Q.retryLane=u,aa(n,u),fs(A,n,u),rh;cd(V)||td(),r=uh(n,r,o)}else cd(V)?(r.flags|=192,r.child=n.child,r=null):(n=Q.treeContext,Je=hr(V.nextSibling),ti=r,ke=!0,po=null,sr=!1,n!==null&&cc(r,n),r=ch(r,u.children),r.flags|=4096);return r}return g?(cr(),V=u.fallback,g=r.mode,Q=n.child,ct=Q.sibling,u=tr(Q,{mode:"hidden",children:u.children}),u.subtreeFlags=Q.subtreeFlags&65011712,ct!==null?V=tr(ct,V):(V=ml(V,g,o,null),V.flags|=2),V.return=r,u.return=r,u.sibling=V,r.child=u,oh(null,u),u=r.child,V=n.child.memoizedState,V===null?V=em(o):(g=V.cachePool,g!==null?(Q=ei._currentValue,g=g.parent!==Q?{parent:Q,pool:Q}:g):g=t_(),V={baseLanes:V.baseLanes|o,cachePool:g}),u.memoizedState=V,u.childLanes=zr(n,A,o),r.memoizedState=tm,oh(n.child,u)):(wo(r),o=n.child,n=o.sibling,o=tr(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(A=r.deletions,A===null?(r.deletions=[n],r.flags|=16):A.push(n)),r.child=o,r.memoizedState=null,o)}function ch(n,r){return r=Gf({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Gf(n,r){return n=Ai(22,n,null,r),n.lanes=0,n}function uh(n,r,o){return vo(r,n.child,null,o),n=ch(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function w_(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Pa(n.return,r,o)}function nm(n,r,o,u,g,v){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g,treeForkCount:v}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=o,A.tailMode=g,A.treeForkCount=v)}function xc(n,r,o){var u=r.pendingProps,g=u.revealOrder,v=u.tail;u=u.children;var A=Wn.current,V=(A&2)!==0;if(V?(A=A&1|2,r.flags|=128):A&=1,St(Wn,A),Bn(n,r,u,o),u=ke?Jn:0,!V&&n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&w_(n,o,r);else if(n.tag===19)w_(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(o=r.child,g=null;o!==null;)n=o.alternate,n!==null&&Cf(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=r.child,r.child=null):(g=o.sibling,o.sibling=null),nm(r,!1,g,o,v,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=r.child,r.child=null;g!==null;){if(n=g.alternate,n!==null&&Cf(n)===null){r.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}nm(r,!0,o,null,v,u);break;case"together":nm(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function fa(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Ro|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(hc(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=tr(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=tr(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Kf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&yf(n)))}function Iv(n,r,o){switch(r.tag){case 3:kt(r,r.stateNode.containerInfo),yo(r,ei,n.memoizedState.cache),j();break;case 27:case 5:Ae(r);break;case 4:kt(r,r.stateNode.containerInfo);break;case 10:yo(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Ku(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(wo(r),r.flags|=128,null):(o&r.child.childLanes)!==0?ji(n,r,o):(wo(r),n=fa(n,r,o),n!==null?n.sibling:null);wo(r);break;case 19:var g=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(hc(n,r,o,!1),u=(o&r.childLanes)!==0),g){if(u)return xc(n,r,o);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),St(Wn,Wn.current),u)break;return null;case 22:return r.lanes=0,Eo(n,r,o,r.pendingProps);case 24:yo(r,ei,n.memoizedState.cache)}return fa(n,r,o)}function b_(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)Dn=!0;else{if(!Kf(n,o)&&(r.flags&128)===0)return Dn=!1,Iv(n,r,o);Dn=(n.flags&131072)!==0}else Dn=!1,ke&&(r.flags&1048576)!==0&&_f(r,Jn,r.index);switch(r.lanes=0,r.tag){case 16:t:{var u=r.pendingProps;if(n=kr(r.elementType),r.type=n,typeof n=="function")ka(n)?(u=Wi(n,u),r.tag=1,r=Jp(null,r,n,u,o)):(r.tag=0,r=Hf(null,r,n,u,o));else{if(n!=null){var g=n.$$typeof;if(g===it){r.tag=11,r=se(null,r,n,u,o);break t}else if(g===R){r.tag=14,r=ah(null,r,n,u,o);break t}}throw r=vt(n)||n,Error(i(306,r,""))}}return r;case 0:return Hf(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,g=Wi(u,r.pendingProps),Jp(n,r,u,g,o);case 3:t:{if(kt(r,r.stateNode.containerInfo),n===null)throw Error(i(387));u=r.pendingProps;var v=r.memoizedState;g=v.element,Sf(n,r),_c(r,u,null,o);var A=r.memoizedState;if(u=A.cache,yo(r,ei,u),u!==v.cache&&bp(r,[ei],o,!0),wl(),u=A.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=T_(n,r,u,o);break t}else if(u!==g){g=Is(Error(i(424)),r),_o(g),r=T_(n,r,u,o);break t}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Je=hr(n.firstChild),ti=r,ke=!0,po=null,sr=!0,o=Cp(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(j(),u===g){r=fa(n,r,o);break t}Bn(n,r,u,o)}r=r.child}return r;case 26:return Ff(n,r),n===null?(o=py(r.type,null,r.pendingProps,null))?r.memoizedState=o:ke||(o=r.type,n=r.pendingProps,u=Ih(jt.current).createElement(o),u[Yt]=r,u[me]=n,Ri(u,o,n),Zn(u),r.stateNode=u):r.memoizedState=py(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ae(r),n===null&&ke&&(u=r.stateNode=hy(r.type,r.pendingProps,jt.current),ti=r,sr=!0,g=Je,oe(r.type)?(Um=g,Je=hr(u.firstChild)):Je=g),Bn(n,r,r.pendingProps.children,o),Ff(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&ke&&((g=u=Je)&&(u=Kv(u,r.type,r.pendingProps,sr),u!==null?(r.stateNode=u,ti=r,Je=hr(u.firstChild),sr=!1,g=!0):g=!1),g||mo(r)),Ae(r),g=r.type,v=r.pendingProps,A=n!==null?n.memoizedProps:null,u=v.children,Mo(g,v)?u=null:A!==null&&Mo(g,A)&&(r.flags|=32),r.memoizedState!==null&&(g=Nf(n,r,Cv,null,null,o),qc._currentValue=g),Ff(n,r),Bn(n,r,u,o),r.child;case 6:return n===null&&ke&&((n=o=Je)&&(o=tn(o,r.pendingProps,sr),o!==null?(r.stateNode=o,ti=r,Je=null,n=!0):n=!1),n||mo(r)),null;case 13:return ji(n,r,o);case 4:return kt(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=vo(r,null,u,o):Bn(n,r,u,o),r.child;case 11:return se(n,r,r.type,r.pendingProps,o);case 7:return Bn(n,r,r.pendingProps,o),r.child;case 8:return Bn(n,r,r.pendingProps.children,o),r.child;case 12:return Bn(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,yo(r,r.type,u.value),Bn(n,r,u.children,o),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,yl(r),g=Ei(g),u=u(g),r.flags|=1,Bn(n,r,u,o),r.child;case 14:return ah(n,r,r.type,r.pendingProps,o);case 15:return Bf(n,r,r.type,r.pendingProps,o);case 19:return xc(n,r,o);case 31:return Nv(n,r,o);case 22:return Eo(n,r,o,r.pendingProps);case 24:return yl(r),u=Ei(ei),n===null?(g=Ap(),g===null&&(g=mn,v=Mr(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=o),g=v),r.memoizedState={parent:u,cache:g},ca(r),yo(r,ei,g)):((n.lanes&o)!==0&&(Sf(n,r),_c(r,null,null,o),wl()),g=n.memoizedState,v=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),yo(r,ei,u)):(u=v.cache,yo(r,ei,u),u!==g.cache&&bp(r,[ei],o,!0))),Bn(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ba(n){n.flags|=4}function im(n,r,o,u,g){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(wh())n.flags|=8192;else throw la=wf,Tf}else n.flags&=-16777217}function sm(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!vy(r))if(wh())n.flags|=8192;else throw la=wf,Tf}function hh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Zo():536870912,n.lanes|=r,Oc|=r)}function fh(n,r){if(!ke)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function pn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function S_(n,r,o){var u=r.pendingProps;switch(gl(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(r),null;case 1:return pn(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),La(ei),te(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(_l(r)?Ba(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,go())),pn(r),null;case 26:var g=r.type,v=r.memoizedState;return n===null?(Ba(r),v!==null?(pn(r),sm(r,v)):(pn(r),im(r,g,null,u,o))):v?v!==n.memoizedState?(Ba(r),pn(r),sm(r,v)):(pn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ba(r),pn(r),im(r,g,n,u,o)),null;case 27:if(Ye(r),o=jt.current,g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Ba(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return pn(r),null}n=Dt.current,_l(r)?zu(r):(n=hy(g,u,o),r.stateNode=n,Ba(r))}return pn(r),null;case 5:if(Ye(r),g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Ba(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return pn(r),null}if(v=Dt.current,_l(r))zu(r);else{var A=Ih(jt.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}v[Yt]=r,v[me]=u;t:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break t;for(;A.sibling===null;){if(A.return===null||A.return===r)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=v;t:switch(Ri(v,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ba(r)}}return pn(r),im(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Ba(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(n=jt.current,_l(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,g=ti,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[Yt]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||sy(n.nodeValue,o)),n||mo(r,!0)}else n=Ih(n).createTextNode(u),n[Yt]=r,r.stateNode=n}return pn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(u=_l(r),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Yt]=r}else j(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pn(r),n=!1}else o=go(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(as(r),r):(as(r),null);if((r.flags&128)!==0)throw Error(i(558))}return pn(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=_l(r),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Yt]=r}else j(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pn(r),g=!1}else g=go(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(as(r),r):(as(r),null)}return as(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==g&&(u.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),hh(r,r.updateQueue),pn(r),null);case 4:return te(),n===null&&Dm(r.stateNode.containerInfo),pn(r),null;case 10:return La(r.type),pn(r),null;case 19:if(at(Wn),u=r.memoizedState,u===null)return pn(r),null;if(g=(r.flags&128)!==0,v=u.rendering,v===null)if(g)fh(u,!1);else{if(Mn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(v=Cf(n),v!==null){for(r.flags|=128,fh(u,!1),n=v.updateQueue,r.updateQueue=n,hh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)Qg(o,n),o=o.sibling;return St(Wn,Wn.current&1|2),ke&&Os(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&fn()>Cl&&(r.flags|=128,g=!0,fh(u,!1),r.lanes=4194304)}else{if(!g)if(n=Cf(v),n!==null){if(r.flags|=128,g=!0,n=n.updateQueue,r.updateQueue=n,hh(r,n),fh(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!ke)return pn(r),null}else 2*fn()-u.renderingStartTime>Cl&&o!==536870912&&(r.flags|=128,g=!0,fh(u,!1),r.lanes=4194304);u.isBackwards?(v.sibling=r.child,r.child=v):(n=u.last,n!==null?n.sibling=v:r.child=v,u.last=v)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=fn(),n.sibling=null,o=Wn.current,St(Wn,g?o&1|2:o&1),ke&&Os(r,u.treeForkCount),n):(pn(r),null);case 22:case 23:return as(r),Gu(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(pn(r),r.subtreeFlags&6&&(r.flags|=8192)):pn(r),o=r.updateQueue,o!==null&&hh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&at(Tl),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),La(ei),pn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function dh(n,r){switch(gl(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return La(ei),te(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ye(r),null;case 31:if(r.memoizedState!==null){if(as(r),r.alternate===null)throw Error(i(340));j()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(as(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));j()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return at(Wn),null;case 4:return te(),null;case 10:return La(r.type),null;case 22:case 23:return as(r),Gu(),n!==null&&at(Tl),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return La(ei),null;case 25:return null;default:return null}}function Wf(n,r){switch(gl(r),r.tag){case 3:La(ei),te();break;case 26:case 27:case 5:Ye(r);break;case 4:te();break;case 31:r.memoizedState!==null&&as(r);break;case 13:as(r);break;case 19:at(Wn);break;case 10:La(r.type);break;case 22:case 23:as(r),Gu(),n!==null&&at(Tl);break;case 24:La(ei)}}function Rc(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&n)===n){u=void 0;var v=o.create,A=o.inst;u=v(),A.destroy=u}o=o.next}while(o!==g)}}catch(V){rn(r,r.return,V)}}function qa(n,r,o){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&n)===n){var A=u.inst,V=A.destroy;if(V!==void 0){A.destroy=void 0,g=r;var Q=o,ct=V;try{ct()}catch(yt){rn(g,Q,yt)}}}u=u.next}while(u!==v)}}catch(yt){rn(r,r.return,yt)}}function ph(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{Ef(r,o)}catch(u){rn(n,n.return,u)}}}function rm(n,r,o){o.props=Wi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){rn(n,r,u)}}function ls(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(g){rn(n,r,g)}}function Li(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){rn(n,r,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){rn(n,r,g)}else o.current=null}function A_(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){rn(n,n.return,g)}}function $f(n,r,o){try{var u=n.stateNode;Fv(u,n.type,o,r),u[me]=r}catch(g){rn(n,n.return,g)}}function E_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&oe(n.type)||n.tag===4}function am(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||E_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&oe(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function om(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Cr));else if(u!==4&&(u===27&&oe(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(om(n,r,o),n=n.sibling;n!==null;)om(n,r,o),n=n.sibling}function Yf(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&(u===27&&oe(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Yf(n,r,o),n=n.sibling;n!==null;)Yf(n,r,o),n=n.sibling}function C_(n){var r=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Ri(r,u,o),r[Yt]=n,r[me]=o}catch(v){rn(n,n.return,v)}}var Fa=!1,ni=!1,lm=!1,x_=typeof WeakSet=="function"?WeakSet:Set,pi=null;function Ov(n,r){if(n=n.containerInfo,Nh=gd,n=Kg(n),vp(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break t}var A=0,V=-1,Q=-1,ct=0,yt=0,bt=n,ut=null;e:for(;;){for(var mt;bt!==o||g!==0&&bt.nodeType!==3||(V=A+g),bt!==v||u!==0&&bt.nodeType!==3||(Q=A+u),bt.nodeType===3&&(A+=bt.nodeValue.length),(mt=bt.firstChild)!==null;)ut=bt,bt=mt;for(;;){if(bt===n)break e;if(ut===o&&++ct===g&&(V=A),ut===v&&++yt===u&&(Q=A),(mt=bt.nextSibling)!==null)break;bt=ut,ut=bt.parentNode}bt=mt}o=V===-1||Q===-1?null:{start:V,end:Q}}else o=null}o=o||{start:0,end:0}}else o=null;for(jm={focusedElem:n,selectionRange:o},gd=!1,pi=r;pi!==null;)if(r=pi,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,pi=n;else for(;pi!==null;){switch(r=pi,v=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)g=n[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,o=r,g=v.memoizedProps,v=v.memoizedState,u=o.stateNode;try{var Qt=Wi(o.type,g);n=u.getSnapshotBeforeUpdate(Qt,v),u.__reactInternalSnapshotBeforeUpdate=n}catch(re){rn(o,o.return,re)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)ld(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ld(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,pi=n;break}pi=r.return}}function cm(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ga(n,o),u&4&&Rc(5,o);break;case 1:if(Ga(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(A){rn(o,o.return,A)}else{var g=Wi(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(g,r,n.__reactInternalSnapshotBeforeUpdate)}catch(A){rn(o,o.return,A)}}u&64&&ph(o),u&512&&ls(o,o.return);break;case 3:if(Ga(n,o),u&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Ef(n,r)}catch(A){rn(o,o.return,A)}}break;case 27:r===null&&u&4&&C_(o);case 26:case 5:Ga(n,o),r===null&&u&4&&A_(o),u&512&&ls(o,o.return);break;case 12:Ga(n,o);break;case 31:Ga(n,o),u&4&&hm(n,o);break;case 13:Ga(n,o),u&4&&N_(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=id.bind(null,o),Wv(n,o))));break;case 22:if(u=o.memoizedState!==null||Fa,!u){r=r!==null&&r.memoizedState!==null||ni,g=Fa;var v=ni;Fa=u,(ni=r)&&!v?da(n,o,(o.subtreeFlags&8772)!==0):Ga(n,o),Fa=g,ni=v}break;case 30:break;default:Ga(n,o)}}function um(n){var r=n.alternate;r!==null&&(n.alternate=null,um(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Hl(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Tn=null,cs=!1;function Ha(n,r,o){for(o=o.child;o!==null;)R_(n,r,o),o=o.sibling}function R_(n,r,o){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Bi,o)}catch{}switch(o.tag){case 26:ni||Li(o,r),Ha(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ni||Li(o,r);var u=Tn,g=cs;oe(o.type)&&(Tn=o.stateNode,cs=!1),Ha(n,r,o),Dh(o.stateNode),Tn=u,cs=g;break;case 5:ni||Li(o,r);case 6:if(u=Tn,g=cs,Tn=null,Ha(n,r,o),Tn=u,cs=g,Tn!==null)if(cs)try{(Tn.nodeType===9?Tn.body:Tn.nodeName==="HTML"?Tn.ownerDocument.body:Tn).removeChild(o.stateNode)}catch(v){rn(o,r,v)}else try{Tn.removeChild(o.stateNode)}catch(v){rn(o,r,v)}break;case 18:Tn!==null&&(cs?(n=Tn,Pm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Hc(n)):Pm(Tn,o.stateNode));break;case 4:u=Tn,g=cs,Tn=o.stateNode.containerInfo,cs=!0,Ha(n,r,o),Tn=u,cs=g;break;case 0:case 11:case 14:case 15:qa(2,o,r),ni||qa(4,o,r),Ha(n,r,o);break;case 1:ni||(Li(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&rm(o,r,u)),Ha(n,r,o);break;case 21:Ha(n,r,o);break;case 22:ni=(u=ni)||o.memoizedState!==null,Ha(n,r,o),ni=u;break;default:Ha(n,r,o)}}function hm(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Hc(n)}catch(o){rn(r,r.return,o)}}}function N_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Hc(n)}catch(o){rn(r,r.return,o)}}function Dv(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new x_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new x_),r;default:throw Error(i(435,n.tag))}}function Qf(n,r){var o=Dv(n);r.forEach(function(u){if(!o.has(u)){o.add(u);var g=Uv.bind(null,n,u);u.then(g,g)}})}function us(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],v=n,A=r,V=A;t:for(;V!==null;){switch(V.tag){case 27:if(oe(V.type)){Tn=V.stateNode,cs=!1;break t}break;case 5:Tn=V.stateNode,cs=!1;break t;case 3:case 4:Tn=V.stateNode.containerInfo,cs=!0;break t}V=V.return}if(Tn===null)throw Error(i(160));R_(v,A,g),Tn=null,cs=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)I_(r,n),r=r.sibling}var Br=null;function I_(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:us(r,n),wn(n),u&4&&(qa(3,n,n.return),Rc(3,n),qa(5,n,n.return));break;case 1:us(r,n),wn(n),u&512&&(ni||o===null||Li(o,o.return)),u&64&&Fa&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Br;if(us(r,n),wn(n),u&512&&(ni||o===null||Li(o,o.return)),u&4){var v=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":v=g.getElementsByTagName("title")[0],(!v||v[es]||v[Yt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(u),g.head.insertBefore(v,g.querySelector("head > title"))),Ri(v,u,o),v[Yt]=n,Zn(v),u=v;break t;case"link":var A=_y("link","href",g).get(u+(o.href||""));if(A){for(var V=0;V<A.length;V++)if(v=A[V],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){A.splice(V,1);break e}}v=g.createElement(u),Ri(v,u,o),g.head.appendChild(v);break;case"meta":if(A=_y("meta","content",g).get(u+(o.content||""))){for(V=0;V<A.length;V++)if(v=A[V],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){A.splice(V,1);break e}}v=g.createElement(u),Ri(v,u,o),g.head.appendChild(v);break;default:throw Error(i(468,u))}v[Yt]=n,Zn(v),u=v}n.stateNode=u}else yy(g,n.type,n.stateNode);else n.stateNode=gy(g,u,n.memoizedProps);else v!==u?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,u===null?yy(g,n.type,n.stateNode):gy(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&$f(n,n.memoizedProps,o.memoizedProps)}break;case 27:us(r,n),wn(n),u&512&&(ni||o===null||Li(o,o.return)),o!==null&&u&4&&$f(n,n.memoizedProps,o.memoizedProps);break;case 5:if(us(r,n),wn(n),u&512&&(ni||o===null||Li(o,o.return)),n.flags&32){g=n.stateNode;try{ai(g,"")}catch(Qt){rn(n,n.return,Qt)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,$f(n,g,o!==null?o.memoizedProps:g)),u&1024&&(lm=!0);break;case 6:if(us(r,n),wn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Qt){rn(n,n.return,Qt)}}break;case 3:if(Mh=null,g=Br,Br=ud(r.containerInfo),us(r,n),Br=g,wn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Hc(r.containerInfo)}catch(Qt){rn(n,n.return,Qt)}lm&&(lm=!1,O_(n));break;case 4:u=Br,Br=ud(n.stateNode.containerInfo),us(r,n),wn(n),Br=u;break;case 12:us(r,n),wn(n);break;case 31:us(r,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Qf(n,u)));break;case 13:us(r,n),wn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(vh=fn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Qf(n,u)));break;case 22:g=n.memoizedState!==null;var Q=o!==null&&o.memoizedState!==null,ct=Fa,yt=ni;if(Fa=ct||g,ni=yt||Q,us(r,n),ni=yt,Fa=ct,wn(n),u&8192)t:for(r=n.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(o===null||Q||Fa||ni||Al(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){Q=o=r;try{if(v=Q.stateNode,g)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{V=Q.stateNode;var bt=Q.memoizedProps.style,ut=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;V.style.display=ut==null||typeof ut=="boolean"?"":(""+ut).trim()}}catch(Qt){rn(Q,Q.return,Qt)}}}else if(r.tag===6){if(o===null){Q=r;try{Q.stateNode.nodeValue=g?"":Q.memoizedProps}catch(Qt){rn(Q,Q.return,Qt)}}}else if(r.tag===18){if(o===null){Q=r;try{var mt=Q.stateNode;g?qs(mt,!0):qs(Q.stateNode,!1)}catch(Qt){rn(Q,Q.return,Qt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Qf(n,o))));break;case 19:us(r,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Qf(n,u)));break;case 30:break;case 21:break;default:us(r,n),wn(n)}}function wn(n){var r=n.flags;if(r&2){try{for(var o,u=n.return;u!==null;){if(E_(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,v=am(n);Yf(n,v,g);break;case 5:var A=o.stateNode;o.flags&32&&(ai(A,""),o.flags&=-33);var V=am(n);Yf(n,V,A);break;case 3:case 4:var Q=o.stateNode.containerInfo,ct=am(n);om(n,ct,Q);break;default:throw Error(i(161))}}catch(yt){rn(n,n.return,yt)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function O_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;O_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ga(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)cm(n,r.alternate,r),r=r.sibling}function Al(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:qa(4,r,r.return),Al(r);break;case 1:Li(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&rm(r,r.return,o),Al(r);break;case 27:Dh(r.stateNode);case 26:case 5:Li(r,r.return),Al(r);break;case 22:r.memoizedState===null&&Al(r);break;case 30:Al(r);break;default:Al(r)}n=n.sibling}}function da(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=n,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:da(g,v,o),Rc(4,v);break;case 1:if(da(g,v,o),u=v,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ct){rn(u,u.return,ct)}if(u=v,g=u.updateQueue,g!==null){var V=u.stateNode;try{var Q=g.shared.hiddenCallbacks;if(Q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Q.length;g++)Lr(Q[g],V)}catch(ct){rn(u,u.return,ct)}}o&&A&64&&ph(v),ls(v,v.return);break;case 27:C_(v);case 26:case 5:da(g,v,o),o&&u===null&&A&4&&A_(v),ls(v,v.return);break;case 12:da(g,v,o);break;case 31:da(g,v,o),o&&A&4&&hm(g,v);break;case 13:da(g,v,o),o&&A&4&&N_(g,v);break;case 22:v.memoizedState===null&&da(g,v,o),ls(v,v.return);break;case 30:break;default:da(g,v,o)}r=r.sibling}}function fm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Bu(o))}function dm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Bu(n))}function qr(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)D_(n,r,o,u),r=r.sibling}function D_(n,r,o,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:qr(n,r,o,u),g&2048&&Rc(9,r);break;case 1:qr(n,r,o,u);break;case 3:qr(n,r,o,u),g&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Bu(n)));break;case 12:if(g&2048){qr(n,r,o,u),n=r.stateNode;try{var v=r.memoizedProps,A=v.id,V=v.onPostCommit;typeof V=="function"&&V(A,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Q){rn(r,r.return,Q)}}else qr(n,r,o,u);break;case 31:qr(n,r,o,u);break;case 13:qr(n,r,o,u);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?qr(n,r,o,u):mh(n,r):v._visibility&2?qr(n,r,o,u):(v._visibility|=2,Co(n,r,o,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&fm(A,r);break;case 24:qr(n,r,o,u),g&2048&&dm(r.alternate,r);break;default:qr(n,r,o,u)}}function Co(n,r,o,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=n,A=r,V=o,Q=u,ct=A.flags;switch(A.tag){case 0:case 11:case 15:Co(v,A,V,Q,g),Rc(8,A);break;case 23:break;case 22:var yt=A.stateNode;A.memoizedState!==null?yt._visibility&2?Co(v,A,V,Q,g):mh(v,A):(yt._visibility|=2,Co(v,A,V,Q,g)),g&&ct&2048&&fm(A.alternate,A);break;case 24:Co(v,A,V,Q,g),g&&ct&2048&&dm(A.alternate,A);break;default:Co(v,A,V,Q,g)}r=r.sibling}}function mh(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,g=u.flags;switch(u.tag){case 22:mh(o,u),g&2048&&fm(u.alternate,u);break;case 24:mh(o,u),g&2048&&dm(u.alternate,u);break;default:mh(o,u)}r=r.sibling}}var gh=8192;function Nc(n,r,o){if(n.subtreeFlags&gh)for(n=n.child;n!==null;)M_(n,r,o),n=n.sibling}function M_(n,r,o){switch(n.tag){case 26:Nc(n,r,o),n.flags&gh&&n.memoizedState!==null&&Bc(o,Br,n.memoizedState,n.memoizedProps);break;case 5:Nc(n,r,o);break;case 3:case 4:var u=Br;Br=ud(n.stateNode.containerInfo),Nc(n,r,o),Br=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=gh,gh=16777216,Nc(n,r,o),gh=u):Nc(n,r,o));break;default:Nc(n,r,o)}}function k_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function _h(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];pi=u,j_(u,n)}k_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)V_(n),n=n.sibling}function V_(n){switch(n.tag){case 0:case 11:case 15:_h(n),n.flags&2048&&qa(9,n,n.return);break;case 3:_h(n);break;case 12:_h(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Xf(n)):_h(n);break;default:_h(n)}}function Xf(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];pi=u,j_(u,n)}k_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:qa(8,r,r.return),Xf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Xf(r));break;default:Xf(r)}n=n.sibling}}function j_(n,r){for(;pi!==null;){var o=pi;switch(o.tag){case 0:case 11:case 15:qa(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Bu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,pi=u;else t:for(o=n;pi!==null;){u=pi;var g=u.sibling,v=u.return;if(um(u),u===o){pi=null;break t}if(g!==null){g.return=v,pi=g;break t}pi=v}}}var Mv={getCacheForType:function(n){var r=Ei(ei),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Ei(ei).controller.signal}},kv=typeof WeakMap=="function"?WeakMap:Map,$e=0,mn=null,Ie=null,De=0,sn=0,Ls=null,xo=!1,Ic=!1,pm=!1,Fr=0,Mn=0,Ro=0,El=0,mm=0,Ps=0,Oc=0,yh=null,hs=null,gm=!1,vh=0,L_=0,Cl=1/0,Zf=null,No=null,li=0,Io=null,Dc=null,Ka=0,_m=0,ym=null,P_=null,Th=0,vm=null;function Us(){return($e&2)!==0&&De!==0?De&-De:Z.T!==null?zs():Xt()}function U_(){if(Ps===0)if((De&536870912)===0||ke){var n=Xr;Xr<<=1,(Xr&3932160)===0&&(Xr=262144),Ps=n}else Ps=536870912;return n=Ms.current,n!==null&&(n.flags|=32),Ps}function fs(n,r,o){(n===mn&&(sn===2||sn===9)||n.cancelPendingCommit!==null)&&(Mc(n,0),Wa(n,De,Ps,!1)),ba(n,o),(($e&2)===0||n!==mn)&&(n===mn&&(($e&2)===0&&(El|=o),Mn===4&&Wa(n,De,Ps,!1)),pa(n))}function z_(n,r,o){if(($e&6)!==0)throw Error(i(327));var u=!o&&(r&127)===0&&(r&n.expiredLanes)===0||Ji(n,r),g=u?jv(n,r):wm(n,r,!0),v=u;do{if(g===0){Ic&&!u&&Wa(n,r,0,!1);break}else{if(o=n.current.alternate,v&&!q_(o)){g=wm(n,r,!1),v=!1;continue}if(g===2){if(v=r,n.errorRecoveryDisabledLanes&v)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;t:{var V=n;g=yh;var Q=V.current.memoizedState.isDehydrated;if(Q&&(Mc(V,A).flags|=256),A=wm(V,A,!1),A!==2){if(pm&&!Q){V.errorRecoveryDisabledLanes|=v,El|=v,g=4;break t}v=hs,hs=g,v!==null&&(hs===null?hs=v:hs.push.apply(hs,v))}g=A}if(v=!1,g!==2)continue}}if(g===1){Mc(n,0),Wa(n,r,0,!0);break}t:{switch(u=n,v=g,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Wa(u,r,Ps,!xo);break t;case 2:hs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=vh+300-fn(),10<g)){if(Wa(u,r,Ps,!xo),qi(u,0,!0)!==0)break t;Ka=r,u.timeoutHandle=ry(B_.bind(null,u,o,hs,Zf,gm,r,Ps,El,Oc,xo,v,"Throttled",-0,0),g);break t}B_(u,o,hs,Zf,gm,r,Ps,El,Oc,xo,v,null,-0,0)}}break}while(!0);pa(n)}function B_(n,r,o,u,g,v,A,V,Q,ct,yt,bt,ut,mt){if(n.timeoutHandle=-1,bt=r.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cr},M_(r,v,bt);var Qt=(v&62914560)===v?vh-fn():(v&4194048)===v?L_-fn():0;if(Qt=n1(bt,Qt),Qt!==null){Ka=v,n.cancelPendingCommit=Qt($_.bind(null,n,r,v,o,u,g,A,V,Q,yt,bt,null,ut,mt)),Wa(n,v,A,!ct);return}}$_(n,r,v,o,u,g,A,V,Q)}function q_(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],v=g.getSnapshot;g=g.value;try{if(!On(v(),g))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wa(n,r,o,u){r&=~mm,r&=~El,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var g=r;0<g;){var v=31-dn(g),A=1<<v;u[v]=-1,g&=~A}o!==0&&Tr(n,o,r)}function Jf(){return($e&6)===0?(Eh(0),!1):!0}function Tm(){if(Ie!==null){if(sn===0)var n=Ie.return;else n=Ie,ja=_e=null,Np(n),mc=null,Ds=0,n=Ie;for(;n!==null;)Wf(n.alternate,n),n=n.return;Ie=null}}function Mc(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Gv(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ka=0,Tm(),mn=n,Ie=o=tr(n.current,null),De=r,sn=0,Ls=null,xo=!1,Ic=Ji(n,r),pm=!1,Oc=Ps=mm=El=Ro=Mn=0,hs=yh=null,gm=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var g=31-dn(u),v=1<<g;r|=n[g],u&=~v}return Fr=r,Dr(),o}function F_(n,r){ye=null,Z.H=Ao,r===pc||r===Fu?(r=n_(),sn=3):r===Tf?(r=n_(),sn=4):sn=r===rh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ls=r,Ie===null&&(Mn=1,sh(n,Is(r,n.current)))}function wh(){var n=Ms.current;return n===null?!0:(De&4194048)===De?lr===null:(De&62914560)===De||(De&536870912)!==0?n===lr:!1}function H_(){var n=Z.H;return Z.H=Ao,n===null?Ao:n}function G_(){var n=Z.A;return Z.A=Mv,n}function td(){Mn=4,xo||(De&4194048)!==De&&Ms.current!==null||(Ic=!0),(Ro&134217727)===0&&(El&134217727)===0||mn===null||Wa(mn,De,Ps,!1)}function wm(n,r,o){var u=$e;$e|=2;var g=H_(),v=G_();(mn!==n||De!==r)&&(Zf=null,Mc(n,r)),r=!1;var A=Mn;t:do try{if(sn!==0&&Ie!==null){var V=Ie,Q=Ls;switch(sn){case 8:Tm(),A=6;break t;case 3:case 2:case 9:case 6:Ms.current===null&&(r=!0);var ct=sn;if(sn=0,Ls=null,kc(n,V,Q,ct),o&&Ic){A=0;break t}break;default:ct=sn,sn=0,Ls=null,kc(n,V,Q,ct)}}Vv(),A=Mn;break}catch(yt){F_(n,yt)}while(!0);return r&&n.shellSuspendCounter++,ja=_e=null,$e=u,Z.H=g,Z.A=v,Ie===null&&(mn=null,De=0,Dr()),A}function Vv(){for(;Ie!==null;)K_(Ie)}function jv(n,r){var o=$e;$e|=2;var u=H_(),g=G_();mn!==n||De!==r?(Zf=null,Cl=fn()+500,Mc(n,r)):Ic=Ji(n,r);t:do try{if(sn!==0&&Ie!==null){r=Ie;var v=Ls;e:switch(sn){case 1:sn=0,Ls=null,kc(n,r,v,1);break;case 2:case 9:if(e_(v)){sn=0,Ls=null,W_(r);break}r=function(){sn!==2&&sn!==9||mn!==n||(sn=7),pa(n)},v.then(r,r);break t;case 3:sn=7;break t;case 4:sn=5;break t;case 7:e_(v)?(sn=0,Ls=null,W_(r)):(sn=0,Ls=null,kc(n,r,v,7));break;case 5:var A=null;switch(Ie.tag){case 26:A=Ie.memoizedState;case 5:case 27:var V=Ie;if(A?vy(A):V.stateNode.complete){sn=0,Ls=null;var Q=V.sibling;if(Q!==null)Ie=Q;else{var ct=V.return;ct!==null?(Ie=ct,ed(ct)):Ie=null}break e}}sn=0,Ls=null,kc(n,r,v,5);break;case 6:sn=0,Ls=null,kc(n,r,v,6);break;case 8:Tm(),Mn=6;break t;default:throw Error(i(462))}}Lv();break}catch(yt){F_(n,yt)}while(!0);return ja=_e=null,Z.H=u,Z.A=g,$e=o,Ie!==null?0:(mn=null,De=0,Dr(),Mn)}function Lv(){for(;Ie!==null&&!ae();)K_(Ie)}function K_(n){var r=b_(n.alternate,n,Fr);n.memoizedProps=n.pendingProps,r===null?ed(n):Ie=r}function W_(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=v_(o,r,r.pendingProps,r.type,void 0,De);break;case 11:r=v_(o,r,r.pendingProps,r.type.render,r.ref,De);break;case 5:Np(r);default:Wf(o,r),r=Ie=Qg(r,Fr),r=b_(o,r,Fr)}n.memoizedProps=n.pendingProps,r===null?ed(n):Ie=r}function kc(n,r,o,u){ja=_e=null,Np(r),mc=null,Ds=0;var g=r.return;try{if(Zp(n,g,r,o,De)){Mn=1,sh(n,Is(o,n.current)),Ie=null;return}}catch(v){if(g!==null)throw Ie=g,v;Mn=1,sh(n,Is(o,n.current)),Ie=null;return}r.flags&32768?(ke||u===1?n=!0:Ic||(De&536870912)!==0?n=!1:(xo=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ms.current,u!==null&&u.tag===13&&(u.flags|=16384))),bh(r,n)):ed(r)}function ed(n){var r=n;do{if((r.flags&32768)!==0){bh(r,xo);return}n=r.return;var o=S_(r.alternate,r,Fr);if(o!==null){Ie=o;return}if(r=r.sibling,r!==null){Ie=r;return}Ie=r=n}while(r!==null);Mn===0&&(Mn=5)}function bh(n,r){do{var o=dh(n.alternate,n);if(o!==null){o.flags&=32767,Ie=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Ie=n;return}Ie=n=o}while(n!==null);Mn=6,Ie=null}function $_(n,r,o,u,g,v,A,V,Q){n.cancelPendingCommit=null;do Sh();while(li!==0);if(($e&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=rc,gu(n,o,v,A,V,Q),n===mn&&(Ie=mn=null,De=0),Dc=r,Io=n,Ka=o,_m=v,ym=g,P_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,zv(Di,function(){return Em(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,g=nt.p,nt.p=2,A=$e,$e|=4;try{Ov(n,r,o)}finally{$e=A,nt.p=g,Z.T=u}}li=1,bm(),Sm(),nd()}}function bm(){if(li===1){li=0;var n=Io,r=Dc,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=nt.p;nt.p=2;var g=$e;$e|=4;try{I_(r,n);var v=jm,A=Kg(n.containerInfo),V=v.focusedElem,Q=v.selectionRange;if(A!==V&&V&&V.ownerDocument&&Gg(V.ownerDocument.documentElement,V)){if(Q!==null&&vp(V)){var ct=Q.start,yt=Q.end;if(yt===void 0&&(yt=ct),"selectionStart"in V)V.selectionStart=ct,V.selectionEnd=Math.min(yt,V.value.length);else{var bt=V.ownerDocument||document,ut=bt&&bt.defaultView||window;if(ut.getSelection){var mt=ut.getSelection(),Qt=V.textContent.length,re=Math.min(Q.start,Qt),un=Q.end===void 0?re:Math.min(Q.end,Qt);!mt.extend&&re>un&&(A=un,un=re,re=A);var st=Hg(V,re),tt=Hg(V,un);if(st&&tt&&(mt.rangeCount!==1||mt.anchorNode!==st.node||mt.anchorOffset!==st.offset||mt.focusNode!==tt.node||mt.focusOffset!==tt.offset)){var lt=bt.createRange();lt.setStart(st.node,st.offset),mt.removeAllRanges(),re>un?(mt.addRange(lt),mt.extend(tt.node,tt.offset)):(lt.setEnd(tt.node,tt.offset),mt.addRange(lt))}}}}for(bt=[],mt=V;mt=mt.parentNode;)mt.nodeType===1&&bt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<bt.length;V++){var wt=bt[V];wt.element.scrollLeft=wt.left,wt.element.scrollTop=wt.top}}gd=!!Nh,jm=Nh=null}finally{$e=g,nt.p=u,Z.T=o}}n.current=r,li=2}}function Sm(){if(li===2){li=0;var n=Io,r=Dc,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=nt.p;nt.p=2;var g=$e;$e|=4;try{cm(n,r.alternate,r)}finally{$e=g,nt.p=u,Z.T=o}}li=3}}function nd(){if(li===4||li===3){li=0,en();var n=Io,r=Dc,o=Ka,u=P_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?li=5:(li=0,Dc=Io=null,Am(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(No=null),It(o),r=r.stateNode,Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Bi,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=Z.T,g=nt.p,nt.p=2,Z.T=null;try{for(var v=n.onRecoverableError,A=0;A<u.length;A++){var V=u[A];v(V.value,{componentStack:V.stack})}}finally{Z.T=r,nt.p=g}}(Ka&3)!==0&&Sh(),pa(n),g=n.pendingLanes,(o&261930)!==0&&(g&42)!==0?n===vm?Th++:(Th=0,vm=n):Th=0,Eh(0)}}function Am(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Bu(r)))}function Sh(){return bm(),Sm(),nd(),Em()}function Em(){if(li!==5)return!1;var n=Io,r=_m;_m=0;var o=It(Ka),u=Z.T,g=nt.p;try{nt.p=32>o?32:o,Z.T=null,o=ym,ym=null;var v=Io,A=Ka;if(li=0,Dc=Io=null,Ka=0,($e&6)!==0)throw Error(i(331));var V=$e;if($e|=4,V_(v.current),D_(v,v.current,A,o),$e=V,Eh(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Bi,v)}catch{}return!0}finally{nt.p=g,Z.T=u,Am(n,r)}}function Cm(n,r,o){r=Is(o,r),r=Xp(n.stateNode,r,2),n=jr(n,r,2),n!==null&&(ba(n,2),pa(n))}function rn(n,r,o){if(n.tag===3)Cm(n,n,o);else for(;r!==null;){if(r.tag===3){Cm(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(No===null||!No.has(u))){n=Is(o,n),o=ha(2),u=jr(r,o,2),u!==null&&(zf(o,u,r,n),ba(u,2),pa(u));break}}r=r.return}}function xm(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new kv;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(o)||(pm=!0,g.add(o),n=Pv.bind(null,n,r,o),r.then(n,n))}function Pv(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,mn===n&&(De&o)===o&&(Mn===4||Mn===3&&(De&62914560)===De&&300>fn()-vh?($e&2)===0&&Mc(n,0):mm|=o,Oc===De&&(Oc=0)),pa(n)}function Ah(n,r){r===0&&(r=Zo()),n=aa(n,r),n!==null&&(ba(n,r),pa(n))}function id(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Ah(n,o)}function Uv(n,r){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),Ah(n,o)}function zv(n,r){return Ut(n,r)}var Vc=null,xl=null,Rm=!1,sd=!1,Nm=!1,Oo=0;function pa(n){n!==xl&&n.next===null&&(xl===null?Vc=xl=n:xl=xl.next=n),sd=!0,Rm||(Rm=!0,qv())}function Eh(n,r){if(!Nm&&sd){Nm=!0;do for(var o=!1,u=Vc;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var v=0;else{var A=u.suspendedLanes,V=u.pingedLanes;v=(1<<31-dn(42|n)+1)-1,v&=g&~(A&~V),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,Z_(u,v))}else v=De,v=qi(u,u===mn?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Ji(u,v)||(o=!0,Z_(u,v));u=u.next}while(o);Nm=!1}}function Bv(){Y_()}function Y_(){sd=Rm=!1;var n=0;Oo!==0&&Hv()&&(n=Oo);for(var r=fn(),o=null,u=Vc;u!==null;){var g=u.next,v=Q_(u,r);v===0?(u.next=null,o===null?Vc=g:o.next=g,g===null&&(xl=o)):(o=u,(n!==0||(v&3)!==0)&&(sd=!0)),u=g}li!==0&&li!==5||Eh(n),Oo!==0&&(Oo=0)}function Q_(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var A=31-dn(v),V=1<<A,Q=g[A];Q===-1?((V&o)===0||(V&u)!==0)&&(g[A]=Xo(V,r)):Q<=r&&(n.expiredLanes|=V),v&=~V}if(r=mn,o=De,o=qi(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===r&&(sn===2||sn===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ne(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ji(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&ne(u),It(o)){case 2:case 8:o=fi;break;case 32:o=Di;break;case 268435456:o=ao;break;default:o=Di}return u=X_.bind(null,n),o=Ut(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&ne(u),n.callbackPriority=2,n.callbackNode=null,2}function X_(n,r){if(li!==0&&li!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Sh()&&n.callbackNode!==o)return null;var u=De;return u=qi(n,n===mn?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(z_(n,u,r),Q_(n,fn()),n.callbackNode!=null&&n.callbackNode===o?X_.bind(null,n):null)}function Z_(n,r){if(Sh())return null;z_(n,r,!0)}function qv(){oy(function(){($e&6)!==0?Ut(Qr,Bv):Y_()})}function zs(){if(Oo===0){var n=fc;n===0&&(n=$s,$s<<=1,($s&261888)===0&&($s=256)),Oo=n}return Oo}function J_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:il(""+n)}function ty(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function Rl(n,r,o,u,g){if(r==="submit"&&o&&o.stateNode===g){var v=J_((g[me]||null).action),A=u.submitter;A&&(r=(r=A[me]||null)?J_(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var V=new sa("action","action",null,u,g);n.push({event:V,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Oo!==0){var Q=A?ty(g,A):new FormData(g);So(o,{pending:!0,data:Q,method:g.method,action:v},null,Q)}}else typeof v=="function"&&(V.preventDefault(),Q=A?ty(g,A):new FormData(g),So(o,{pending:!0,data:Q,method:g.method,action:v},v,Q))},currentTarget:g}]})}}for(var de=0;de<df.length;de++){var Im=df[de],ds=Im.toLowerCase(),Yn=Im[0].toUpperCase()+Im.slice(1);ss(ds,"on"+Yn)}ss(Ns,"onAnimationEnd"),ss(ju,"onAnimationIteration"),ss(Wg,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(ic,"onTransitionRun"),ss(hf,"onTransitionStart"),ss(ff,"onTransitionCancel"),ss(Ze,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Do=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ch));function ey(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],g=u.event;u=u.listeners;t:{var v=void 0;if(r)for(var A=u.length-1;0<=A;A--){var V=u[A],Q=V.instance,ct=V.currentTarget;if(V=V.listener,Q!==v&&g.isPropagationStopped())break t;v=V,g.currentTarget=ct;try{v(g)}catch(yt){pf(yt)}g.currentTarget=null,v=Q}else for(A=0;A<u.length;A++){if(V=u[A],Q=V.instance,ct=V.currentTarget,V=V.listener,Q!==v&&g.isPropagationStopped())break t;v=V,g.currentTarget=ct;try{v(g)}catch(yt){pf(yt)}g.currentTarget=null,v=Q}}}}function Oe(n,r){var o=r[Be];o===void 0&&(o=r[Be]=new Set);var u=n+"__bubble";o.has(u)||(ad(r,n,2,!1),o.add(u))}function Om(n,r,o){var u=0;r&&(u|=4),ad(o,n,u,r)}var rd="_reactListening"+Math.random().toString(36).slice(2);function Dm(n){if(!n[rd]){n[rd]=!0,_u.forEach(function(o){o!=="selectionchange"&&(Do.has(o)||Om(o,!1,n),Om(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[rd]||(r[rd]=!0,Om("selectionchange",!1,r))}}function ad(n,r,o,u){switch(xy(r)){case 2:var g=s1;break;case 8:g=r1;break;default:g=Hm}o=g.bind(null,r,o,n),g=void 0,!rl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(r,o,{capture:!0,passive:g}):n.addEventListener(r,o,!0):g!==void 0?n.addEventListener(r,o,{passive:g}):n.addEventListener(r,o,!1)}function Mm(n,r,o,u,g){var v=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var V=u.stateNode.containerInfo;if(V===g)break;if(A===4)for(A=u.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;V!==null;){if(A=Zr(V),A===null)return;if(Q=A.tag,Q===5||Q===6||Q===26||Q===27){u=v=A;continue t}V=V.parentNode}}u=u.return}co(function(){var ct=v,yt=Xs(o),bt=[];t:{var ut=$g.get(n);if(ut!==void 0){var mt=sa,Qt=n;switch(n){case"keypress":if(al(o)===0)break t;case"keydown":case"keyup":mt=Nr;break;case"focusin":Qt="focus",mt=ho;break;case"focusout":Qt="blur",mt=ho;break;case"beforeblur":case"afterblur":mt=ho;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=S;break;case Ns:case ju:case Wg:mt=Ou;break;case Ze:mt=H;break;case"scroll":case"scrollend":mt=Ru;break;case"wheel":mt=ht;break;case"copy":case"cut":case"paste":mt=ki;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Ia;break;case"toggle":case"beforetoggle":mt=ge}var re=(r&4)!==0,un=!re&&(n==="scroll"||n==="scrollend"),st=re?ut!==null?ut+"Capture":null:ut;re=[];for(var tt=ct,lt;tt!==null;){var wt=tt;if(lt=wt.stateNode,wt=wt.tag,wt!==5&&wt!==26&&wt!==27||lt===null||st===null||(wt=Cs(tt,st),wt!=null&&re.push(Bs(tt,wt,lt))),un)break;tt=tt.return}0<re.length&&(ut=new mt(ut,Qt,null,o,yt),bt.push({event:ut,listeners:re}))}}if((r&7)===0){t:{if(ut=n==="mouseover"||n==="pointerover",mt=n==="mouseout"||n==="pointerout",ut&&o!==Cu&&(Qt=o.relatedTarget||o.fromElement)&&(Zr(Qt)||Qt[an]))break t;if((mt||ut)&&(ut=yt.window===yt?yt:(ut=yt.ownerDocument)?ut.defaultView||ut.parentWindow:window,mt?(Qt=o.relatedTarget||o.toElement,mt=ct,Qt=Qt?Zr(Qt):null,Qt!==null&&(un=c(Qt),re=Qt.tag,Qt!==un||re!==5&&re!==27&&re!==6)&&(Qt=null)):(mt=null,Qt=ct),mt!==Qt)){if(re=ll,wt="onMouseLeave",st="onMouseEnter",tt="mouse",(n==="pointerout"||n==="pointerover")&&(re=Ia,wt="onPointerLeave",st="onPointerEnter",tt="pointer"),un=mt==null?ut:As(mt),lt=Qt==null?ut:As(Qt),ut=new re(wt,tt+"leave",mt,o,yt),ut.target=un,ut.relatedTarget=lt,wt=null,Zr(yt)===ct&&(re=new re(st,tt+"enter",Qt,o,yt),re.target=lt,re.relatedTarget=un,wt=re),un=wt,mt&&Qt)e:{for(re=od,st=mt,tt=Qt,lt=0,wt=st;wt;wt=re(wt))lt++;wt=0;for(var ee=tt;ee;ee=re(ee))wt++;for(;0<lt-wt;)st=re(st),lt--;for(;0<wt-lt;)tt=re(tt),wt--;for(;lt--;){if(st===tt||tt!==null&&st===tt.alternate){re=st;break e}st=re(st),tt=re(tt)}re=null}else re=null;mt!==null&&En(bt,ut,mt,re,!1),Qt!==null&&un!==null&&En(bt,un,Qt,re,!0)}}t:{if(ut=ct?As(ct):window,mt=ut.nodeName&&ut.nodeName.toLowerCase(),mt==="select"||mt==="input"&&ut.type==="file")var Fe=qg;else if(pp(ut))if(fl)Fe=Tv;else{Fe=yv;var Zt=cf}else mt=ut.nodeName,!mt||mt.toLowerCase()!=="input"||ut.type!=="checkbox"&&ut.type!=="radio"?ct&&nl(ct.elementType)&&(Fe=qg):Fe=vv;if(Fe&&(Fe=Fe(n,ct))){mp(bt,Fe,o,yt);break t}Zt&&Zt(n,ut,ct),n==="focusout"&&ct&&ut.type==="number"&&ct.memoizedProps.value!=null&&bu(ut,"number",ut.value)}switch(Zt=ct?As(ct):window,n){case"focusin":(pp(Zt)||Zt.contentEditable==="true")&&(et=Zt,_t=ct,ft=null);break;case"focusout":ft=_t=et=null;break;case"mousedown":Gt=!0;break;case"contextmenu":case"mouseup":case"dragend":Gt=!1,fe(bt,o,yt);break;case"selectionchange":if(nc)break;case"keydown":case"keyup":fe(bt,o,yt)}var be;if(qe)t:{switch(n){case"compositionstart":var Me="onCompositionStart";break t;case"compositionend":Me="onCompositionEnd";break t;case"compositionupdate":Me="onCompositionUpdate";break t}Me=void 0}else hl?Oa(n,o)&&(Me="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Me="onCompositionStart");Me&&(Ir&&o.locale!=="ko"&&(hl||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&hl&&(be=Xe()):(ia=yt,xu="value"in ia?ia.value:ia.textContent,hl=!0)),Zt=xh(ct,Me),0<Zt.length&&(Me=new Kn(Me,n,null,o,yt),bt.push({event:Me,listeners:Zt}),be?Me.data=be:(be=Jl(o),be!==null&&(Me.data=be)))),(be=is?Rs(n,o):dp(n,o))&&(Me=xh(ct,"onBeforeInput"),0<Me.length&&(Zt=new Kn("onBeforeInput","beforeinput",null,o,yt),bt.push({event:Zt,listeners:Me}),Zt.data=be)),Rl(bt,n,ct,o,yt)}ey(bt,r)})}function Bs(n,r,o){return{instance:n,listener:r,currentTarget:o}}function xh(n,r){for(var o=r+"Capture",u=[];n!==null;){var g=n,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Cs(n,o),g!=null&&u.unshift(Bs(n,g,v)),g=Cs(n,r),g!=null&&u.push(Bs(n,g,v))),n.tag===3)return u;n=n.return}return[]}function od(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function En(n,r,o,u,g){for(var v=r._reactName,A=[];o!==null&&o!==u;){var V=o,Q=V.alternate,ct=V.stateNode;if(V=V.tag,Q!==null&&Q===u)break;V!==5&&V!==26&&V!==27||ct===null||(Q=ct,g?(ct=Cs(o,v),ct!=null&&A.unshift(Bs(o,ct,Q))):g||(ct=Cs(o,v),ct!=null&&A.push(Bs(o,ct,Q)))),o=o.return}A.length!==0&&n.push({event:r,listeners:A})}var qn=/\r\n?/g,ny=/\u0000|\uFFFD/g;function iy(n){return(typeof n=="string"?n:""+n).replace(qn,`
`).replace(ny,"")}function sy(n,r){return r=iy(r),iy(n)===r}function cn(n,r,o,u,g,v){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||ai(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&ai(n,""+u);break;case"className":ns(n,"class",u);break;case"tabIndex":ns(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(n,o,u);break;case"style":Au(n,u,v);break;case"data":if(r!=="object"){ns(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=il(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(r!=="input"&&cn(n,r,"name",g.name,g,null),cn(n,r,"formEncType",g.formEncType,g,null),cn(n,r,"formMethod",g.formMethod,g,null),cn(n,r,"formTarget",g.formTarget,g,null)):(cn(n,r,"encType",g.encType,g,null),cn(n,r,"method",g.method,g,null),cn(n,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=il(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Cr);break;case"onScroll":u!=null&&Oe("scroll",n);break;case"onScrollEnd":u!=null&&Oe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=il(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Oe("beforetoggle",n),Oe("toggle",n),Kl(n,"popover",u);break;case"xlinkActuate":Gn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Gn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Gn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Gn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Gn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Gn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Gn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Gn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Gn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Kl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Eu.get(o)||o,Kl(n,o,u))}}function km(n,r,o,u,g,v){switch(o){case"style":Au(n,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?ai(n,u):(typeof u=="number"||typeof u=="bigint")&&ai(n,""+u);break;case"onScroll":u!=null&&Oe("scroll",n);break;case"onScrollEnd":u!=null&&Oe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Cr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yu.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),r=o.slice(2,g?o.length-7:void 0),v=n[me]||null,v=v!=null?v[o]:null,typeof v=="function"&&n.removeEventListener(r,v,g),typeof u=="function")){typeof v!="function"&&v!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,g);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Kl(n,o,u)}}}function Ri(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",n),Oe("load",n);var u=!1,g=!1,v;for(v in o)if(o.hasOwnProperty(v)){var A=o[v];if(A!=null)switch(v){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:cn(n,r,v,A,o,null)}}g&&cn(n,r,"srcSet",o.srcSet,o,null),u&&cn(n,r,"src",o.src,o,null);return;case"input":Oe("invalid",n);var V=v=A=g=null,Q=null,ct=null;for(u in o)if(o.hasOwnProperty(u)){var yt=o[u];if(yt!=null)switch(u){case"name":g=yt;break;case"type":A=yt;break;case"checked":Q=yt;break;case"defaultChecked":ct=yt;break;case"value":v=yt;break;case"defaultValue":V=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(i(137,r));break;default:cn(n,r,u,yt,o,null)}}Wl(n,v,V,Q,ct,A,g,!1);return;case"select":Oe("invalid",n),u=A=v=null;for(g in o)if(o.hasOwnProperty(g)&&(V=o[g],V!=null))switch(g){case"value":v=V;break;case"defaultValue":A=V;break;case"multiple":u=V;default:cn(n,r,g,V,o,null)}r=v,o=A,n.multiple=!!u,r!=null?Aa(n,!!u,r,!1):o!=null&&Aa(n,!!u,o,!0);return;case"textarea":Oe("invalid",n),v=g=u=null;for(A in o)if(o.hasOwnProperty(A)&&(V=o[A],V!=null))switch(A){case"value":u=V;break;case"defaultValue":g=V;break;case"children":v=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(91));break;default:cn(n,r,A,V,o,null)}ea(n,u,g,v);return;case"option":for(Q in o)if(o.hasOwnProperty(Q)&&(u=o[Q],u!=null))switch(Q){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:cn(n,r,Q,u,o,null)}return;case"dialog":Oe("beforetoggle",n),Oe("toggle",n),Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":Oe("load",n);break;case"video":case"audio":for(u=0;u<Ch.length;u++)Oe(Ch[u],n);break;case"image":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"embed":case"source":case"link":Oe("error",n),Oe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in o)if(o.hasOwnProperty(ct)&&(u=o[ct],u!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:cn(n,r,ct,u,o,null)}return;default:if(nl(r)){for(yt in o)o.hasOwnProperty(yt)&&(u=o[yt],u!==void 0&&km(n,r,yt,u,o,void 0));return}}for(V in o)o.hasOwnProperty(V)&&(u=o[V],u!=null&&cn(n,r,V,u,o,null))}function Fv(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,A=null,V=null,Q=null,ct=null,yt=null;for(mt in o){var bt=o[mt];if(o.hasOwnProperty(mt)&&bt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Q=bt;default:u.hasOwnProperty(mt)||cn(n,r,mt,null,u,bt)}}for(var ut in u){var mt=u[ut];if(bt=o[ut],u.hasOwnProperty(ut)&&(mt!=null||bt!=null))switch(ut){case"type":v=mt;break;case"name":g=mt;break;case"checked":ct=mt;break;case"defaultChecked":yt=mt;break;case"value":A=mt;break;case"defaultValue":V=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,r));break;default:mt!==bt&&cn(n,r,ut,mt,u,bt)}}el(n,A,V,Q,ct,yt,v,g);return;case"select":mt=A=V=ut=null;for(v in o)if(Q=o[v],o.hasOwnProperty(v)&&Q!=null)switch(v){case"value":break;case"multiple":mt=Q;default:u.hasOwnProperty(v)||cn(n,r,v,null,u,Q)}for(g in u)if(v=u[g],Q=o[g],u.hasOwnProperty(g)&&(v!=null||Q!=null))switch(g){case"value":ut=v;break;case"defaultValue":V=v;break;case"multiple":A=v;default:v!==Q&&cn(n,r,g,v,u,Q)}r=V,o=A,u=mt,ut!=null?Aa(n,!!o,ut,!1):!!u!=!!o&&(r!=null?Aa(n,!!o,r,!0):Aa(n,!!o,o?[]:"",!1));return;case"textarea":mt=ut=null;for(V in o)if(g=o[V],o.hasOwnProperty(V)&&g!=null&&!u.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:cn(n,r,V,null,u,g)}for(A in u)if(g=u[A],v=o[A],u.hasOwnProperty(A)&&(g!=null||v!=null))switch(A){case"value":ut=g;break;case"defaultValue":mt=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&cn(n,r,A,g,u,v)}$l(n,ut,mt);return;case"option":for(var Qt in o)if(ut=o[Qt],o.hasOwnProperty(Qt)&&ut!=null&&!u.hasOwnProperty(Qt))switch(Qt){case"selected":n.selected=!1;break;default:cn(n,r,Qt,null,u,ut)}for(Q in u)if(ut=u[Q],mt=o[Q],u.hasOwnProperty(Q)&&ut!==mt&&(ut!=null||mt!=null))switch(Q){case"selected":n.selected=ut&&typeof ut!="function"&&typeof ut!="symbol";break;default:cn(n,r,Q,ut,u,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in o)ut=o[re],o.hasOwnProperty(re)&&ut!=null&&!u.hasOwnProperty(re)&&cn(n,r,re,null,u,ut);for(ct in u)if(ut=u[ct],mt=o[ct],u.hasOwnProperty(ct)&&ut!==mt&&(ut!=null||mt!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(i(137,r));break;default:cn(n,r,ct,ut,u,mt)}return;default:if(nl(r)){for(var un in o)ut=o[un],o.hasOwnProperty(un)&&ut!==void 0&&!u.hasOwnProperty(un)&&km(n,r,un,void 0,u,ut);for(yt in u)ut=u[yt],mt=o[yt],!u.hasOwnProperty(yt)||ut===mt||ut===void 0&&mt===void 0||km(n,r,yt,ut,u,mt);return}}for(var st in o)ut=o[st],o.hasOwnProperty(st)&&ut!=null&&!u.hasOwnProperty(st)&&cn(n,r,st,null,u,ut);for(bt in u)ut=u[bt],mt=o[bt],!u.hasOwnProperty(bt)||ut===mt||ut==null&&mt==null||cn(n,r,bt,ut,u,mt)}function Vm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rh(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var g=o[u],v=g.transferSize,A=g.initiatorType,V=g.duration;if(v&&V&&Vm(A)){for(A=0,V=g.responseEnd,u+=1;u<o.length;u++){var Q=o[u],ct=Q.startTime;if(ct>V)break;var yt=Q.transferSize,bt=Q.initiatorType;yt&&Vm(bt)&&(Q=Q.responseEnd,A+=yt*(Q<V?1:(V-ct)/(Q-ct)))}if(--u,r+=8*(v+A)/(g.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Nh=null,jm=null;function Ih(n){return n.nodeType===9?n:n.ownerDocument}function Oh(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ps(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Mo(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Lm=null;function Hv(){var n=window.event;return n&&n.type==="popstate"?n===Lm?!1:(Lm=n,!0):(Lm=null,!1)}var ry=typeof setTimeout=="function"?setTimeout:void 0,Gv=typeof clearTimeout=="function"?clearTimeout:void 0,ay=typeof Promise=="function"?Promise:void 0,oy=typeof queueMicrotask=="function"?queueMicrotask:typeof ay<"u"?function(n){return ay.resolve(null).then(n).catch($a)}:ry;function $a(n){setTimeout(function(){throw n})}function oe(n){return n==="head"}function Pm(n,r){var o=r,u=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(g),Hc(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Dh(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Dh(o);for(var v=o.firstChild;v;){var A=v.nextSibling,V=v.nodeName;v[es]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&v.rel.toLowerCase()==="stylesheet"||o.removeChild(v),v=A}}else o==="body"&&Dh(n.ownerDocument.body);o=g}while(o);Hc(r)}function qs(n,r){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function ld(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ld(o),Hl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Kv(n,r,o,u){for(;n.nodeType===1;){var g=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[es])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=hr(n.nextSibling),n===null)break}return null}function tn(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=hr(n.nextSibling),n===null))return null;return n}function ly(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=hr(n.nextSibling),n===null))return null;return n}function cd(n){return n.data==="$?"||n.data==="$~"}function jc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Wv(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function hr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Um=null;function cy(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return hr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function uy(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function hy(n,r,o){switch(r=Ih(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Dh(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Hl(n)}var fr=new Map,fy=new Set;function ud(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ya=nt.d;nt.d={f:$v,r:Yv,D:zm,C:Qv,L:Xv,m:Zv,X:ms,S:mi,M:Jv};function $v(){var n=Ya.f(),r=Jf();return n||r}function Yv(n){var r=Fi(n);r!==null&&r.tag===5&&r.type==="form"?Hp(r):Ya.r(n)}var ko=typeof document>"u"?null:document;function dy(n,r,o){var u=ko;if(u&&typeof r=="string"&&r){var g=Hi(r);g='link[rel="'+n+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),fy.has(g)||(fy.add(g),n={rel:n,crossOrigin:o,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Ri(r,"link",n),Zn(r),u.head.appendChild(r)))}}function zm(n){Ya.D(n),dy("dns-prefetch",n,null)}function Qv(n,r){Ya.C(n,r),dy("preconnect",n,r)}function Xv(n,r,o){Ya.L(n,r,o);var u=ko;if(u&&n&&r){var g='link[rel="preload"][as="'+Hi(r)+'"]';r==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Hi(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Hi(o.imageSizes)+'"]')):g+='[href="'+Hi(n)+'"]';var v=g;switch(r){case"style":v=Lc(n);break;case"script":v=Uc(n)}fr.has(v)||(n=w({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),fr.set(v,n),u.querySelector(g)!==null||r==="style"&&u.querySelector(Pc(v))||r==="script"&&u.querySelector(zc(v))||(r=u.createElement("link"),Ri(r,"link",n),Zn(r),u.head.appendChild(r)))}}function Zv(n,r){Ya.m(n,r);var o=ko;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Hi(u)+'"][href="'+Hi(n)+'"]',v=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Uc(n)}if(!fr.has(v)&&(n=w({rel:"modulepreload",href:n},r),fr.set(v,n),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zc(v)))return}u=o.createElement("link"),Ri(u,"link",n),Zn(u),o.head.appendChild(u)}}}function mi(n,r,o){Ya.S(n,r,o);var u=ko;if(u&&n){var g=Es(u).hoistableStyles,v=Lc(n);r=r||"default";var A=g.get(v);if(!A){var V={loading:0,preload:null};if(A=u.querySelector(Pc(v)))V.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":r},o),(o=fr.get(v))&&Bm(n,o);var Q=A=u.createElement("link");Zn(Q),Ri(Q,"link",n),Q._p=new Promise(function(ct,yt){Q.onload=ct,Q.onerror=yt}),Q.addEventListener("load",function(){V.loading|=1}),Q.addEventListener("error",function(){V.loading|=2}),V.loading|=4,hd(A,r,u)}A={type:"stylesheet",instance:A,count:1,state:V},g.set(v,A)}}}function ms(n,r){Ya.X(n,r);var o=ko;if(o&&n){var u=Es(o).hoistableScripts,g=Uc(n),v=u.get(g);v||(v=o.querySelector(zc(g)),v||(n=w({src:n,async:!0},r),(r=fr.get(g))&&fd(n,r),v=o.createElement("script"),Zn(v),Ri(v,"link",n),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function Jv(n,r){Ya.M(n,r);var o=ko;if(o&&n){var u=Es(o).hoistableScripts,g=Uc(n),v=u.get(g);v||(v=o.querySelector(zc(g)),v||(n=w({src:n,async:!0,type:"module"},r),(r=fr.get(g))&&fd(n,r),v=o.createElement("script"),Zn(v),Ri(v,"link",n),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(g,v))}}function py(n,r,o,u){var g=(g=jt.current)?ud(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Lc(o.href),o=Es(g).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Lc(o.href);var v=Es(g).hoistableStyles,A=v.get(n);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,A),(v=g.querySelector(Pc(n)))&&!v._p&&(A.instance=v,A.state.loading=5),fr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},fr.set(n,o),v||t1(g,n,o,A.state))),r&&u===null)throw Error(i(528,""));return A}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Uc(o),o=Es(g).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Lc(n){return'href="'+Hi(n)+'"'}function Pc(n){return'link[rel="stylesheet"]['+n+"]"}function my(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function t1(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Ri(r,"link",o),Zn(r),n.head.appendChild(r))}function Uc(n){return'[src="'+Hi(n)+'"]'}function zc(n){return"script[async]"+n}function gy(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+Hi(o.href)+'"]');if(u)return r.instance=u,Zn(u),u;var g=w({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Zn(u),Ri(u,"style",g),hd(u,o.precedence,n),r.instance=u;case"stylesheet":g=Lc(o.href);var v=n.querySelector(Pc(g));if(v)return r.state.loading|=4,r.instance=v,Zn(v),v;u=my(o),(g=fr.get(g))&&Bm(u,g),v=(n.ownerDocument||n).createElement("link"),Zn(v);var A=v;return A._p=new Promise(function(V,Q){A.onload=V,A.onerror=Q}),Ri(v,"link",u),r.state.loading|=4,hd(v,o.precedence,n),r.instance=v;case"script":return v=Uc(o.src),(g=n.querySelector(zc(v)))?(r.instance=g,Zn(g),g):(u=o,(g=fr.get(v))&&(u=w({},o),fd(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),Zn(g),Ri(g,"link",u),n.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,hd(u,o.precedence,n));return r.instance}function hd(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,v=g,A=0;A<u.length;A++){var V=u[A];if(V.dataset.precedence===r)v=V;else if(v!==g)break}v?v.parentNode.insertBefore(n,v.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Bm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function fd(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Mh=null;function _y(n,r,o){if(Mh===null){var u=new Map,g=Mh=new Map;g.set(o,u)}else g=Mh,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),g=0;g<o.length;g++){var v=o[g];if(!(v[es]||v[Yt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=n+A;var V=u.get(A);V?V.push(v):u.set(A,[v])}}return u}function yy(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function e1(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function vy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Bc(n,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Lc(u.href),v=r.querySelector(Pc(g));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=dd.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=v,Zn(v);return}v=r.ownerDocument||r,u=my(u),(g=fr.get(g))&&Bm(u,g),v=v.createElement("link"),Zn(v);var A=v;A._p=new Promise(function(V,Q){A.onload=V,A.onerror=Q}),Ri(v,"link",u),o.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=dd.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var qm=0;function n1(n,r){return n.stylesheets&&n.count===0&&md(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&md(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+r);0<n.imgBytes&&qm===0&&(qm=62500*Rh());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&md(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>qm?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function dd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)md(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var pd=null;function md(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,pd=new Map,r.forEach(Ty,n),pd=null,dd.call(n))}function Ty(n,r){if(!(r.state.loading&4)){var o=pd.get(n);if(o)var u=o.get(null);else{o=new Map,pd.set(n,o);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var A=g[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(o.set(A.dataset.precedence,A),u=A)}u&&o.set(null,u)}g=r.instance,A=g.getAttribute("data-precedence"),v=o.get(A)||u,v===u&&o.set(null,g),o.set(A,g),this.count++,u=dd.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),v?v.parentNode.insertBefore(g,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),r.state.loading|=4}}var qc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:Tt,_currentValue2:Tt,_threadCount:0};function i1(n,r,o,u,g,v,A,V,Q){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qs(0),this.hiddenUpdates=Qs(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function wy(n,r,o,u,g,v,A,V,Q,ct,yt,bt){return n=new i1(n,r,o,A,Q,ct,yt,bt,V),r=1,v===!0&&(r|=24),v=Ai(3,null,null,r),n.current=v,v.stateNode=n,r=Mr(),r.refCount++,n.pooledCache=r,r.refCount++,v.memoizedState={element:u,isDehydrated:o,cache:r},ca(v),n}function by(n){return n?(n=Ma,n):Ma}function Sy(n,r,o,u,g,v){g=by(g),u.context===null?u.context=g:u.pendingContext=g,u=To(r),u.payload={element:o},v=v===void 0?null:v,v!==null&&(u.callback=v),o=jr(n,u,r),o!==null&&(fs(o,n,r),Hu(o,n,r))}function Ay(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Fm(n,r){Ay(n,r),(n=n.alternate)&&Ay(n,r)}function Ey(n){if(n.tag===13||n.tag===31){var r=aa(n,67108864);r!==null&&fs(r,n,67108864),Fm(n,67108864)}}function Cy(n){if(n.tag===13||n.tag===31){var r=Us();r=wr(r);var o=aa(n,r);o!==null&&fs(o,n,r),Fm(n,r)}}var gd=!0;function s1(n,r,o,u){var g=Z.T;Z.T=null;var v=nt.p;try{nt.p=2,Hm(n,r,o,u)}finally{nt.p=v,Z.T=g}}function r1(n,r,o,u){var g=Z.T;Z.T=null;var v=nt.p;try{nt.p=8,Hm(n,r,o,u)}finally{nt.p=v,Z.T=g}}function Hm(n,r,o,u){if(gd){var g=Gm(u);if(g===null)Mm(n,r,u,_d,o),Ry(n,u);else if(Ny(g,n,r,o,u))u.stopPropagation();else if(Ry(n,u),r&4&&-1<a1.indexOf(n)){for(;g!==null;){var v=Fi(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ys(v.pendingLanes);if(A!==0){var V=v;for(V.pendingLanes|=2,V.entangledLanes|=2;A;){var Q=1<<31-dn(A);V.entanglements[1]|=Q,A&=~Q}pa(v),($e&6)===0&&(Cl=fn()+500,Eh(0))}}break;case 31:case 13:V=aa(v,2),V!==null&&fs(V,v,2),Jf(),Fm(v,2)}if(v=Gm(u),v===null&&Mm(n,r,u,_d,o),v===g)break;g=v}g!==null&&u.stopPropagation()}else Mm(n,r,u,null,o)}}function Gm(n){return n=Xs(n),Km(n)}var _d=null;function Km(n){if(_d=null,n=Zr(n),n!==null){var r=c(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=f(r),n!==null)return n;n=null}else if(o===31){if(n=d(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return _d=n,null}function xy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rn()){case Qr:return 2;case fi:return 8;case Di:case bs:return 32;case ao:return 268435456;default:return 32}default:return 32}}var Wm=!1,Vo=null,jo=null,Lo=null,kh=new Map,Vh=new Map,Po=[],a1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ry(n,r){switch(n){case"focusin":case"focusout":Vo=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":kh.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vh.delete(r.pointerId)}}function Nl(n,r,o,u,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:v,targetContainers:[g]},r!==null&&(r=Fi(r),r!==null&&Ey(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),n)}function Ny(n,r,o,u,g){switch(r){case"focusin":return Vo=Nl(Vo,n,r,o,u,g),!0;case"dragenter":return jo=Nl(jo,n,r,o,u,g),!0;case"mouseover":return Lo=Nl(Lo,n,r,o,u,g),!0;case"pointerover":var v=g.pointerId;return kh.set(v,Nl(kh.get(v)||null,n,r,o,u,g)),!0;case"gotpointercapture":return v=g.pointerId,Vh.set(v,Nl(Vh.get(v)||null,n,r,o,u,g)),!0}return!1}function $m(n){var r=Zr(n.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=f(o),r!==null){n.blockedOn=r,Bt(n.priority,function(){Cy(o)});return}}else if(r===31){if(r=d(o),r!==null){n.blockedOn=r,Bt(n.priority,function(){Cy(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Gm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Cu=u,o.target.dispatchEvent(u),Cu=null}else return r=Fi(o),r!==null&&Ey(r),n.blockedOn=o,!1;r.shift()}return!0}function Iy(n,r,o){yd(n)&&o.delete(r)}function o1(){Wm=!1,Vo!==null&&yd(Vo)&&(Vo=null),jo!==null&&yd(jo)&&(jo=null),Lo!==null&&yd(Lo)&&(Lo=null),kh.forEach(Iy),Vh.forEach(Iy)}function Fc(n,r){n.blockedOn===r&&(n.blockedOn=null,Wm||(Wm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,o1)))}var vd=null;function Oy(n){vd!==n&&(vd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){vd===n&&(vd=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],g=n[r+2];if(typeof u!="function"){if(Km(u||o)===null)continue;break}var v=Fi(o);v!==null&&(n.splice(r,3),r-=3,So(v,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function Hc(n){function r(Q){return Fc(Q,n)}Vo!==null&&Fc(Vo,n),jo!==null&&Fc(jo,n),Lo!==null&&Fc(Lo,n),kh.forEach(r),Vh.forEach(r);for(var o=0;o<Po.length;o++){var u=Po[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Po.length&&(o=Po[0],o.blockedOn===null);)$m(o),o.blockedOn===null&&Po.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],v=o[u+1],A=g[me]||null;if(typeof v=="function")A||Oy(o);else if(A){var V=null;if(v&&v.hasAttribute("formAction")){if(g=v,A=v[me]||null)V=A.formAction;else if(Km(g)!==null)continue}else V=A.action;typeof V=="function"?o[u+1]=V:(o.splice(u,3),u-=3),Oy(o)}}}function $i(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function jh(n){this._internalRoot=n}Td.prototype.render=jh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=Us();Sy(o,u,n,r,null,null)},Td.prototype.unmount=jh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Sy(n.current,2,null,n,null,null),Jf(),r[an]=null}};function Td(n){this._internalRoot=n}Td.prototype.unstable_scheduleHydration=function(n){if(n){var r=Xt();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Po.length&&r!==0&&r<Po[o].priority;o++);Po.splice(o,0,n),o===0&&$m(n)}};var Dy=t.version;if(Dy!=="19.2.0")throw Error(i(527,Dy,"19.2.0"));nt.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=_(r),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var l1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Bi=wd.inject(l1),Nn=wd}catch{}}return Qm.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,u="",g=Yp,v=Qp,A=__;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=wy(n,1,!1,null,null,o,u,null,g,v,A,$i),n[an]=r.current,Dm(n),new jh(r)},Qm.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var u=!1,g="",v=Yp,A=Qp,V=__,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(V=o.onRecoverableError),o.formState!==void 0&&(Q=o.formState)),r=wy(n,1,!0,r,o??null,u,g,Q,v,A,V,$i),r.context=by(null),o=r.current,u=Us(),u=wr(u),g=To(u),g.callback=null,jr(o,g,u),o=u,r.current.lanes=o,ba(r,o),pa(r),n[an]=r.current,Dm(n),new Td(r)},Qm.version="19.2.0",Qm}var fb;function gx(){if(fb)return f1.exports;fb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),f1.exports=mx(),f1.exports}var _x=gx(),Xm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var yx=Xm.exports,db;function vx(){return db||(db=1,(function(s,t){(function(){var e,i="4.17.21",a=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",d="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",_=500,T="__lodash_placeholder__",w=1,C=2,I=4,O=1,k=2,D=1,z=2,X=4,Y=8,it=16,K=32,W=64,R=128,E=256,M=512,B=30,P="...",F=800,U=16,vt=1,Rt=2,Z=3,nt=1/0,Tt=9007199254740991,dt=17976931348623157e292,pt=NaN,G=4294967295,at=G-1,St=G>>>1,Dt=[["ary",R],["bind",D],["bindKey",z],["curry",Y],["curryRight",it],["flip",M],["partial",K],["partialRight",W],["rearg",E]],Nt="[object Arguments]",jt="[object Array]",Ft="[object AsyncFunction]",kt="[object Boolean]",te="[object Date]",Ae="[object DOMException]",Ye="[object Error]",he="[object Function]",gn="[object GeneratorFunction]",Re="[object Map]",gt="[object Number]",Lt="[object Null]",$t="[object Object]",Pt="[object Promise]",Ot="[object Proxy]",Ut="[object RegExp]",ne="[object Set]",ae="[object String]",en="[object Symbol]",fn="[object Undefined]",Rn="[object WeakMap]",Qr="[object WeakSet]",fi="[object ArrayBuffer]",Di="[object DataView]",bs="[object Float32Array]",ao="[object Float64Array]",Ss="[object Int8Array]",wa="[object Int16Array]",Bi="[object Int32Array]",Nn="[object Uint8Array]",Ln="[object Uint8ClampedArray]",dn="[object Uint16Array]",oo="[object Uint32Array]",lo=/\b__p \+= '';/g,Fl=/\b(__p \+=) '' \+/g,$s=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xr=/&(?:amp|lt|gt|quot|#39);/g,In=/[&<>"']/g,Ys=RegExp(Xr.source),qi=RegExp(In.source),Ji=/<%-([\s\S]+?)%>/g,Xo=/<%([\s\S]+?)%>/g,Zo=/<%=([\s\S]+?)%>/g,Qs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ba=/^\w*$/,gu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tr=/[\\^$.*+?()[\]{}|]/g,Jo=RegExp(Tr.source),Sa=/^\s+/,wr=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xt=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yt=/[()=,{}\[\]\/\s]/,me=/\\(\\)?/g,an=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Be=/\w*$/,bi=/^[-+]0x[0-9a-f]+$/i,ts=/^0b[01]+$/i,br=/^\[object .+?Constructor\]$/,es=/^0o[0-7]+$/i,Hl=/^(?:0|[1-9]\d*)$/,Zr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fi=/($^)/,As=/['\n\r\u2028\u2029\\]/g,Es="\\ud800-\\udfff",Zn="\\u0300-\\u036f",_u="\\ufe20-\\ufe2f",yu="\\u20d0-\\u20ff",Sr=Zn+_u+yu,Ar="\\u2700-\\u27bf",Gl="a-z\\xdf-\\xf6\\xf8-\\xff",vu="\\xac\\xb1\\xd7\\xf7",Tu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sf="\\u2000-\\u206f",Kl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ns="A-Z\\xc0-\\xd6\\xd8-\\xde",Gn="\\ufe0e\\ufe0f",ri=vu+Tu+sf+Kl,Jr="[']",wu="["+Es+"]",Qe="["+ri+"]",ta="["+Sr+"]",Er="\\d+",tl="["+Ar+"]",Hi="["+Gl+"]",el="[^"+Es+ri+Er+Ar+Gl+ns+"]",Wl="\\ud83c[\\udffb-\\udfff]",bu="(?:"+ta+"|"+Wl+")",Aa="[^"+Es+"]",$l="(?:\\ud83c[\\udde6-\\uddff]){2}",ea="[\\ud800-\\udbff][\\udc00-\\udfff]",ai="["+ns+"]",Su="\\u200d",Yl="(?:"+Hi+"|"+el+")",Au="(?:"+ai+"|"+el+")",nl="(?:"+Jr+"(?:d|ll|m|re|s|t|ve))?",Eu="(?:"+Jr+"(?:D|LL|M|RE|S|T|VE))?",Ea=bu+"?",il="["+Gn+"]?",Cr="(?:"+Su+"(?:"+[Aa,$l,ea].join("|")+")"+il+Ea+")*",Cu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ca=il+Ea+Cr,na="(?:"+[tl,$l,ea].join("|")+")"+Ca,sl="(?:"+[Aa+ta+"?",ta,$l,ea,wu].join("|")+")",Ql=RegExp(Jr,"g"),co=RegExp(ta,"g"),Cs=RegExp(Wl+"(?="+Wl+")|"+sl+Ca,"g"),Zs=RegExp([ai+"?"+Hi+"+"+nl+"(?="+[Qe,ai,"$"].join("|")+")",Au+"+"+Eu+"(?="+[Qe,ai+Yl,"$"].join("|")+")",ai+"?"+Yl+"+"+nl,ai+"+"+Eu,Xs,Cu,Er,na].join("|"),"g"),rl=RegExp("["+Su+Es+Sr+Gn+"]"),on=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ia=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xu=-1,We={};We[bs]=We[ao]=We[Ss]=We[wa]=We[Bi]=We[Nn]=We[Ln]=We[dn]=We[oo]=!0,We[Nt]=We[jt]=We[fi]=We[kt]=We[Di]=We[te]=We[Ye]=We[he]=We[Re]=We[gt]=We[$t]=We[Ut]=We[ne]=We[ae]=We[Rn]=!1;var Xe={};Xe[Nt]=Xe[jt]=Xe[fi]=Xe[Di]=Xe[kt]=Xe[te]=Xe[bs]=Xe[ao]=Xe[Ss]=Xe[wa]=Xe[Bi]=Xe[Re]=Xe[gt]=Xe[$t]=Xe[Ut]=Xe[ne]=Xe[ae]=Xe[en]=Xe[Nn]=Xe[Ln]=Xe[dn]=Xe[oo]=!0,Xe[Ye]=Xe[he]=Xe[Rn]=!1;var al={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Si={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ra=parseFloat,sa=parseInt,Na=typeof My=="object"&&My&&My.Object===Object&&My,Ru=typeof self=="object"&&self&&self.Object===Object&&self,bn=Na||Ru||Function("return this")(),uo=t&&!t.nodeType&&t,Mi=uo&&!0&&s&&!s.nodeType&&s,ol=Mi&&Mi.exports===uo,ll=ol&&Na.process,di=(function(){try{var et=Mi&&Mi.require&&Mi.require("util").types;return et||ll&&ll.binding&&ll.binding("util")}catch{}})(),Nu=di&&di.isArrayBuffer,Iu=di&&di.isDate,ho=di&&di.isMap,Xl=di&&di.isRegExp,Ou=di&&di.isSet,cl=di&&di.isTypedArray;function ki(et,_t,ft){switch(ft.length){case 0:return et.call(_t);case 1:return et.call(_t,ft[0]);case 2:return et.call(_t,ft[0],ft[1]);case 3:return et.call(_t,ft[0],ft[1],ft[2])}return et.apply(_t,ft)}function rf(et,_t,ft,Gt){for(var fe=-1,Ne=et==null?0:et.length;++fe<Ne;){var Sn=et[fe];_t(Gt,Sn,ft(Sn),et)}return Gt}function Kn(et,_t){for(var ft=-1,Gt=et==null?0:et.length;++ft<Gt&&_t(et[ft],ft,et)!==!1;);return et}function af(et,_t){for(var ft=et==null?0:et.length;ft--&&_t(et[ft],ft,et)!==!1;);return et}function Du(et,_t){for(var ft=-1,Gt=et==null?0:et.length;++ft<Gt;)if(!_t(et[ft],ft,et))return!1;return!0}function Rr(et,_t){for(var ft=-1,Gt=et==null?0:et.length,fe=0,Ne=[];++ft<Gt;){var Sn=et[ft];_t(Sn,ft,et)&&(Ne[fe++]=Sn)}return Ne}function ul(et,_t){var ft=et==null?0:et.length;return!!ft&&Vt(et,_t,0)>-1}function ra(et,_t,ft){for(var Gt=-1,fe=et==null?0:et.length;++Gt<fe;)if(ft(_t,et[Gt]))return!0;return!1}function Ee(et,_t){for(var ft=-1,Gt=et==null?0:et.length,fe=Array(Gt);++ft<Gt;)fe[ft]=_t(et[ft],ft,et);return fe}function Nr(et,_t){for(var ft=-1,Gt=_t.length,fe=et.length;++ft<Gt;)et[fe+ft]=_t[ft];return et}function Zl(et,_t,ft,Gt){var fe=-1,Ne=et==null?0:et.length;for(Gt&&Ne&&(ft=et[++fe]);++fe<Ne;)ft=_t(ft,et[fe],fe,et);return ft}function Ia(et,_t,ft,Gt){var fe=et==null?0:et.length;for(Gt&&fe&&(ft=et[--fe]);fe--;)ft=_t(ft,et[fe],fe,et);return ft}function p(et,_t){for(var ft=-1,Gt=et==null?0:et.length;++ft<Gt;)if(_t(et[ft],ft,et))return!0;return!1}var S=_n("length");function x(et){return et.split("")}function H(et){return et.match(zt)||[]}function ot(et,_t,ft){var Gt;return ft(et,function(fe,Ne,Sn){if(_t(fe,Ne,Sn))return Gt=Ne,!1}),Gt}function ht(et,_t,ft,Gt){for(var fe=et.length,Ne=ft+(Gt?1:-1);Gt?Ne--:++Ne<fe;)if(_t(et[Ne],Ne,et))return Ne;return-1}function Vt(et,_t,ft){return _t===_t?vv(et,_t,ft):ht(et,Pn,ft)}function ge(et,_t,ft,Gt){for(var fe=ft-1,Ne=et.length;++fe<Ne;)if(Gt(et[fe],_t))return fe;return-1}function Pn(et){return et!==et}function qe(et,_t){var ft=et==null?0:et.length;return ft?xs(et,_t)/ft:pt}function _n(et){return function(_t){return _t==null?e:_t[et]}}function is(et){return function(_t){return et==null?e:et[_t]}}function Ir(et,_t,ft,Gt,fe){return fe(et,function(Ne,Sn,nn){ft=Gt?(Gt=!1,Ne):_t(ft,Ne,Sn,nn)}),ft}function Or(et,_t){var ft=et.length;for(et.sort(_t);ft--;)et[ft]=et[ft].value;return et}function xs(et,_t){for(var ft,Gt=-1,fe=et.length;++Gt<fe;){var Ne=_t(et[Gt]);Ne!==e&&(ft=ft===e?Ne:ft+Ne)}return ft}function Oa(et,_t){for(var ft=-1,Gt=Array(et);++ft<et;)Gt[ft]=_t(ft);return Gt}function Jl(et,_t){return Ee(_t,function(ft){return[ft,et[ft]]})}function hl(et){return et&&et.slice(0,ec(et)+1).replace(Sa,"")}function Rs(et){return function(_t){return et(_t)}}function dp(et,_t){return Ee(_t,function(ft){return et[ft]})}function Mu(et,_t){return et.has(_t)}function pp(et,_t){for(var ft=-1,Gt=et.length;++ft<Gt&&Vt(_t,et[ft],0)>-1;);return ft}function mp(et,_t){for(var ft=et.length;ft--&&Vt(_t,et[ft],0)>-1;);return ft}function ku(et,_t){for(var ft=et.length,Gt=0;ft--;)et[ft]===_t&&++Gt;return Gt}var Vu=is(al),_v=is(xa);function of(et){return"\\"+Si[et]}function qg(et,_t){return et==null?e:et[_t]}function fl(et){return rl.test(et)}function gp(et){return on.test(et)}function _p(et){for(var _t,ft=[];!(_t=et.next()).done;)ft.push(_t.value);return ft}function lf(et){var _t=-1,ft=Array(et.size);return et.forEach(function(Gt,fe){ft[++_t]=[fe,Gt]}),ft}function yp(et,_t){return function(ft){return et(_t(ft))}}function Da(et,_t){for(var ft=-1,Gt=et.length,fe=0,Ne=[];++ft<Gt;){var Sn=et[ft];(Sn===_t||Sn===T)&&(et[ft]=T,Ne[fe++]=ft)}return Ne}function cf(et){var _t=-1,ft=Array(et.size);return et.forEach(function(Gt){ft[++_t]=Gt}),ft}function yv(et){var _t=-1,ft=Array(et.size);return et.forEach(function(Gt){ft[++_t]=[Gt,Gt]}),ft}function vv(et,_t,ft){for(var Gt=ft-1,fe=et.length;++Gt<fe;)if(et[Gt]===_t)return Gt;return-1}function Tv(et,_t,ft){for(var Gt=ft+1;Gt--;)if(et[Gt]===_t)return Gt;return Gt}function tc(et){return fl(et)?Hg(et):S(et)}function On(et){return fl(et)?Gg(et):x(et)}function ec(et){for(var _t=et.length;_t--&&wr.test(et.charAt(_t)););return _t}var Fg=is(xr);function Hg(et){for(var _t=Cs.lastIndex=0;Cs.test(et);)++_t;return _t}function Gg(et){return et.match(Cs)||[]}function Kg(et){return et.match(Zs)||[]}var vp=(function et(_t){_t=_t==null?bn:nc.defaults(bn.Object(),_t,nc.pick(bn,ia));var ft=_t.Array,Gt=_t.Date,fe=_t.Error,Ne=_t.Function,Sn=_t.Math,nn=_t.Object,uf=_t.RegExp,dl=_t.String,Ns=_t.TypeError,ju=ft.prototype,Wg=Ne.prototype,ic=nn.prototype,hf=_t["__core-js_shared__"],ff=Wg.toString,Ze=ic.hasOwnProperty,$g=0,df=(function(){var l=/[^.]+$/.exec(hf&&hf.keys&&hf.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""})(),ss=ic.toString,pf=ff.call(nn),Js=bn._,sc=uf("^"+ff.call(Ze).replace(Tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rc=ol?_t.Buffer:e,Dr=_t.Symbol,pl=_t.Uint8Array,mf=rc?rc.allocUnsafe:e,aa=yp(nn.getPrototypeOf,nn),Tp=nn.create,Lu=ic.propertyIsEnumerable,Ma=ju.splice,Yg=Dr?Dr.isConcatSpreadable:e,Ai=Dr?Dr.iterator:e,ka=Dr?Dr.toStringTag:e,tr=(function(){try{var l=Eo(nn,"defineProperty");return l({},"",{}),l}catch{}})(),Qg=_t.clearTimeout!==bn.clearTimeout&&_t.clearTimeout,gf=Gt&&Gt.now!==bn.Date.now&&Gt.now,ml=_t.setTimeout!==bn.setTimeout&&_t.setTimeout,ac=Sn.ceil,Pu=Sn.floor,Uu=nn.getOwnPropertySymbols,Xg=rc?rc.isBuffer:e,Is=_t.isFinite,oc=ju.join,lc=yp(nn.keys,nn),Un=Sn.max,Jn=Sn.min,er=Gt.now,nr=_t.parseInt,Va=Sn.random,oa=ju.reverse,ir=Eo(_t,"DataView"),Os=Eo(_t,"Map"),_f=Eo(_t,"Promise"),fo=Eo(_t,"Set"),gl=Eo(_t,"WeakMap"),cc=Eo(nn,"create"),ti=gl&&new gl,Je={},ke=Li(ir),po=Li(Os),sr=Li(_f),wp=Li(fo),mo=Li(gl),zu=Dr?Dr.prototype:e,uc=zu?zu.valueOf:e,_l=zu?zu.toString:e;function j(l){if(qn(l)&&!de(l)&&!(l instanceof _e)){if(l instanceof rs)return l;if(Ze.call(l,"__wrapped__"))return $f(l)}return new rs(l)}var go=(function(){function l(){}return function(h){if(!En(h))return{};if(Tp)return Tp(h);l.prototype=h;var y=new l;return l.prototype=e,y}})();function _o(){}function rs(l,h){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=e}j.templateSettings={escape:Ji,evaluate:Xo,interpolate:Zo,variable:"",imports:{_:j}},j.prototype=_o.prototype,j.prototype.constructor=j,rs.prototype=go(_o.prototype),rs.prototype.constructor=rs;function _e(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function ja(){var l=new _e(this.__wrapped__);return l.__actions__=Ki(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Ki(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Ki(this.__views__),l}function yo(){if(this.__filtered__){var l=new _e(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function La(){var l=this.__wrapped__.value(),h=this.__dir__,y=de(l),b=h<0,N=y?l.length:0,q=Nv(0,N,this.__views__),$=q.start,J=q.end,rt=J-$,At=b?J:$-1,Ct=this.__iteratees__,Mt=Ct.length,qt=0,Jt=Jn(rt,this.__takeCount__);if(!y||!b&&N==rt&&Jt==rt)return jp(l,this.__actions__);var le=[];t:for(;rt--&&qt<Jt;){At+=h;for(var Ce=-1,ce=l[At];++Ce<Mt;){var Ve=Ct[Ce],ze=Ve.iteratee,Hr=Ve.type,Fs=ze(ce);if(Hr==Rt)ce=Fs;else if(!Fs){if(Hr==vt)continue t;break t}}le[qt++]=ce}return le}_e.prototype=go(_o.prototype),_e.prototype.constructor=_e;function Pa(l){var h=-1,y=l==null?0:l.length;for(this.clear();++h<y;){var b=l[h];this.set(b[0],b[1])}}function bp(){this.__data__=cc?cc(null):{},this.size=0}function hc(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h}function yf(l){var h=this.__data__;if(cc){var y=h[l];return y===m?e:y}return Ze.call(h,l)?h[l]:e}function yl(l){var h=this.__data__;return cc?h[l]!==e:Ze.call(h,l)}function Ei(l,h){var y=this.__data__;return this.size+=this.has(l)?0:1,y[l]=cc&&h===e?m:h,this}Pa.prototype.clear=bp,Pa.prototype.delete=hc,Pa.prototype.get=yf,Pa.prototype.has=yl,Pa.prototype.set=Ei;function rr(l){var h=-1,y=l==null?0:l.length;for(this.clear();++h<y;){var b=l[h];this.set(b[0],b[1])}}function Zg(){this.__data__=[],this.size=0}function wv(l){var h=this.__data__,y=la(h,l);if(y<0)return!1;var b=h.length-1;return y==b?h.pop():Ma.call(h,y,1),--this.size,!0}function bv(l){var h=this.__data__,y=la(h,l);return y<0?e:h[y][1]}function Sv(l){return la(this.__data__,l)>-1}function ei(l,h){var y=this.__data__,b=la(y,l);return b<0?(++this.size,y.push([l,h])):y[b][1]=h,this}rr.prototype.clear=Zg,rr.prototype.delete=wv,rr.prototype.get=bv,rr.prototype.has=Sv,rr.prototype.set=ei;function Mr(l){var h=-1,y=l==null?0:l.length;for(this.clear();++h<y;){var b=l[h];this.set(b[0],b[1])}}function Bu(){this.size=0,this.__data__={hash:new Pa,map:new(Os||rr),string:new Pa}}function qu(l){var h=ah(this,l).delete(l);return this.size-=h?1:0,h}function Sp(l){return ah(this,l).get(l)}function fc(l){return ah(this,l).has(l)}function dc(l,h){var y=ah(this,l),b=y.size;return y.set(l,h),this.size+=y.size==b?0:1,this}Mr.prototype.clear=Bu,Mr.prototype.delete=qu,Mr.prototype.get=Sp,Mr.prototype.has=fc,Mr.prototype.set=dc;function vl(l){var h=-1,y=l==null?0:l.length;for(this.__data__=new Mr;++h<y;)this.add(l[h])}function Jg(l){return this.__data__.set(l,m),this}function Av(l){return this.__data__.has(l)}vl.prototype.add=vl.prototype.push=Jg,vl.prototype.has=Av;function ar(l){var h=this.__data__=new rr(l);this.size=h.size}function Tl(){this.__data__=new rr,this.size=0}function Ap(l){var h=this.__data__,y=h.delete(l);return this.size=h.size,y}function vf(l){return this.__data__.get(l)}function t_(l){return this.__data__.has(l)}function pc(l,h){var y=this.__data__;if(y instanceof rr){var b=y.__data__;if(!Os||b.length<a-1)return b.push([l,h]),this.size=++y.size,this;y=this.__data__=new Mr(b)}return y.set(l,h),this.size=y.size,this}ar.prototype.clear=Tl,ar.prototype.delete=Ap,ar.prototype.get=vf,ar.prototype.has=t_,ar.prototype.set=pc;function Tf(l,h){var y=de(l),b=!y&&Rl(l),N=!y&&!b&&Do(l),q=!y&&!b&&!N&&Mo(l),$=y||b||N||q,J=$?Oa(l.length,dl):[],rt=J.length;for(var At in l)(h||Ze.call(l,At))&&!($&&(At=="length"||N&&(At=="offset"||At=="parent")||q&&(At=="buffer"||At=="byteLength"||At=="byteOffset")||zr(At,rt)))&&J.push(At);return J}function Fu(l){var h=l.length;return h?l[bc(0,h-1)]:e}function wf(l,h){return ph(Ki(l),Vr(h,0,l.length))}function e_(l){return ph(Ki(l))}function bf(l,h,y){(y!==e&&!zs(l[h],y)||y===e&&!(h in l))&&Ds(l,h,y)}function kr(l,h,y){var b=l[h];(!(Ze.call(l,h)&&zs(b,y))||y===e&&!(h in l))&&Ds(l,h,y)}function la(l,h){for(var y=l.length;y--;)if(zs(l[y][0],h))return y;return-1}function n_(l,h,y,b){return ca(l,function(N,q,$){h(b,N,y(N),$)}),b}function Ep(l,h){return l&&ur(h,mi(h),l)}function mc(l,h){return l&&ur(h,ms(h),l)}function Ds(l,h,y){h=="__proto__"&&tr?tr(l,h,{configurable:!0,enumerable:!0,value:y,writable:!0}):l[h]=y}function gc(l,h){for(var y=-1,b=h.length,N=ft(b),q=l==null;++y<b;)N[y]=q?e:ko(l,h[y]);return N}function Vr(l,h,y){return l===l&&(y!==e&&(l=l<=y?l:y),h!==e&&(l=l>=h?l:h)),l}function Gi(l,h,y,b,N,q){var $,J=h&w,rt=h&C,At=h&I;if(y&&($=N?y(l,b,N,q):y(l)),$!==e)return $;if(!En(l))return l;var Ct=de(l);if(Ct){if($=v_(l),!J)return Ki(l,$)}else{var Mt=xi(l),qt=Mt==he||Mt==gn;if(Do(l))return Up(l,J);if(Mt==$t||Mt==Nt||qt&&!N){if($=rt||qt?{}:Jp(l),!J)return rt?p_(l,mc($,l)):d_(l,Ep($,l))}else{if(!Xe[Mt])return N?l:{};$=T_(l,Mt,J)}}q||(q=new ar);var Jt=q.get(l);if(Jt)return Jt;q.set(l,$),Ih(l)?l.forEach(function(ce){$.add(Gi(ce,h,y,ce,l,q))}):ny(l)&&l.forEach(function(ce,Ve){$.set(Ve,Gi(ce,h,y,Ve,l,q))});var le=At?rt?Zp:zf:rt?ms:mi,Ce=Ct?e:le(l);return Kn(Ce||l,function(ce,Ve){Ce&&(Ve=ce,ce=l[Ve]),kr($,Ve,Gi(ce,h,y,Ve,l,q))}),$}function i_(l){var h=mi(l);return function(y){return vo(y,l,h)}}function vo(l,h,y){var b=y.length;if(l==null)return!b;for(l=nn(l);b--;){var N=y[b],q=h[N],$=l[N];if($===e&&!(N in l)||!q($))return!1}return!0}function Cp(l,h,y){if(typeof l!="function")throw new Ns(f);return dh(function(){l.apply(e,y)},h)}function or(l,h,y,b){var N=-1,q=ul,$=!0,J=l.length,rt=[],At=h.length;if(!J)return rt;y&&(h=Ee(h,Rs(y))),b?(q=ra,$=!1):h.length>=a&&(q=Mu,$=!1,h=new vl(h));t:for(;++N<J;){var Ct=l[N],Mt=y==null?Ct:y(Ct);if(Ct=b||Ct!==0?Ct:0,$&&Mt===Mt){for(var qt=At;qt--;)if(h[qt]===Mt)continue t;rt.push(Ct)}else q(h,Mt,b)||rt.push(Ct)}return rt}var ca=Fp(Lr),Sf=Fp(Ef,!0);function To(l,h){var y=!0;return ca(l,function(b,N,q){return y=!!h(b,N,q),y}),y}function jr(l,h,y){for(var b=-1,N=l.length;++b<N;){var q=l[b],$=h(q);if($!=null&&(J===e?$===$&&!ps($):y($,J)))var J=$,rt=q}return rt}function Hu(l,h,y,b){var N=l.length;for(y=oe(y),y<0&&(y=-y>N?0:N+y),b=b===e||b>N?N:oe(b),b<0&&(b+=N),b=y>b?0:Pm(b);y<b;)l[y++]=h;return l}function Af(l,h){var y=[];return ca(l,function(b,N,q){h(b,N,q)&&y.push(b)}),y}function oi(l,h,y,b,N){var q=-1,$=l.length;for(y||(y=em),N||(N=[]);++q<$;){var J=l[q];h>0&&y(J)?h>1?oi(J,h-1,y,b,N):Nr(N,J):b||(N[N.length]=J)}return N}var wl=Hp(),_c=Hp(!0);function Lr(l,h){return l&&wl(l,h,mi)}function Ef(l,h){return l&&_c(l,h,mi)}function Ua(l,h){return Rr(h,function(y){return Bs(l[y])})}function ua(l,h){h=js(h,l);for(var y=0,b=h.length;l!=null&&y<b;)l=l[ls(h[y++])];return y&&y==b?l:e}function xp(l,h,y){var b=h(l);return de(l)?b:Nr(b,y(l))}function Ci(l){return l==null?l===e?fn:Lt:ka&&ka in nn(l)?oh(l):im(l)}function Gu(l,h){return l>h}function Ms(l,h){return l!=null&&Ze.call(l,h)}function lr(l,h){return l!=null&&h in nn(l)}function wo(l,h,y){return l>=Jn(h,y)&&l<Un(h,y)}function Ku(l,h,y){for(var b=y?ra:ul,N=l[0].length,q=l.length,$=q,J=ft(q),rt=1/0,At=[];$--;){var Ct=l[$];$&&h&&(Ct=Ee(Ct,Rs(h))),rt=Jn(Ct.length,rt),J[$]=!y&&(h||N>=120&&Ct.length>=120)?new vl($&&Ct):e}Ct=l[0];var Mt=-1,qt=J[0];t:for(;++Mt<N&&At.length<rt;){var Jt=Ct[Mt],le=h?h(Jt):Jt;if(Jt=y||Jt!==0?Jt:0,!(qt?Mu(qt,le):b(At,le,y))){for($=q;--$;){var Ce=J[$];if(!(Ce?Mu(Ce,le):b(l[$],le,y)))continue t}qt&&qt.push(le),At.push(Jt)}}return At}function s_(l,h,y,b){return Lr(l,function(N,q,$){h(b,y(N),q,$)}),b}function cr(l,h,y){h=js(h,l),l=hh(l,h);var b=l==null?l:l[ls(wn(h))];return b==null?e:ki(b,l,y)}function as(l){return qn(l)&&Ci(l)==Nt}function Wn(l){return qn(l)&&Ci(l)==fi}function Cf(l){return qn(l)&&Ci(l)==te}function ks(l,h,y,b,N){return l===h?!0:l==null||h==null||!qn(l)&&!qn(h)?l!==l&&h!==h:ye(l,h,y,b,ks,N)}function ye(l,h,y,b,N,q){var $=de(l),J=de(h),rt=$?jt:xi(l),At=J?jt:xi(h);rt=rt==Nt?$t:rt,At=At==Nt?$t:At;var Ct=rt==$t,Mt=At==$t,qt=rt==At;if(qt&&Do(l)){if(!Do(h))return!1;$=!0,Ct=!1}if(qt&&!Ct)return q||(q=new ar),$||Mo(l)?sh(l,h,y,b,N,q):y_(l,h,rt,y,b,N,q);if(!(y&O)){var Jt=Ct&&Ze.call(l,"__wrapped__"),le=Mt&&Ze.call(h,"__wrapped__");if(Jt||le){var Ce=Jt?l.value():l,ce=le?h.value():h;return q||(q=new ar),N(Ce,ce,y,b,q)}}return qt?(q||(q=new ar),Xp(l,h,y,b,N,q)):!1}function ln(l){return qn(l)&&xi(l)==Re}function zn(l,h,y,b){var N=y.length,q=N,$=!b;if(l==null)return!q;for(l=nn(l);N--;){var J=y[N];if($&&J[2]?J[1]!==l[J[0]]:!(J[0]in l))return!1}for(;++N<q;){J=y[N];var rt=J[0],At=l[rt],Ct=J[1];if($&&J[2]){if(At===e&&!(rt in l))return!1}else{var Mt=new ar;if(b)var qt=b(At,Ct,rt,l,h,Mt);if(!(qt===e?ks(Ct,At,O|k,b,Mt):qt))return!1}}return!0}function Wu(l){if(!En(l)||w_(l))return!1;var h=Bs(l)?sc:br;return h.test(Li(l))}function yc(l){return qn(l)&&Ci(l)==Ut}function bl(l){return qn(l)&&xi(l)==ne}function xf(l){return qn(l)&&od(l.length)&&!!We[Ci(l)]}function vc(l){return typeof l=="function"?l:l==null?$i:typeof l=="object"?de(l)?Rp(l[0],l[1]):Nf(l):V(l)}function bo(l){if(!xc(l))return lc(l);var h=[];for(var y in nn(l))Ze.call(l,y)&&y!="constructor"&&h.push(y);return h}function Ev(l){if(!En(l))return Ba(l);var h=xc(l),y=[];for(var b in l)b=="constructor"&&(h||!Ze.call(l,b))||y.push(b);return y}function An(l,h){return l<h}function Rf(l,h){var y=-1,b=ds(l)?ft(l.length):[];return ca(l,function(N,q,$){b[++y]=h(N,q,$)}),b}function Nf(l){var h=Bf(l);return h.length==1&&h[0][2]?Kf(h[0][0],h[0][1]):function(y){return y===l||zn(y,l,h)}}function Rp(l,h){return ch(l)&&fa(h)?Kf(ls(l),h):function(y){var b=ko(y,l);return b===e&&b===h?zm(y,l):ks(h,b,O|k)}}function $u(l,h,y,b,N){l!==h&&wl(h,function(q,$){if(N||(N=new ar),En(q))Cv(l,h,$,y,$u,b,N);else{var J=b?b(pn(l,$),q,$+"",l,h,N):e;J===e&&(J=q),bf(l,$,J)}},ms)}function Cv(l,h,y,b,N,q,$){var J=pn(l,y),rt=pn(h,y),At=$.get(rt);if(At){bf(l,y,At);return}var Ct=q?q(J,rt,y+"",l,h,$):e,Mt=Ct===e;if(Mt){var qt=de(rt),Jt=!qt&&Do(rt),le=!qt&&!Jt&&Mo(rt);Ct=rt,qt||Jt||le?de(J)?Ct=J:Yn(J)?Ct=Ki(J):Jt?(Mt=!1,Ct=Up(rt,!0)):le?(Mt=!1,Ct=zp(rt,!0)):Ct=[]:Rh(rt)||Rl(rt)?(Ct=J,Rl(J)?Ct=ld(J):(!En(J)||Bs(J))&&(Ct=Jp(rt))):Mt=!1}Mt&&($.set(rt,Ct),N(Ct,rt,b,q,$),$.delete(rt)),bf(l,y,Ct)}function If(l,h){var y=l.length;if(y)return h+=h<0?y:0,zr(h,y)?l[h]:e}function Of(l,h,y){h.length?h=Ee(h,function(q){return de(q)?function($){return ua($,q.length===1?q[0]:q)}:q}):h=[$i];var b=-1;h=Ee(h,Rs(se()));var N=Rf(l,function(q,$,J){var rt=Ee(h,function(At){return At(q)});return{criteria:rt,index:++b,value:q}});return Or(N,function(q,$){return f_(q,$,y)})}function Np(l,h){return Vi(l,h,function(y,b){return zm(l,b)})}function Vi(l,h,y){for(var b=-1,N=h.length,q={};++b<N;){var $=h[b],J=ua(l,$);y(J,$)&&Sc(q,js($,l),J)}return q}function $n(l){return function(h){return ua(h,l)}}function Tc(l,h,y,b){var N=b?ge:Vt,q=-1,$=h.length,J=l;for(l===h&&(h=Ki(h)),y&&(J=Ee(l,Rs(y)));++q<$;)for(var rt=0,At=h[q],Ct=y?y(At):At;(rt=N(J,Ct,rt,b))>-1;)J!==l&&Ma.call(J,rt,1),Ma.call(l,rt,1);return l}function wc(l,h){for(var y=l?h.length:0,b=y-1;y--;){var N=h[y];if(y==b||N!==q){var q=N;zr(N)?Ma.call(l,N,1):Yu(l,N)}}return l}function bc(l,h){return l+Pu(Va()*(h-l+1))}function Ip(l,h,y,b){for(var N=-1,q=Un(ac((h-l)/(y||1)),0),$=ft(q);q--;)$[b?q:++N]=l,l+=y;return $}function Pr(l,h){var y="";if(!l||h<1||h>Tt)return y;do h%2&&(y+=l),h=Pu(h/2),h&&(l+=l);while(h);return y}function ve(l,h){return Wf(sm(l,h,$i),l+"")}function Op(l){return Fu(Bc(l))}function Dp(l,h){var y=Bc(l);return ph(y,Vr(h,0,y.length))}function Sc(l,h,y,b){if(!En(l))return l;h=js(h,l);for(var N=-1,q=h.length,$=q-1,J=l;J!=null&&++N<q;){var rt=ls(h[N]),At=y;if(rt==="__proto__"||rt==="constructor"||rt==="prototype")return l;if(N!=$){var Ct=J[rt];At=b?b(Ct,rt,J):e,At===e&&(At=En(Ct)?Ct:zr(h[N+1])?[]:{})}kr(J,rt,At),J=J[rt]}return l}var Mp=ti?function(l,h){return ti.set(l,h),l}:$i,r_=tr?function(l,h){return tr(l,"toString",{configurable:!0,enumerable:!1,value:Fc(h),writable:!0})}:$i;function a_(l){return ph(Bc(l))}function Vs(l,h,y){var b=-1,N=l.length;h<0&&(h=-h>N?0:N+h),y=y>N?N:y,y<0&&(y+=N),N=h>y?0:y-h>>>0,h>>>=0;for(var q=ft(N);++b<N;)q[b]=l[b+h];return q}function o_(l,h){var y;return ca(l,function(b,N,q){return y=h(b,N,q),!y}),!!y}function Ac(l,h,y){var b=0,N=l==null?b:l.length;if(typeof h=="number"&&h===h&&N<=St){for(;b<N;){var q=b+N>>>1,$=l[q];$!==null&&!ps($)&&(y?$<=h:$<h)?b=q+1:N=q}return N}return Df(l,h,$i,y)}function Df(l,h,y,b){var N=0,q=l==null?0:l.length;if(q===0)return 0;h=y(h);for(var $=h!==h,J=h===null,rt=ps(h),At=h===e;N<q;){var Ct=Pu((N+q)/2),Mt=y(l[Ct]),qt=Mt!==e,Jt=Mt===null,le=Mt===Mt,Ce=ps(Mt);if($)var ce=b||le;else At?ce=le&&(b||qt):J?ce=le&&qt&&(b||!Jt):rt?ce=le&&qt&&!Jt&&(b||!Ce):Jt||Ce?ce=!1:ce=b?Mt<=h:Mt<h;ce?N=Ct+1:q=Ct}return Jn(q,at)}function l_(l,h){for(var y=-1,b=l.length,N=0,q=[];++y<b;){var $=l[y],J=h?h($):$;if(!y||!zs(J,rt)){var rt=J;q[N++]=$===0?0:$}}return q}function kp(l){return typeof l=="number"?l:ps(l)?pt:+l}function os(l){if(typeof l=="string")return l;if(de(l))return Ee(l,os)+"";if(ps(l))return _l?_l.call(l):"";var h=l+"";return h=="0"&&1/l==-nt?"-0":h}function za(l,h,y){var b=-1,N=ul,q=l.length,$=!0,J=[],rt=J;if(y)$=!1,N=ra;else if(q>=a){var At=h?null:g_(l);if(At)return cf(At);$=!1,N=Mu,rt=new vl}else rt=h?[]:J;t:for(;++b<q;){var Ct=l[b],Mt=h?h(Ct):Ct;if(Ct=y||Ct!==0?Ct:0,$&&Mt===Mt){for(var qt=rt.length;qt--;)if(rt[qt]===Mt)continue t;h&&rt.push(Mt),J.push(Ct)}else N(rt,Mt,y)||(rt!==J&&rt.push(Mt),J.push(Ct))}return J}function Yu(l,h){return h=js(h,l),l=hh(l,h),l==null||delete l[ls(wn(h))]}function Vp(l,h,y,b){return Sc(l,h,y(ua(l,h)),b)}function Qu(l,h,y,b){for(var N=l.length,q=b?N:-1;(b?q--:++q<N)&&h(l[q],q,l););return y?Vs(l,b?0:q,b?q+1:N):Vs(l,b?q+1:0,b?N:q)}function jp(l,h){var y=l;return y instanceof _e&&(y=y.value()),Zl(h,function(b,N){return N.func.apply(N.thisArg,Nr([b],N.args))},y)}function Mf(l,h,y){var b=l.length;if(b<2)return b?za(l[0]):[];for(var N=-1,q=ft(b);++N<b;)for(var $=l[N],J=-1;++J<b;)J!=N&&(q[N]=or(q[N]||$,l[J],h,y));return za(oi(q,1),h,y)}function Lp(l,h,y){for(var b=-1,N=l.length,q=h.length,$={};++b<N;){var J=b<q?h[b]:e;y($,l[b],J)}return $}function Pp(l){return Yn(l)?l:[]}function kf(l){return typeof l=="function"?l:$i}function js(l,h){return de(l)?l:ch(l,h)?[l]:rm(tn(l))}var c_=ve;function Ur(l,h,y){var b=l.length;return y=y===e?b:y,!h&&y>=b?l:Vs(l,h,y)}var Xu=Qg||function(l){return bn.clearTimeout(l)};function Up(l,h){if(h)return l.slice();var y=l.length,b=mf?mf(y):new l.constructor(y);return l.copy(b),b}function Zu(l){var h=new l.constructor(l.byteLength);return new pl(h).set(new pl(l)),h}function xv(l,h){var y=h?Zu(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.byteLength)}function u_(l){var h=new l.constructor(l.source,Be.exec(l));return h.lastIndex=l.lastIndex,h}function h_(l){return uc?nn(uc.call(l)):{}}function zp(l,h){var y=h?Zu(l.buffer):l.buffer;return new l.constructor(y,l.byteOffset,l.length)}function Bp(l,h){if(l!==h){var y=l!==e,b=l===null,N=l===l,q=ps(l),$=h!==e,J=h===null,rt=h===h,At=ps(h);if(!J&&!At&&!q&&l>h||q&&$&&rt&&!J&&!At||b&&$&&rt||!y&&rt||!N)return 1;if(!b&&!q&&!At&&l<h||At&&y&&N&&!b&&!q||J&&y&&N||!$&&N||!rt)return-1}return 0}function f_(l,h,y){for(var b=-1,N=l.criteria,q=h.criteria,$=N.length,J=y.length;++b<$;){var rt=Bp(N[b],q[b]);if(rt){if(b>=J)return rt;var At=y[b];return rt*(At=="desc"?-1:1)}}return l.index-h.index}function Vf(l,h,y,b){for(var N=-1,q=l.length,$=y.length,J=-1,rt=h.length,At=Un(q-$,0),Ct=ft(rt+At),Mt=!b;++J<rt;)Ct[J]=h[J];for(;++N<$;)(Mt||N<q)&&(Ct[y[N]]=l[N]);for(;At--;)Ct[J++]=l[N++];return Ct}function qp(l,h,y,b){for(var N=-1,q=l.length,$=-1,J=y.length,rt=-1,At=h.length,Ct=Un(q-J,0),Mt=ft(Ct+At),qt=!b;++N<Ct;)Mt[N]=l[N];for(var Jt=N;++rt<At;)Mt[Jt+rt]=h[rt];for(;++$<J;)(qt||N<q)&&(Mt[Jt+y[$]]=l[N++]);return Mt}function Ki(l,h){var y=-1,b=l.length;for(h||(h=ft(b));++y<b;)h[y]=l[y];return h}function ur(l,h,y,b){var N=!y;y||(y={});for(var q=-1,$=h.length;++q<$;){var J=h[q],rt=b?b(y[J],l[J],J,y,l):e;rt===e&&(rt=l[J]),N?Ds(y,J,rt):kr(y,J,rt)}return y}function d_(l,h){return ur(l,qf(l),h)}function p_(l,h){return ur(l,lh(l),h)}function jf(l,h){return function(y,b){var N=de(y)?rf:n_,q=h?h():{};return N(y,l,se(b,2),q)}}function So(l){return ve(function(h,y){var b=-1,N=y.length,q=N>1?y[N-1]:e,$=N>2?y[2]:e;for(q=l.length>3&&typeof q=="function"?(N--,q):e,$&&ji(y[0],y[1],$)&&(q=N<3?e:q,N=1),h=nn(h);++b<N;){var J=y[b];J&&l(h,J,b,q)}return h})}function Fp(l,h){return function(y,b){if(y==null)return y;if(!ds(y))return l(y,b);for(var N=y.length,q=h?N:-1,$=nn(y);(h?q--:++q<N)&&b($[q],q,$)!==!1;);return y}}function Hp(l){return function(h,y,b){for(var N=-1,q=nn(h),$=b(h),J=$.length;J--;){var rt=$[l?J:++N];if(y(q[rt],rt,q)===!1)break}return h}}function Gp(l,h,y){var b=h&D,N=Ju(l);function q(){var $=this&&this!==bn&&this instanceof q?N:l;return $.apply(b?y:this,arguments)}return q}function Kp(l){return function(h){h=tn(h);var y=fl(h)?On(h):e,b=y?y[0]:h.charAt(0),N=y?Ur(y,1).join(""):h.slice(1);return b[l]()+N}}function Sl(l){return function(h){return Zl(Ny(qc(h).replace(Ql,"")),l,"")}}function Ju(l){return function(){var h=arguments;switch(h.length){case 0:return new l;case 1:return new l(h[0]);case 2:return new l(h[0],h[1]);case 3:return new l(h[0],h[1],h[2]);case 4:return new l(h[0],h[1],h[2],h[3]);case 5:return new l(h[0],h[1],h[2],h[3],h[4]);case 6:return new l(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new l(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var y=go(l.prototype),b=l.apply(y,h);return En(b)?b:y}}function Rv(l,h,y){var b=Ju(l);function N(){for(var q=arguments.length,$=ft(q),J=q,rt=Bn(N);J--;)$[J]=arguments[J];var At=q<3&&$[0]!==rt&&$[q-1]!==rt?[]:Da($,rt);if(q-=At.length,q<y)return Uf(l,h,Cc,N.placeholder,e,$,At,e,e,y-q);var Ct=this&&this!==bn&&this instanceof N?b:l;return ki(Ct,this,$)}return N}function Wp(l){return function(h,y,b){var N=nn(h);if(!ds(h)){var q=se(y,3);h=mi(h),y=function(J){return q(N[J],J,N)}}var $=l(h,y,b);return $>-1?N[q?h[$]:$]:e}}function Ec(l){return ha(function(h){var y=h.length,b=y,N=rs.prototype.thru;for(l&&h.reverse();b--;){var q=h[b];if(typeof q!="function")throw new Ns(f);if(N&&!$&&Dn(q)=="wrapper")var $=new rs([],!0)}for(b=$?b:y;++b<y;){q=h[b];var J=Dn(q),rt=J=="wrapper"?rh(q):e;rt&&uh(rt[0])&&rt[1]==(R|Y|K|E)&&!rt[4].length&&rt[9]==1?$=$[Dn(rt[0])].apply($,rt[3]):$=q.length==1&&uh(q)?$[J]():$.thru(q)}return function(){var At=arguments,Ct=At[0];if($&&At.length==1&&de(Ct))return $.plant(Ct).value();for(var Mt=0,qt=y?h[Mt].apply(this,At):Ct;++Mt<y;)qt=h[Mt].call(this,qt);return qt}})}function Cc(l,h,y,b,N,q,$,J,rt,At){var Ct=h&R,Mt=h&D,qt=h&z,Jt=h&(Y|it),le=h&M,Ce=qt?e:Ju(l);function ce(){for(var Ve=arguments.length,ze=ft(Ve),Hr=Ve;Hr--;)ze[Hr]=arguments[Hr];if(Jt)var Fs=Bn(ce),Gr=ku(ze,Fs);if(b&&(ze=Vf(ze,b,N,Jt)),q&&(ze=qp(ze,q,$,Jt)),Ve-=Gr,Jt&&Ve<At){var ci=Da(ze,Fs);return Uf(l,h,Cc,ce.placeholder,y,ze,ci,J,rt,At-Ve)}var Qa=Mt?y:this,Il=qt?Qa[l]:l;return Ve=ze.length,J?ze=fh(ze,J):le&&Ve>1&&ze.reverse(),Ct&&rt<Ve&&(ze.length=rt),this&&this!==bn&&this instanceof ce&&(Il=Ce||Ju(Il)),Il.apply(Qa,ze)}return ce}function th(l,h){return function(y,b){return s_(y,l,h(b),{})}}function eh(l,h){return function(y,b){var N;if(y===e&&b===e)return h;if(y!==e&&(N=y),b!==e){if(N===e)return b;typeof y=="string"||typeof b=="string"?(y=os(y),b=os(b)):(y=kp(y),b=kp(b)),N=l(y,b)}return N}}function Lf(l){return ha(function(h){return h=Ee(h,Rs(se())),ve(function(y){var b=this;return l(h,function(N){return ki(N,b,y)})})})}function Ao(l,h){h=h===e?" ":os(h);var y=h.length;if(y<2)return y?Pr(h,l):h;var b=Pr(h,ac(l/tc(h)));return fl(h)?Ur(On(b),0,l).join(""):b.slice(0,l)}function m_(l,h,y,b){var N=h&D,q=Ju(l);function $(){for(var J=-1,rt=arguments.length,At=-1,Ct=b.length,Mt=ft(Ct+rt),qt=this&&this!==bn&&this instanceof $?q:l;++At<Ct;)Mt[At]=b[At];for(;rt--;)Mt[At++]=arguments[++J];return ki(qt,N?y:this,Mt)}return $}function Pf(l){return function(h,y,b){return b&&typeof b!="number"&&ji(h,y,b)&&(y=b=e),h=$a(h),y===e?(y=h,h=0):y=$a(y),b=b===e?h<y?1:-1:$a(b),Ip(h,y,b,l)}}function nh(l){return function(h,y){return typeof h=="string"&&typeof y=="string"||(h=qs(h),y=qs(y)),l(h,y)}}function Uf(l,h,y,b,N,q,$,J,rt,At){var Ct=h&Y,Mt=Ct?$:e,qt=Ct?e:$,Jt=Ct?q:e,le=Ct?e:q;h|=Ct?K:W,h&=~(Ct?W:K),h&X||(h&=-4);var Ce=[l,h,N,Jt,Mt,le,qt,J,rt,At],ce=y.apply(e,Ce);return uh(l)&&S_(ce,Ce),ce.placeholder=b,Rc(ce,l,h)}function ih(l){var h=Sn[l];return function(y,b){if(y=qs(y),b=b==null?0:Jn(oe(b),292),b&&Is(y)){var N=(tn(y)+"e").split("e"),q=h(N[0]+"e"+(+N[1]+b));return N=(tn(q)+"e").split("e"),+(N[0]+"e"+(+N[1]-b))}return h(y)}}var g_=fo&&1/cf(new fo([,-0]))[1]==nt?function(l){return new fo(l)}:o;function $p(l){return function(h){var y=xi(h);return y==Re?lf(h):y==ne?yv(h):Jl(h,l(h))}}function Wi(l,h,y,b,N,q,$,J){var rt=h&z;if(!rt&&typeof l!="function")throw new Ns(f);var At=b?b.length:0;if(At||(h&=-97,b=N=e),$=$===e?$:Un(oe($),0),J=J===e?J:oe(J),At-=N?N.length:0,h&W){var Ct=b,Mt=N;b=N=e}var qt=rt?e:rh(l),Jt=[l,h,y,b,N,Ct,Mt,q,$,J];if(qt&&b_(Jt,qt),l=Jt[0],h=Jt[1],y=Jt[2],b=Jt[3],N=Jt[4],J=Jt[9]=Jt[9]===e?rt?0:l.length:Un(Jt[9]-At,0),!J&&h&(Y|it)&&(h&=-25),!h||h==D)var le=Gp(l,h,y);else h==Y||h==it?le=Rv(l,h,J):(h==K||h==(D|K))&&!N.length?le=m_(l,h,y,b):le=Cc.apply(e,Jt);var Ce=qt?Mp:S_;return Rc(Ce(le,Jt),l,h)}function Yp(l,h,y,b){return l===e||zs(l,ic[y])&&!Ze.call(b,y)?h:l}function Qp(l,h,y,b,N,q){return En(l)&&En(h)&&(q.set(h,l),$u(l,h,e,Qp,q),q.delete(h)),l}function __(l){return Rh(l)?e:l}function sh(l,h,y,b,N,q){var $=y&O,J=l.length,rt=h.length;if(J!=rt&&!($&&rt>J))return!1;var At=q.get(l),Ct=q.get(h);if(At&&Ct)return At==h&&Ct==l;var Mt=-1,qt=!0,Jt=y&k?new vl:e;for(q.set(l,h),q.set(h,l);++Mt<J;){var le=l[Mt],Ce=h[Mt];if(b)var ce=$?b(Ce,le,Mt,h,l,q):b(le,Ce,Mt,l,h,q);if(ce!==e){if(ce)continue;qt=!1;break}if(Jt){if(!p(h,function(Ve,ze){if(!Mu(Jt,ze)&&(le===Ve||N(le,Ve,y,b,q)))return Jt.push(ze)})){qt=!1;break}}else if(!(le===Ce||N(le,Ce,y,b,q))){qt=!1;break}}return q.delete(l),q.delete(h),qt}function y_(l,h,y,b,N,q,$){switch(y){case Di:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case fi:return!(l.byteLength!=h.byteLength||!q(new pl(l),new pl(h)));case kt:case te:case gt:return zs(+l,+h);case Ye:return l.name==h.name&&l.message==h.message;case Ut:case ae:return l==h+"";case Re:var J=lf;case ne:var rt=b&O;if(J||(J=cf),l.size!=h.size&&!rt)return!1;var At=$.get(l);if(At)return At==h;b|=k,$.set(l,h);var Ct=sh(J(l),J(h),b,N,q,$);return $.delete(l),Ct;case en:if(uc)return uc.call(l)==uc.call(h)}return!1}function Xp(l,h,y,b,N,q){var $=y&O,J=zf(l),rt=J.length,At=zf(h),Ct=At.length;if(rt!=Ct&&!$)return!1;for(var Mt=rt;Mt--;){var qt=J[Mt];if(!($?qt in h:Ze.call(h,qt)))return!1}var Jt=q.get(l),le=q.get(h);if(Jt&&le)return Jt==h&&le==l;var Ce=!0;q.set(l,h),q.set(h,l);for(var ce=$;++Mt<rt;){qt=J[Mt];var Ve=l[qt],ze=h[qt];if(b)var Hr=$?b(ze,Ve,qt,h,l,q):b(Ve,ze,qt,l,h,q);if(!(Hr===e?Ve===ze||N(Ve,ze,y,b,q):Hr)){Ce=!1;break}ce||(ce=qt=="constructor")}if(Ce&&!ce){var Fs=l.constructor,Gr=h.constructor;Fs!=Gr&&"constructor"in l&&"constructor"in h&&!(typeof Fs=="function"&&Fs instanceof Fs&&typeof Gr=="function"&&Gr instanceof Gr)&&(Ce=!1)}return q.delete(l),q.delete(h),Ce}function ha(l){return Wf(sm(l,e,Tn),l+"")}function zf(l){return xp(l,mi,qf)}function Zp(l){return xp(l,ms,lh)}var rh=ti?function(l){return ti.get(l)}:o;function Dn(l){for(var h=l.name+"",y=Je[h],b=Ze.call(Je,h)?y.length:0;b--;){var N=y[b],q=N.func;if(q==null||q==l)return N.name}return h}function Bn(l){var h=Ze.call(j,"placeholder")?j:l;return h.placeholder}function se(){var l=j.iteratee||jh;return l=l===jh?vc:l,arguments.length?l(arguments[0],arguments[1]):l}function ah(l,h){var y=l.__data__;return Gf(h)?y[typeof h=="string"?"string":"hash"]:y.map}function Bf(l){for(var h=mi(l),y=h.length;y--;){var b=h[y],N=l[b];h[y]=[b,N,fa(N)]}return h}function Eo(l,h){var y=qg(l,h);return Wu(y)?y:e}function oh(l){var h=Ze.call(l,ka),y=l[ka];try{l[ka]=e;var b=!0}catch{}var N=ss.call(l);return b&&(h?l[ka]=y:delete l[ka]),N}var qf=Uu?function(l){return l==null?[]:(l=nn(l),Rr(Uu(l),function(h){return Lu.call(l,h)}))}:bt,lh=Uu?function(l){for(var h=[];l;)Nr(h,qf(l)),l=aa(l);return h}:bt,xi=Ci;(ir&&xi(new ir(new ArrayBuffer(1)))!=Di||Os&&xi(new Os)!=Re||_f&&xi(_f.resolve())!=Pt||fo&&xi(new fo)!=ne||gl&&xi(new gl)!=Rn)&&(xi=function(l){var h=Ci(l),y=h==$t?l.constructor:e,b=y?Li(y):"";if(b)switch(b){case ke:return Di;case po:return Re;case sr:return Pt;case wp:return ne;case mo:return Rn}return h});function Nv(l,h,y){for(var b=-1,N=y.length;++b<N;){var q=y[b],$=q.size;switch(q.type){case"drop":l+=$;break;case"dropRight":h-=$;break;case"take":h=Jn(h,l+$);break;case"takeRight":l=Un(l,h-$);break}}return{start:l,end:h}}function Ff(l){var h=l.match(Xt);return h?h[1].split(Bt):[]}function Hf(l,h,y){h=js(h,l);for(var b=-1,N=h.length,q=!1;++b<N;){var $=ls(h[b]);if(!(q=l!=null&&y(l,$)))break;l=l[$]}return q||++b!=N?q:(N=l==null?0:l.length,!!N&&od(N)&&zr($,N)&&(de(l)||Rl(l)))}function v_(l){var h=l.length,y=new l.constructor(h);return h&&typeof l[0]=="string"&&Ze.call(l,"index")&&(y.index=l.index,y.input=l.input),y}function Jp(l){return typeof l.constructor=="function"&&!xc(l)?go(aa(l)):{}}function T_(l,h,y){var b=l.constructor;switch(h){case fi:return Zu(l);case kt:case te:return new b(+l);case Di:return xv(l,y);case bs:case ao:case Ss:case wa:case Bi:case Nn:case Ln:case dn:case oo:return zp(l,y);case Re:return new b;case gt:case ae:return new b(l);case Ut:return u_(l);case ne:return new b;case en:return h_(l)}}function tm(l,h){var y=h.length;if(!y)return l;var b=y-1;return h[b]=(y>1?"& ":"")+h[b],h=h.join(y>2?", ":" "),l.replace(It,`{
/* [wrapped with `+h+`] */
`)}function em(l){return de(l)||Rl(l)||!!(Yg&&l&&l[Yg])}function zr(l,h){var y=typeof l;return h=h??Tt,!!h&&(y=="number"||y!="symbol"&&Hl.test(l))&&l>-1&&l%1==0&&l<h}function ji(l,h,y){if(!En(y))return!1;var b=typeof h;return(b=="number"?ds(y)&&zr(h,y.length):b=="string"&&h in y)?zs(y[h],l):!1}function ch(l,h){if(de(l))return!1;var y=typeof l;return y=="number"||y=="symbol"||y=="boolean"||l==null||ps(l)?!0:ba.test(l)||!Qs.test(l)||h!=null&&l in nn(h)}function Gf(l){var h=typeof l;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?l!=="__proto__":l===null}function uh(l){var h=Dn(l),y=j[h];if(typeof y!="function"||!(h in _e.prototype))return!1;if(l===y)return!0;var b=rh(y);return!!b&&l===b[0]}function w_(l){return!!df&&df in l}var nm=hf?Bs:ut;function xc(l){var h=l&&l.constructor,y=typeof h=="function"&&h.prototype||ic;return l===y}function fa(l){return l===l&&!En(l)}function Kf(l,h){return function(y){return y==null?!1:y[l]===h&&(h!==e||l in nn(y))}}function Iv(l){var h=Ah(l,function(b){return y.size===_&&y.clear(),b}),y=h.cache;return h}function b_(l,h){var y=l[1],b=h[1],N=y|b,q=N<(D|z|R),$=b==R&&y==Y||b==R&&y==E&&l[7].length<=h[8]||b==(R|E)&&h[7].length<=h[8]&&y==Y;if(!(q||$))return l;b&D&&(l[2]=h[2],N|=y&D?0:X);var J=h[3];if(J){var rt=l[3];l[3]=rt?Vf(rt,J,h[4]):J,l[4]=rt?Da(l[3],T):h[4]}return J=h[5],J&&(rt=l[5],l[5]=rt?qp(rt,J,h[6]):J,l[6]=rt?Da(l[5],T):h[6]),J=h[7],J&&(l[7]=J),b&R&&(l[8]=l[8]==null?h[8]:Jn(l[8],h[8])),l[9]==null&&(l[9]=h[9]),l[0]=h[0],l[1]=N,l}function Ba(l){var h=[];if(l!=null)for(var y in nn(l))h.push(y);return h}function im(l){return ss.call(l)}function sm(l,h,y){return h=Un(h===e?l.length-1:h,0),function(){for(var b=arguments,N=-1,q=Un(b.length-h,0),$=ft(q);++N<q;)$[N]=b[h+N];N=-1;for(var J=ft(h+1);++N<h;)J[N]=b[N];return J[h]=y($),ki(l,this,J)}}function hh(l,h){return h.length<2?l:ua(l,Vs(h,0,-1))}function fh(l,h){for(var y=l.length,b=Jn(h.length,y),N=Ki(l);b--;){var q=h[b];l[b]=zr(q,y)?N[q]:e}return l}function pn(l,h){if(!(h==="constructor"&&typeof l[h]=="function")&&h!="__proto__")return l[h]}var S_=qa(Mp),dh=ml||function(l,h){return bn.setTimeout(l,h)},Wf=qa(r_);function Rc(l,h,y){var b=h+"";return Wf(l,tm(b,A_(Ff(b),y)))}function qa(l){var h=0,y=0;return function(){var b=er(),N=U-(b-y);if(y=b,N>0){if(++h>=F)return arguments[0]}else h=0;return l.apply(e,arguments)}}function ph(l,h){var y=-1,b=l.length,N=b-1;for(h=h===e?b:h;++y<h;){var q=bc(y,N),$=l[q];l[q]=l[y],l[y]=$}return l.length=h,l}var rm=Iv(function(l){var h=[];return l.charCodeAt(0)===46&&h.push(""),l.replace(gu,function(y,b,N,q){h.push(N?q.replace(me,"$1"):b||y)}),h});function ls(l){if(typeof l=="string"||ps(l))return l;var h=l+"";return h=="0"&&1/l==-nt?"-0":h}function Li(l){if(l!=null){try{return ff.call(l)}catch{}try{return l+""}catch{}}return""}function A_(l,h){return Kn(Dt,function(y){var b="_."+y[0];h&y[1]&&!ul(l,b)&&l.push(b)}),l.sort()}function $f(l){if(l instanceof _e)return l.clone();var h=new rs(l.__wrapped__,l.__chain__);return h.__actions__=Ki(l.__actions__),h.__index__=l.__index__,h.__values__=l.__values__,h}function E_(l,h,y){(y?ji(l,h,y):h===e)?h=1:h=Un(oe(h),0);var b=l==null?0:l.length;if(!b||h<1)return[];for(var N=0,q=0,$=ft(ac(b/h));N<b;)$[q++]=Vs(l,N,N+=h);return $}function am(l){for(var h=-1,y=l==null?0:l.length,b=0,N=[];++h<y;){var q=l[h];q&&(N[b++]=q)}return N}function om(){var l=arguments.length;if(!l)return[];for(var h=ft(l-1),y=arguments[0],b=l;b--;)h[b-1]=arguments[b];return Nr(de(y)?Ki(y):[y],oi(h,1))}var Yf=ve(function(l,h){return Yn(l)?or(l,oi(h,1,Yn,!0)):[]}),C_=ve(function(l,h){var y=wn(h);return Yn(y)&&(y=e),Yn(l)?or(l,oi(h,1,Yn,!0),se(y,2)):[]}),Fa=ve(function(l,h){var y=wn(h);return Yn(y)&&(y=e),Yn(l)?or(l,oi(h,1,Yn,!0),e,y):[]});function ni(l,h,y){var b=l==null?0:l.length;return b?(h=y||h===e?1:oe(h),Vs(l,h<0?0:h,b)):[]}function lm(l,h,y){var b=l==null?0:l.length;return b?(h=y||h===e?1:oe(h),h=b-h,Vs(l,0,h<0?0:h)):[]}function x_(l,h){return l&&l.length?Qu(l,se(h,3),!0,!0):[]}function pi(l,h){return l&&l.length?Qu(l,se(h,3),!0):[]}function Ov(l,h,y,b){var N=l==null?0:l.length;return N?(y&&typeof y!="number"&&ji(l,h,y)&&(y=0,b=N),Hu(l,h,y,b)):[]}function cm(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var N=y==null?0:oe(y);return N<0&&(N=Un(b+N,0)),ht(l,se(h,3),N)}function um(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var N=b-1;return y!==e&&(N=oe(y),N=y<0?Un(b+N,0):Jn(N,b-1)),ht(l,se(h,3),N,!0)}function Tn(l){var h=l==null?0:l.length;return h?oi(l,1):[]}function cs(l){var h=l==null?0:l.length;return h?oi(l,nt):[]}function Ha(l,h){var y=l==null?0:l.length;return y?(h=h===e?1:oe(h),oi(l,h)):[]}function R_(l){for(var h=-1,y=l==null?0:l.length,b={};++h<y;){var N=l[h];b[N[0]]=N[1]}return b}function hm(l){return l&&l.length?l[0]:e}function N_(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var N=y==null?0:oe(y);return N<0&&(N=Un(b+N,0)),Vt(l,h,N)}function Dv(l){var h=l==null?0:l.length;return h?Vs(l,0,-1):[]}var Qf=ve(function(l){var h=Ee(l,Pp);return h.length&&h[0]===l[0]?Ku(h):[]}),us=ve(function(l){var h=wn(l),y=Ee(l,Pp);return h===wn(y)?h=e:y.pop(),y.length&&y[0]===l[0]?Ku(y,se(h,2)):[]}),Br=ve(function(l){var h=wn(l),y=Ee(l,Pp);return h=typeof h=="function"?h:e,h&&y.pop(),y.length&&y[0]===l[0]?Ku(y,e,h):[]});function I_(l,h){return l==null?"":oc.call(l,h)}function wn(l){var h=l==null?0:l.length;return h?l[h-1]:e}function O_(l,h,y){var b=l==null?0:l.length;if(!b)return-1;var N=b;return y!==e&&(N=oe(y),N=N<0?Un(b+N,0):Jn(N,b-1)),h===h?Tv(l,h,N):ht(l,Pn,N,!0)}function Ga(l,h){return l&&l.length?If(l,oe(h)):e}var Al=ve(da);function da(l,h){return l&&l.length&&h&&h.length?Tc(l,h):l}function fm(l,h,y){return l&&l.length&&h&&h.length?Tc(l,h,se(y,2)):l}function dm(l,h,y){return l&&l.length&&h&&h.length?Tc(l,h,e,y):l}var qr=ha(function(l,h){var y=l==null?0:l.length,b=gc(l,h);return wc(l,Ee(h,function(N){return zr(N,y)?+N:N}).sort(Bp)),b});function D_(l,h){var y=[];if(!(l&&l.length))return y;var b=-1,N=[],q=l.length;for(h=se(h,3);++b<q;){var $=l[b];h($,b,l)&&(y.push($),N.push(b))}return wc(l,N),y}function Co(l){return l==null?l:oa.call(l)}function mh(l,h,y){var b=l==null?0:l.length;return b?(y&&typeof y!="number"&&ji(l,h,y)?(h=0,y=b):(h=h==null?0:oe(h),y=y===e?b:oe(y)),Vs(l,h,y)):[]}function gh(l,h){return Ac(l,h)}function Nc(l,h,y){return Df(l,h,se(y,2))}function M_(l,h){var y=l==null?0:l.length;if(y){var b=Ac(l,h);if(b<y&&zs(l[b],h))return b}return-1}function k_(l,h){return Ac(l,h,!0)}function _h(l,h,y){return Df(l,h,se(y,2),!0)}function V_(l,h){var y=l==null?0:l.length;if(y){var b=Ac(l,h,!0)-1;if(zs(l[b],h))return b}return-1}function Xf(l){return l&&l.length?l_(l):[]}function j_(l,h){return l&&l.length?l_(l,se(h,2)):[]}function Mv(l){var h=l==null?0:l.length;return h?Vs(l,1,h):[]}function kv(l,h,y){return l&&l.length?(h=y||h===e?1:oe(h),Vs(l,0,h<0?0:h)):[]}function $e(l,h,y){var b=l==null?0:l.length;return b?(h=y||h===e?1:oe(h),h=b-h,Vs(l,h<0?0:h,b)):[]}function mn(l,h){return l&&l.length?Qu(l,se(h,3),!1,!0):[]}function Ie(l,h){return l&&l.length?Qu(l,se(h,3)):[]}var De=ve(function(l){return za(oi(l,1,Yn,!0))}),sn=ve(function(l){var h=wn(l);return Yn(h)&&(h=e),za(oi(l,1,Yn,!0),se(h,2))}),Ls=ve(function(l){var h=wn(l);return h=typeof h=="function"?h:e,za(oi(l,1,Yn,!0),e,h)});function xo(l){return l&&l.length?za(l):[]}function Ic(l,h){return l&&l.length?za(l,se(h,2)):[]}function pm(l,h){return h=typeof h=="function"?h:e,l&&l.length?za(l,e,h):[]}function Fr(l){if(!(l&&l.length))return[];var h=0;return l=Rr(l,function(y){if(Yn(y))return h=Un(y.length,h),!0}),Oa(h,function(y){return Ee(l,_n(y))})}function Mn(l,h){if(!(l&&l.length))return[];var y=Fr(l);return h==null?y:Ee(y,function(b){return ki(h,e,b)})}var Ro=ve(function(l,h){return Yn(l)?or(l,h):[]}),El=ve(function(l){return Mf(Rr(l,Yn))}),mm=ve(function(l){var h=wn(l);return Yn(h)&&(h=e),Mf(Rr(l,Yn),se(h,2))}),Ps=ve(function(l){var h=wn(l);return h=typeof h=="function"?h:e,Mf(Rr(l,Yn),e,h)}),Oc=ve(Fr);function yh(l,h){return Lp(l||[],h||[],kr)}function hs(l,h){return Lp(l||[],h||[],Sc)}var gm=ve(function(l){var h=l.length,y=h>1?l[h-1]:e;return y=typeof y=="function"?(l.pop(),y):e,Mn(l,y)});function vh(l){var h=j(l);return h.__chain__=!0,h}function L_(l,h){return h(l),l}function Cl(l,h){return h(l)}var Zf=ha(function(l){var h=l.length,y=h?l[0]:0,b=this.__wrapped__,N=function(q){return gc(q,l)};return h>1||this.__actions__.length||!(b instanceof _e)||!zr(y)?this.thru(N):(b=b.slice(y,+y+(h?1:0)),b.__actions__.push({func:Cl,args:[N],thisArg:e}),new rs(b,this.__chain__).thru(function(q){return h&&!q.length&&q.push(e),q}))});function No(){return vh(this)}function li(){return new rs(this.value(),this.__chain__)}function Io(){this.__values__===e&&(this.__values__=oy(this.value()));var l=this.__index__>=this.__values__.length,h=l?e:this.__values__[this.__index__++];return{done:l,value:h}}function Dc(){return this}function Ka(l){for(var h,y=this;y instanceof _o;){var b=$f(y);b.__index__=0,b.__values__=e,h?N.__wrapped__=b:h=b;var N=b;y=y.__wrapped__}return N.__wrapped__=l,h}function _m(){var l=this.__wrapped__;if(l instanceof _e){var h=l;return this.__actions__.length&&(h=new _e(this)),h=h.reverse(),h.__actions__.push({func:Cl,args:[Co],thisArg:e}),new rs(h,this.__chain__)}return this.thru(Co)}function ym(){return jp(this.__wrapped__,this.__actions__)}var P_=jf(function(l,h,y){Ze.call(l,y)?++l[y]:Ds(l,y,1)});function Th(l,h,y){var b=de(l)?Du:To;return y&&ji(l,h,y)&&(h=e),b(l,se(h,3))}function vm(l,h){var y=de(l)?Rr:Af;return y(l,se(h,3))}var Us=Wp(cm),U_=Wp(um);function fs(l,h){return oi(wh(l,h),1)}function z_(l,h){return oi(wh(l,h),nt)}function B_(l,h,y){return y=y===e?1:oe(y),oi(wh(l,h),y)}function q_(l,h){var y=de(l)?Kn:ca;return y(l,se(h,3))}function Wa(l,h){var y=de(l)?af:Sf;return y(l,se(h,3))}var Jf=jf(function(l,h,y){Ze.call(l,y)?l[y].push(h):Ds(l,y,[h])});function Tm(l,h,y,b){l=ds(l)?l:Bc(l),y=y&&!b?oe(y):0;var N=l.length;return y<0&&(y=Un(N+y,0)),Oh(l)?y<=N&&l.indexOf(h,y)>-1:!!N&&Vt(l,h,y)>-1}var Mc=ve(function(l,h,y){var b=-1,N=typeof h=="function",q=ds(l)?ft(l.length):[];return ca(l,function($){q[++b]=N?ki(h,$,y):cr($,h,y)}),q}),F_=jf(function(l,h,y){Ds(l,y,h)});function wh(l,h){var y=de(l)?Ee:Rf;return y(l,se(h,3))}function H_(l,h,y,b){return l==null?[]:(de(h)||(h=h==null?[]:[h]),y=b?e:y,de(y)||(y=y==null?[]:[y]),Of(l,h,y))}var G_=jf(function(l,h,y){l[y?0:1].push(h)},function(){return[[],[]]});function td(l,h,y){var b=de(l)?Zl:Ir,N=arguments.length<3;return b(l,se(h,4),y,N,ca)}function wm(l,h,y){var b=de(l)?Ia:Ir,N=arguments.length<3;return b(l,se(h,4),y,N,Sf)}function Vv(l,h){var y=de(l)?Rr:Af;return y(l,id(se(h,3)))}function jv(l){var h=de(l)?Fu:Op;return h(l)}function Lv(l,h,y){(y?ji(l,h,y):h===e)?h=1:h=oe(h);var b=de(l)?wf:Dp;return b(l,h)}function K_(l){var h=de(l)?e_:a_;return h(l)}function W_(l){if(l==null)return 0;if(ds(l))return Oh(l)?tc(l):l.length;var h=xi(l);return h==Re||h==ne?l.size:bo(l).length}function kc(l,h,y){var b=de(l)?p:o_;return y&&ji(l,h,y)&&(h=e),b(l,se(h,3))}var ed=ve(function(l,h){if(l==null)return[];var y=h.length;return y>1&&ji(l,h[0],h[1])?h=[]:y>2&&ji(h[0],h[1],h[2])&&(h=[h[0]]),Of(l,oi(h,1),[])}),bh=gf||function(){return bn.Date.now()};function $_(l,h){if(typeof h!="function")throw new Ns(f);return l=oe(l),function(){if(--l<1)return h.apply(this,arguments)}}function bm(l,h,y){return h=y?e:h,h=l&&h==null?l.length:h,Wi(l,R,e,e,e,e,h)}function Sm(l,h){var y;if(typeof h!="function")throw new Ns(f);return l=oe(l),function(){return--l>0&&(y=h.apply(this,arguments)),l<=1&&(h=e),y}}var nd=ve(function(l,h,y){var b=D;if(y.length){var N=Da(y,Bn(nd));b|=K}return Wi(l,b,h,y,N)}),Am=ve(function(l,h,y){var b=D|z;if(y.length){var N=Da(y,Bn(Am));b|=K}return Wi(h,b,l,y,N)});function Sh(l,h,y){h=y?e:h;var b=Wi(l,Y,e,e,e,e,e,h);return b.placeholder=Sh.placeholder,b}function Em(l,h,y){h=y?e:h;var b=Wi(l,it,e,e,e,e,e,h);return b.placeholder=Em.placeholder,b}function Cm(l,h,y){var b,N,q,$,J,rt,At=0,Ct=!1,Mt=!1,qt=!0;if(typeof l!="function")throw new Ns(f);h=qs(h)||0,En(y)&&(Ct=!!y.leading,Mt="maxWait"in y,q=Mt?Un(qs(y.maxWait)||0,h):q,qt="trailing"in y?!!y.trailing:qt);function Jt(ci){var Qa=b,Il=N;return b=N=e,At=ci,$=l.apply(Il,Qa),$}function le(ci){return At=ci,J=dh(Ve,h),Ct?Jt(ci):$}function Ce(ci){var Qa=ci-rt,Il=ci-At,nb=h-Qa;return Mt?Jn(nb,q-Il):nb}function ce(ci){var Qa=ci-rt,Il=ci-At;return rt===e||Qa>=h||Qa<0||Mt&&Il>=q}function Ve(){var ci=bh();if(ce(ci))return ze(ci);J=dh(Ve,Ce(ci))}function ze(ci){return J=e,qt&&b?Jt(ci):(b=N=e,$)}function Hr(){J!==e&&Xu(J),At=0,b=rt=N=J=e}function Fs(){return J===e?$:ze(bh())}function Gr(){var ci=bh(),Qa=ce(ci);if(b=arguments,N=this,rt=ci,Qa){if(J===e)return le(rt);if(Mt)return Xu(J),J=dh(Ve,h),Jt(rt)}return J===e&&(J=dh(Ve,h)),$}return Gr.cancel=Hr,Gr.flush=Fs,Gr}var rn=ve(function(l,h){return Cp(l,1,h)}),xm=ve(function(l,h,y){return Cp(l,qs(h)||0,y)});function Pv(l){return Wi(l,M)}function Ah(l,h){if(typeof l!="function"||h!=null&&typeof h!="function")throw new Ns(f);var y=function(){var b=arguments,N=h?h.apply(this,b):b[0],q=y.cache;if(q.has(N))return q.get(N);var $=l.apply(this,b);return y.cache=q.set(N,$)||q,$};return y.cache=new(Ah.Cache||Mr),y}Ah.Cache=Mr;function id(l){if(typeof l!="function")throw new Ns(f);return function(){var h=arguments;switch(h.length){case 0:return!l.call(this);case 1:return!l.call(this,h[0]);case 2:return!l.call(this,h[0],h[1]);case 3:return!l.call(this,h[0],h[1],h[2])}return!l.apply(this,h)}}function Uv(l){return Sm(2,l)}var zv=c_(function(l,h){h=h.length==1&&de(h[0])?Ee(h[0],Rs(se())):Ee(oi(h,1),Rs(se()));var y=h.length;return ve(function(b){for(var N=-1,q=Jn(b.length,y);++N<q;)b[N]=h[N].call(this,b[N]);return ki(l,this,b)})}),Vc=ve(function(l,h){var y=Da(h,Bn(Vc));return Wi(l,K,e,h,y)}),xl=ve(function(l,h){var y=Da(h,Bn(xl));return Wi(l,W,e,h,y)}),Rm=ha(function(l,h){return Wi(l,E,e,e,e,h)});function sd(l,h){if(typeof l!="function")throw new Ns(f);return h=h===e?h:oe(h),ve(l,h)}function Nm(l,h){if(typeof l!="function")throw new Ns(f);return h=h==null?0:Un(oe(h),0),ve(function(y){var b=y[h],N=Ur(y,0,h);return b&&Nr(N,b),ki(l,this,N)})}function Oo(l,h,y){var b=!0,N=!0;if(typeof l!="function")throw new Ns(f);return En(y)&&(b="leading"in y?!!y.leading:b,N="trailing"in y?!!y.trailing:N),Cm(l,h,{leading:b,maxWait:h,trailing:N})}function pa(l){return bm(l,1)}function Eh(l,h){return Vc(kf(h),l)}function Bv(){if(!arguments.length)return[];var l=arguments[0];return de(l)?l:[l]}function Y_(l){return Gi(l,I)}function Q_(l,h){return h=typeof h=="function"?h:e,Gi(l,I,h)}function X_(l){return Gi(l,w|I)}function Z_(l,h){return h=typeof h=="function"?h:e,Gi(l,w|I,h)}function qv(l,h){return h==null||vo(l,h,mi(h))}function zs(l,h){return l===h||l!==l&&h!==h}var J_=nh(Gu),ty=nh(function(l,h){return l>=h}),Rl=as((function(){return arguments})())?as:function(l){return qn(l)&&Ze.call(l,"callee")&&!Lu.call(l,"callee")},de=ft.isArray,Im=Nu?Rs(Nu):Wn;function ds(l){return l!=null&&od(l.length)&&!Bs(l)}function Yn(l){return qn(l)&&ds(l)}function Ch(l){return l===!0||l===!1||qn(l)&&Ci(l)==kt}var Do=Xg||ut,ey=Iu?Rs(Iu):Cf;function Oe(l){return qn(l)&&l.nodeType===1&&!Rh(l)}function Om(l){if(l==null)return!0;if(ds(l)&&(de(l)||typeof l=="string"||typeof l.splice=="function"||Do(l)||Mo(l)||Rl(l)))return!l.length;var h=xi(l);if(h==Re||h==ne)return!l.size;if(xc(l))return!bo(l).length;for(var y in l)if(Ze.call(l,y))return!1;return!0}function rd(l,h){return ks(l,h)}function Dm(l,h,y){y=typeof y=="function"?y:e;var b=y?y(l,h):e;return b===e?ks(l,h,e,y):!!b}function ad(l){if(!qn(l))return!1;var h=Ci(l);return h==Ye||h==Ae||typeof l.message=="string"&&typeof l.name=="string"&&!Rh(l)}function Mm(l){return typeof l=="number"&&Is(l)}function Bs(l){if(!En(l))return!1;var h=Ci(l);return h==he||h==gn||h==Ft||h==Ot}function xh(l){return typeof l=="number"&&l==oe(l)}function od(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Tt}function En(l){var h=typeof l;return l!=null&&(h=="object"||h=="function")}function qn(l){return l!=null&&typeof l=="object"}var ny=ho?Rs(ho):ln;function iy(l,h){return l===h||zn(l,h,Bf(h))}function sy(l,h,y){return y=typeof y=="function"?y:e,zn(l,h,Bf(h),y)}function cn(l){return Vm(l)&&l!=+l}function km(l){if(nm(l))throw new fe(c);return Wu(l)}function Ri(l){return l===null}function Fv(l){return l==null}function Vm(l){return typeof l=="number"||qn(l)&&Ci(l)==gt}function Rh(l){if(!qn(l)||Ci(l)!=$t)return!1;var h=aa(l);if(h===null)return!0;var y=Ze.call(h,"constructor")&&h.constructor;return typeof y=="function"&&y instanceof y&&ff.call(y)==pf}var Nh=Xl?Rs(Xl):yc;function jm(l){return xh(l)&&l>=-Tt&&l<=Tt}var Ih=Ou?Rs(Ou):bl;function Oh(l){return typeof l=="string"||!de(l)&&qn(l)&&Ci(l)==ae}function ps(l){return typeof l=="symbol"||qn(l)&&Ci(l)==en}var Mo=cl?Rs(cl):xf;function Lm(l){return l===e}function Hv(l){return qn(l)&&xi(l)==Rn}function ry(l){return qn(l)&&Ci(l)==Qr}var Gv=nh(An),ay=nh(function(l,h){return l<=h});function oy(l){if(!l)return[];if(ds(l))return Oh(l)?On(l):Ki(l);if(Ai&&l[Ai])return _p(l[Ai]());var h=xi(l),y=h==Re?lf:h==ne?cf:Bc;return y(l)}function $a(l){if(!l)return l===0?l:0;if(l=qs(l),l===nt||l===-nt){var h=l<0?-1:1;return h*dt}return l===l?l:0}function oe(l){var h=$a(l),y=h%1;return h===h?y?h-y:h:0}function Pm(l){return l?Vr(oe(l),0,G):0}function qs(l){if(typeof l=="number")return l;if(ps(l))return pt;if(En(l)){var h=typeof l.valueOf=="function"?l.valueOf():l;l=En(h)?h+"":h}if(typeof l!="string")return l===0?l:+l;l=hl(l);var y=ts.test(l);return y||es.test(l)?sa(l.slice(2),y?2:8):bi.test(l)?pt:+l}function ld(l){return ur(l,ms(l))}function Kv(l){return l?Vr(oe(l),-Tt,Tt):l===0?l:0}function tn(l){return l==null?"":os(l)}var ly=So(function(l,h){if(xc(h)||ds(h)){ur(h,mi(h),l);return}for(var y in h)Ze.call(h,y)&&kr(l,y,h[y])}),cd=So(function(l,h){ur(h,ms(h),l)}),jc=So(function(l,h,y,b){ur(h,ms(h),l,b)}),Wv=So(function(l,h,y,b){ur(h,mi(h),l,b)}),hr=ha(gc);function Um(l,h){var y=go(l);return h==null?y:Ep(y,h)}var cy=ve(function(l,h){l=nn(l);var y=-1,b=h.length,N=b>2?h[2]:e;for(N&&ji(h[0],h[1],N)&&(b=1);++y<b;)for(var q=h[y],$=ms(q),J=-1,rt=$.length;++J<rt;){var At=$[J],Ct=l[At];(Ct===e||zs(Ct,ic[At])&&!Ze.call(l,At))&&(l[At]=q[At])}return l}),uy=ve(function(l){return l.push(e,Qp),ki(Pc,e,l)});function hy(l,h){return ot(l,se(h,3),Lr)}function Dh(l,h){return ot(l,se(h,3),Ef)}function fr(l,h){return l==null?l:wl(l,se(h,3),ms)}function fy(l,h){return l==null?l:_c(l,se(h,3),ms)}function ud(l,h){return l&&Lr(l,se(h,3))}function Ya(l,h){return l&&Ef(l,se(h,3))}function $v(l){return l==null?[]:Ua(l,mi(l))}function Yv(l){return l==null?[]:Ua(l,ms(l))}function ko(l,h,y){var b=l==null?e:ua(l,h);return b===e?y:b}function dy(l,h){return l!=null&&Hf(l,h,Ms)}function zm(l,h){return l!=null&&Hf(l,h,lr)}var Qv=th(function(l,h,y){h!=null&&typeof h.toString!="function"&&(h=ss.call(h)),l[h]=y},Fc($i)),Xv=th(function(l,h,y){h!=null&&typeof h.toString!="function"&&(h=ss.call(h)),Ze.call(l,h)?l[h].push(y):l[h]=[y]},se),Zv=ve(cr);function mi(l){return ds(l)?Tf(l):bo(l)}function ms(l){return ds(l)?Tf(l,!0):Ev(l)}function Jv(l,h){var y={};return h=se(h,3),Lr(l,function(b,N,q){Ds(y,h(b,N,q),b)}),y}function py(l,h){var y={};return h=se(h,3),Lr(l,function(b,N,q){Ds(y,N,h(b,N,q))}),y}var Lc=So(function(l,h,y){$u(l,h,y)}),Pc=So(function(l,h,y,b){$u(l,h,y,b)}),my=ha(function(l,h){var y={};if(l==null)return y;var b=!1;h=Ee(h,function(q){return q=js(q,l),b||(b=q.length>1),q}),ur(l,Zp(l),y),b&&(y=Gi(y,w|C|I,__));for(var N=h.length;N--;)Yu(y,h[N]);return y});function t1(l,h){return zc(l,id(se(h)))}var Uc=ha(function(l,h){return l==null?{}:Np(l,h)});function zc(l,h){if(l==null)return{};var y=Ee(Zp(l),function(b){return[b]});return h=se(h),Vi(l,y,function(b,N){return h(b,N[0])})}function gy(l,h,y){h=js(h,l);var b=-1,N=h.length;for(N||(N=1,l=e);++b<N;){var q=l==null?e:l[ls(h[b])];q===e&&(b=N,q=y),l=Bs(q)?q.call(l):q}return l}function hd(l,h,y){return l==null?l:Sc(l,h,y)}function Bm(l,h,y,b){return b=typeof b=="function"?b:e,l==null?l:Sc(l,h,y,b)}var fd=$p(mi),Mh=$p(ms);function _y(l,h,y){var b=de(l),N=b||Do(l)||Mo(l);if(h=se(h,4),y==null){var q=l&&l.constructor;N?y=b?new q:[]:En(l)?y=Bs(q)?go(aa(l)):{}:y={}}return(N?Kn:Lr)(l,function($,J,rt){return h(y,$,J,rt)}),y}function yy(l,h){return l==null?!0:Yu(l,h)}function e1(l,h,y){return l==null?l:Vp(l,h,kf(y))}function vy(l,h,y,b){return b=typeof b=="function"?b:e,l==null?l:Vp(l,h,kf(y),b)}function Bc(l){return l==null?[]:dp(l,mi(l))}function qm(l){return l==null?[]:dp(l,ms(l))}function n1(l,h,y){return y===e&&(y=h,h=e),y!==e&&(y=qs(y),y=y===y?y:0),h!==e&&(h=qs(h),h=h===h?h:0),Vr(qs(l),h,y)}function dd(l,h,y){return h=$a(h),y===e?(y=h,h=0):y=$a(y),l=qs(l),wo(l,h,y)}function pd(l,h,y){if(y&&typeof y!="boolean"&&ji(l,h,y)&&(h=y=e),y===e&&(typeof h=="boolean"?(y=h,h=e):typeof l=="boolean"&&(y=l,l=e)),l===e&&h===e?(l=0,h=1):(l=$a(l),h===e?(h=l,l=0):h=$a(h)),l>h){var b=l;l=h,h=b}if(y||l%1||h%1){var N=Va();return Jn(l+N*(h-l+Ra("1e-"+((N+"").length-1))),h)}return bc(l,h)}var md=Sl(function(l,h,y){return h=h.toLowerCase(),l+(y?Ty(h):h)});function Ty(l){return Nl(tn(l).toLowerCase())}function qc(l){return l=tn(l),l&&l.replace(Zr,Vu).replace(co,"")}function i1(l,h,y){l=tn(l),h=os(h);var b=l.length;y=y===e?b:Vr(oe(y),0,b);var N=y;return y-=h.length,y>=0&&l.slice(y,N)==h}function wy(l){return l=tn(l),l&&qi.test(l)?l.replace(In,_v):l}function by(l){return l=tn(l),l&&Jo.test(l)?l.replace(Tr,"\\$&"):l}var Sy=Sl(function(l,h,y){return l+(y?"-":"")+h.toLowerCase()}),Ay=Sl(function(l,h,y){return l+(y?" ":"")+h.toLowerCase()}),Fm=Kp("toLowerCase");function Ey(l,h,y){l=tn(l),h=oe(h);var b=h?tc(l):0;if(!h||b>=h)return l;var N=(h-b)/2;return Ao(Pu(N),y)+l+Ao(ac(N),y)}function Cy(l,h,y){l=tn(l),h=oe(h);var b=h?tc(l):0;return h&&b<h?l+Ao(h-b,y):l}function gd(l,h,y){l=tn(l),h=oe(h);var b=h?tc(l):0;return h&&b<h?Ao(h-b,y)+l:l}function s1(l,h,y){return y||h==null?h=0:h&&(h=+h),nr(tn(l).replace(Sa,""),h||0)}function r1(l,h,y){return(y?ji(l,h,y):h===e)?h=1:h=oe(h),Pr(tn(l),h)}function Hm(){var l=arguments,h=tn(l[0]);return l.length<3?h:h.replace(l[1],l[2])}var Gm=Sl(function(l,h,y){return l+(y?"_":"")+h.toLowerCase()});function _d(l,h,y){return y&&typeof y!="number"&&ji(l,h,y)&&(h=y=e),y=y===e?G:y>>>0,y?(l=tn(l),l&&(typeof h=="string"||h!=null&&!Nh(h))&&(h=os(h),!h&&fl(l))?Ur(On(l),0,y):l.split(h,y)):[]}var Km=Sl(function(l,h,y){return l+(y?" ":"")+Nl(h)});function xy(l,h,y){return l=tn(l),y=y==null?0:Vr(oe(y),0,l.length),h=os(h),l.slice(y,y+h.length)==h}function Wm(l,h,y){var b=j.templateSettings;y&&ji(l,h,y)&&(h=e),l=tn(l),h=jc({},h,b,Yp);var N=jc({},h.imports,b.imports,Yp),q=mi(N),$=dp(N,q),J,rt,At=0,Ct=h.interpolate||Fi,Mt="__p += '",qt=uf((h.escape||Fi).source+"|"+Ct.source+"|"+(Ct===Zo?an:Fi).source+"|"+(h.evaluate||Fi).source+"|$","g"),Jt="//# sourceURL="+(Ze.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xu+"]")+`
`;l.replace(qt,function(ce,Ve,ze,Hr,Fs,Gr){return ze||(ze=Hr),Mt+=l.slice(At,Gr).replace(As,of),Ve&&(J=!0,Mt+=`' +
__e(`+Ve+`) +
'`),Fs&&(rt=!0,Mt+=`';
`+Fs+`;
__p += '`),ze&&(Mt+=`' +
((__t = (`+ze+`)) == null ? '' : __t) +
'`),At=Gr+ce.length,ce}),Mt+=`';
`;var le=Ze.call(h,"variable")&&h.variable;if(!le)Mt=`with (obj) {
`+Mt+`
}
`;else if(Yt.test(le))throw new fe(d);Mt=(rt?Mt.replace(lo,""):Mt).replace(Fl,"$1").replace($s,"$1;"),Mt="function("+(le||"obj")+`) {
`+(le?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(rt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Mt+`return __p
}`;var Ce=$m(function(){return Ne(q,Jt+"return "+Mt).apply(e,$)});if(Ce.source=Mt,ad(Ce))throw Ce;return Ce}function Vo(l){return tn(l).toLowerCase()}function jo(l){return tn(l).toUpperCase()}function Lo(l,h,y){if(l=tn(l),l&&(y||h===e))return hl(l);if(!l||!(h=os(h)))return l;var b=On(l),N=On(h),q=pp(b,N),$=mp(b,N)+1;return Ur(b,q,$).join("")}function kh(l,h,y){if(l=tn(l),l&&(y||h===e))return l.slice(0,ec(l)+1);if(!l||!(h=os(h)))return l;var b=On(l),N=mp(b,On(h))+1;return Ur(b,0,N).join("")}function Vh(l,h,y){if(l=tn(l),l&&(y||h===e))return l.replace(Sa,"");if(!l||!(h=os(h)))return l;var b=On(l),N=pp(b,On(h));return Ur(b,N).join("")}function Po(l,h){var y=B,b=P;if(En(h)){var N="separator"in h?h.separator:N;y="length"in h?oe(h.length):y,b="omission"in h?os(h.omission):b}l=tn(l);var q=l.length;if(fl(l)){var $=On(l);q=$.length}if(y>=q)return l;var J=y-tc(b);if(J<1)return b;var rt=$?Ur($,0,J).join(""):l.slice(0,J);if(N===e)return rt+b;if($&&(J+=rt.length-J),Nh(N)){if(l.slice(J).search(N)){var At,Ct=rt;for(N.global||(N=uf(N.source,tn(Be.exec(N))+"g")),N.lastIndex=0;At=N.exec(Ct);)var Mt=At.index;rt=rt.slice(0,Mt===e?J:Mt)}}else if(l.indexOf(os(N),J)!=J){var qt=rt.lastIndexOf(N);qt>-1&&(rt=rt.slice(0,qt))}return rt+b}function a1(l){return l=tn(l),l&&Ys.test(l)?l.replace(Xr,Fg):l}var Ry=Sl(function(l,h,y){return l+(y?" ":"")+h.toUpperCase()}),Nl=Kp("toUpperCase");function Ny(l,h,y){return l=tn(l),h=y?e:h,h===e?gp(l)?Kg(l):H(l):l.match(h)||[]}var $m=ve(function(l,h){try{return ki(l,e,h)}catch(y){return ad(y)?y:new fe(y)}}),yd=ha(function(l,h){return Kn(h,function(y){y=ls(y),Ds(l,y,nd(l[y],l))}),l});function Iy(l){var h=l==null?0:l.length,y=se();return l=h?Ee(l,function(b){if(typeof b[1]!="function")throw new Ns(f);return[y(b[0]),b[1]]}):[],ve(function(b){for(var N=-1;++N<h;){var q=l[N];if(ki(q[0],this,b))return ki(q[1],this,b)}})}function o1(l){return i_(Gi(l,w))}function Fc(l){return function(){return l}}function vd(l,h){return l==null||l!==l?h:l}var Oy=Ec(),Hc=Ec(!0);function $i(l){return l}function jh(l){return vc(typeof l=="function"?l:Gi(l,w))}function Td(l){return Nf(Gi(l,w))}function Dy(l,h){return Rp(l,Gi(h,w))}var l1=ve(function(l,h){return function(y){return cr(y,l,h)}}),wd=ve(function(l,h){return function(y){return cr(l,y,h)}});function n(l,h,y){var b=mi(h),N=Ua(h,b);y==null&&!(En(h)&&(N.length||!b.length))&&(y=h,h=l,l=this,N=Ua(h,mi(h)));var q=!(En(y)&&"chain"in y)||!!y.chain,$=Bs(l);return Kn(N,function(J){var rt=h[J];l[J]=rt,$&&(l.prototype[J]=function(){var At=this.__chain__;if(q||At){var Ct=l(this.__wrapped__),Mt=Ct.__actions__=Ki(this.__actions__);return Mt.push({func:rt,args:arguments,thisArg:l}),Ct.__chain__=At,Ct}return rt.apply(l,Nr([this.value()],arguments))})}),l}function r(){return bn._===this&&(bn._=Js),this}function o(){}function u(l){return l=oe(l),ve(function(h){return If(h,l)})}var g=Lf(Ee),v=Lf(Du),A=Lf(p);function V(l){return ch(l)?_n(ls(l)):$n(l)}function Q(l){return function(h){return l==null?e:ua(l,h)}}var ct=Pf(),yt=Pf(!0);function bt(){return[]}function ut(){return!1}function mt(){return{}}function Qt(){return""}function re(){return!0}function un(l,h){if(l=oe(l),l<1||l>Tt)return[];var y=G,b=Jn(l,G);h=se(h),l-=G;for(var N=Oa(b,h);++y<l;)h(y);return N}function st(l){return de(l)?Ee(l,ls):ps(l)?[l]:Ki(rm(tn(l)))}function tt(l){var h=++$g;return tn(l)+h}var lt=eh(function(l,h){return l+h},0),wt=ih("ceil"),ee=eh(function(l,h){return l/h},1),Fe=ih("floor");function Zt(l){return l&&l.length?jr(l,$i,Gu):e}function be(l,h){return l&&l.length?jr(l,se(h,2),Gu):e}function Me(l){return qe(l,$i)}function He(l,h){return qe(l,se(h,2))}function Uo(l){return l&&l.length?jr(l,$i,An):e}function c1(l,h){return l&&l.length?jr(l,se(h,2),An):e}var nx=eh(function(l,h){return l*h},1),ix=ih("round"),sx=eh(function(l,h){return l-h},0);function rx(l){return l&&l.length?xs(l,$i):0}function ax(l,h){return l&&l.length?xs(l,se(h,2)):0}return j.after=$_,j.ary=bm,j.assign=ly,j.assignIn=cd,j.assignInWith=jc,j.assignWith=Wv,j.at=hr,j.before=Sm,j.bind=nd,j.bindAll=yd,j.bindKey=Am,j.castArray=Bv,j.chain=vh,j.chunk=E_,j.compact=am,j.concat=om,j.cond=Iy,j.conforms=o1,j.constant=Fc,j.countBy=P_,j.create=Um,j.curry=Sh,j.curryRight=Em,j.debounce=Cm,j.defaults=cy,j.defaultsDeep=uy,j.defer=rn,j.delay=xm,j.difference=Yf,j.differenceBy=C_,j.differenceWith=Fa,j.drop=ni,j.dropRight=lm,j.dropRightWhile=x_,j.dropWhile=pi,j.fill=Ov,j.filter=vm,j.flatMap=fs,j.flatMapDeep=z_,j.flatMapDepth=B_,j.flatten=Tn,j.flattenDeep=cs,j.flattenDepth=Ha,j.flip=Pv,j.flow=Oy,j.flowRight=Hc,j.fromPairs=R_,j.functions=$v,j.functionsIn=Yv,j.groupBy=Jf,j.initial=Dv,j.intersection=Qf,j.intersectionBy=us,j.intersectionWith=Br,j.invert=Qv,j.invertBy=Xv,j.invokeMap=Mc,j.iteratee=jh,j.keyBy=F_,j.keys=mi,j.keysIn=ms,j.map=wh,j.mapKeys=Jv,j.mapValues=py,j.matches=Td,j.matchesProperty=Dy,j.memoize=Ah,j.merge=Lc,j.mergeWith=Pc,j.method=l1,j.methodOf=wd,j.mixin=n,j.negate=id,j.nthArg=u,j.omit=my,j.omitBy=t1,j.once=Uv,j.orderBy=H_,j.over=g,j.overArgs=zv,j.overEvery=v,j.overSome=A,j.partial=Vc,j.partialRight=xl,j.partition=G_,j.pick=Uc,j.pickBy=zc,j.property=V,j.propertyOf=Q,j.pull=Al,j.pullAll=da,j.pullAllBy=fm,j.pullAllWith=dm,j.pullAt=qr,j.range=ct,j.rangeRight=yt,j.rearg=Rm,j.reject=Vv,j.remove=D_,j.rest=sd,j.reverse=Co,j.sampleSize=Lv,j.set=hd,j.setWith=Bm,j.shuffle=K_,j.slice=mh,j.sortBy=ed,j.sortedUniq=Xf,j.sortedUniqBy=j_,j.split=_d,j.spread=Nm,j.tail=Mv,j.take=kv,j.takeRight=$e,j.takeRightWhile=mn,j.takeWhile=Ie,j.tap=L_,j.throttle=Oo,j.thru=Cl,j.toArray=oy,j.toPairs=fd,j.toPairsIn=Mh,j.toPath=st,j.toPlainObject=ld,j.transform=_y,j.unary=pa,j.union=De,j.unionBy=sn,j.unionWith=Ls,j.uniq=xo,j.uniqBy=Ic,j.uniqWith=pm,j.unset=yy,j.unzip=Fr,j.unzipWith=Mn,j.update=e1,j.updateWith=vy,j.values=Bc,j.valuesIn=qm,j.without=Ro,j.words=Ny,j.wrap=Eh,j.xor=El,j.xorBy=mm,j.xorWith=Ps,j.zip=Oc,j.zipObject=yh,j.zipObjectDeep=hs,j.zipWith=gm,j.entries=fd,j.entriesIn=Mh,j.extend=cd,j.extendWith=jc,n(j,j),j.add=lt,j.attempt=$m,j.camelCase=md,j.capitalize=Ty,j.ceil=wt,j.clamp=n1,j.clone=Y_,j.cloneDeep=X_,j.cloneDeepWith=Z_,j.cloneWith=Q_,j.conformsTo=qv,j.deburr=qc,j.defaultTo=vd,j.divide=ee,j.endsWith=i1,j.eq=zs,j.escape=wy,j.escapeRegExp=by,j.every=Th,j.find=Us,j.findIndex=cm,j.findKey=hy,j.findLast=U_,j.findLastIndex=um,j.findLastKey=Dh,j.floor=Fe,j.forEach=q_,j.forEachRight=Wa,j.forIn=fr,j.forInRight=fy,j.forOwn=ud,j.forOwnRight=Ya,j.get=ko,j.gt=J_,j.gte=ty,j.has=dy,j.hasIn=zm,j.head=hm,j.identity=$i,j.includes=Tm,j.indexOf=N_,j.inRange=dd,j.invoke=Zv,j.isArguments=Rl,j.isArray=de,j.isArrayBuffer=Im,j.isArrayLike=ds,j.isArrayLikeObject=Yn,j.isBoolean=Ch,j.isBuffer=Do,j.isDate=ey,j.isElement=Oe,j.isEmpty=Om,j.isEqual=rd,j.isEqualWith=Dm,j.isError=ad,j.isFinite=Mm,j.isFunction=Bs,j.isInteger=xh,j.isLength=od,j.isMap=ny,j.isMatch=iy,j.isMatchWith=sy,j.isNaN=cn,j.isNative=km,j.isNil=Fv,j.isNull=Ri,j.isNumber=Vm,j.isObject=En,j.isObjectLike=qn,j.isPlainObject=Rh,j.isRegExp=Nh,j.isSafeInteger=jm,j.isSet=Ih,j.isString=Oh,j.isSymbol=ps,j.isTypedArray=Mo,j.isUndefined=Lm,j.isWeakMap=Hv,j.isWeakSet=ry,j.join=I_,j.kebabCase=Sy,j.last=wn,j.lastIndexOf=O_,j.lowerCase=Ay,j.lowerFirst=Fm,j.lt=Gv,j.lte=ay,j.max=Zt,j.maxBy=be,j.mean=Me,j.meanBy=He,j.min=Uo,j.minBy=c1,j.stubArray=bt,j.stubFalse=ut,j.stubObject=mt,j.stubString=Qt,j.stubTrue=re,j.multiply=nx,j.nth=Ga,j.noConflict=r,j.noop=o,j.now=bh,j.pad=Ey,j.padEnd=Cy,j.padStart=gd,j.parseInt=s1,j.random=pd,j.reduce=td,j.reduceRight=wm,j.repeat=r1,j.replace=Hm,j.result=gy,j.round=ix,j.runInContext=et,j.sample=jv,j.size=W_,j.snakeCase=Gm,j.some=kc,j.sortedIndex=gh,j.sortedIndexBy=Nc,j.sortedIndexOf=M_,j.sortedLastIndex=k_,j.sortedLastIndexBy=_h,j.sortedLastIndexOf=V_,j.startCase=Km,j.startsWith=xy,j.subtract=sx,j.sum=rx,j.sumBy=ax,j.template=Wm,j.times=un,j.toFinite=$a,j.toInteger=oe,j.toLength=Pm,j.toLower=Vo,j.toNumber=qs,j.toSafeInteger=Kv,j.toString=tn,j.toUpper=jo,j.trim=Lo,j.trimEnd=kh,j.trimStart=Vh,j.truncate=Po,j.unescape=a1,j.uniqueId=tt,j.upperCase=Ry,j.upperFirst=Nl,j.each=q_,j.eachRight=Wa,j.first=hm,n(j,(function(){var l={};return Lr(j,function(h,y){Ze.call(j.prototype,y)||(l[y]=h)}),l})(),{chain:!1}),j.VERSION=i,Kn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){j[l].placeholder=j}),Kn(["drop","take"],function(l,h){_e.prototype[l]=function(y){y=y===e?1:Un(oe(y),0);var b=this.__filtered__&&!h?new _e(this):this.clone();return b.__filtered__?b.__takeCount__=Jn(y,b.__takeCount__):b.__views__.push({size:Jn(y,G),type:l+(b.__dir__<0?"Right":"")}),b},_e.prototype[l+"Right"]=function(y){return this.reverse()[l](y).reverse()}}),Kn(["filter","map","takeWhile"],function(l,h){var y=h+1,b=y==vt||y==Z;_e.prototype[l]=function(N){var q=this.clone();return q.__iteratees__.push({iteratee:se(N,3),type:y}),q.__filtered__=q.__filtered__||b,q}}),Kn(["head","last"],function(l,h){var y="take"+(h?"Right":"");_e.prototype[l]=function(){return this[y](1).value()[0]}}),Kn(["initial","tail"],function(l,h){var y="drop"+(h?"":"Right");_e.prototype[l]=function(){return this.__filtered__?new _e(this):this[y](1)}}),_e.prototype.compact=function(){return this.filter($i)},_e.prototype.find=function(l){return this.filter(l).head()},_e.prototype.findLast=function(l){return this.reverse().find(l)},_e.prototype.invokeMap=ve(function(l,h){return typeof l=="function"?new _e(this):this.map(function(y){return cr(y,l,h)})}),_e.prototype.reject=function(l){return this.filter(id(se(l)))},_e.prototype.slice=function(l,h){l=oe(l);var y=this;return y.__filtered__&&(l>0||h<0)?new _e(y):(l<0?y=y.takeRight(-l):l&&(y=y.drop(l)),h!==e&&(h=oe(h),y=h<0?y.dropRight(-h):y.take(h-l)),y)},_e.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},_e.prototype.toArray=function(){return this.take(G)},Lr(_e.prototype,function(l,h){var y=/^(?:filter|find|map|reject)|While$/.test(h),b=/^(?:head|last)$/.test(h),N=j[b?"take"+(h=="last"?"Right":""):h],q=b||/^find/.test(h);N&&(j.prototype[h]=function(){var $=this.__wrapped__,J=b?[1]:arguments,rt=$ instanceof _e,At=J[0],Ct=rt||de($),Mt=function(Ve){var ze=N.apply(j,Nr([Ve],J));return b&&qt?ze[0]:ze};Ct&&y&&typeof At=="function"&&At.length!=1&&(rt=Ct=!1);var qt=this.__chain__,Jt=!!this.__actions__.length,le=q&&!qt,Ce=rt&&!Jt;if(!q&&Ct){$=Ce?$:new _e(this);var ce=l.apply($,J);return ce.__actions__.push({func:Cl,args:[Mt],thisArg:e}),new rs(ce,qt)}return le&&Ce?l.apply(this,J):(ce=this.thru(Mt),le?b?ce.value()[0]:ce.value():ce)})}),Kn(["pop","push","shift","sort","splice","unshift"],function(l){var h=ju[l],y=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);j.prototype[l]=function(){var N=arguments;if(b&&!this.__chain__){var q=this.value();return h.apply(de(q)?q:[],N)}return this[y](function($){return h.apply(de($)?$:[],N)})}}),Lr(_e.prototype,function(l,h){var y=j[h];if(y){var b=y.name+"";Ze.call(Je,b)||(Je[b]=[]),Je[b].push({name:h,func:y})}}),Je[Cc(e,z).name]=[{name:"wrapper",func:e}],_e.prototype.clone=ja,_e.prototype.reverse=yo,_e.prototype.value=La,j.prototype.at=Zf,j.prototype.chain=No,j.prototype.commit=li,j.prototype.next=Io,j.prototype.plant=Ka,j.prototype.reverse=_m,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=ym,j.prototype.first=j.prototype.head,Ai&&(j.prototype[Ai]=Dc),j}),nc=vp();Mi?((Mi.exports=nc)._=nc,uo._=nc):bn._=nc}).call(yx)})(Xm,Xm.exports)),Xm.exports}var Tx=vx();const g1=ox(Tx),hA="15.1.22",pb=(s,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:s}),mb=(s,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:s}),B1=(s,t)=>({startTime:t,type:"setValue",value:s}),fA=(s,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:s}),dA=(s,t,{startTime:e,target:i,timeConstant:a})=>i+(t-i)*Math.exp((e-s)/a),xd=s=>s.type==="exponentialRampToValue",e0=s=>s.type==="linearRampToValue",Kc=s=>xd(s)||e0(s),AT=s=>s.type==="setValue",Dl=s=>s.type==="setValueCurve",n0=(s,t,e,i)=>{const a=s[t];return a===void 0?i:Kc(a)||AT(a)?a.value:Dl(a)?a.values[a.values.length-1]:dA(e,n0(s,t-1,a.startTime,i),a)},gb=(s,t,e,i,a)=>e===void 0?[i.insertTime,a]:Kc(e)?[e.endTime,e.value]:AT(e)?[e.startTime,e.value]:Dl(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,n0(s,t-1,e.startTime,a)],q1=s=>s.type==="cancelAndHold",F1=s=>s.type==="cancelScheduledValues",Gc=s=>q1(s)||F1(s)?s.cancelTime:xd(s)||e0(s)?s.endTime:s.startTime,_b=(s,t,e,{endTime:i,value:a})=>e===a?a:0<e&&0<a||e<0&&a<0?e*(a/e)**((s-t)/(i-t)):0,yb=(s,t,e,{endTime:i,value:a})=>e+(s-t)/(i-t)*(a-e),wx=(s,t)=>{const e=Math.floor(t),i=Math.ceil(t);return e===i?s[e]:(1-(t-e))*s[e]+(1-(i-t))*s[i]},bx=(s,{duration:t,startTime:e,values:i})=>{const a=(s-e)/t*(i.length-1);return wx(i,a)},ky=s=>s.type==="setTarget";class Sx{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=Gc(t);if(q1(t)||F1(t)){const i=this._automationEvents.findIndex(c=>F1(t)&&Dl(c)?c.startTime+c.duration>=e:Gc(c)>=e),a=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),q1(t)){const c=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&Kc(a)){if(c!==void 0&&ky(c))throw new Error("The internal list is malformed.");const f=c===void 0?a.insertTime:Dl(c)?c.startTime+c.duration:Gc(c),d=c===void 0?this._defaultValue:Dl(c)?c.values[c.values.length-1]:c.value,m=xd(a)?_b(e,f,d,a):yb(e,f,d,a),_=xd(a)?pb(m,e,this._currenTime):mb(m,e,this._currenTime);this._automationEvents.push(_)}if(c!==void 0&&ky(c)&&this._automationEvents.push(B1(this.getValue(e),e)),c!==void 0&&Dl(c)&&c.startTime+c.duration>e){const f=e-c.startTime,d=(c.values.length-1)/c.duration,m=Math.max(2,1+Math.ceil(f*d)),_=f/(m-1)*d,T=c.values.slice(0,m);if(_<1)for(let w=1;w<m;w+=1){const C=_*w%1;T[w]=c.values[w-1]*(1-C)+c.values[w]*C}this._automationEvents[this._automationEvents.length-1]=fA(T,c.startTime,f)}}}else{const i=this._automationEvents.findIndex(f=>Gc(f)>e),a=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(a!==void 0&&Dl(a)&&Gc(a)+a.duration>e)return!1;const c=xd(t)?pb(t.value,t.endTime,this._currenTime):e0(t)?mb(t.value,e,this._currenTime):t;if(i===-1)this._automationEvents.push(c);else{if(Dl(t)&&e+t.duration>Gc(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,c)}}return!0}flush(t){const e=this._automationEvents.findIndex(i=>Gc(i)>t);if(e>1){const i=this._automationEvents.slice(e-1),a=i[0];ky(a)&&i.unshift(B1(n0(this._automationEvents,e-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=i}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(f=>Gc(f)>t),i=this._automationEvents[e],a=(e===-1?this._automationEvents.length:e)-1,c=this._automationEvents[a];if(c!==void 0&&ky(c)&&(i===void 0||!Kc(i)||i.insertTime>t))return dA(t,n0(this._automationEvents,a-1,c.startTime,this._defaultValue),c);if(c!==void 0&&AT(c)&&(i===void 0||!Kc(i)))return c.value;if(c!==void 0&&Dl(c)&&(i===void 0||!Kc(i)||c.startTime+c.duration>t))return t<c.startTime+c.duration?bx(t,c):c.values[c.values.length-1];if(c!==void 0&&Kc(c)&&(i===void 0||!Kc(i)))return c.value;if(i!==void 0&&xd(i)){const[f,d]=gb(this._automationEvents,a,c,i,this._defaultValue);return _b(t,f,d,i)}if(i!==void 0&&e0(i)){const[f,d]=gb(this._automationEvents,a,c,i,this._defaultValue);return yb(t,f,d,i)}return this._defaultValue}}const Ax=s=>({cancelTime:s,type:"cancelAndHold"}),Ex=s=>({cancelTime:s,type:"cancelScheduledValues"}),Cx=(s,t)=>({endTime:t,type:"exponentialRampToValue",value:s}),xx=(s,t)=>({endTime:t,type:"linearRampToValue",value:s}),Rx=(s,t,e)=>({startTime:t,target:s,timeConstant:e,type:"setTarget"}),Nx=()=>new DOMException("","AbortError"),Ix=s=>(t,e,[i,a,c],f)=>{s(t[a],[e,i,c],d=>d[0]===e&&d[1]===i,f)},Ox=s=>(t,e,i)=>{const a=[];for(let c=0;c<i.numberOfInputs;c+=1)a.push(new Set);s.set(t,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},Dx=s=>(t,e)=>{s.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},Pd=new WeakSet,pA=new WeakMap,ET=new WeakMap,mA=new WeakMap,CT=new WeakMap,N0=new WeakMap,gA=new WeakMap,H1=new WeakMap,G1=new WeakMap,K1=new WeakMap,_A={construct(){return _A}},Mx=s=>{try{const t=new Proxy(s,_A);new t}catch{return!1}return!0},vb=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Tb=(s,t)=>{const e=[];let i=s.replace(/^[\s]+/,""),a=i.match(vb);for(;a!==null;){const c=a[1].slice(1,-1),f=a[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());e.push(f),i=i.slice(a[0].length).replace(/^[\s]+/,""),a=i.match(vb)}return[e.join(";"),i]},wb=s=>{if(s!==void 0&&!Array.isArray(s))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},bb=s=>{if(!Mx(s))throw new TypeError("The given value for processorCtor should be a constructor.");if(s.prototype===null||typeof s.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},kx=(s,t,e,i,a,c,f,d,m,_,T,w,C)=>{let I=0;return(O,k,D={credentials:"omit"})=>{const z=T.get(O);if(z!==void 0&&z.has(k))return Promise.resolve();const X=_.get(O);if(X!==void 0){const K=X.get(k);if(K!==void 0)return K}const Y=c(O),it=Y.audioWorklet===void 0?a(k).then(([K,W])=>{const[R,E]=Tb(K,W),M=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${E}
})})(window,'_AWGS')`;return e(M)}).then(()=>{const K=C._AWGS.pop();if(K===void 0)throw new SyntaxError;i(Y.currentTime,Y.sampleRate,()=>K(class{},void 0,(W,R)=>{if(W.trim()==="")throw t();const E=G1.get(Y);if(E!==void 0){if(E.has(W))throw t();bb(R),wb(R.parameterDescriptors),E.set(W,R)}else bb(R),wb(R.parameterDescriptors),G1.set(Y,new Map([[W,R]]))},Y.sampleRate,void 0,void 0))}):Promise.all([a(k),Promise.resolve(s(w,w))]).then(([[K,W],R])=>{const E=I+1;I=E;const[M,B]=Tb(K,W),vt=`${M};((AudioWorkletProcessor,registerProcessor)=>{${B}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${E}',class extends AudioWorkletProcessor{process(){return !1}})`,Rt=new Blob([vt],{type:"application/javascript; charset=utf-8"}),Z=URL.createObjectURL(Rt);return Y.audioWorklet.addModule(Z,D).then(()=>{if(d(Y))return Y;const nt=f(Y);return nt.audioWorklet.addModule(Z,D).then(()=>nt)}).then(nt=>{if(m===null)throw new SyntaxError;try{new m(nt,`__sac${E}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Z))});return X===void 0?_.set(O,new Map([[k,it]])):X.set(k,it),it.then(()=>{const K=T.get(O);K===void 0?T.set(O,new Set([k])):K.add(k)}).finally(()=>{const K=_.get(O);K!==void 0&&K.delete(k)}),it}},eo=(s,t)=>{const e=s.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},I0=(s,t)=>{const e=Array.from(s).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[i]=e;return s.delete(i),i},yA=(s,t,e,i)=>{const a=eo(s,t),c=I0(a,f=>f[0]===e&&f[1]===i);return a.size===0&&s.delete(t),c},yg=s=>eo(gA,s),Ud=s=>{if(Pd.has(s))throw new Error("The AudioNode is already stored.");Pd.add(s),yg(s).forEach(t=>t(!0))},vA=s=>"port"in s,vg=s=>{if(!Pd.has(s))throw new Error("The AudioNode is not stored.");Pd.delete(s),yg(s).forEach(t=>t(!1))},W1=(s,t)=>{!vA(s)&&t.every(e=>e.size===0)&&vg(s)},Vx=(s,t,e,i,a,c,f,d,m,_,T,w,C)=>{const I=new WeakMap;return(O,k,D,z,X)=>{const{activeInputs:Y,passiveInputs:it}=c(k),{outputs:K}=c(O),W=d(O),R=E=>{const M=m(k),B=m(O);if(E){const P=yA(it,O,D,z);s(Y,O,P,!1),!X&&!w(O)&&e(B,M,D,z),C(k)&&Ud(k)}else{const P=i(Y,O,D,z);t(it,z,P,!1),!X&&!w(O)&&a(B,M,D,z);const F=f(k);if(F===0)T(k)&&W1(k,Y);else{const U=I.get(k);U!==void 0&&clearTimeout(U),I.set(k,setTimeout(()=>{T(k)&&W1(k,Y)},F*1e3))}}};return _(K,[k,D,z],E=>E[0]===k&&E[1]===D&&E[2]===z,!0)?(W.add(R),T(O)?s(Y,O,[D,z,R],!0):t(it,z,[O,D,R],!0),!0):!1}},jx=s=>(t,e,[i,a,c],f)=>{const d=t.get(i);d===void 0?t.set(i,new Set([[a,e,c]])):s(d,[a,e,c],m=>m[0]===a&&m[1]===e,f)},Lx=s=>(t,e)=>{const i=s(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(i).connect(t.destination);const a=()=>{e.removeEventListener("ended",a),e.disconnect(i),i.disconnect()};e.addEventListener("ended",a)},Px=s=>(t,e)=>{s(t).add(e)},Ux={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},zx=(s,t,e,i,a,c)=>class extends s{constructor(d,m){const _=a(d),T={...Ux,...m},w=i(_,T),C=c(_)?t():null;super(d,!1,w,C),this._nativeAnalyserNode=w}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const m=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=m,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const m=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=m,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},ws=(s,t)=>s.context===t,Bx=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!ws(d,f)){const _={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=s(f,_)}return i.set(f,d),await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},i0=s=>{try{s.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},$o=()=>new DOMException("","IndexSizeError"),xT=s=>{s.getChannelData=(t=>e=>{try{return t.call(s,e)}catch(i){throw i.code===12?$o():i}})(s.getChannelData)},qx={numberOfChannels:1},Fx=(s,t,e,i,a,c,f,d)=>{let m=null;return class TA{constructor(T){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:w,numberOfChannels:C,sampleRate:I}={...qx,...T};m===null&&(m=new a(1,1,44100));const O=i!==null&&t(c,c)?new i({length:w,numberOfChannels:C,sampleRate:I}):m.createBuffer(C,w,I);if(O.numberOfChannels===0)throw e();return typeof O.copyFromChannel!="function"?(f(O),xT(O)):t(i0,()=>i0(O))||d(O),s.add(O),O}static[Symbol.hasInstance](T){return T!==null&&typeof T=="object"&&Object.getPrototypeOf(T)===TA.prototype||s.has(T)}}},pr=-34028234663852886e22,Hs=-pr,Ml=s=>Pd.has(s),Hx={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Gx=(s,t,e,i,a,c,f,d)=>class extends s{constructor(_,T){const w=c(_),C={...Hx,...T},I=a(w,C),O=f(w),k=O?t():null;super(_,!1,I,k),this._audioBufferSourceNodeRenderer=k,this._isBufferNullified=!1,this._isBufferSet=C.buffer!==null,this._nativeAudioBufferSourceNode=I,this._onended=null,this._playbackRate=e(this,O,I.playbackRate,Hs,pr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(_){if(this._nativeAudioBufferSourceNode.buffer=_,_!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(_){this._nativeAudioBufferSourceNode.loop=_}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(_){this._nativeAudioBufferSourceNode.loopEnd=_}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(_){this._nativeAudioBufferSourceNode.loopStart=_}get onended(){return this._onended}set onended(_){const T=typeof _=="function"?d(this,_):null;this._nativeAudioBufferSourceNode.onended=T;const w=this._nativeAudioBufferSourceNode.onended;this._onended=w!==null&&w===T?_:w}get playbackRate(){return this._playbackRate}start(_=0,T=0,w){if(this._nativeAudioBufferSourceNode.start(_,T,w),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=w===void 0?[_,T]:[_,T,w]),this.context.state!=="closed"){Ud(this);const C=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",C),Ml(this)&&vg(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",C)}}stop(_=0){this._nativeAudioBufferSourceNode.stop(_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=_)}},Kx=(s,t,e,i,a)=>()=>{const c=new WeakMap;let f=null,d=null;const m=async(_,T)=>{let w=e(_);const C=ws(w,T);if(!C){const I={buffer:w.buffer,channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,loop:w.loop,loopEnd:w.loopEnd,loopStart:w.loopStart,playbackRate:w.playbackRate.value};w=t(T,I),f!==null&&w.start(...f),d!==null&&w.stop(d)}return c.set(T,w),C?await s(T,_.playbackRate,w.playbackRate):await i(T,_.playbackRate,w.playbackRate),await a(_,T,w),w};return{set start(_){f=_},set stop(_){d=_},render(_,T){const w=c.get(T);return w!==void 0?Promise.resolve(w):m(_,T)}}},Wx=s=>"playbackRate"in s,$x=s=>"frequency"in s&&"gain"in s,Yx=s=>"offset"in s,Qx=s=>!("frequency"in s)&&"gain"in s,Xx=s=>"detune"in s&&"frequency"in s&&!("gain"in s),Zx=s=>"pan"in s,Gs=s=>eo(pA,s),Tg=s=>eo(mA,s),$1=(s,t)=>{const{activeInputs:e}=Gs(s);e.forEach(a=>a.forEach(([c])=>{t.includes(s)||$1(c,[...t,s])}));const i=Wx(s)?[s.playbackRate]:vA(s)?Array.from(s.parameters.values()):$x(s)?[s.Q,s.detune,s.frequency,s.gain]:Yx(s)?[s.offset]:Qx(s)?[s.gain]:Xx(s)?[s.detune,s.frequency]:Zx(s)?[s.pan]:[];for(const a of i){const c=Tg(a);c!==void 0&&c.activeInputs.forEach(([f])=>$1(f,t))}Ml(s)&&vg(s)},wA=s=>{$1(s.destination,[])},Jx=s=>s===void 0||typeof s=="number"||typeof s=="string"&&(s==="balanced"||s==="interactive"||s==="playback"),tR=(s,t,e,i,a,c,f,d,m)=>class extends s{constructor(T={}){if(m===null)throw new Error("Missing the native AudioContext constructor.");let w;try{w=new m(T)}catch(O){throw O.code===12&&O.message==="sampleRate is not in range"?e():O}if(w===null)throw i();if(!Jx(T.latencyHint))throw new TypeError(`The provided value '${T.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(T.sampleRate!==void 0&&w.sampleRate!==T.sampleRate)throw e();super(w,2);const{latencyHint:C}=T,{sampleRate:I}=w;if(this._baseLatency=typeof w.baseLatency=="number"?w.baseLatency:C==="balanced"?512/I:C==="interactive"||C===void 0?256/I:C==="playback"?1024/I:Math.max(2,Math.min(128,Math.round(C*I/128)))*128/I,this._nativeAudioContext=w,m.name==="webkitAudioContext"?(this._nativeGainNode=w.createGain(),this._nativeOscillatorNode=w.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(w.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,w.state==="running"){this._state="suspended";const O=()=>{this._state==="suspended"&&(this._state=null),w.removeEventListener("statechange",O)};w.addEventListener("statechange",O)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wA(this)}))}createMediaElementSource(T){return new a(this,{mediaElement:T})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(T){return new f(this,{mediaStream:T})}createMediaStreamTrackSource(T){return new d(this,{mediaStreamTrack:T})}resume(){return this._state==="suspended"?new Promise((T,w)=>{const C=()=>{this._nativeAudioContext.removeEventListener("statechange",C),this._nativeAudioContext.state==="running"?T():this.resume().then(T,w)};this._nativeAudioContext.addEventListener("statechange",C)}):this._nativeAudioContext.resume().catch(T=>{throw T===void 0||T.code===15?t():T})}suspend(){return this._nativeAudioContext.suspend().catch(T=>{throw T===void 0?t():T})}},eR=(s,t,e,i,a,c,f,d)=>class extends s{constructor(_,T){const w=c(_),C=f(w),I=a(w,T,C),O=C?t(d):null;super(_,!1,I,O),this._isNodeOfNativeOfflineAudioContext=C,this._nativeAudioDestinationNode=I}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(_){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(_>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=_}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(_){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=_}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},nR=s=>{const t=new WeakMap,e=async(i,a)=>{const c=a.destination;return t.set(a,c),await s(i,a,c),c};return{render(i,a){const c=t.get(a);return c!==void 0?Promise.resolve(c):e(i,a)}}},iR=(s,t,e,i,a,c,f,d)=>(m,_)=>{const T=_.listener,w=()=>{const K=new Float32Array(1),W=t(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=f(_);let E=!1,M=[0,0,-1,0,1,0],B=[0,0,0];const P=()=>{if(E)return;E=!0;const Rt=i(_,256,9,0);Rt.onaudioprocess=({inputBuffer:Z})=>{const nt=[c(Z,K,0),c(Z,K,1),c(Z,K,2),c(Z,K,3),c(Z,K,4),c(Z,K,5)];nt.some((dt,pt)=>dt!==M[pt])&&(T.setOrientation(...nt),M=nt);const Tt=[c(Z,K,6),c(Z,K,7),c(Z,K,8)];Tt.some((dt,pt)=>dt!==B[pt])&&(T.setPosition(...Tt),B=Tt)},W.connect(Rt)},F=Rt=>Z=>{Z!==M[Rt]&&(M[Rt]=Z,T.setOrientation(...M))},U=Rt=>Z=>{Z!==B[Rt]&&(B[Rt]=Z,T.setPosition(...B))},vt=(Rt,Z,nt)=>{const Tt=e(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z});Tt.connect(W,0,Rt),Tt.start(),Object.defineProperty(Tt.offset,"defaultValue",{get(){return Z}});const dt=s({context:m},R,Tt.offset,Hs,pr);return d(dt,"value",pt=>()=>pt.call(dt),pt=>G=>{try{pt.call(dt,G)}catch(at){if(at.code!==9)throw at}P(),R&&nt(G)}),dt.cancelAndHoldAtTime=(pt=>R?()=>{throw a()}:(...G)=>{const at=pt.apply(dt,G);return P(),at})(dt.cancelAndHoldAtTime),dt.cancelScheduledValues=(pt=>R?()=>{throw a()}:(...G)=>{const at=pt.apply(dt,G);return P(),at})(dt.cancelScheduledValues),dt.exponentialRampToValueAtTime=(pt=>R?()=>{throw a()}:(...G)=>{const at=pt.apply(dt,G);return P(),at})(dt.exponentialRampToValueAtTime),dt.linearRampToValueAtTime=(pt=>R?()=>{throw a()}:(...G)=>{const at=pt.apply(dt,G);return P(),at})(dt.linearRampToValueAtTime),dt.setTargetAtTime=(pt=>R?()=>{throw a()}:(...G)=>{const at=pt.apply(dt,G);return P(),at})(dt.setTargetAtTime),dt.setValueAtTime=(pt=>R?()=>{throw a()}:(...G)=>{const at=pt.apply(dt,G);return P(),at})(dt.setValueAtTime),dt.setValueCurveAtTime=(pt=>R?()=>{throw a()}:(...G)=>{const at=pt.apply(dt,G);return P(),at})(dt.setValueCurveAtTime),dt};return{forwardX:vt(0,0,F(0)),forwardY:vt(1,0,F(1)),forwardZ:vt(2,-1,F(2)),positionX:vt(6,0,U(0)),positionY:vt(7,0,U(1)),positionZ:vt(8,0,U(2)),upX:vt(3,0,F(3)),upY:vt(4,1,F(4)),upZ:vt(5,0,F(5))}},{forwardX:C,forwardY:I,forwardZ:O,positionX:k,positionY:D,positionZ:z,upX:X,upY:Y,upZ:it}=T.forwardX===void 0?w():T;return{get forwardX(){return C},get forwardY(){return I},get forwardZ(){return O},get positionX(){return k},get positionY(){return D},get positionZ(){return z},get upX(){return X},get upY(){return Y},get upZ(){return it}}},s0=s=>"context"in s,wg=s=>s0(s[0]),Zh=(s,t,e,i)=>{for(const a of s)if(e(a)){if(i)return!1;throw Error("The set contains at least one similar element.")}return s.add(t),!0},Sb=(s,t,[e,i],a)=>{Zh(s,[t,e,i],c=>c[0]===t&&c[1]===e,a)},Ab=(s,[t,e,i],a)=>{const c=s.get(t);c===void 0?s.set(t,new Set([[e,i]])):Zh(c,[e,i],f=>f[0]===e,a)},Jd=s=>"inputs"in s,r0=(s,t,e,i)=>{if(Jd(t)){const a=t.inputs[i];return s.connect(a,e,0),[a,e,0]}return s.connect(t,e,i),[t,e,i]},bA=(s,t,e)=>{for(const i of s)if(i[0]===t&&i[1]===e)return s.delete(i),i;return null},sR=(s,t,e)=>I0(s,i=>i[0]===t&&i[1]===e),SA=(s,t)=>{if(!yg(s).delete(t))throw new Error("Missing the expected event listener.")},AA=(s,t,e)=>{const i=eo(s,t),a=I0(i,c=>c[0]===e);return i.size===0&&s.delete(t),a},a0=(s,t,e,i)=>{Jd(t)?s.disconnect(t.inputs[i],e,0):s.disconnect(t,e,i)},Vn=s=>eo(ET,s),og=s=>eo(CT,s),Gh=s=>H1.has(s),Ky=s=>!Pd.has(s),Eb=(s,t)=>new Promise(e=>{if(t!==null)e(!0);else{const i=s.createScriptProcessor(256,1,1),a=s.createGain(),c=s.createBuffer(1,2,44100),f=c.getChannelData(0);f[0]=1,f[1]=1;const d=s.createBufferSource();d.buffer=c,d.loop=!0,d.connect(i).connect(s.destination),d.connect(a),d.disconnect(a),i.onaudioprocess=m=>{const _=m.inputBuffer.getChannelData(0);Array.prototype.some.call(_,T=>T===1)?e(!0):e(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(s.destination)},d.start()}}),_1=(s,t)=>{const e=new Map;for(const i of s)for(const a of i){const c=e.get(a);e.set(a,c===void 0?1:c+1)}e.forEach((i,a)=>t(a,i))},o0=s=>"context"in s,rR=s=>{const t=new Map;s.connect=(e=>(i,a=0,c=0)=>{const f=o0(i)?e(i,a,c):e(i,a),d=t.get(i);return d===void 0?t.set(i,[{input:c,output:a}]):d.every(m=>m.input!==c||m.output!==a)&&d.push({input:c,output:a}),f})(s.connect.bind(s)),s.disconnect=(e=>(i,a,c)=>{if(e.apply(s),i===void 0)t.clear();else if(typeof i=="number")for(const[f,d]of t){const m=d.filter(_=>_.output!==i);m.length===0?t.delete(f):t.set(f,m)}else if(t.has(i))if(a===void 0)t.delete(i);else{const f=t.get(i);if(f!==void 0){const d=f.filter(m=>m.output!==a&&(m.input!==c||c===void 0));d.length===0?t.delete(i):t.set(i,d)}}for(const[f,d]of t)d.forEach(m=>{o0(f)?s.connect(f,m.output,m.input):s.connect(f,m.output)})})(s.disconnect)},aR=(s,t,e,i)=>{const{activeInputs:a,passiveInputs:c}=Tg(t),{outputs:f}=Gs(s),d=yg(s),m=_=>{const T=Vn(s),w=og(t);if(_){const C=AA(c,s,e);Sb(a,s,C,!1),!i&&!Gh(s)&&T.connect(w,e)}else{const C=sR(a,s,e);Ab(c,C,!1),!i&&!Gh(s)&&T.disconnect(w,e)}};return Zh(f,[t,e],_=>_[0]===t&&_[1]===e,!0)?(d.add(m),Ml(s)?Sb(a,s,[e,m],!0):Ab(c,[s,e,m],!0),!0):!1},oR=(s,t,e,i)=>{const{activeInputs:a,passiveInputs:c}=Gs(t),f=bA(a[i],s,e);return f===null?[yA(c,s,e,i)[2],!1]:[f[2],!0]},lR=(s,t,e)=>{const{activeInputs:i,passiveInputs:a}=Tg(t),c=bA(i,s,e);return c===null?[AA(a,s,e)[1],!1]:[c[2],!0]},RT=(s,t,e,i,a)=>{const[c,f]=oR(s,e,i,a);if(c!==null&&(SA(s,c),f&&!t&&!Gh(s)&&a0(Vn(s),Vn(e),i,a)),Ml(e)){const{activeInputs:d}=Gs(e);W1(e,d)}},NT=(s,t,e,i)=>{const[a,c]=lR(s,e,i);a!==null&&(SA(s,a),c&&!t&&!Gh(s)&&Vn(s).disconnect(og(e),i))},cR=(s,t)=>{const e=Gs(s),i=[];for(const a of e.outputs)wg(a)?RT(s,t,...a):NT(s,t,...a),i.push(a[0]);return e.outputs.clear(),i},uR=(s,t,e)=>{const i=Gs(s),a=[];for(const c of i.outputs)c[1]===e&&(wg(c)?RT(s,t,...c):NT(s,t,...c),a.push(c[0]),i.outputs.delete(c));return a},hR=(s,t,e,i,a)=>{const c=Gs(s);return Array.from(c.outputs).filter(f=>f[0]===e&&(i===void 0||f[1]===i)&&(a===void 0||f[2]===a)).map(f=>(wg(f)?RT(s,t,...f):NT(s,t,...f),c.outputs.delete(f),f[0]))},fR=(s,t,e,i,a,c,f,d,m,_,T,w,C,I,O,k)=>class extends _{constructor(z,X,Y,it){super(Y),this._context=z,this._nativeAudioNode=Y;const K=T(z);w(K)&&e(Eb,()=>Eb(K,k))!==!0&&rR(Y),ET.set(this,Y),gA.set(this,new Set),z.state!=="closed"&&X&&Ud(this),s(this,it,Y)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(z){this._nativeAudioNode.channelCount=z}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(z){this._nativeAudioNode.channelCountMode=z}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(z){this._nativeAudioNode.channelInterpretation=z}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(z,X=0,Y=0){if(X<0||X>=this._nativeAudioNode.numberOfOutputs)throw a();const it=T(this._context),K=O(it);if(C(z)||I(z))throw c();if(s0(z)){const E=Vn(z);try{const B=r0(this._nativeAudioNode,E,X,Y),P=Ky(this);(K||P)&&this._nativeAudioNode.disconnect(...B),this.context.state!=="closed"&&!P&&Ky(z)&&Ud(z)}catch(B){throw B.code===12?c():B}if(t(this,z,X,Y,K)){const B=m([this],z);_1(B,i(K))}return z}const W=og(z);if(W.name==="playbackRate"&&W.maxValue===1024)throw f();try{this._nativeAudioNode.connect(W,X),(K||Ky(this))&&this._nativeAudioNode.disconnect(W,X)}catch(E){throw E.code===12?c():E}if(aR(this,z,X,K)){const E=m([this],z);_1(E,i(K))}}disconnect(z,X,Y){let it;const K=T(this._context),W=O(K);if(z===void 0)it=cR(this,W);else if(typeof z=="number"){if(z<0||z>=this.numberOfOutputs)throw a();it=uR(this,W,z)}else{if(X!==void 0&&(X<0||X>=this.numberOfOutputs)||s0(z)&&Y!==void 0&&(Y<0||Y>=z.numberOfInputs))throw a();if(it=hR(this,W,z,X,Y),it.length===0)throw c()}for(const R of it){const E=m([this],R);_1(E,d)}}},dR=(s,t,e,i,a,c,f,d,m,_,T,w,C)=>(I,O,k,D=null,z=null)=>{const X=k.value,Y=new Sx(X),it=O?i(Y):null,K={get defaultValue(){return X},get maxValue(){return D===null?k.maxValue:D},get minValue(){return z===null?k.minValue:z},get value(){return k.value},set value(W){k.value=W,K.setValueAtTime(W,I.context.currentTime)},cancelAndHoldAtTime(W){if(typeof k.cancelAndHoldAtTime=="function")it===null&&Y.flush(I.context.currentTime),Y.add(a(W)),k.cancelAndHoldAtTime(W);else{const R=Array.from(Y).pop();it===null&&Y.flush(I.context.currentTime),Y.add(a(W));const E=Array.from(Y).pop();k.cancelScheduledValues(W),R!==E&&E!==void 0&&(E.type==="exponentialRampToValue"?k.exponentialRampToValueAtTime(E.value,E.endTime):E.type==="linearRampToValue"?k.linearRampToValueAtTime(E.value,E.endTime):E.type==="setValue"?k.setValueAtTime(E.value,E.startTime):E.type==="setValueCurve"&&k.setValueCurveAtTime(E.values,E.startTime,E.duration))}return K},cancelScheduledValues(W){return it===null&&Y.flush(I.context.currentTime),Y.add(c(W)),k.cancelScheduledValues(W),K},exponentialRampToValueAtTime(W,R){if(W===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const E=I.context.currentTime;return it===null&&Y.flush(E),Array.from(Y).length===0&&(Y.add(_(X,E)),k.setValueAtTime(X,E)),Y.add(f(W,R)),k.exponentialRampToValueAtTime(W,R),K},linearRampToValueAtTime(W,R){const E=I.context.currentTime;return it===null&&Y.flush(E),Array.from(Y).length===0&&(Y.add(_(X,E)),k.setValueAtTime(X,E)),Y.add(d(W,R)),k.linearRampToValueAtTime(W,R),K},setTargetAtTime(W,R,E){return it===null&&Y.flush(I.context.currentTime),Y.add(m(W,R,E)),k.setTargetAtTime(W,R,E),K},setValueAtTime(W,R){return it===null&&Y.flush(I.context.currentTime),Y.add(_(W,R)),k.setValueAtTime(W,R),K},setValueCurveAtTime(W,R,E){const M=W instanceof Float32Array?W:new Float32Array(W);if(w!==null&&w.name==="webkitAudioContext"){const B=R+E,P=I.context.sampleRate,F=Math.ceil(R*P),U=Math.floor(B*P),vt=U-F,Rt=new Float32Array(vt);for(let nt=0;nt<vt;nt+=1){const Tt=(M.length-1)/E*((F+nt)/P-R),dt=Math.floor(Tt),pt=Math.ceil(Tt);Rt[nt]=dt===pt?M[dt]:(1-(Tt-dt))*M[dt]+(1-(pt-Tt))*M[pt]}it===null&&Y.flush(I.context.currentTime),Y.add(T(Rt,R,E)),k.setValueCurveAtTime(Rt,R,E);const Z=U/P;Z<B&&C(K,Rt[Rt.length-1],Z),C(K,M[M.length-1],B)}else it===null&&Y.flush(I.context.currentTime),Y.add(T(M,R,E)),k.setValueCurveAtTime(M,R,E);return K}};return e.set(K,k),t.set(K,I),s(K,it),K},pR=s=>({replay(t){for(const e of s)if(e.type==="exponentialRampToValue"){const{endTime:i,value:a}=e;t.exponentialRampToValueAtTime(a,i)}else if(e.type==="linearRampToValue"){const{endTime:i,value:a}=e;t.linearRampToValueAtTime(a,i)}else if(e.type==="setTarget"){const{startTime:i,target:a,timeConstant:c}=e;t.setTargetAtTime(a,i,c)}else if(e.type==="setValue"){const{startTime:i,value:a}=e;t.setValueAtTime(a,i)}else if(e.type==="setValueCurve"){const{duration:i,startTime:a,values:c}=e;t.setValueCurveAtTime(c,a,i)}else throw new Error("Can't apply an unknown automation.")}});class EA{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((i,a)=>t.call(e,i,a,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const mR={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},gR=(s,t,e,i,a,c,f,d,m,_,T,w,C,I)=>class extends t{constructor(k,D,z){var X;const Y=d(k),it=m(Y),K=T({...mR,...z});C(K);const W=G1.get(Y),R=W?.get(D),E=it||Y.state!=="closed"?Y:(X=f(Y))!==null&&X!==void 0?X:Y,M=a(E,it?null:k.baseLatency,_,D,R,K),B=it?i(D,K,R):null;super(k,!0,M,B);const P=[];M.parameters.forEach((U,vt)=>{const Rt=e(this,it,U);P.push([vt,Rt])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new EA(P),it&&s(Y,this);const{activeInputs:F}=c(this);w(M,F)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(k){const D=typeof k=="function"?I(this,k):null;this._nativeAudioWorkletNode.onprocessorerror=D;const z=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=z!==null&&z===D?k:z}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function l0(s,t,e,i,a){if(typeof s.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),s.copyFromChannel(t[e],i,a);else{const c=s.getChannelData(i);if(t[e].byteLength===0)t[e]=c.slice(a,a+128);else{const f=new Float32Array(c.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(f)}}}const CA=(s,t,e,i,a)=>{typeof s.copyToChannel=="function"?t[e].byteLength!==0&&s.copyToChannel(t[e],i,a):t[e].byteLength!==0&&s.getChannelData(i).set(t[e],a)},c0=(s,t)=>{const e=[];for(let i=0;i<s;i+=1){const a=[],c=typeof t=="number"?t:t[i];for(let f=0;f<c;f+=1)a.push(new Float32Array(128));e.push(a)}return e},_R=(s,t)=>{const e=eo(K1,s),i=Vn(t);return eo(e,i)},yR=async(s,t,e,i,a,c,f)=>{const d=t===null?Math.ceil(s.context.length/128)*128:t.length,m=i.channelCount*i.numberOfInputs,_=a.reduce((D,z)=>D+z,0),T=_===0?null:e.createBuffer(_,d,e.sampleRate);if(c===void 0)throw new Error("Missing the processor constructor.");const w=Gs(s),C=await _R(e,s),I=c0(i.numberOfInputs,i.channelCount),O=c0(i.numberOfOutputs,a),k=Array.from(s.parameters.keys()).reduce((D,z)=>({...D,[z]:new Float32Array(128)}),{});for(let D=0;D<d;D+=128){if(i.numberOfInputs>0&&t!==null)for(let z=0;z<i.numberOfInputs;z+=1)for(let X=0;X<i.channelCount;X+=1)l0(t,I[z],X,X,D);c.parameterDescriptors!==void 0&&t!==null&&c.parameterDescriptors.forEach(({name:z},X)=>{l0(t,k,z,m+X,D)});for(let z=0;z<i.numberOfInputs;z+=1)for(let X=0;X<a[z];X+=1)O[z][X].byteLength===0&&(O[z][X]=new Float32Array(128));try{const z=I.map((Y,it)=>w.activeInputs[it].size===0?[]:Y),X=f(D/e.sampleRate,e.sampleRate,()=>C.process(z,O,k));if(T!==null)for(let Y=0,it=0;Y<i.numberOfOutputs;Y+=1){for(let K=0;K<a[Y];K+=1)CA(T,O[Y],K,it+K,D);it+=a[Y]}if(!X)break}catch(z){s.dispatchEvent(new ErrorEvent("processorerror",{colno:z.colno,filename:z.filename,lineno:z.lineno,message:z.message}));break}}return T},vR=(s,t,e,i,a,c,f,d,m,_,T,w,C,I,O,k)=>(D,z,X)=>{const Y=new WeakMap;let it=null;const K=async(W,R)=>{let E=T(W),M=null;const B=ws(E,R),P=Array.isArray(z.outputChannelCount)?z.outputChannelCount:Array.from(z.outputChannelCount);if(w===null){const F=P.reduce((Z,nt)=>Z+nt,0),U=a(R,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),vt=[];for(let Z=0;Z<W.numberOfOutputs;Z+=1)vt.push(i(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:P[Z]}));const Rt=f(R,{channelCount:z.channelCount,channelCountMode:z.channelCountMode,channelInterpretation:z.channelInterpretation,gain:1});Rt.connect=t.bind(null,vt),Rt.disconnect=m.bind(null,vt),M=[U,vt,Rt]}else B||(E=new w(R,D));if(Y.set(R,M===null?E:M[2]),M!==null){if(it===null){if(X===void 0)throw new Error("Missing the processor constructor.");if(C===null)throw new Error("Missing the native OfflineAudioContext constructor.");const nt=W.channelCount*W.numberOfInputs,Tt=X.parameterDescriptors===void 0?0:X.parameterDescriptors.length,dt=nt+Tt;it=yR(W,dt===0?null:await(async()=>{const G=new C(dt,Math.ceil(W.context.length/128)*128,R.sampleRate),at=[],St=[];for(let jt=0;jt<z.numberOfInputs;jt+=1)at.push(f(G,{channelCount:z.channelCount,channelCountMode:z.channelCountMode,channelInterpretation:z.channelInterpretation,gain:1})),St.push(a(G,{channelCount:z.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:z.channelCount}));const Dt=await Promise.all(Array.from(W.parameters.values()).map(async jt=>{const Ft=c(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:jt.value});return await I(G,jt,Ft.offset),Ft})),Nt=i(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,nt+Tt)});for(let jt=0;jt<z.numberOfInputs;jt+=1){at[jt].connect(St[jt]);for(let Ft=0;Ft<z.channelCount;Ft+=1)St[jt].connect(Nt,Ft,jt*z.channelCount+Ft)}for(const[jt,Ft]of Dt.entries())Ft.connect(Nt,0,nt+jt),Ft.start(0);return Nt.connect(G.destination),await Promise.all(at.map(jt=>O(W,G,jt))),k(G)})(),R,z,P,X,_)}const F=await it,U=e(R,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[vt,Rt,Z]=M;F!==null&&(U.buffer=F,U.start(0)),U.connect(vt);for(let nt=0,Tt=0;nt<W.numberOfOutputs;nt+=1){const dt=Rt[nt];for(let pt=0;pt<P[nt];pt+=1)vt.connect(dt,Tt+pt,pt);Tt+=P[nt]}return Z}if(B)for(const[F,U]of W.parameters.entries())await s(R,U,E.parameters.get(F));else for(const[F,U]of W.parameters.entries())await I(R,U,E.parameters.get(F));return await O(W,R,E),E};return{render(W,R){d(R,W);const E=Y.get(R);return E!==void 0?Promise.resolve(E):K(W,R)}}},TR=(s,t,e,i,a,c,f,d,m,_,T,w,C,I,O,k,D,z,X,Y)=>class extends O{constructor(K,W){super(K,W),this._nativeContext=K,this._audioWorklet=s===void 0?void 0:{addModule:(R,E)=>s(this,R,E)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new a(this)}createBuffer(K,W,R){return new e({length:W,numberOfChannels:K,sampleRate:R})}createBufferSource(){return new i(this)}createChannelMerger(K=6){return new c(this,{numberOfInputs:K})}createChannelSplitter(K=6){return new f(this,{numberOfOutputs:K})}createConstantSource(){return new d(this)}createConvolver(){return new m(this)}createDelay(K=1){return new T(this,{maxDelayTime:K})}createDynamicsCompressor(){return new w(this)}createGain(){return new C(this)}createIIRFilter(K,W){return new I(this,{feedback:W,feedforward:K})}createOscillator(){return new k(this)}createPanner(){return new D(this)}createPeriodicWave(K,W,R={disableNormalization:!1}){return new z(this,{...R,imag:W,real:K})}createStereoPanner(){return new X(this)}createWaveShaper(){return new Y(this)}decodeAudioData(K,W,R){return _(this._nativeContext,K).then(E=>(typeof W=="function"&&W(E),E),E=>{throw typeof R=="function"&&R(E),E})}},wR={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},bR=(s,t,e,i,a,c,f,d)=>class extends s{constructor(_,T){const w=c(_),C={...wR,...T},I=a(w,C),O=f(w),k=O?e():null;super(_,!1,I,k),this._Q=t(this,O,I.Q,Hs,pr),this._detune=t(this,O,I.detune,1200*Math.log2(Hs),-1200*Math.log2(Hs)),this._frequency=t(this,O,I.frequency,_.sampleRate/2,0),this._gain=t(this,O,I.gain,40*Math.log10(Hs),pr),this._nativeBiquadFilterNode=I,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(_){this._nativeBiquadFilterNode.type=_}getFrequencyResponse(_,T,w){try{this._nativeBiquadFilterNode.getFrequencyResponse(_,T,w)}catch(C){throw C.code===11?i():C}if(_.length!==T.length||T.length!==w.length)throw i()}},SR=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,m)=>{let _=e(d);const T=ws(_,m);if(!T){const w={Q:_.Q.value,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,detune:_.detune.value,frequency:_.frequency.value,gain:_.gain.value,type:_.type};_=t(m,w)}return c.set(m,_),T?(await s(m,d.Q,_.Q),await s(m,d.detune,_.detune),await s(m,d.frequency,_.frequency),await s(m,d.gain,_.gain)):(await i(m,d.Q,_.Q),await i(m,d.detune,_.detune),await i(m,d.frequency,_.frequency),await i(m,d.gain,_.gain)),await a(d,m,_),_};return{render(d,m){const _=c.get(m);return _!==void 0?Promise.resolve(_):f(d,m)}}},AR=(s,t)=>(e,i)=>{const a=t.get(e);if(a!==void 0)return a;const c=s.get(e);if(c!==void 0)return c;try{const f=i();return f instanceof Promise?(s.set(e,f),f.catch(()=>!1).then(d=>(s.delete(e),t.set(e,d),d))):(t.set(e,f),f)}catch{return t.set(e,!1),!1}},ER={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},CR=(s,t,e,i,a)=>class extends s{constructor(f,d){const m=i(f),_={...ER,...d},T=e(m,_),w=a(m)?t():null;super(f,!1,T,w)}},xR=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!ws(d,f)){const _={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=s(f,_)}return i.set(f,d),await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},RR={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},NR=(s,t,e,i,a,c)=>class extends s{constructor(d,m){const _=i(d),T=c({...RR,...m}),w=e(_,T),C=a(_)?t():null;super(d,!1,w,C)}},IR=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!ws(d,f)){const _={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=s(f,_)}return i.set(f,d),await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},OR=s=>(t,e,i)=>s(e,t,i),DR=s=>(t,e,i=0,a=0)=>{const c=t[i];if(c===void 0)throw s();return o0(e)?c.connect(e,0,a):c.connect(e,0)},MR=s=>(t,e)=>{const i=s(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=t.createBuffer(1,2,44100);return i.buffer=a,i.loop=!0,i.connect(e),i.start(),()=>{i.stop(),i.disconnect(e)}},kR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},VR=(s,t,e,i,a,c,f)=>class extends s{constructor(m,_){const T=a(m),w={...kR,..._},C=i(T,w),I=c(T),O=I?e():null;super(m,!1,C,O),this._constantSourceNodeRenderer=O,this._nativeConstantSourceNode=C,this._offset=t(this,I,C.offset,Hs,pr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(m){const _=typeof m=="function"?f(this,m):null;this._nativeConstantSourceNode.onended=_;const T=this._nativeConstantSourceNode.onended;this._onended=T!==null&&T===_?m:T}start(m=0){if(this._nativeConstantSourceNode.start(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=m),this.context.state!=="closed"){Ud(this);const _=()=>{this._nativeConstantSourceNode.removeEventListener("ended",_),Ml(this)&&vg(this)};this._nativeConstantSourceNode.addEventListener("ended",_)}}stop(m=0){this._nativeConstantSourceNode.stop(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=m)}},jR=(s,t,e,i,a)=>()=>{const c=new WeakMap;let f=null,d=null;const m=async(_,T)=>{let w=e(_);const C=ws(w,T);if(!C){const I={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,offset:w.offset.value};w=t(T,I),f!==null&&w.start(f),d!==null&&w.stop(d)}return c.set(T,w),C?await s(T,_.offset,w.offset):await i(T,_.offset,w.offset),await a(_,T,w),w};return{set start(_){f=_},set stop(_){d=_},render(_,T){const w=c.get(T);return w!==void 0?Promise.resolve(w):m(_,T)}}},LR=s=>t=>(s[0]=t,s[0]),PR={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},UR=(s,t,e,i,a,c)=>class extends s{constructor(d,m){const _=i(d),T={...PR,...m},w=e(_,T),I=a(_)?t():null;super(d,!1,w,I),this._isBufferNullified=!1,this._nativeConvolverNode=w,T.buffer!==null&&c(this,T.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const m=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=m.createBuffer(1,1,m.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},zR=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!ws(d,f)){const _={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=s(f,_)}return i.set(f,d),Jd(d)?await e(c,f,d.inputs[0]):await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},BR=(s,t)=>(e,i,a)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,i,a)}catch(c){throw c.name==="SyntaxError"?s():c}},qR=()=>new DOMException("","DataCloneError"),Cb=s=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(i=>{const a=()=>{e.onmessage=null,t.close(),e.close(),i()};e.onmessage=()=>a();try{t.postMessage(s,[s])}catch{}finally{a()}})},FR=(s,t,e,i,a,c,f,d,m,_,T)=>(w,C)=>{const I=f(w)?w:c(w);if(a.has(C)){const O=e();return Promise.reject(O)}try{a.add(C)}catch{}return t(m,()=>m(I))?I.decodeAudioData(C).then(O=>(Cb(C).catch(()=>{}),t(d,()=>d(O))||T(O),s.add(O),O)):new Promise((O,k)=>{const D=async()=>{try{await Cb(C)}catch{}},z=X=>{k(X),D()};try{I.decodeAudioData(C,X=>{typeof X.copyFromChannel!="function"&&(_(X),xT(X)),s.add(X),D().then(()=>O(X))},X=>{z(X===null?i():X)})}catch(X){z(X)}})},HR=(s,t,e,i,a,c,f,d)=>(m,_)=>{const T=t.get(m);if(T===void 0)throw new Error("Missing the expected cycle count.");const w=c(m.context),C=d(w);if(T===_){if(t.delete(m),!C&&f(m)){const I=i(m),{outputs:O}=e(m);for(const k of O)if(wg(k)){const D=i(k[0]);s(I,D,k[1],k[2])}else{const D=a(k[0]);I.connect(D,k[1])}}}else t.set(m,T-_)},GR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},KR=(s,t,e,i,a,c,f)=>class extends s{constructor(m,_){const T=a(m),w={...GR,..._},C=i(T,w),I=c(T),O=I?e(w.maxDelayTime):null;super(m,!1,C,O),this._delayTime=t(this,I,C.delayTime),f(this,w.maxDelayTime)}get delayTime(){return this._delayTime}},WR=(s,t,e,i,a)=>c=>{const f=new WeakMap,d=async(m,_)=>{let T=e(m);const w=ws(T,_);if(!w){const C={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,delayTime:T.delayTime.value,maxDelayTime:c};T=t(_,C)}return f.set(_,T),w?await s(_,m.delayTime,T.delayTime):await i(_,m.delayTime,T.delayTime),await a(m,_,T),T};return{render(m,_){const T=f.get(_);return T!==void 0?Promise.resolve(T):d(m,_)}}},$R=s=>(t,e,i,a)=>s(t[a],c=>c[0]===e&&c[1]===i),YR=s=>(t,e)=>{s(t).delete(e)},QR=s=>"delayTime"in s,XR=(s,t,e)=>function i(a,c){const f=s0(c)?c:e(s,c);if(QR(f))return[];if(a[0]===f)return[a];if(a.includes(f))return[];const{outputs:d}=t(f);return Array.from(d).map(m=>i([...a,f],m[0])).reduce((m,_)=>m.concat(_),[])},Vy=(s,t,e)=>{const i=t[e];if(i===void 0)throw s();return i},ZR=s=>(t,e=void 0,i=void 0,a=0)=>e===void 0?t.forEach(c=>c.disconnect()):typeof e=="number"?Vy(s,t,e).disconnect():o0(e)?i===void 0?t.forEach(c=>c.disconnect(e)):a===void 0?Vy(s,t,i).disconnect(e,0):Vy(s,t,i).disconnect(e,0,a):i===void 0?t.forEach(c=>c.disconnect(e)):Vy(s,t,i).disconnect(e,0),JR={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},tN=(s,t,e,i,a,c,f,d)=>class extends s{constructor(_,T){const w=c(_),C={...JR,...T},I=i(w,C),O=f(w),k=O?e():null;super(_,!1,I,k),this._attack=t(this,O,I.attack),this._knee=t(this,O,I.knee),this._nativeDynamicsCompressorNode=I,this._ratio=t(this,O,I.ratio),this._release=t(this,O,I.release),this._threshold=t(this,O,I.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(_){const T=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=_,_>2)throw this._nativeDynamicsCompressorNode.channelCount=T,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(_){const T=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=_,_==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=T,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},eN=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,m)=>{let _=e(d);const T=ws(_,m);if(!T){const w={attack:_.attack.value,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,knee:_.knee.value,ratio:_.ratio.value,release:_.release.value,threshold:_.threshold.value};_=t(m,w)}return c.set(m,_),T?(await s(m,d.attack,_.attack),await s(m,d.knee,_.knee),await s(m,d.ratio,_.ratio),await s(m,d.release,_.release),await s(m,d.threshold,_.threshold)):(await i(m,d.attack,_.attack),await i(m,d.knee,_.knee),await i(m,d.ratio,_.ratio),await i(m,d.release,_.release),await i(m,d.threshold,_.threshold)),await a(d,m,_),_};return{render(d,m){const _=c.get(m);return _!==void 0?Promise.resolve(_):f(d,m)}}},nN=()=>new DOMException("","EncodingError"),iN=s=>t=>new Promise((e,i)=>{if(s===null){i(new SyntaxError);return}const a=s.document.head;if(a===null)i(new SyntaxError);else{const c=s.document.createElement("script"),f=new Blob([t],{type:"application/javascript"}),d=URL.createObjectURL(f),m=s.onerror,_=()=>{s.onerror=m,URL.revokeObjectURL(d)};s.onerror=(T,w,C,I,O)=>{if(w===d||w===s.location.href&&C===1&&I===1)return _(),i(O),!1;if(m!==null)return m(T,w,C,I,O)},c.onerror=()=>{_(),i(new SyntaxError)},c.onload=()=>{_(),e()},c.src=d,c.type="module",a.appendChild(c)}}),sN=s=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,i,a){if(i!==null){let c=this._listeners.get(i);c===void 0&&(c=s(this,i),typeof i=="function"&&this._listeners.set(i,c)),this._nativeEventTarget.addEventListener(e,c,a)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,i,a){const c=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(e,c===void 0?null:c,a)}},rN=s=>(t,e,i)=>{Object.defineProperties(s,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return i()}finally{s!==null&&(delete s.currentFrame,delete s.currentTime)}},aN=s=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw s()},oN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},lN=(s,t,e,i,a,c)=>class extends s{constructor(d,m){const _=a(d),T={...oN,...m},w=i(_,T),C=c(_),I=C?e():null;super(d,!1,w,I),this._gain=t(this,C,w.gain,Hs,pr)}get gain(){return this._gain}},cN=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,m)=>{let _=e(d);const T=ws(_,m);if(!T){const w={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:_.gain.value};_=t(m,w)}return c.set(m,_),T?await s(m,d.gain,_.gain):await i(m,d.gain,_.gain),await a(d,m,_),_};return{render(d,m){const _=c.get(m);return _!==void 0?Promise.resolve(_):f(d,m)}}},uN=(s,t)=>e=>t(s,e),hN=s=>t=>{const e=s(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},fN=s=>t=>{var e;return(e=s.get(t))!==null&&e!==void 0?e:0},dN=s=>t=>{const e=s(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},pN=s=>t=>s.get(t),Ui=()=>new DOMException("","InvalidStateError"),mN=s=>t=>{const e=s.get(t);if(e===void 0)throw Ui();return e},gN=(s,t)=>e=>{let i=s.get(e);if(i!==void 0)return i;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),s.set(e,i),i},_N=s=>t=>{const e=s.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},O0=()=>new DOMException("","InvalidAccessError"),yN=s=>{s.getFrequencyResponse=(t=>(e,i,a)=>{if(e.length!==i.length||i.length!==a.length)throw O0();return t.call(s,e,i,a)})(s.getFrequencyResponse)},vN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},TN=(s,t,e,i,a,c)=>class extends s{constructor(d,m){const _=i(d),T=a(_),w={...vN,...m},C=t(_,T?null:d.baseLatency,w),I=T?e(w.feedback,w.feedforward):null;super(d,!1,C,I),yN(C),this._nativeIIRFilterNode=C,c(this,1)}getFrequencyResponse(d,m,_){return this._nativeIIRFilterNode.getFrequencyResponse(d,m,_)}},xA=(s,t,e,i,a,c,f,d,m,_,T)=>{const w=_.length;let C=d;for(let I=0;I<w;I+=1){let O=e[0]*_[I];for(let k=1;k<a;k+=1){const D=C-k&m-1;O+=e[k]*c[D],O-=s[k]*f[D]}for(let k=a;k<i;k+=1)O+=e[k]*c[C-k&m-1];for(let k=a;k<t;k+=1)O-=s[k]*f[C-k&m-1];c[C]=_[I],f[C]=O,C=C+1&m-1,T[I]=O}return C},wN=(s,t,e,i)=>{const a=e instanceof Float64Array?e:new Float64Array(e),c=i instanceof Float64Array?i:new Float64Array(i),f=a.length,d=c.length,m=Math.min(f,d);if(a[0]!==1){for(let O=0;O<f;O+=1)c[O]/=a[0];for(let O=1;O<d;O+=1)a[O]/=a[0]}const _=32,T=new Float32Array(_),w=new Float32Array(_),C=t.createBuffer(s.numberOfChannels,s.length,s.sampleRate),I=s.numberOfChannels;for(let O=0;O<I;O+=1){const k=s.getChannelData(O),D=C.getChannelData(O);T.fill(0),w.fill(0),xA(a,f,c,d,m,T,w,0,_,k,D)}return C},bN=(s,t,e,i,a)=>(c,f)=>{const d=new WeakMap;let m=null;const _=async(T,w)=>{let C=null,I=t(T);const O=ws(I,w);if(w.createIIRFilter===void 0?C=s(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):O||(I=w.createIIRFilter(f,c)),d.set(w,C===null?I:C),C!==null){if(m===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new e(T.context.destination.channelCount,T.context.length,w.sampleRate);m=(async()=>{await i(T,D,D.destination);const z=await a(D);return wN(z,w,c,f)})()}const k=await m;return C.buffer=k,C.start(0),C}return await i(T,w,I),I};return{render(T,w){const C=d.get(w);return C!==void 0?Promise.resolve(C):_(T,w)}}},SN=(s,t,e,i,a,c)=>f=>(d,m)=>{const _=s.get(d);if(_===void 0){if(!f&&c(d)){const T=i(d),{outputs:w}=e(d);for(const C of w)if(wg(C)){const I=i(C[0]);t(T,I,C[1],C[2])}else{const I=a(C[0]);T.disconnect(I,C[1])}}s.set(d,m)}else s.set(d,_+m)},AN=(s,t)=>e=>{const i=s.get(e);return t(i)||t(e)},EN=(s,t)=>e=>s.has(e)||t(e),CN=(s,t)=>e=>s.has(e)||t(e),xN=(s,t)=>e=>{const i=s.get(e);return t(i)||t(e)},RN=s=>t=>s!==null&&t instanceof s,NN=s=>t=>s!==null&&typeof s.AudioNode=="function"&&t instanceof s.AudioNode,IN=s=>t=>s!==null&&typeof s.AudioParam=="function"&&t instanceof s.AudioParam,ON=(s,t)=>e=>s(e)||t(e),DN=s=>t=>s!==null&&t instanceof s,MN=s=>s!==null&&s.isSecureContext,kN=(s,t,e,i)=>class extends s{constructor(c,f){const d=e(c),m=t(d,f);if(i(d))throw TypeError();super(c,!0,m,null),this._nativeMediaElementAudioSourceNode=m}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},VN={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},jN=(s,t,e,i)=>class extends s{constructor(c,f){const d=e(c);if(i(d))throw new TypeError;const m={...VN,...f},_=t(d,m);super(c,!1,_,null),this._nativeMediaStreamAudioDestinationNode=_}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},LN=(s,t,e,i)=>class extends s{constructor(c,f){const d=e(c),m=t(d,f);if(i(d))throw new TypeError;super(c,!0,m,null),this._nativeMediaStreamAudioSourceNode=m}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},PN=(s,t,e)=>class extends s{constructor(a,c){const f=e(a),d=t(f,c);super(a,!0,d,null)}},UN=(s,t,e,i,a,c)=>class extends e{constructor(d,m){super(d),this._nativeContext=d,N0.set(this,d),i(d)&&a.set(d,new Set),this._destination=new s(this,m),this._listener=t(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const m=typeof d=="function"?c(this,d):null;this._nativeContext.onstatechange=m;const _=this._nativeContext.onstatechange;this._onstatechange=_!==null&&_===m?d:_}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},lg=s=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=s.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},zN=(s,t)=>(e,i,a)=>{const c=new Set;return e.connect=(f=>(d,m=0,_=0)=>{const T=c.size===0;if(t(d))return f.call(e,d,m,_),s(c,[d,m,_],w=>w[0]===d&&w[1]===m&&w[2]===_,!0),T&&i(),d;f.call(e,d,m),s(c,[d,m],w=>w[0]===d&&w[1]===m,!0),T&&i()})(e.connect),e.disconnect=(f=>(d,m,_)=>{const T=c.size>0;if(d===void 0)f.apply(e),c.clear();else if(typeof d=="number"){f.call(e,d);for(const C of c)C[1]===d&&c.delete(C)}else{t(d)?f.call(e,d,m,_):f.call(e,d,m);for(const C of c)C[0]===d&&(m===void 0||C[1]===m)&&(_===void 0||C[2]===_)&&c.delete(C)}const w=c.size===0;T&&w&&a()})(e.disconnect),e},Hn=(s,t,e)=>{const i=t[e];i!==void 0&&i!==s[e]&&(s[e]=i)},Oi=(s,t)=>{Hn(s,t,"channelCount"),Hn(s,t,"channelCountMode"),Hn(s,t,"channelInterpretation")},xb=s=>typeof s.getFloatTimeDomainData=="function",BN=s=>{s.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);s.getByteTimeDomainData(e);const i=Math.max(e.length,s.fftSize);for(let a=0;a<i;a+=1)t[a]=(e[a]-128)*.0078125;return t}},qN=(s,t)=>(e,i)=>{const a=e.createAnalyser();if(Oi(a,i),!(i.maxDecibels>i.minDecibels))throw t();return Hn(a,i,"fftSize"),Hn(a,i,"maxDecibels"),Hn(a,i,"minDecibels"),Hn(a,i,"smoothingTimeConstant"),s(xb,()=>xb(a))||BN(a),a},FN=s=>s===null?null:s.hasOwnProperty("AudioBuffer")?s.AudioBuffer:null,ii=(s,t,e)=>{const i=t[e];i!==void 0&&i!==s[e].value&&(s[e].value=i)},HN=s=>{s.start=(t=>{let e=!1;return(i=0,a=0,c)=>{if(e)throw Ui();t.call(s,i,a,c),e=!0}})(s.start)},IT=s=>{s.start=(t=>(e=0,i=0,a)=>{if(typeof a=="number"&&a<0||i<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(s,e,i,a)})(s.start)},OT=s=>{s.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(s,e)})(s.stop)},GN=(s,t,e,i,a,c,f,d,m,_,T)=>(w,C)=>{const I=w.createBufferSource();return Oi(I,C),ii(I,C,"playbackRate"),Hn(I,C,"buffer"),Hn(I,C,"loop"),Hn(I,C,"loopEnd"),Hn(I,C,"loopStart"),t(e,()=>e(w))||HN(I),t(i,()=>i(w))||m(I),t(a,()=>a(w))||_(I,w),t(c,()=>c(w))||IT(I),t(f,()=>f(w))||T(I,w),t(d,()=>d(w))||OT(I),s(w,I),I},KN=s=>s===null?null:s.hasOwnProperty("AudioContext")?s.AudioContext:s.hasOwnProperty("webkitAudioContext")?s.webkitAudioContext:null,WN=(s,t)=>(e,i,a)=>{const c=e.destination;if(c.channelCount!==i)try{c.channelCount=i}catch{}a&&c.channelCountMode!=="explicit"&&(c.channelCountMode="explicit"),c.maxChannelCount===0&&Object.defineProperty(c,"maxChannelCount",{value:i});const f=s(e,{channelCount:i,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(f,"channelCount",d=>()=>d.call(f),d=>m=>{d.call(f,m);try{c.channelCount=m}catch(_){if(m>c.maxChannelCount)throw _}}),t(f,"channelCountMode",d=>()=>d.call(f),d=>m=>{d.call(f,m),c.channelCountMode=m}),t(f,"channelInterpretation",d=>()=>d.call(f),d=>m=>{d.call(f,m),c.channelInterpretation=m}),Object.defineProperty(f,"maxChannelCount",{get:()=>c.maxChannelCount}),f.connect(c),f},$N=s=>s===null?null:s.hasOwnProperty("AudioWorkletNode")?s.AudioWorkletNode:null,YN=s=>{const{port1:t}=new MessageChannel;try{t.postMessage(s)}finally{t.close()}},QN=(s,t,e,i,a)=>(c,f,d,m,_,T)=>{if(d!==null)try{const w=new d(c,m,T),C=new Map;let I=null;if(Object.defineProperties(w,{channelCount:{get:()=>T.channelCount,set:()=>{throw s()}},channelCountMode:{get:()=>"explicit",set:()=>{throw s()}},onprocessorerror:{get:()=>I,set:O=>{typeof I=="function"&&w.removeEventListener("processorerror",I),I=typeof O=="function"?O:null,typeof I=="function"&&w.addEventListener("processorerror",I)}}}),w.addEventListener=(O=>(...k)=>{if(k[0]==="processorerror"){const D=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(D!==null){const z=C.get(k[1]);z!==void 0?k[1]=z:(k[1]=X=>{X.type==="error"?(Object.defineProperties(X,{type:{value:"processorerror"}}),D(X)):D(new ErrorEvent(k[0],{...X}))},C.set(D,k[1]))}}return O.call(w,"error",k[1],k[2]),O.call(w,...k)})(w.addEventListener),w.removeEventListener=(O=>(...k)=>{if(k[0]==="processorerror"){const D=C.get(k[1]);D!==void 0&&(C.delete(k[1]),k[1]=D)}return O.call(w,"error",k[1],k[2]),O.call(w,k[0],k[1],k[2])})(w.removeEventListener),T.numberOfOutputs!==0){const O=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return w.connect(O).connect(c.destination),a(w,()=>O.disconnect(),()=>O.connect(c.destination))}return w}catch(w){throw w.code===11?i():w}if(_===void 0)throw i();return YN(T),t(c,f,_,T)},RA=(s,t)=>s===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(s*t))))),XN=s=>new Promise((t,e)=>{const{port1:i,port2:a}=new MessageChannel;i.onmessage=({data:c})=>{i.close(),a.close(),t(c)},i.onmessageerror=({data:c})=>{i.close(),a.close(),e(c)},a.postMessage(s)}),ZN=async(s,t)=>{const e=await XN(t);return new s(e)},JN=(s,t,e,i)=>{let a=K1.get(s);a===void 0&&(a=new WeakMap,K1.set(s,a));const c=ZN(e,i);return a.set(t,c),c},tI=(s,t,e,i,a,c,f,d,m,_,T,w,C)=>(I,O,k,D)=>{if(D.numberOfInputs===0&&D.numberOfOutputs===0)throw m();const z=Array.isArray(D.outputChannelCount)?D.outputChannelCount:Array.from(D.outputChannelCount);if(z.some(gt=>gt<1))throw m();if(z.length!==D.numberOfOutputs)throw t();if(D.channelCountMode!=="explicit")throw m();const X=D.channelCount*D.numberOfInputs,Y=z.reduce((gt,Lt)=>gt+Lt,0),it=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length;if(X+it>6||Y>6)throw m();const K=new MessageChannel,W=[],R=[];for(let gt=0;gt<D.numberOfInputs;gt+=1)W.push(f(I,{channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,gain:1})),R.push(a(I,{channelCount:D.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:D.channelCount}));const E=[];if(k.parameterDescriptors!==void 0)for(const{defaultValue:gt,maxValue:Lt,minValue:$t,name:Pt}of k.parameterDescriptors){const Ot=c(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D.parameterData[Pt]!==void 0?D.parameterData[Pt]:gt===void 0?0:gt});Object.defineProperties(Ot.offset,{defaultValue:{get:()=>gt===void 0?0:gt},maxValue:{get:()=>Lt===void 0?Hs:Lt},minValue:{get:()=>$t===void 0?pr:$t}}),E.push(Ot)}const M=i(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,X+it)}),B=RA(O,I.sampleRate),P=d(I,B,X+it,Math.max(1,Y)),F=a(I,{channelCount:Math.max(1,Y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Y)}),U=[];for(let gt=0;gt<D.numberOfOutputs;gt+=1)U.push(i(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:z[gt]}));for(let gt=0;gt<D.numberOfInputs;gt+=1){W[gt].connect(R[gt]);for(let Lt=0;Lt<D.channelCount;Lt+=1)R[gt].connect(M,Lt,gt*D.channelCount+Lt)}const vt=new EA(k.parameterDescriptors===void 0?[]:k.parameterDescriptors.map(({name:gt},Lt)=>{const $t=E[Lt];return $t.connect(M,0,X+Lt),$t.start(0),[gt,$t.offset]}));M.connect(P);let Rt=D.channelInterpretation,Z=null;const nt=D.numberOfOutputs===0?[P]:U,Tt={get bufferSize(){return B},get channelCount(){return D.channelCount},set channelCount(gt){throw e()},get channelCountMode(){return D.channelCountMode},set channelCountMode(gt){throw e()},get channelInterpretation(){return Rt},set channelInterpretation(gt){for(const Lt of W)Lt.channelInterpretation=gt;Rt=gt},get context(){return P.context},get inputs(){return W},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get onprocessorerror(){return Z},set onprocessorerror(gt){typeof Z=="function"&&Tt.removeEventListener("processorerror",Z),Z=typeof gt=="function"?gt:null,typeof Z=="function"&&Tt.addEventListener("processorerror",Z)},get parameters(){return vt},get port(){return K.port2},addEventListener(...gt){return P.addEventListener(gt[0],gt[1],gt[2])},connect:s.bind(null,nt),disconnect:_.bind(null,nt),dispatchEvent(...gt){return P.dispatchEvent(gt[0])},removeEventListener(...gt){return P.removeEventListener(gt[0],gt[1],gt[2])}},dt=new Map;K.port1.addEventListener=(gt=>(...Lt)=>{if(Lt[0]==="message"){const $t=typeof Lt[1]=="function"?Lt[1]:typeof Lt[1]=="object"&&Lt[1]!==null&&typeof Lt[1].handleEvent=="function"?Lt[1].handleEvent:null;if($t!==null){const Pt=dt.get(Lt[1]);Pt!==void 0?Lt[1]=Pt:(Lt[1]=Ot=>{T(I.currentTime,I.sampleRate,()=>$t(Ot))},dt.set($t,Lt[1]))}}return gt.call(K.port1,Lt[0],Lt[1],Lt[2])})(K.port1.addEventListener),K.port1.removeEventListener=(gt=>(...Lt)=>{if(Lt[0]==="message"){const $t=dt.get(Lt[1]);$t!==void 0&&(dt.delete(Lt[1]),Lt[1]=$t)}return gt.call(K.port1,Lt[0],Lt[1],Lt[2])})(K.port1.removeEventListener);let pt=null;Object.defineProperty(K.port1,"onmessage",{get:()=>pt,set:gt=>{typeof pt=="function"&&K.port1.removeEventListener("message",pt),pt=typeof gt=="function"?gt:null,typeof pt=="function"&&(K.port1.addEventListener("message",pt),K.port1.start())}}),k.prototype.port=K.port1;let G=null;JN(I,Tt,k,D).then(gt=>G=gt);const St=c0(D.numberOfInputs,D.channelCount),Dt=c0(D.numberOfOutputs,z),Nt=k.parameterDescriptors===void 0?[]:k.parameterDescriptors.reduce((gt,{name:Lt})=>({...gt,[Lt]:new Float32Array(128)}),{});let jt=!0;const Ft=()=>{D.numberOfOutputs>0&&P.disconnect(F);for(let gt=0,Lt=0;gt<D.numberOfOutputs;gt+=1){const $t=U[gt];for(let Pt=0;Pt<z[gt];Pt+=1)F.disconnect($t,Lt+Pt,Pt);Lt+=z[gt]}},kt=new Map;P.onaudioprocess=({inputBuffer:gt,outputBuffer:Lt})=>{if(G!==null){const $t=w(Tt);for(let Pt=0;Pt<B;Pt+=128){for(let Ot=0;Ot<D.numberOfInputs;Ot+=1)for(let Ut=0;Ut<D.channelCount;Ut+=1)l0(gt,St[Ot],Ut,Ut,Pt);k.parameterDescriptors!==void 0&&k.parameterDescriptors.forEach(({name:Ot},Ut)=>{l0(gt,Nt,Ot,X+Ut,Pt)});for(let Ot=0;Ot<D.numberOfInputs;Ot+=1)for(let Ut=0;Ut<z[Ot];Ut+=1)Dt[Ot][Ut].byteLength===0&&(Dt[Ot][Ut]=new Float32Array(128));try{const Ot=St.map((ne,ae)=>{if($t[ae].size>0)return kt.set(ae,B/128),ne;const fn=kt.get(ae);return fn===void 0?[]:(ne.every(Rn=>Rn.every(Qr=>Qr===0))&&(fn===1?kt.delete(ae):kt.set(ae,fn-1)),ne)});jt=T(I.currentTime+Pt/I.sampleRate,I.sampleRate,()=>G.process(Ot,Dt,Nt));for(let ne=0,ae=0;ne<D.numberOfOutputs;ne+=1){for(let en=0;en<z[ne];en+=1)CA(Lt,Dt[ne],en,ae+en,Pt);ae+=z[ne]}}catch(Ot){jt=!1,Tt.dispatchEvent(new ErrorEvent("processorerror",{colno:Ot.colno,filename:Ot.filename,lineno:Ot.lineno,message:Ot.message}))}if(!jt){for(let Ot=0;Ot<D.numberOfInputs;Ot+=1){W[Ot].disconnect(R[Ot]);for(let Ut=0;Ut<D.channelCount;Ut+=1)R[Pt].disconnect(M,Ut,Ot*D.channelCount+Ut)}if(k.parameterDescriptors!==void 0){const Ot=k.parameterDescriptors.length;for(let Ut=0;Ut<Ot;Ut+=1){const ne=E[Ut];ne.disconnect(M,0,X+Ut),ne.stop()}}M.disconnect(P),P.onaudioprocess=null,te?Ft():he();break}}}};let te=!1;const Ae=f(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ye=()=>P.connect(Ae).connect(I.destination),he=()=>{P.disconnect(Ae),Ae.disconnect()},gn=()=>{if(jt){he(),D.numberOfOutputs>0&&P.connect(F);for(let gt=0,Lt=0;gt<D.numberOfOutputs;gt+=1){const $t=U[gt];for(let Pt=0;Pt<z[gt];Pt+=1)F.connect($t,Lt+Pt,Pt);Lt+=z[gt]}}te=!0},Re=()=>{jt&&(Ye(),Ft()),te=!1};return Ye(),C(Tt,gn,Re)},NA=(s,t)=>{const e=s.createBiquadFilter();return Oi(e,t),ii(e,t,"Q"),ii(e,t,"detune"),ii(e,t,"frequency"),ii(e,t,"gain"),Hn(e,t,"type"),e},eI=(s,t)=>(e,i)=>{const a=e.createChannelMerger(i.numberOfInputs);return s!==null&&s.name==="webkitAudioContext"&&t(e,a),Oi(a,i),a},nI=s=>{const t=s.numberOfOutputs;Object.defineProperty(s,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Ui()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Ui()}}),Object.defineProperty(s,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Ui()}})},bg=(s,t)=>{const e=s.createChannelSplitter(t.numberOfOutputs);return Oi(e,t),nI(e),e},iI=(s,t,e,i,a)=>(c,f)=>{if(c.createConstantSource===void 0)return e(c,f);const d=c.createConstantSource();return Oi(d,f),ii(d,f,"offset"),t(i,()=>i(c))||IT(d),t(a,()=>a(c))||OT(d),s(c,d),d},tp=(s,t)=>(s.connect=t.connect.bind(t),s.disconnect=t.disconnect.bind(t),s),sI=(s,t,e,i)=>(a,{offset:c,...f})=>{const d=a.createBuffer(1,2,44100),m=t(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),_=e(a,{...f,gain:c}),T=d.getChannelData(0);T[0]=1,T[1]=1,m.buffer=d,m.loop=!0;const w={get bufferSize(){},get channelCount(){return _.channelCount},set channelCount(O){_.channelCount=O},get channelCountMode(){return _.channelCountMode},set channelCountMode(O){_.channelCountMode=O},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(O){_.channelInterpretation=O},get context(){return _.context},get inputs(){return[]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get offset(){return _.gain},get onended(){return m.onended},set onended(O){m.onended=O},addEventListener(...O){return m.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return m.dispatchEvent(O[0])},removeEventListener(...O){return m.removeEventListener(O[0],O[1],O[2])},start(O=0){m.start.call(m,O)},stop(O=0){m.stop.call(m,O)}},C=()=>m.connect(_),I=()=>m.disconnect(_);return s(a,m),i(tp(w,_),C,I)},rI=(s,t)=>(e,i)=>{const a=e.createConvolver();if(Oi(a,i),i.disableNormalization===a.normalize&&(a.normalize=!i.disableNormalization),Hn(a,i,"buffer"),i.channelCount>2||(t(a,"channelCount",c=>()=>c.call(a),c=>f=>{if(f>2)throw s();return c.call(a,f)}),i.channelCountMode==="max"))throw s();return t(a,"channelCountMode",c=>()=>c.call(a),c=>f=>{if(f==="max")throw s();return c.call(a,f)}),a},IA=(s,t)=>{const e=s.createDelay(t.maxDelayTime);return Oi(e,t),ii(e,t,"delayTime"),e},aI=s=>(t,e)=>{const i=t.createDynamicsCompressor();if(Oi(i,e),e.channelCount>2||e.channelCountMode==="max")throw s();return ii(i,e,"attack"),ii(i,e,"knee"),ii(i,e,"ratio"),ii(i,e,"release"),ii(i,e,"threshold"),i},yr=(s,t)=>{const e=s.createGain();return Oi(e,t),ii(e,t,"gain"),e},oI=s=>(t,e,i)=>{if(t.createIIRFilter===void 0)return s(t,e,i);const a=t.createIIRFilter(i.feedforward,i.feedback);return Oi(a,i),a};function lI(s,t){const e=t[0]*t[0]+t[1]*t[1];return[(s[0]*t[0]+s[1]*t[1])/e,(s[1]*t[0]-s[0]*t[1])/e]}function cI(s,t){return[s[0]*t[0]-s[1]*t[1],s[0]*t[1]+s[1]*t[0]]}function Rb(s,t){let e=[0,0];for(let i=s.length-1;i>=0;i-=1)e=cI(e,t),e[0]+=s[i];return e}const uI=(s,t,e,i)=>(a,c,{channelCount:f,channelCountMode:d,channelInterpretation:m,feedback:_,feedforward:T})=>{const w=RA(c,a.sampleRate),C=_ instanceof Float64Array?_:new Float64Array(_),I=T instanceof Float64Array?T:new Float64Array(T),O=C.length,k=I.length,D=Math.min(O,k);if(O===0||O>20)throw i();if(C[0]===0)throw t();if(k===0||k>20)throw i();if(I[0]===0)throw t();if(C[0]!==1){for(let E=0;E<k;E+=1)I[E]/=C[0];for(let E=1;E<O;E+=1)C[E]/=C[0]}const z=e(a,w,f,f);z.channelCount=f,z.channelCountMode=d,z.channelInterpretation=m;const X=32,Y=[],it=[],K=[];for(let E=0;E<f;E+=1){Y.push(0);const M=new Float32Array(X),B=new Float32Array(X);M.fill(0),B.fill(0),it.push(M),K.push(B)}z.onaudioprocess=E=>{const M=E.inputBuffer,B=E.outputBuffer,P=M.numberOfChannels;for(let F=0;F<P;F+=1){const U=M.getChannelData(F),vt=B.getChannelData(F);Y[F]=xA(C,O,I,k,D,it[F],K[F],Y[F],X,U,vt)}};const W=a.sampleRate/2;return tp({get bufferSize(){return w},get channelCount(){return z.channelCount},set channelCount(E){z.channelCount=E},get channelCountMode(){return z.channelCountMode},set channelCountMode(E){z.channelCountMode=E},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(E){z.channelInterpretation=E},get context(){return z.context},get inputs(){return[z]},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},addEventListener(...E){return z.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return z.dispatchEvent(E[0])},getFrequencyResponse(E,M,B){if(E.length!==M.length||M.length!==B.length)throw s();const P=E.length;for(let F=0;F<P;F+=1){const U=-Math.PI*(E[F]/W),vt=[Math.cos(U),Math.sin(U)],Rt=Rb(I,vt),Z=Rb(C,vt),nt=lI(Rt,Z);M[F]=Math.sqrt(nt[0]*nt[0]+nt[1]*nt[1]),B[F]=Math.atan2(nt[1],nt[0])}},removeEventListener(...E){return z.removeEventListener(E[0],E[1],E[2])}},z)},hI=(s,t)=>s.createMediaElementSource(t.mediaElement),fI=(s,t)=>{const e=s.createMediaStreamDestination();return Oi(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},dI=(s,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((c,f)=>c.id<f.id?-1:c.id>f.id?1:0);const i=e.slice(0,1),a=s.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(a,"mediaStream",{value:t}),a},pI=(s,t)=>(e,{mediaStreamTrack:i})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(i);const a=new MediaStream([i]),c=e.createMediaStreamSource(a);if(i.kind!=="audio")throw s();if(t(e))throw new TypeError;return c},mI=s=>s===null?null:s.hasOwnProperty("OfflineAudioContext")?s.OfflineAudioContext:s.hasOwnProperty("webkitOfflineAudioContext")?s.webkitOfflineAudioContext:null,gI=(s,t,e,i,a,c)=>(f,d)=>{const m=f.createOscillator();return Oi(m,d),ii(m,d,"detune"),ii(m,d,"frequency"),d.periodicWave!==void 0?m.setPeriodicWave(d.periodicWave):Hn(m,d,"type"),t(e,()=>e(f))||IT(m),t(i,()=>i(f))||c(m,f),t(a,()=>a(f))||OT(m),s(f,m),m},_I=s=>(t,e)=>{const i=t.createPanner();return i.orientationX===void 0?s(t,e):(Oi(i,e),ii(i,e,"orientationX"),ii(i,e,"orientationY"),ii(i,e,"orientationZ"),ii(i,e,"positionX"),ii(i,e,"positionY"),ii(i,e,"positionZ"),Hn(i,e,"coneInnerAngle"),Hn(i,e,"coneOuterAngle"),Hn(i,e,"coneOuterGain"),Hn(i,e,"distanceModel"),Hn(i,e,"maxDistance"),Hn(i,e,"panningModel"),Hn(i,e,"refDistance"),Hn(i,e,"rolloffFactor"),i)},yI=(s,t,e,i,a,c,f,d,m,_)=>(T,{coneInnerAngle:w,coneOuterAngle:C,coneOuterGain:I,distanceModel:O,maxDistance:k,orientationX:D,orientationY:z,orientationZ:X,panningModel:Y,positionX:it,positionY:K,positionZ:W,refDistance:R,rolloffFactor:E,...M})=>{const B=T.createPanner();if(M.channelCount>2||M.channelCountMode==="max")throw f();Oi(B,M);const P={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=e(T,{...P,channelInterpretation:"speakers",numberOfInputs:6}),U=i(T,{...M,gain:1}),vt=i(T,{...P,gain:1}),Rt=i(T,{...P,gain:0}),Z=i(T,{...P,gain:0}),nt=i(T,{...P,gain:0}),Tt=i(T,{...P,gain:0}),dt=i(T,{...P,gain:0}),pt=a(T,256,6,1),G=c(T,{...P,curve:new Float32Array([1,1]),oversample:"none"});let at=[D,z,X],St=[it,K,W];const Dt=new Float32Array(1);pt.onaudioprocess=({inputBuffer:kt})=>{const te=[m(kt,Dt,0),m(kt,Dt,1),m(kt,Dt,2)];te.some((Ye,he)=>Ye!==at[he])&&(B.setOrientation(...te),at=te);const Ae=[m(kt,Dt,3),m(kt,Dt,4),m(kt,Dt,5)];Ae.some((Ye,he)=>Ye!==St[he])&&(B.setPosition(...Ae),St=Ae)},Object.defineProperty(Rt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(nt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Tt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(dt.gain,"defaultValue",{get:()=>0});const Nt={get bufferSize(){},get channelCount(){return B.channelCount},set channelCount(kt){if(kt>2)throw f();U.channelCount=kt,B.channelCount=kt},get channelCountMode(){return B.channelCountMode},set channelCountMode(kt){if(kt==="max")throw f();U.channelCountMode=kt,B.channelCountMode=kt},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(kt){U.channelInterpretation=kt,B.channelInterpretation=kt},get coneInnerAngle(){return B.coneInnerAngle},set coneInnerAngle(kt){B.coneInnerAngle=kt},get coneOuterAngle(){return B.coneOuterAngle},set coneOuterAngle(kt){B.coneOuterAngle=kt},get coneOuterGain(){return B.coneOuterGain},set coneOuterGain(kt){if(kt<0||kt>1)throw t();B.coneOuterGain=kt},get context(){return B.context},get distanceModel(){return B.distanceModel},set distanceModel(kt){B.distanceModel=kt},get inputs(){return[U]},get maxDistance(){return B.maxDistance},set maxDistance(kt){if(kt<0)throw new RangeError;B.maxDistance=kt},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},get orientationX(){return vt.gain},get orientationY(){return Rt.gain},get orientationZ(){return Z.gain},get panningModel(){return B.panningModel},set panningModel(kt){B.panningModel=kt},get positionX(){return nt.gain},get positionY(){return Tt.gain},get positionZ(){return dt.gain},get refDistance(){return B.refDistance},set refDistance(kt){if(kt<0)throw new RangeError;B.refDistance=kt},get rolloffFactor(){return B.rolloffFactor},set rolloffFactor(kt){if(kt<0)throw new RangeError;B.rolloffFactor=kt},addEventListener(...kt){return U.addEventListener(kt[0],kt[1],kt[2])},dispatchEvent(...kt){return U.dispatchEvent(kt[0])},removeEventListener(...kt){return U.removeEventListener(kt[0],kt[1],kt[2])}};w!==Nt.coneInnerAngle&&(Nt.coneInnerAngle=w),C!==Nt.coneOuterAngle&&(Nt.coneOuterAngle=C),I!==Nt.coneOuterGain&&(Nt.coneOuterGain=I),O!==Nt.distanceModel&&(Nt.distanceModel=O),k!==Nt.maxDistance&&(Nt.maxDistance=k),D!==Nt.orientationX.value&&(Nt.orientationX.value=D),z!==Nt.orientationY.value&&(Nt.orientationY.value=z),X!==Nt.orientationZ.value&&(Nt.orientationZ.value=X),Y!==Nt.panningModel&&(Nt.panningModel=Y),it!==Nt.positionX.value&&(Nt.positionX.value=it),K!==Nt.positionY.value&&(Nt.positionY.value=K),W!==Nt.positionZ.value&&(Nt.positionZ.value=W),R!==Nt.refDistance&&(Nt.refDistance=R),E!==Nt.rolloffFactor&&(Nt.rolloffFactor=E),(at[0]!==1||at[1]!==0||at[2]!==0)&&B.setOrientation(...at),(St[0]!==0||St[1]!==0||St[2]!==0)&&B.setPosition(...St);const jt=()=>{U.connect(B),s(U,G,0,0),G.connect(vt).connect(F,0,0),G.connect(Rt).connect(F,0,1),G.connect(Z).connect(F,0,2),G.connect(nt).connect(F,0,3),G.connect(Tt).connect(F,0,4),G.connect(dt).connect(F,0,5),F.connect(pt).connect(T.destination)},Ft=()=>{U.disconnect(B),d(U,G,0,0),G.disconnect(vt),vt.disconnect(F),G.disconnect(Rt),Rt.disconnect(F),G.disconnect(Z),Z.disconnect(F),G.disconnect(nt),nt.disconnect(F),G.disconnect(Tt),Tt.disconnect(F),G.disconnect(dt),dt.disconnect(F),F.disconnect(pt),pt.disconnect(T.destination)};return _(tp(Nt,B),jt,Ft)},vI=s=>(t,{disableNormalization:e,imag:i,real:a})=>{const c=i instanceof Float32Array?i:new Float32Array(i),f=a instanceof Float32Array?a:new Float32Array(a),d=t.createPeriodicWave(f,c,{disableNormalization:e});if(Array.from(i).length<2)throw s();return d},Sg=(s,t,e,i)=>s.createScriptProcessor(t,e,i),TI=(s,t)=>(e,i)=>{const a=i.channelCountMode;if(a==="clamped-max")throw t();if(e.createStereoPanner===void 0)return s(e,i);const c=e.createStereoPanner();return Oi(c,i),ii(c,i,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>a,set:f=>{if(f!==a)throw t()}}),c},wI=(s,t,e,i,a,c)=>{const d=new Float32Array([1,1]),m=Math.PI/2,_={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},T={..._,oversample:"none"},w=(O,k,D,z)=>{const X=new Float32Array(16385),Y=new Float32Array(16385);for(let M=0;M<16385;M+=1){const B=M/16384*m;X[M]=Math.cos(B),Y[M]=Math.sin(B)}const it=e(O,{..._,gain:0}),K=i(O,{...T,curve:X}),W=i(O,{...T,curve:d}),R=e(O,{..._,gain:0}),E=i(O,{...T,curve:Y});return{connectGraph(){k.connect(it),k.connect(W.inputs===void 0?W:W.inputs[0]),k.connect(R),W.connect(D),D.connect(K.inputs===void 0?K:K.inputs[0]),D.connect(E.inputs===void 0?E:E.inputs[0]),K.connect(it.gain),E.connect(R.gain),it.connect(z,0,0),R.connect(z,0,1)},disconnectGraph(){k.disconnect(it),k.disconnect(W.inputs===void 0?W:W.inputs[0]),k.disconnect(R),W.disconnect(D),D.disconnect(K.inputs===void 0?K:K.inputs[0]),D.disconnect(E.inputs===void 0?E:E.inputs[0]),K.disconnect(it.gain),E.disconnect(R.gain),it.disconnect(z,0,0),R.disconnect(z,0,1)}}},C=(O,k,D,z)=>{const X=new Float32Array(16385),Y=new Float32Array(16385),it=new Float32Array(16385),K=new Float32Array(16385),W=Math.floor(16385/2);for(let nt=0;nt<16385;nt+=1)if(nt>W){const Tt=(nt-W)/(16384-W)*m;X[nt]=Math.cos(Tt),Y[nt]=Math.sin(Tt),it[nt]=0,K[nt]=1}else{const Tt=nt/(16384-W)*m;X[nt]=1,Y[nt]=0,it[nt]=Math.cos(Tt),K[nt]=Math.sin(Tt)}const R=t(O,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),E=e(O,{..._,gain:0}),M=i(O,{...T,curve:X}),B=e(O,{..._,gain:0}),P=i(O,{...T,curve:Y}),F=i(O,{...T,curve:d}),U=e(O,{..._,gain:0}),vt=i(O,{...T,curve:it}),Rt=e(O,{..._,gain:0}),Z=i(O,{...T,curve:K});return{connectGraph(){k.connect(R),k.connect(F.inputs===void 0?F:F.inputs[0]),R.connect(E,0),R.connect(B,0),R.connect(U,1),R.connect(Rt,1),F.connect(D),D.connect(M.inputs===void 0?M:M.inputs[0]),D.connect(P.inputs===void 0?P:P.inputs[0]),D.connect(vt.inputs===void 0?vt:vt.inputs[0]),D.connect(Z.inputs===void 0?Z:Z.inputs[0]),M.connect(E.gain),P.connect(B.gain),vt.connect(U.gain),Z.connect(Rt.gain),E.connect(z,0,0),U.connect(z,0,0),B.connect(z,0,1),Rt.connect(z,0,1)},disconnectGraph(){k.disconnect(R),k.disconnect(F.inputs===void 0?F:F.inputs[0]),R.disconnect(E,0),R.disconnect(B,0),R.disconnect(U,1),R.disconnect(Rt,1),F.disconnect(D),D.disconnect(M.inputs===void 0?M:M.inputs[0]),D.disconnect(P.inputs===void 0?P:P.inputs[0]),D.disconnect(vt.inputs===void 0?vt:vt.inputs[0]),D.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),M.disconnect(E.gain),P.disconnect(B.gain),vt.disconnect(U.gain),Z.disconnect(Rt.gain),E.disconnect(z,0,0),U.disconnect(z,0,0),B.disconnect(z,0,1),Rt.disconnect(z,0,1)}}},I=(O,k,D,z,X)=>{if(k===1)return w(O,D,z,X);if(k===2)return C(O,D,z,X);throw a()};return(O,{channelCount:k,channelCountMode:D,pan:z,...X})=>{if(D==="max")throw a();const Y=s(O,{...X,channelCount:1,channelCountMode:D,numberOfInputs:2}),it=e(O,{...X,channelCount:k,channelCountMode:D,gain:1}),K=e(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:z});let{connectGraph:W,disconnectGraph:R}=I(O,k,it,K,Y);Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"maxValue",{get:()=>1}),Object.defineProperty(K.gain,"minValue",{get:()=>-1});const E={get bufferSize(){},get channelCount(){return it.channelCount},set channelCount(F){it.channelCount!==F&&(M&&R(),{connectGraph:W,disconnectGraph:R}=I(O,F,it,K,Y),M&&W()),it.channelCount=F},get channelCountMode(){return it.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw a();it.channelCountMode=F},get channelInterpretation(){return it.channelInterpretation},set channelInterpretation(F){it.channelInterpretation=F},get context(){return it.context},get inputs(){return[it]},get numberOfInputs(){return it.numberOfInputs},get numberOfOutputs(){return it.numberOfOutputs},get pan(){return K.gain},addEventListener(...F){return it.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return it.dispatchEvent(F[0])},removeEventListener(...F){return it.removeEventListener(F[0],F[1],F[2])}};let M=!1;const B=()=>{W(),M=!0},P=()=>{R(),M=!1};return c(tp(E,Y),B,P)}},bI=(s,t,e,i,a,c,f)=>(d,m)=>{const _=d.createWaveShaper();if(c!==null&&c.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return e(d,m);Oi(_,m);const T=m.curve===null||m.curve instanceof Float32Array?m.curve:new Float32Array(m.curve);if(T!==null&&T.length<2)throw t();Hn(_,{curve:T},"curve"),Hn(_,m,"oversample");let w=null,C=!1;return f(_,"curve",k=>()=>k.call(_),k=>D=>(k.call(_,D),C&&(i(D)&&w===null?w=s(d,_):!i(D)&&w!==null&&(w(),w=null)),D)),a(_,()=>{C=!0,i(_.curve)&&(w=s(d,_))},()=>{C=!1,w!==null&&(w(),w=null)})},SI=(s,t,e,i,a)=>(c,{curve:f,oversample:d,...m})=>{const _=c.createWaveShaper(),T=c.createWaveShaper();Oi(_,m),Oi(T,m);const w=e(c,{...m,gain:1}),C=e(c,{...m,gain:-1}),I=e(c,{...m,gain:1}),O=e(c,{...m,gain:-1});let k=null,D=!1,z=null;const X={get bufferSize(){},get channelCount(){return _.channelCount},set channelCount(K){w.channelCount=K,C.channelCount=K,_.channelCount=K,I.channelCount=K,T.channelCount=K,O.channelCount=K},get channelCountMode(){return _.channelCountMode},set channelCountMode(K){w.channelCountMode=K,C.channelCountMode=K,_.channelCountMode=K,I.channelCountMode=K,T.channelCountMode=K,O.channelCountMode=K},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(K){w.channelInterpretation=K,C.channelInterpretation=K,_.channelInterpretation=K,I.channelInterpretation=K,T.channelInterpretation=K,O.channelInterpretation=K},get context(){return _.context},get curve(){return z},set curve(K){if(K!==null&&K.length<2)throw t();if(K===null)_.curve=K,T.curve=K;else{const W=K.length,R=new Float32Array(W+2-W%2),E=new Float32Array(W+2-W%2);R[0]=K[0],E[0]=-K[W-1];const M=Math.ceil((W+1)/2),B=(W+1)/2-1;for(let P=1;P<M;P+=1){const F=P/M*B,U=Math.floor(F),vt=Math.ceil(F);R[P]=U===vt?K[U]:(1-(F-U))*K[U]+(1-(vt-F))*K[vt],E[P]=U===vt?-K[W-1-U]:-((1-(F-U))*K[W-1-U])-(1-(vt-F))*K[W-1-vt]}R[M]=W%2===1?K[M-1]:(K[M-2]+K[M-1])/2,_.curve=R,T.curve=E}z=K,D&&(i(z)&&k===null?k=s(c,w):k!==null&&(k(),k=null))},get inputs(){return[w]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get oversample(){return _.oversample},set oversample(K){_.oversample=K,T.oversample=K},addEventListener(...K){return w.addEventListener(K[0],K[1],K[2])},dispatchEvent(...K){return w.dispatchEvent(K[0])},removeEventListener(...K){return w.removeEventListener(K[0],K[1],K[2])}};f!==null&&(X.curve=f instanceof Float32Array?f:new Float32Array(f)),d!==X.oversample&&(X.oversample=d);const Y=()=>{w.connect(_).connect(I),w.connect(C).connect(T).connect(O).connect(I),D=!0,i(z)&&(k=s(c,w))},it=()=>{w.disconnect(_),_.disconnect(I),w.disconnect(C),C.disconnect(T),T.disconnect(O),O.disconnect(I),D=!1,k!==null&&(k(),k=null)};return a(tp(X,I),Y,it)},Ws=()=>new DOMException("","NotSupportedError"),AI={numberOfChannels:1},EI=(s,t,e,i,a)=>class extends s{constructor(f,d,m){let _;if(typeof f=="number"&&d!==void 0&&m!==void 0)_={length:d,numberOfChannels:f,sampleRate:m};else if(typeof f=="object")_=f;else throw new Error("The given parameters are not valid.");const{length:T,numberOfChannels:w,sampleRate:C}={...AI,..._},I=i(w,T,C);t(lg,()=>lg(I))||I.addEventListener("statechange",(()=>{let O=0;const k=D=>{this._state==="running"&&(O>0?(I.removeEventListener("statechange",k),D.stopImmediatePropagation(),this._waitForThePromiseToSettle(D)):O+=1)};return k})()),super(I,w),this._length=T,this._nativeOfflineAudioContext=I,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,wA(this)}))}_waitForThePromiseToSettle(f){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(f):setTimeout(()=>this._waitForThePromiseToSettle(f))}},CI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},xI=(s,t,e,i,a,c,f)=>class extends s{constructor(m,_){const T=a(m),w={...CI,..._},C=e(T,w),I=c(T),O=I?i():null,k=m.sampleRate/2;super(m,!1,C,O),this._detune=t(this,I,C.detune,153600,-153600),this._frequency=t(this,I,C.frequency,k,-k),this._nativeOscillatorNode=C,this._onended=null,this._oscillatorNodeRenderer=O,this._oscillatorNodeRenderer!==null&&w.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=w.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(m){const _=typeof m=="function"?f(this,m):null;this._nativeOscillatorNode.onended=_;const T=this._nativeOscillatorNode.onended;this._onended=T!==null&&T===_?m:T}get type(){return this._nativeOscillatorNode.type}set type(m){this._nativeOscillatorNode.type=m,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(m){this._nativeOscillatorNode.setPeriodicWave(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=m)}start(m=0){if(this._nativeOscillatorNode.start(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=m),this.context.state!=="closed"){Ud(this);const _=()=>{this._nativeOscillatorNode.removeEventListener("ended",_),Ml(this)&&vg(this)};this._nativeOscillatorNode.addEventListener("ended",_)}}stop(m=0){this._nativeOscillatorNode.stop(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=m)}},RI=(s,t,e,i,a)=>()=>{const c=new WeakMap;let f=null,d=null,m=null;const _=async(T,w)=>{let C=e(T);const I=ws(C,w);if(!I){const O={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,detune:C.detune.value,frequency:C.frequency.value,periodicWave:f===null?void 0:f,type:C.type};C=t(w,O),d!==null&&C.start(d),m!==null&&C.stop(m)}return c.set(w,C),I?(await s(w,T.detune,C.detune),await s(w,T.frequency,C.frequency)):(await i(w,T.detune,C.detune),await i(w,T.frequency,C.frequency)),await a(T,w,C),C};return{set periodicWave(T){f=T},set start(T){d=T},set stop(T){m=T},render(T,w){const C=c.get(w);return C!==void 0?Promise.resolve(C):_(T,w)}}},NI={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},II=(s,t,e,i,a,c,f)=>class extends s{constructor(m,_){const T=a(m),w={...NI,..._},C=e(T,w),I=c(T),O=I?i():null;super(m,!1,C,O),this._nativePannerNode=C,this._orientationX=t(this,I,C.orientationX,Hs,pr),this._orientationY=t(this,I,C.orientationY,Hs,pr),this._orientationZ=t(this,I,C.orientationZ,Hs,pr),this._positionX=t(this,I,C.positionX,Hs,pr),this._positionY=t(this,I,C.positionY,Hs,pr),this._positionZ=t(this,I,C.positionZ,Hs,pr),f(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(m){this._nativePannerNode.coneInnerAngle=m}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(m){this._nativePannerNode.coneOuterAngle=m}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(m){this._nativePannerNode.coneOuterGain=m}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(m){this._nativePannerNode.distanceModel=m}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(m){this._nativePannerNode.maxDistance=m}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(m){this._nativePannerNode.panningModel=m}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(m){this._nativePannerNode.refDistance=m}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(m){this._nativePannerNode.rolloffFactor=m}},OI=(s,t,e,i,a,c,f,d,m,_)=>()=>{const T=new WeakMap;let w=null;const C=async(I,O)=>{let k=null,D=c(I);const z={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation},X={...z,coneInnerAngle:D.coneInnerAngle,coneOuterAngle:D.coneOuterAngle,coneOuterGain:D.coneOuterGain,distanceModel:D.distanceModel,maxDistance:D.maxDistance,panningModel:D.panningModel,refDistance:D.refDistance,rolloffFactor:D.rolloffFactor},Y=ws(D,O);if("bufferSize"in D)k=i(O,{...z,gain:1});else if(!Y){const it={...X,orientationX:D.orientationX.value,orientationY:D.orientationY.value,orientationZ:D.orientationZ.value,positionX:D.positionX.value,positionY:D.positionY.value,positionZ:D.positionZ.value};D=a(O,it)}if(T.set(O,k===null?D:k),k!==null){if(w===null){if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const P=new f(6,I.context.length,O.sampleRate),F=t(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});F.connect(P.destination),w=(async()=>{const U=await Promise.all([I.orientationX,I.orientationY,I.orientationZ,I.positionX,I.positionY,I.positionZ].map(async(vt,Rt)=>{const Z=e(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Rt===0?1:0});return await d(P,vt,Z.offset),Z}));for(let vt=0;vt<6;vt+=1)U[vt].connect(F,0,vt),U[vt].start(0);return _(P)})()}const it=await w,K=i(O,{...z,gain:1});await m(I,O,K);const W=[];for(let P=0;P<it.numberOfChannels;P+=1)W.push(it.getChannelData(P));let R=[W[0][0],W[1][0],W[2][0]],E=[W[3][0],W[4][0],W[5][0]],M=i(O,{...z,gain:1}),B=a(O,{...X,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:E[0],positionY:E[1],positionZ:E[2]});K.connect(M).connect(B.inputs[0]),B.connect(k);for(let P=128;P<it.length;P+=128){const F=[W[0][P],W[1][P],W[2][P]],U=[W[3][P],W[4][P],W[5][P]];if(F.some((vt,Rt)=>vt!==R[Rt])||U.some((vt,Rt)=>vt!==E[Rt])){R=F,E=U;const vt=P/O.sampleRate;M.gain.setValueAtTime(0,vt),M=i(O,{...z,gain:0}),B=a(O,{...X,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:E[0],positionY:E[1],positionZ:E[2]}),M.gain.setValueAtTime(1,vt),K.connect(M).connect(B.inputs[0]),B.connect(k)}}return k}return Y?(await s(O,I.orientationX,D.orientationX),await s(O,I.orientationY,D.orientationY),await s(O,I.orientationZ,D.orientationZ),await s(O,I.positionX,D.positionX),await s(O,I.positionY,D.positionY),await s(O,I.positionZ,D.positionZ)):(await d(O,I.orientationX,D.orientationX),await d(O,I.orientationY,D.orientationY),await d(O,I.orientationZ,D.orientationZ),await d(O,I.positionX,D.positionX),await d(O,I.positionY,D.positionY),await d(O,I.positionZ,D.positionZ)),Jd(D)?await m(I,O,D.inputs[0]):await m(I,O,D),D};return{render(I,O){const k=T.get(O);return k!==void 0?Promise.resolve(k):C(I,O)}}},DI={disableNormalization:!1},MI=(s,t,e,i)=>class OA{constructor(c,f){const d=t(c),m=i({...DI,...f}),_=s(d,m);return e.add(_),_}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===OA.prototype||e.has(c)}},kI=(s,t)=>(e,i,a)=>(s(i).replay(a),t(i,e,a)),VI=(s,t,e)=>async(i,a,c)=>{const f=s(i);await Promise.all(f.activeInputs.map((d,m)=>Array.from(d).map(async([_,T])=>{const C=await t(_).render(_,a),I=i.context.destination;!e(_)&&(i!==I||!e(i))&&C.connect(c,T,m)})).reduce((d,m)=>[...d,...m],[]))},jI=(s,t,e)=>async(i,a,c)=>{const f=t(i);await Promise.all(Array.from(f.activeInputs).map(async([d,m])=>{const T=await s(d).render(d,a);e(d)||T.connect(c,m)}))},LI=(s,t,e,i)=>a=>s(lg,()=>lg(a))?Promise.resolve(s(i,i)).then(c=>{if(!c){const f=e(a,512,0,1);a.oncomplete=()=>{f.onaudioprocess=null,f.disconnect()},f.onaudioprocess=()=>a.currentTime,f.connect(a.destination)}return a.startRendering()}):new Promise(c=>{const f=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=d=>{f.disconnect(),c(d.renderedBuffer)},f.connect(a.destination),a.startRendering()}),PI=s=>(t,e)=>{s.set(t,e)},UI=s=>(t,e)=>s.set(t,e),zI=(s,t,e,i,a,c,f,d)=>(m,_)=>e(m).render(m,_).then(()=>Promise.all(Array.from(i(_)).map(T=>e(T).render(T,_)))).then(()=>a(_)).then(T=>(typeof T.copyFromChannel!="function"?(f(T),xT(T)):t(c,()=>c(T))||d(T),s.add(T),T)),BI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},qI=(s,t,e,i,a,c)=>class extends s{constructor(d,m){const _=a(d),T={...BI,...m},w=e(_,T),C=c(_),I=C?i():null;super(d,!1,w,I),this._pan=t(this,C,w.pan)}get pan(){return this._pan}},FI=(s,t,e,i,a)=>()=>{const c=new WeakMap,f=async(d,m)=>{let _=e(d);const T=ws(_,m);if(!T){const w={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,pan:_.pan.value};_=t(m,w)}return c.set(m,_),T?await s(m,d.pan,_.pan):await i(m,d.pan,_.pan),Jd(_)?await a(d,m,_.inputs[0]):await a(d,m,_),_};return{render(d,m){const _=c.get(m);return _!==void 0?Promise.resolve(_):f(d,m)}}},HI=s=>()=>{if(s===null)return!1;try{new s({length:1,sampleRate:44100})}catch{return!1}return!0},GI=(s,t)=>async()=>{if(s===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),a=URL.createObjectURL(e);let c=!1,f=!1;try{await i.audioWorklet.addModule(a);const d=new s(i,"a",{numberOfOutputs:0}),m=i.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>f=!0,m.connect(d),m.start(0),await i.startRendering(),await new Promise(_=>setTimeout(_))}catch{}finally{URL.revokeObjectURL(a)}return c&&!f},KI=(s,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),i=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{e.oncomplete=()=>{i.disconnect(),a(e.currentTime!==0)},e.startRendering()})},WI=()=>new DOMException("","UnknownError"),$I={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},YI=(s,t,e,i,a,c,f)=>class extends s{constructor(m,_){const T=a(m),w={...$I,..._},C=e(T,w),O=c(T)?i():null;super(m,!0,C,O),this._isCurveNullified=!1,this._nativeWaveShaperNode=C,f(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(m){if(m===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(m.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=m}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(m){this._nativeWaveShaperNode.oversample=m}},QI=(s,t,e)=>()=>{const i=new WeakMap,a=async(c,f)=>{let d=t(c);if(!ws(d,f)){const _={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=s(f,_)}return i.set(f,d),Jd(d)?await e(c,f,d.inputs[0]):await e(c,f,d),d};return{render(c,f){const d=i.get(f);return d!==void 0?Promise.resolve(d):a(c,f)}}},XI=()=>typeof window>"u"?null:window,ZI=(s,t)=>e=>{e.copyFromChannel=(i,a,c=0)=>{const f=s(c),d=s(a);if(d>=e.numberOfChannels)throw t();const m=e.length,_=e.getChannelData(d),T=i.length;for(let w=f<0?-f:0;w+f<m&&w<T;w+=1)i[w]=_[w+f]},e.copyToChannel=(i,a,c=0)=>{const f=s(c),d=s(a);if(d>=e.numberOfChannels)throw t();const m=e.length,_=e.getChannelData(d),T=i.length;for(let w=f<0?-f:0;w+f<m&&w<T;w+=1)_[w+f]=i[w]}},JI=s=>t=>{t.copyFromChannel=(e=>(i,a,c=0)=>{const f=s(c),d=s(a);if(f<t.length)return e.call(t,i,d,f)})(t.copyFromChannel),t.copyToChannel=(e=>(i,a,c=0)=>{const f=s(c),d=s(a);if(f<t.length)return e.call(t,i,d,f)})(t.copyToChannel)},tO=s=>(t,e)=>{const i=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=i),s(t,"buffer",a=>()=>{const c=a.call(t);return c===i?null:c},a=>c=>a.call(t,c===null?i:c))},eO=(s,t)=>(e,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw s()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw s()}});const a=e.createBufferSource();t(i,()=>{const d=i.numberOfInputs;for(let m=0;m<d;m+=1)a.connect(i,0,m)},()=>a.disconnect(i))},DA=(s,t,e)=>s.copyFromChannel===void 0?s.getChannelData(e)[0]:(s.copyFromChannel(t,e),t[0]),MA=s=>{if(s===null)return!1;const t=s.length;return t%2!==0?s[Math.floor(t/2)]!==0:s[t/2-1]+s[t/2]!==0},Ag=(s,t,e,i)=>{let a=s;for(;!a.hasOwnProperty(t);)a=Object.getPrototypeOf(a);const{get:c,set:f}=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(s,t,{get:e(c),set:i(f)})},nO=s=>({...s,outputChannelCount:s.outputChannelCount!==void 0?s.outputChannelCount:s.numberOfInputs===1&&s.numberOfOutputs===1?[s.channelCount]:Array.from({length:s.numberOfOutputs},()=>1)}),iO=s=>({...s,channelCount:s.numberOfOutputs}),sO=s=>{const{imag:t,real:e}=s;return t===void 0?e===void 0?{...s,imag:[0,0],real:[0,0]}:{...s,imag:Array.from(e,()=>0),real:e}:e===void 0?{...s,imag:t,real:Array.from(t,()=>0)}:{...s,imag:t,real:e}},kA=(s,t,e)=>{try{s.setValueAtTime(t,e)}catch(i){if(i.code!==9)throw i;kA(s,t,e+1e-7)}},rO=s=>{const t=s.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},aO=s=>{const t=s.createBufferSource(),e=s.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},oO=s=>{const t=s.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},DT=s=>{const t=s.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},VA=s=>{const t=s.createBuffer(1,1,44100),e=s.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},MT=s=>{const t=s.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},lO=s=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(s)}finally{t.close(),e.close()}},cO=s=>{s.start=(t=>(e=0,i=0,a)=>{const c=s.buffer,f=c===null?i:Math.min(c.duration,i);c!==null&&f>c.duration-.5/s.context.sampleRate?t.call(s,e,0,0):t.call(s,e,f,a)})(s.start)},jA=(s,t)=>{const e=t.createGain();s.connect(e);const i=(a=>()=>{a.call(s,e),s.removeEventListener("ended",i)})(s.disconnect);s.addEventListener("ended",i),tp(s,e),s.stop=(a=>{let c=!1;return(f=0)=>{if(c)try{a.call(s,f)}catch{e.gain.setValueAtTime(0,f)}else a.call(s,f),c=!0}})(s.stop)},ep=(s,t)=>e=>{const i={value:s};return Object.defineProperties(e,{currentTarget:i,target:i}),typeof t=="function"?t.call(s,e):t.handleEvent.call(s,e)},uO=Ix(Zh),hO=jx(Zh),fO=$R(I0),LA=new WeakMap,dO=fN(LA),io=AR(new Map,new WeakMap),Ko=XI(),PA=qN(io,$o),kT=hN(Gs),Zi=VI(Gs,kT,Gh),pO=Bx(PA,Vn,Zi),xn=mN(N0),zl=mI(Ko),vn=DN(zl),UA=new WeakMap,zA=sN(ep),Eg=KN(Ko),VT=RN(Eg),jT=NN(Ko),BA=IN(Ko),cg=$N(Ko),hi=fR(Ox(pA),Vx(uO,hO,r0,fO,a0,Gs,dO,yg,Vn,Zh,Ml,Gh,Ky),io,SN(H1,a0,Gs,Vn,og,Ml),$o,O0,Ws,HR(r0,H1,Gs,Vn,og,xn,Ml,vn),XR(UA,Gs,eo),zA,xn,VT,jT,BA,vn,cg),mO=zx(hi,pO,$o,PA,xn,vn),LT=new WeakSet,Nb=FN(Ko),qA=LR(new Uint32Array(1)),PT=ZI(qA,$o),UT=JI(qA),FA=Fx(LT,io,Ws,Nb,zl,HI(Nb),PT,UT),D0=Lx(yr),HA=jI(kT,Tg,Gh),Yo=OR(HA),np=GN(D0,io,rO,aO,oO,DT,VA,MT,cO,tO(Ag),jA),Qo=kI(dN(Tg),HA),gO=Kx(Yo,np,Vn,Qo,Zi),so=dR(Dx(mA),UA,CT,pR,Ax,Ex,Cx,xx,Rx,B1,fA,Eg,kA),_O=Gx(hi,gO,so,Ui,np,xn,vn,ep),yO=eR(hi,nR,$o,Ui,WN(yr,Ag),xn,vn,Zi),vO=SR(Yo,NA,Vn,Qo,Zi),Jh=UI(LA),TO=bR(hi,so,vO,O0,NA,xn,vn,Jh),uu=zN(Zh,jT),wO=eO(Ui,uu),hu=eI(Eg,wO),bO=xR(hu,Vn,Zi),SO=CR(hi,bO,hu,xn,vn),AO=IR(bg,Vn,Zi),EO=NR(hi,AO,bg,xn,vn,iO),CO=sI(D0,np,yr,uu),ip=iI(D0,io,CO,DT,MT),xO=jR(Yo,ip,Vn,Qo,Zi),RO=VR(hi,so,xO,ip,xn,vn,ep),GA=rI(Ws,Ag),NO=zR(GA,Vn,Zi),IO=UR(hi,NO,GA,xn,vn,Jh),OO=WR(Yo,IA,Vn,Qo,Zi),DO=KR(hi,so,OO,IA,xn,vn,Jh),KA=aI(Ws),MO=eN(Yo,KA,Vn,Qo,Zi),kO=tN(hi,so,MO,KA,Ws,xn,vn,Jh),VO=cN(Yo,yr,Vn,Qo,Zi),jO=lN(hi,so,VO,yr,xn,vn),LO=uI(O0,Ui,Sg,Ws),M0=LI(io,yr,Sg,KI(yr,zl)),PO=bN(np,Vn,zl,Zi,M0),UO=oI(LO),zO=TN(hi,UO,PO,xn,vn,Jh),BO=iR(so,hu,ip,Sg,Ws,DA,vn,Ag),WA=new WeakMap,qO=UN(yO,BO,zA,vn,WA,ep),$A=gI(D0,io,DT,VA,MT,jA),FO=RI(Yo,$A,Vn,Qo,Zi),HO=xI(hi,so,$A,FO,xn,vn,ep),YA=MR(np),GO=SI(YA,Ui,yr,MA,uu),k0=bI(YA,Ui,GO,MA,uu,Eg,Ag),KO=yI(r0,Ui,hu,yr,Sg,k0,Ws,a0,DA,uu),QA=_I(KO),WO=OI(Yo,hu,ip,yr,QA,Vn,zl,Qo,Zi,M0),$O=II(hi,so,QA,WO,xn,vn,Jh),YO=vI($o),QO=MI(YO,xn,new WeakSet,sO),XO=wI(hu,bg,yr,k0,Ws,uu),XA=TI(XO,Ws),ZO=FI(Yo,XA,Vn,Qo,Zi),JO=qI(hi,so,XA,ZO,xn,vn),t4=QI(k0,Vn,Zi),e4=YI(hi,Ui,k0,t4,xn,vn,Jh),ZA=MN(Ko),zT=rN(Ko),JA=new WeakMap,n4=gN(JA,zl),i4=ZA?kx(io,Ws,iN(Ko),zT,aN(Nx),xn,n4,vn,cg,new WeakMap,new WeakMap,GI(cg,zl),Ko):void 0,s4=ON(VT,vn),r4=FR(LT,io,qR,nN,new WeakSet,xn,s4,i0,lg,PT,UT),tE=TR(i4,mO,FA,_O,TO,SO,EO,RO,IO,r4,DO,kO,jO,zO,qO,HO,$O,QO,JO,e4),a4=kN(hi,hI,xn,vn),o4=jN(hi,fI,xn,vn),l4=LN(hi,dI,xn,vn),c4=pI(Ui,vn),u4=PN(hi,c4,xn),h4=tR(tE,Ui,Ws,WI,a4,o4,l4,u4,Eg),BT=_N(WA),f4=Px(BT),eE=DR($o),d4=YR(BT),nE=ZR($o),iE=new WeakMap,p4=uN(iE,eo),m4=tI(eE,$o,Ui,hu,bg,ip,yr,Sg,Ws,nE,zT,p4,uu),g4=QN(Ui,m4,yr,Ws,uu),_4=vR(Yo,eE,np,hu,bg,ip,yr,d4,nE,zT,Vn,cg,zl,Qo,Zi,M0),y4=pN(JA),v4=PI(iE),Ib=ZA?gR(f4,hi,so,_4,g4,Gs,y4,xn,vn,cg,nO,v4,lO,ep):void 0,T4=BR(Ws,zl),w4=zI(LT,io,kT,BT,M0,i0,PT,UT),b4=EI(tE,io,Ui,T4,w4),S4=AN(N0,VT),A4=EN(ET,jT),E4=CN(CT,BA),C4=xN(N0,vn);function ya(s){return s===void 0}function Pe(s){return s!==void 0}function x4(s){return typeof s=="function"}function Kh(s){return typeof s=="number"}function qh(s){return Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object}function R4(s){return typeof s=="boolean"}function to(s){return Array.isArray(s)}function Vl(s){return typeof s=="string"}function jy(s){return Vl(s)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(s)}function xe(s,t){if(!s)throw new Error(t)}function tu(s,t,e=1/0){if(!(t<=s&&s<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${s}`)}function sE(s){!s.isOffline&&s.state!=="running"&&qT('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let rE=!1,Ob=!1;function Db(s){rE=s}function N4(s){ya(s)&&rE&&!Ob&&(Ob=!0,qT("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let aE=console;function I4(...s){aE.log(...s)}function qT(...s){aE.warn(...s)}function O4(s){return new h4(s)}function D4(s,t,e){return new b4(s,t,e)}const Kr=typeof self=="object"?self:null,M4=Kr&&(Kr.hasOwnProperty("AudioContext")||Kr.hasOwnProperty("webkitAudioContext"));function k4(s,t,e){return xe(Pe(Ib),"AudioWorkletNode only works in a secure context (https or localhost)"),new(s instanceof Kr?.BaseAudioContext?Kr?.AudioWorkletNode:Ib)(s,t,e)}function ro(s,t,e,i){var a=arguments.length,c=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,t,e,i);else for(var d=s.length-1;d>=0;d--)(f=s[d])&&(c=(a<3?f(c):a>3?f(t,e,c):f(t,e))||c);return a>3&&c&&Object.defineProperty(t,e,c),c}function Ti(s,t,e,i){function a(c){return c instanceof e?c:new e(function(f){f(c)})}return new(e||(e=Promise))(function(c,f){function d(T){try{_(i.next(T))}catch(w){f(w)}}function m(T){try{_(i.throw(T))}catch(w){f(w)}}function _(T){T.done?c(T.value):a(T.value).then(d,m)}_((i=i.apply(s,t||[])).next())})}class V4{constructor(t,e,i,a){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Wh(s){return E4(s)}function $c(s){return A4(s)}function Wy(s){return C4(s)}function bd(s){return S4(s)}function j4(s){return s instanceof FA}function L4(s,t){return s==="value"||Wh(t)||$c(t)||j4(t)}function Id(s,...t){if(!t.length)return s;const e=t.shift();if(qh(s)&&qh(e))for(const i in e)L4(i,e[i])?s[i]=e[i]:qh(e[i])?(s[i]||Object.assign(s,{[i]:{}}),Id(s[i],e[i])):Object.assign(s,{[i]:e[i]});return Id(s,...t)}function P4(s,t){return s.length===t.length&&s.every((e,i)=>t[i]===e)}function Se(s,t,e=[],i){const a={},c=Array.from(t);if(qh(c[0])&&i&&!Reflect.has(c[0],i)&&(Object.keys(c[0]).some(d=>Reflect.has(s,d))||(Id(a,{[i]:c[0]}),e.splice(e.indexOf(i),1),c.shift())),c.length===1&&qh(c[0]))Id(a,c[0]);else for(let f=0;f<e.length;f++)Pe(c[f])&&(a[e[f]]=c[f]);return Id(s,a)}function U4(s){return s.constructor.getDefaults()}function Od(s,t){return ya(s)?t:s}function Mb(s,t){return t.forEach(e=>{Reflect.has(s,e)&&delete s[e]}),s}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Bl{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Kr&&this.toString()===Kr.TONE_DEBUG_CLASS)&&I4(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Bl.version=hA;const FT=1e-6;function zd(s,t){return s>t+FT}function Y1(s,t){return zd(s,t)||Za(s,t)}function u0(s,t){return s+FT<t}function Za(s,t){return Math.abs(s-t)<FT}function z4(s,t,e){return Math.max(Math.min(s,e),t)}class va extends Bl{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Se(va.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(xe(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];xe(Y1(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const i=this._search(t,e);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const i=this._search(t);return i-1>=0?this._timeline[i-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Za(this._timeline[e].time,t)){for(let i=e;i>=0&&Za(this._timeline[i].time,t);i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&Y1(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let i=0;const a=this._timeline.length;let c=a;if(a>0&&this._timeline[a-1][e]<=t)return a-1;for(;i<c;){let f=Math.floor(i+(c-i)/2);const d=this._timeline[f],m=this._timeline[f+1];if(Za(d[e],t)){for(let _=f;_<this._timeline.length;_++){const T=this._timeline[_];if(Za(T[e],t))f=_;else break}return f}else{if(u0(d[e],t)&&zd(m[e],t))return f;zd(d[e],t)?c=f:i=f+1}}return-1}_iterate(t,e=0,i=this._timeline.length-1){this._timeline.slice(e,i+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const i=this._search(t);return i!==-1&&this._iterate(e,0,i),this}forEachAfter(t,e){const i=this._search(t);return this._iterate(e,i+1),this}forEachBetween(t,e,i){let a=this._search(t),c=this._search(e);return a!==-1&&c!==-1?(this._timeline[a].time!==t&&(a+=1),this._timeline[c].time===e&&(c-=1),this._iterate(i,a,c)):a===-1&&this._iterate(i,0,c),this}forEachFrom(t,e){let i=this._search(t);for(;i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this}forEachAtTime(t,e){const i=this._search(t);if(i!==-1&&Za(this._timeline[i].time,t)){let a=i;for(let c=i;c>=0&&Za(this._timeline[c].time,t);c--)a=c;this._iterate(c=>{e(c)},a,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const oE=[];function V0(s){oE.push(s)}function B4(s){oE.forEach(t=>t(s))}const lE=[];function j0(s){lE.push(s)}function q4(s){lE.forEach(t=>t(s))}class Cg extends Bl{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(a=>{ya(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(e)}),this}once(t,e){const i=(...a)=>{e(...a),this.off(t,i)};return this.on(t,i),this}off(t,e){return t.split(/\W+/).forEach(a=>{if(ya(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(ya(e))this._events[a]=[];else{const c=this._events[a];for(let f=c.length-1;f>=0;f--)c[f]===e&&c.splice(f,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(let a=0,c=i.length;a<c;a++)i[a].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const i=Object.getOwnPropertyDescriptor(Cg.prototype,e);Object.defineProperty(t.prototype,e,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class cE extends Cg{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class xg extends cE{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new va,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=Se(xg.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=O4({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new V4(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(B4(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,i){return this._context.createBuffer(t,e,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,i){return this._context.createPeriodicWave(t,e,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return xe(bd(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return xe(bd(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return xe(bd(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){xe(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){xe(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){xe(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){xe(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return k4(this.rawContext,t,e)}addAudioWorkletModule(t){return Ti(this,void 0,void 0,function*(){xe(Pe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return Ti(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return bd(this._context)?this._context.resume():Promise.resolve()}close(){return Ti(this,void 0,void 0,function*(){bd(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&q4(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0);for(let c=0;c<i.length;c++)i[c]=t;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=e,a.loop=!0,a.start(0),this._constants.set(t,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(t,e){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const i=++this._timeoutIds,a=()=>{const c=this.now();this._timeouts.add({callback:()=>{t(),a()},id:i,time:c+e})};return a(),i}}class F4 extends cE{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,i){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return Ti(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function si(s,t){to(t)?t.forEach(e=>si(s,e)):Object.defineProperty(s,t,{enumerable:!0,writable:!1})}function uE(s,t){to(t)?t.forEach(e=>uE(s,e)):Object.defineProperty(s,t,{writable:!0})}const yn=()=>{};class Fn extends Bl{constructor(){super(),this.name="ToneAudioBuffer",this.onload=yn;const t=Se(Fn.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Vl(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:yn,onload:yn,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ga().sampleRate}set(t){return t instanceof Fn?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return Ti(this,void 0,void 0,function*(){const e=Fn.load(t).then(i=>{this.set(i),this.onload(this)});Fn.downloads.push(e);try{yield e}finally{const i=Fn.downloads.indexOf(e);Fn.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=to(t)&&t[0].length>0,i=e?t.length:1,a=e?t[0].length:t.length,c=ga(),f=c.createBuffer(i,a,c.sampleRate),d=!e&&i===1?[t]:t;for(let m=0;m<i;m++)f.copyToChannel(d[m],m);return this._buffer=f,this}toMono(t){if(Kh(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const i=this.numberOfChannels;for(let a=0;a<i;a++){const c=this.toArray(a);for(let f=0;f<c.length;f++)e[f]+=c[f]}e=e.map(a=>a/i),this.fromArray(e)}return this}toArray(t){if(Kh(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let i=0;i<this.numberOfChannels;i++)e[i]=this.getChannelData(i);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){xe(this.loaded,"Buffer is not loaded");const i=Math.floor(t*this.sampleRate),a=Math.floor(e*this.sampleRate);xe(i<a,"The start time must be less than the end time");const c=a-i,f=ga().createBuffer(this.numberOfChannels,c,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)f.copyToChannel(this.getChannelData(d).subarray(i,a),d);return new Fn(f)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Fn().fromArray(t)}static fromUrl(t){return Ti(this,void 0,void 0,function*(){return yield new Fn().load(t)})}static load(t){return Ti(this,void 0,void 0,function*(){const e=Fn.baseUrl===""||Fn.baseUrl.endsWith("/")?Fn.baseUrl:Fn.baseUrl+"/",i=yield fetch(e+t);if(!i.ok)throw new Error(`could not load url: ${t}`);const a=yield i.arrayBuffer();return yield ga().decodeAudioData(a)})}static supportsType(t){const e=t.split("."),i=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return Ti(this,void 0,void 0,function*(){for(yield Promise.resolve();Fn.downloads.length;)yield Fn.downloads[0]})}}Fn.baseUrl="";Fn.downloads=[];class HT extends xg{constructor(){super({clockSource:"offline",context:Wy(arguments[0])?arguments[0]:D4(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Wy(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Wy(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return Ti(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const i=Math.floor(this.sampleRate/128);t&&e%i===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return Ti(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Fn(e)})}close(){return Promise.resolve()}}const hE=new F4;let Uh=hE;function ga(){return Uh===hE&&M4&&H4(new xg),Uh}function H4(s,t=!1){t&&Uh.dispose(),bd(s)?Uh=new xg(s):Wy(s)?Uh=new HT(s):Uh=s}function G4(){return Uh.resume()}if(Kr&&!Kr.TONE_SILENCE_LOGGING){const t=` * Tone.js v${hA} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function K4(s){return Math.pow(10,s/20)}function W4(s){return 20*(Math.log(s)/Math.LN10)}function fE(s){return Math.pow(2,s/12)}let L0=440;function $4(){return L0}function Y4(s){L0=s}function Q1(s){return Math.round(dE(s))}function dE(s){return 69+12*Math.log2(s/L0)}function Q4(s){return L0*Math.pow(2,(s-69)/12)}class GT extends Bl{constructor(t,e,i){super(),this.defaultUnits="s",this._val=e,this._units=i,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const i=parseInt(t,10),a=e==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/i)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,i)=>{let a=0;return t&&t!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(a+=this._beatsToUnits(parseFloat(e))),i&&i!=="0"&&(a+=this._beatsToUnits(parseFloat(i)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof GT&&this.fromType(this._val),ya(this._val))return this._noArg();if(Vl(this._val)&&ya(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(qh(this._val)){let t=0;for(const e in this._val)if(Pe(this._val[e])){const i=this._val[e],a=new this.constructor(this.context,e).valueOf()*i;t+=a}return t}if(Pe(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return Vl(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Ja extends GT{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Ja(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const i=new this.constructor(this.context,t).valueOf(),a=this.valueOf(),d=Math.round(a/i)*i-a;return a+d*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let c=1;c<9;c++){const f=Math.pow(2,c);e.push(f+"n."),e.push(f+"n"),e.push(f+"t")}e.push("0");let i=e[0],a=new Ja(this.context,e[0]).toSeconds();return e.forEach(c=>{const f=new Ja(this.context,c).toSeconds();Math.abs(f-t)<Math.abs(a-t)&&(i=c,a=f)}),i}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const i=Math.floor(e/this._getTimeSignature());let a=e%1*4;e=Math.floor(e)%this._getTimeSignature();const c=a.toString();return c.length>3&&(a=parseFloat(parseFloat(c).toFixed(3))),[i,e,a].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Q1(this.toFrequency())}_now(){return this.context.now()}}class _a extends Ja{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return $4()}static set A4(t){Y4(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:_a.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const a=X4[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?a:_a.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,i){let a=1;return t&&t!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(a*=this._beatsToUnits(parseFloat(e))),i&&i!=="0"&&(a*=this._beatsToUnits(parseFloat(i)/4)),a}}})}transpose(t){return new _a(this.context,this.valueOf()*fE(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Q1(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/_a.A4);let i=Math.round(12*e)+57;const a=Math.floor(i/12);return a<0&&(i+=-12*a),Z4[i%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Q4(t)}static ftom(t){return Q1(t)}}const X4={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Z4=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class eg extends Ja{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class gr extends Bl{constructor(){super();const t=Se(gr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ga()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return N4(t),new Ja(this.context,t).toSeconds()}toFrequency(t){return new _a(this.context,t).toFrequency()}toTicks(t){return new eg(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(i=>{ya(t[i])&&delete e[i]}),e}get(){const t=U4(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const i=this[e];Pe(i)&&Pe(i.value)&&Pe(i.setValueAtTime)?t[e]=i.value:i instanceof gr?t[e]=i._getPartialProperties(t[e]):to(i)||Kh(i)||Vl(i)||R4(i)?t[e]=i:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&Pe(this[e])&&(this[e]&&Pe(this[e].value)&&Pe(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof gr?this[e].set(t[e]):this[e]=t[e])}),this}}class KT extends va{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,i){return tu(e,0),this.add(Object.assign({},i,{state:t,time:e})),this}getLastState(t,e){const i=this._search(e);for(let a=i;a>=0;a--){const c=this._timeline[a];if(c.state===t)return c}}getNextState(t,e){const i=this._search(e);if(i!==-1)for(let a=i;a<this._timeline.length;a++){const c=this._timeline[a];if(c.state===t)return c}}}class Qn extends gr{constructor(){const t=Se(Qn.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,xe(Pe(t.param)&&(Wh(t.param)||t.param instanceof Qn),"param must be an AudioParam");!Wh(t.param);)t.param=t.param._param;this._swappable=Pe(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new va(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Pe(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(gr.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Pe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Pe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Pe(this.maxValue)&&Pe(this.minValue)&&tu(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?K4(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?W4(t):t}setValueAtTime(t,e){const i=this.toSeconds(e),a=this._fromType(t);return xe(isFinite(a)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,i),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),a=this._events.get(e);let c=this._initialValue;if(a===null)c=this._initialValue;else if(a.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const f=this._events.getBefore(a.time);let d;f===null?d=this._initialValue:d=f.value,a.type==="setTargetAtTime"&&(c=this._exponentialApproach(a.time,d,a.value,a.constant,e))}else if(i===null)c=a.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let f=a.value;if(a.type==="setTargetAtTime"){const d=this._events.getBefore(a.time);d===null?f=this._initialValue:f=d.value}i.type==="linearRampToValueAtTime"?c=this._linearInterpolate(a.time,f,i.time,i.value,e):c=this._exponentialInterpolate(a.time,f,i.time,i.value,e)}else c=a.value;return this._toType(c)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const i=this._fromType(t),a=this.toSeconds(e);return xe(isFinite(i)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this._events.add({time:a,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,a),this._param.linearRampToValueAtTime(i,a),this}exponentialRampToValueAtTime(t,e){let i=this._fromType(t);i=Za(i,0)?this._minOutput:i,this._assertRange(i);const a=this.toSeconds(e);return xe(isFinite(i)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,a),this._param.exponentialRampToValueAtTime(i,a),this}exponentialRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this}linearRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this}targetRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this}exponentialApproachValueAtTime(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);const a=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,a),this.cancelAndHoldAtTime(e+i*.9),this.linearRampToValueAtTime(t,e+i),this}setTargetAtTime(t,e,i){const a=this._fromType(t);xe(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(e);return this._assertRange(a),xe(isFinite(a)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:i,time:c,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",t,c,i),this._param.setTargetAtTime(a,c,i),this}setValueCurveAtTime(t,e,i,a=1){i=this.toSeconds(i),e=this.toSeconds(e);const c=this._fromType(t[0])*a;this.setValueAtTime(this._toType(c),e);const f=i/(t.length-1);for(let d=1;d<t.length;d++){const m=this._fromType(t[d])*a;this.linearRampToValueAtTime(this._toType(m),e+d*f)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return xe(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));xe(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);const a=this._events.get(e),c=this._events.getAfter(e);return a&&Za(a.time,e)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),c.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),e):c.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this}rampTo(t,e=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const i=this._events.get(e);if(i&&i.type==="setTargetAtTime"){const a=this._events.getAfter(i.time),c=a?a.time:e+2,f=(c-e)/10;for(let d=e;d<c;d+=f)t.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?t.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?t.setTargetAtTime(a.value,a.time,a.constant):t[a.type](a.value,a.time)}),this}setParam(t){xe(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,i,a,c){return i+(e-i)*Math.exp(-(c-t)/a)}_linearInterpolate(t,e,i,a,c){return e+(a-e)*((c-t)/(i-t))}_exponentialInterpolate(t,e,i,a,c){return e*Math.pow(a/e,(c-t)/(i-t))}}class je extends gr{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Pe(this.input)?Wh(this.input)||this.input instanceof Qn?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Pe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Pe(t)&&(t instanceof je||$c(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=>{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();xe(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,i=0){return sp(this,t,e,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return qT("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,i=0){return J4(this,t,e,i),this}chain(...t){return X1(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Pe(this.input)&&(this.input instanceof je?this.input.dispose():$c(this.input)&&this.input.disconnect()),Pe(this.output)&&(this.output instanceof je?this.output.dispose():$c(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function X1(...s){const t=s.shift();s.reduce((e,i)=>(e instanceof je?e.connect(i):$c(e)&&sp(e,i),i),t)}function sp(s,t,e=0,i=0){for(xe(Pe(s),"Cannot connect from undefined node"),xe(Pe(t),"Cannot connect to undefined node"),(t instanceof je||$c(t))&&xe(t.numberOfInputs>0,"Cannot connect to node with no inputs"),xe(s.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof je||t instanceof Qn;)Pe(t.input)&&(t=t.input);for(;s instanceof je;)Pe(s.output)&&(s=s.output);Wh(t)?s.connect(t,e):s.connect(t,e,i)}function J4(s,t,e=0,i=0){if(Pe(t))for(;t instanceof je;)t=t.input;for(;!$c(s);)Pe(s.output)&&(s=s.output);Wh(t)?s.disconnect(t,e):$c(t)?s.disconnect(t,e,i):s.disconnect()}class Ts extends je{constructor(){const t=Se(Ts.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Qn({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),si(this,"gain")}static getDefaults(){return Object.assign(je.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Bd extends je{constructor(t){super(t),this.onended=yn,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ts({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const i=this.toSeconds(e);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(je.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:yn})}_startGain(t,e=1){xe(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){xe(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==yn&&(this.onended(this),this.onended=yn,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),xe(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=yn,this}}class WT extends Bd{constructor(){const t=Se(WT.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),sp(this._source,this._gainNode),this.offset=new Qn({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Bd.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class zi extends je{constructor(){const t=Se(zi.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new WT({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(je.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,i=0){return $T(this,t,e,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,i){return this._param.exponentialRampTo(t,e,i),this}linearRampTo(t,e,i){return this._param.linearRampTo(t,e,i),this}targetRampTo(t,e,i){return this._param.targetRampTo(t,e,i),this}exponentialApproachValueAtTime(t,e,i){return this._param.exponentialApproachValueAtTime(t,e,i),this}setTargetAtTime(t,e,i){return this._param.setTargetAtTime(t,e,i),this}setValueCurveAtTime(t,e,i,a){return this._param.setValueCurveAtTime(t,e,i,a),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,i){return this._param.rampTo(t,e,i),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function $T(s,t,e,i){(t instanceof Qn||Wh(t)||t instanceof zi&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof zi&&(t.overridden=!0)),sp(s,t,e,i)}class YT extends Qn{constructor(){const t=Se(YT.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new va(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Qn.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);const a=this._fromType(t),c=this._events.get(e),f=Math.round(Math.max(1/i,1));for(let d=0;d<=f;d++){const m=i*d+e,_=this._exponentialApproach(c.time,c.value,a,i,m);this.linearRampToValueAtTime(this._toType(_),m)}return this}setValueAtTime(t,e){const i=this.toSeconds(e);super.setValueAtTime(t,e);const a=this._events.get(i),c=this._events.previousEvent(a),f=this._getTicksUntilEvent(c,i);return a.ticks=Math.max(f,0),this}linearRampToValueAtTime(t,e){const i=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const a=this._events.get(i),c=this._events.previousEvent(a),f=this._getTicksUntilEvent(c,i);return a.ticks=Math.max(f,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const i=this._fromType(t),a=this._events.get(e),c=Math.round(Math.max((e-a.time)*10,1)),f=(e-a.time)/c;for(let d=0;d<=c;d++){const m=f*d+a.time,_=this._exponentialInterpolate(a.time,a.value,e,i,m);this.linearRampToValueAtTime(this._toType(_),m)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ya(t.ticks)){const f=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(f,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let a=this._fromType(this.getValueAtTime(e));const c=this._events.get(e);return c&&c.time===e&&c.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+a)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)}getDurationOfTicks(t,e){const i=this.toSeconds(e),a=this.getTicksAtTime(e);return this.getTimeOfTick(a+t)-i}getTimeOfTick(t){const e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&i.type==="linearRampToValueAtTime"&&e.value!==i.value){const a=this._fromType(this.getValueAtTime(e.time)),f=(this._fromType(this.getValueAtTime(i.time))-a)/(i.time-e.time),d=Math.sqrt(Math.pow(a,2)-2*f*(e.ticks-t)),m=(-a+d)/f,_=(-a-d)/f;return(m>0?m:_)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const i=this.toSeconds(e),a=this.toSeconds(t),c=this.getTicksAtTime(i);return this.getTicksAtTime(i+a)-c}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class QT extends zi{constructor(){const t=Se(QT.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new YT({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(zi.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class XT extends gr{constructor(){const t=Se(XT.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new KT,this._tickOffset=new va,this._ticksAtTime=new va,this._secondsAtTime=new va,this.frequency=new QT({context:this.context,units:t.units,value:t.frequency}),si(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},gr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const i=this.toSeconds(t);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),Pe(e)&&this.setTicksAtTime(e,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const i=this._state.get(e);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),i=this._state.getLastState("stopped",e),a=this._ticksAtTime.get(e),c={state:"paused",time:e};this._state.add(c);let f=a||i,d=a?a.ticks:0,m=null;return this._state.forEachBetween(f.time,e+this.sampleTime,_=>{let T=f.time;const w=this._tickOffset.get(_.time);w&&w.time>=f.time&&(d=w.ticks,T=w.time),f.state==="started"&&_.state!=="started"&&(d+=this.frequency.getTicksAtTime(_.time)-this.frequency.getTicksAtTime(T),_.time!==c.time&&(m={state:_.state,time:_.time,ticks:d})),f=_}),this._state.remove(c),m&&this._ticksAtTime.add(m),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);const a=this._secondsAtTime.get(t);let c=a||e,f=a?a.seconds:0,d=null;return this._state.forEachBetween(c.time,t+this.sampleTime,m=>{let _=c.time;const T=this._tickOffset.get(m.time);T&&T.time>=c.time&&(f=T.seconds,_=T.time),c.state==="started"&&m.state!=="started"&&(f+=m.time-_,m.time!==i.time&&(d={state:m.state,time:m.time,seconds:f})),c=m}),this._state.remove(i),d&&this._secondsAtTime.add(d),f}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const i=this._tickOffset.get(e),a=this._state.get(e),c=Math.max(i.time,a.time),f=this.frequency.getTicksAtTime(c)+t-i.ticks;return this.frequency.getTimeOfTick(f)}forEachTickBetween(t,e,i){let a=this._state.get(t);this._state.forEachBetween(t,e,f=>{a&&a.state==="started"&&f.state!=="started"&&this.forEachTickBetween(Math.max(a.time,t),f.time-this.sampleTime,i),a=f});let c=null;if(a&&a.state==="started"){const f=Math.max(a.time,t),d=this.frequency.getTicksAtTime(f),m=this.frequency.getTicksAtTime(a.time),_=d-m;let T=Math.ceil(_)-_;T=Za(T,1)?0:T;let w=this.frequency.getTimeOfTick(d+T);for(;w<e;){try{i(w,Math.round(this.getTicksAtTime(w)))}catch(C){c=C;break}w+=this.frequency.getDurationOfTicks(1,w)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class P0 extends gr{constructor(){const t=Se(P0.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=yn,this._lastUpdate=0,this._state=new KT("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new XT({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,si(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(gr.getDefaults(),{callback:yn,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){sE(this.context);const i=this.toSeconds(t);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,e),i<this._lastUpdate&&this.emit("start",i,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const i=this.toSeconds(e),a=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(a+t,i)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,i=>{switch(i.state){case"started":const a=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,a);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(t,e,(i,a)=>{this.callback(i,a)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Cg.mixin(P0);class rp extends je{constructor(){const t=Se(rp.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new Ts({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,si(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class ZT extends je{constructor(){const t=Se(ZT.getDefaults(),arguments);super(t),this.name="Destination",this.input=new rp({context:this.context}),this.output=new Ts({context:this.context}),this.volume=this.input.volume,X1(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),X1(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}V0(s=>{s.destination=new ZT({context:s})});j0(s=>{s.destination.dispose()});class tD extends je{constructor(){super(...arguments),this.name="Listener",this.positionX=new Qn({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Qn({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Qn({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Qn({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Qn({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Qn({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Qn({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Qn({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Qn({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(je.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}V0(s=>{s.listener=new tD({context:s})});j0(s=>{s.listener.dispose()});class JT extends Bl{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Se(JT.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const i=t.urls[e];this.add(e,i,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:yn,onload:yn,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return xe(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,i=yn,a=yn){return Vl(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Fn(this.baseUrl+e,i,a))):this._buffers.set(t.toString(),new Fn(e,i,a)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Rd extends eg{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class eD extends gr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new va,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}V0(s=>{s.draw=new eD({context:s})});j0(s=>{s.draw.dispose()});class nD extends Bl{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){xe(Pe(t.time),"Events must have a time property"),xe(Pe(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new iD(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const i of e)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let i,a=null;if(e>0)if(t.left.right===null)i=t.left,i.right=t.right,a=i;else{for(i=t.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,a=i.parent,i.left=t.left,i.right=t.right)}else if(t.right.left===null)i=t.right,i.left=t.left,a=i;else{for(i=t.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,a=i.parent,i.left=t.left,i.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),a&&this._rebalance(a)}t.dispose()}_rotateLeft(t){const e=t.parent,i=t.isLeftChild(),a=t.right;a&&(t.right=a.left,a.left=t),e!==null?i?e.left=a:e.right=a:this._setRoot(a)}_rotateRight(t){const e=t.parent,i=t.isLeftChild(),a=t.left;a&&(t.left=a.right,a.right=t),e!==null?i?e.left=a:e.right=a:this._setRoot(a)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let i=e[0];for(let a=1;a<e.length;a++)e[a].low>i.low&&(i=e[a]);return i.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(i=>e.push(i)),e.forEach(i=>{i.event&&t(i.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const i=[];this._root.search(t,i),i.forEach(a=>{a.event&&e(a.event)})}return this}forEachFrom(t,e){if(this._root!==null){const i=[];this._root.searchAfter(t,i),i.forEach(a=>{a.event&&e(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class iD{constructor(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class sD extends Bl{constructor(t){super(),this.name="TimelineValue",this._timeline=new va({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class qd extends je{constructor(){super(Se(qd.getDefaults(),arguments,["context"]))}connect(t,e=0,i=0){return $T(this,t,e,i),this}}class Rg extends qd{constructor(){const t=Se(Rg.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,to(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):x4(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(zi.getDefaults(),{length:1024})}setMap(t,e=1024){const i=new Float32Array(e);for(let a=0,c=e;a<c;a++){const f=a/(c-1)*2-1;i[a]=t(f,a)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(i=>i.includes(t));xe(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class tw extends qd{constructor(){const t=Se(tw.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Rg({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(qd.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class eu{constructor(t,e){this.id=eu._eventId++,this._remainderTime=0;const i=Object.assign(eu.getDefaults(),e);this.transport=t,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:yn,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}eu._eventId=0;class ew extends eu{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(ew.getDefaults(),e);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},eu.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return u0(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Rd(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){u0(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Rd(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);zd(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class U0 extends gr{constructor(){const t=Se(U0.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new sD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new va,this._repeatedEvents=new nD,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new P0({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),si(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(gr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const i=e%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(i*Math.PI)*this._swingAmount;t+=new Rd(this.context,this._swingTicks*2/3).toSeconds()*a}Db(!0),this._timeline.forEachAtTime(e,i=>i.invoke(t)),Db(!1)}schedule(t,e){const i=new eu(this,{callback:t,time:new eg(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(t,e,i,a=1/0){const c=new ew(this,{callback:t,duration:new Ja(this.context,a).toTicks(),interval:new Ja(this.context,e).toTicks(),time:new eg(this.context,i).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,e){const i=new eu(this,{callback:t,once:!0,time:new eg(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(e,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new Rd(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let i;return Pe(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){to(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Ja(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Ja(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Rd(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Rd(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(e),a=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,e),c=e+a;this.emit("stop",c),this._clock.setTicksAtTime(t,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),i=this.getTicksAtTime(e),a=t-i%t;return this._clock.nextTickTime(a,e)}}syncSignal(t,e){const i=this.now();let a=this.bpm,c=1/(60/a.getValueAtTime(i)/this.PPQ),f=[];if(t.units==="time"){const m=.015625/c,_=new Ts(m),T=new tw(-1),w=new Ts(m);a.chain(_,T,w),a=w,c=1/c,f=[_,T,w]}e||(t.getValueAtTime(i)!==0?e=t.getValueAtTime(i)/c:e=0);const d=new Ts(e);return a.connect(d),d.connect(t._param),f.push(d),this._syncedSignals.push({initial:t.value,nodes:f,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const i=this._syncedSignals[e];i.signal===t&&(i.nodes.forEach(a=>a.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),uE(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Cg.mixin(U0);V0(s=>{s.transport=new U0({context:s})});j0(s=>{s.transport.dispose()});class Yr extends je{constructor(t){super(t),this.input=void 0,this._state=new KT("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=yn,this._syncedStop=yn,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new rp({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,si(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,onstop:yn,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,i){let a=ya(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")xe(zd(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,e,i);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const c=this._state.get(a);c&&(c.offset=this.toSeconds(Od(e,0)),c.duration=i?this.toSeconds(i):void 0);const f=this.context.transport.schedule(d=>{this._start(d,e,i)},a);this._scheduled.push(f),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else sE(this.context),this._start(a,e,i);return this}stop(t){let e=ya(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||Pe(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const i=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,i){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(zd(e,0)){const i=this._state.get(e);if(i&&i.state==="started"&&i.time!==e){const a=e-this.toSeconds(i.time);let c;i.duration&&(c=this.toSeconds(i.duration)-a),this._start(t,this.toSeconds(i.offset)+a,c)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=yn,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class z0 extends Bd{constructor(){const t=Se(z0.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,sp(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Qn({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Fn(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Bd.getDefaults(),{url:new Fn,loop:!1,loopEnd:0,loopStart:0,onload:yn,onerror:yn,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,i,a=1){xe(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(t);this._startGain(c,a),this.loop?e=Od(e,this.loopStart):e=Od(e,0);let f=Math.max(this.toSeconds(e),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,m=this.toSeconds(this.loopStart),_=d-m;Y1(f,d)&&(f=(f-m)%_+m),Za(f,this.buffer.duration)&&(f=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,u0(f,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,f)),Pe(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function tf(s,t){return Ti(this,void 0,void 0,function*(){const e=t/s.context.sampleRate,i=new HT(1,e,s.context.sampleRate);return new s.constructor(Object.assign(s.get(),{frequency:2/e,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class nw extends Bd{constructor(){const t=Se(nw.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],sp(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Qn({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Qn({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),si(this,["frequency","detune"])}static getDefaults(){return Object.assign(Bd.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class yi extends Yr{constructor(){const t=Se(yi.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new zi({context:this.context,units:"frequency",value:t.frequency}),si(this,"frequency"),this.detune=new zi({context:this.context,units:"cents",value:t.detune}),si(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Yr.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),i=new nw({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return yi._periodicWaveCache.find(e=>e.phase===this._phase&&P4(e.partials,this._partials));{const t=yi._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const i=this._getCachedPeriodicWave();if(Pe(i)){const{partials:a,wave:c}=i;this._wave=c,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,c]=this._getRealImaginary(t,this._phase),f=this.context.createPeriodicWave(a,c);this._wave=f,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),yi._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),yi._periodicWaveCache.length>100&&yi._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){tu(t,0);let e=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(e=i[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const a=new Float32Array(t);this._partials.forEach((c,f)=>a[f]=c),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(t,e){let a=2048;const c=new Float32Array(a),f=new Float32Array(a);let d=1;if(t==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,a=d,this._partials.length===0)return[c,f]}else{const m=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);m?(d=parseInt(m[2],10)+1,this._partialCount=parseInt(m[2],10),t=m[1],d=Math.max(d,2),a=d):this._partialCount=0,this._partials=[]}for(let m=1;m<a;++m){const _=2/(m*Math.PI);let T;switch(t){case"sine":T=m<=d?1:0,this._partials[m-1]=T;break;case"square":T=m&1?2*_:0,this._partials[m-1]=T;break;case"sawtooth":T=_*(m&1?1:-1),this._partials[m-1]=T;break;case"triangle":m&1?T=2*(_*_)*(m-1>>1&1?-1:1):T=0,this._partials[m-1]=T;break;case"custom":T=this._partials[m-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}T!==0?(c[m]=-T*Math.sin(e*m),f[m]=T*Math.cos(e*m)):(c[m]=0,f[m]=0)}return[c,f]}_inverseFFT(t,e,i){let a=0;const c=t.length;for(let f=0;f<c;f++)a+=t[f]*Math.cos(f*i)+e[f]*Math.sin(f*i);return a}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let i=0;const a=Math.PI*2,c=32;for(let f=0;f<c;f++)i=Math.max(this._inverseFFT(t,e,f/c*a),i);return z4(-this._inverseFFT(t,e,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return Ti(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}yi._periodicWaveCache=[];class rD extends qd{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Rg({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Fd extends zi{constructor(){const t=Se(Fd.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ts({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(zi.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class B0 extends Yr{constructor(){const t=Se(B0.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new rD({context:this.context}),this._modulationNode=new Ts({context:this.context}),this._carrier=new yi({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new yi({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Fd({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),si(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(yi.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return Ti(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class q0 extends Yr{constructor(){const t=Se(q0.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new Ts({context:this.context,gain:0}),this._carrier=new yi({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new zi({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new yi({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Fd({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Fd({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),si(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(yi.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return Ti(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ng extends Yr{constructor(){const t=Se(Ng.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new Ts({context:this.context,gain:0}),this._thresh=new Rg({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new zi({context:this.context,units:"audioRange",value:t.width}),this._triangle=new yi({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),si(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Yr.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return Ti(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class F0 extends Yr{constructor(){const t=Se(F0.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new zi({context:this.context,units:"frequency",value:t.frequency}),this.detune=new zi({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,si(this,["frequency","detune"])}static getDefaults(){return Object.assign(yi.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,i=t/(this._oscillators.length-1);this._forEach((a,c)=>a.detune.value=e+i*c)}}get count(){return this._oscillators.length}set count(t){if(tu(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const i=new yi({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):yn});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,i)=>e.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return Ti(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class H0 extends Yr{constructor(){const t=Se(H0.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Fd({context:this.context,value:2}),this._pulse=new Ng({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new yi({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),si(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Yr.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return Ti(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const kb={am:B0,fat:F0,fm:q0,oscillator:yi,pulse:Ng,pwm:H0};class h0 extends Yr{constructor(){const t=Se(h0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new zi({context:this.context,units:"frequency",value:t.frequency}),this.detune=new zi({context:this.context,units:"cents",value:t.detune}),si(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(yi.getDefaults(),q0.getDefaults(),B0.getDefaults(),F0.getDefaults(),Ng.getDefaults(),H0.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=kb[t],i=this.now();if(this._oscillator){const a=this._oscillator;a.stop(i),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof kb[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Kh(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Kh(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Vl(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Ti(this,arguments,void 0,function*(t=1024){return tf(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function pE(s,t=1/0){const e=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){tu(c,s,t),e.set(this,c)}})}}function ql(s,t=1/0){const e=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(c){tu(this.toSeconds(c),s,t),e.set(this,c)}})}}class G0 extends Yr{constructor(){const t=Se(G0.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Fn({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Yr.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:yn,onerror:yn,playbackRate:1,reverse:!1})}load(t){return Ti(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=yn){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,i){return super.start(t,e,i),this}_start(t,e,i){this._loop?e=Od(e,this._loopStart):e=Od(e,0);const a=this.toSeconds(e),c=i;i=Od(i,Math.max(this._buffer.duration-a,0));let f=this.toSeconds(i);f=f/this._playbackRate,t=this.toSeconds(t);const d=new z0({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+f),this._state.setStateAtTime("stopped",t+f,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&ya(c)?d.start(t,a):d.start(t,a,f-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(i=>i.stop(e))}restart(t,e,i){return super.restart(t,e,i),this}_restart(t,e,i){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(t),this._start(t,e,i)}seek(t,e){const i=this.toSeconds(e);if(this._state.getValueAtTime(i)==="started"){const a=this.toSeconds(t);this._stop(i),this._start(i,a)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&tu(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&tu(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),i=this._state.getNextState("stopped",e);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ro([ql(0)],G0.prototype,"fadeIn",void 0);ro([ql(0)],G0.prototype,"fadeOut",void 0);class fu extends je{constructor(){const t=Se(fu.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new zi({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(je.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Vl(t))return t;{let i;for(i in Ly)if(Ly[i][e]===t)return i;return t}}_setCurve(t,e,i){if(Vl(i)&&Reflect.has(Ly,i)){const a=Ly[i];qh(a)?t!=="_decayCurve"&&(this[t]=a[e]):this[t]=a}else if(to(i)&&t!=="_decayCurve")this[t]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let a=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),f=this.getValueAtTime(t);if(f>0){const d=1/a;a=(1-f)/d}if(a<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,a,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,a,t);else{this._sig.cancelAndHoldAtTime(t);let d=this._attackCurve;for(let m=1;m<d.length;m++)if(d[m-1]<=f&&f<=d[m]){d=this._attackCurve.slice(m),d[0]=f;break}this._sig.setValueCurveAtTime(d,t,a,e)}if(c&&this.sustain<1){const d=e*this.sustain,m=t+a;this.log("decay",m),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,c+m):this._sig.exponentialApproachValueAtTime(d,m,c)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,t):(xe(to(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,i,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,i=1){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,i=0){return $T(this,t,e,i),this}asArray(){return Ti(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,i=new HT(1,e,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=a+this.toSeconds(this.release),f=c*.1,d=c+f,m=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/d,decay:e*this.toSeconds(this.decay)/d,release:e*this.toSeconds(this.release)/d,context:i}));return m._sig.toDestination(),m.triggerAttackRelease(e*(a+f)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ro([ql(0)],fu.prototype,"attack",void 0);ro([ql(0)],fu.prototype,"decay",void 0);ro([pE(0,1)],fu.prototype,"sustain",void 0);ro([ql(0)],fu.prototype,"release",void 0);const Ly=(()=>{let t,e;const i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));const a=[],c=6.4;for(t=0;t<127;t++){e=t/127;const C=Math.sin(e*(Math.PI*2)*c-Math.PI/2)+1;a[t]=C/10+e*.83}a[127]=1;const f=[],d=5;for(t=0;t<128;t++)f[t]=Math.ceil(t/127*d)/d;const m=[];for(t=0;t<128;t++)e=t/127,m[t]=.5*(1-Math.cos(Math.PI*e));const _=[];for(t=0;t<128;t++){e=t/127;const C=Math.pow(e,3)*4+.2,I=Math.cos(C*Math.PI*2*e);_[t]=Math.abs(I*(1-e))}function T(C){const I=new Array(C.length);for(let O=0;O<C.length;O++)I[O]=1-C[O];return I}function w(C){return C.slice(0).reverse()}return{bounce:{In:T(_),Out:_},cosine:{In:i,Out:w(i)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:T(a)},sine:{In:m,Out:T(m)},step:{In:f,Out:T(f)}}})();class Hd extends je{constructor(){const t=Se(Hd.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new rp({context:this.context,volume:t.volume}),this.volume=this._volume.volume,si(this,"volume")}static getDefaults(){return Object.assign(je.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const i=this["_original_"+t]=this[t];this[t]=(...a)=>{const c=a[e],f=this.context.transport.schedule(d=>{a[e]=d,i.apply(this,a)},c);this._scheduledEvents.push(f)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,i,a){const c=this.toSeconds(i),f=this.toSeconds(e);return this.triggerAttack(t,c,a),this.triggerRelease(c+f),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Gd extends Hd{constructor(){const t=Se(Gd.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Hd.getDefaults(),{detune:0,onsilence:yn,portamento:0})}triggerAttack(t,e,i=1){this.log("triggerAttack",t,e,i);const a=this.toSeconds(e);return this._triggerEnvelopeAttack(a,i),this.setNote(t,a),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const i=this.toSeconds(e),a=t instanceof _a?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,c,i)}else this.frequency.setValueAtTime(a,i);return this}}ro([ql(0)],Gd.prototype,"portamento",void 0);class iw extends fu{constructor(){super(Se(iw.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ts({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Fh extends Gd{constructor(){const t=Se(Fh.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new h0(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new iw(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),si(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Gd.getDefaults(),{envelope:Object.assign(Mb(fu.getDefaults(),Object.keys(je.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Mb(h0.getDefaults(),[...Object.keys(Yr.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+i+a)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class K0 extends Fh{constructor(){const t=Se(K0.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,si(this,["oscillator","envelope"])}static getDefaults(){return Id(Gd.getDefaults(),Fh.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const i=this.toSeconds(e),a=this.toFrequency(t instanceof _a?t.toFrequency():t),c=a*this.octaves;return this.oscillator.frequency.setValueAtTime(c,i),this.oscillator.frequency.exponentialRampToValueAtTime(a,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ro([pE(0)],K0.prototype,"octaves",void 0);ro([ql(0)],K0.prototype,"pitchDecay",void 0);const mE=new Set;function sw(s){mE.add(s)}function gE(s,t){const e=`registerProcessor("${s}", ${t})`;mE.add(e)}const aD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;sw(aD);const oD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;sw(oD);const lD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;sw(lD);const cD="feedback-comb-filter",uD=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;gE(cD,uD);class W0 extends Hd{constructor(){const t=Se(W0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(i=>{const a=parseInt(i,10);if(xe(jy(i)||Kh(a)&&isFinite(a),`url key is neither a note or midi pitch: ${i}`),jy(i)){const c=new _a(this.context,i).toMidi();e[c]=t.urls[i]}else Kh(a)&&isFinite(a)&&(e[a]=t.urls[a])}),this._buffers=new JT({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Hd.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:yn,onerror:yn,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i<96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,i=1){return this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]),t.forEach(a=>{const c=dE(new _a(this.context,a).toFrequency()),f=Math.round(c),d=c-f,m=this._findClosest(f),_=f-m,T=this._buffers.get(_),w=fE(m+d),C=new z0({url:T,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:w}).connect(this.output);C.start(e,0,T.duration/w,i),to(this._activeSources.get(f))||this._activeSources.set(f,[]),this._activeSources.get(f).push(C),C.onended=()=>{if(this._activeSources&&this._activeSources.has(f)){const I=this._activeSources.get(f),O=I.indexOf(C);O!==-1&&I.splice(O,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(i=>{const a=new _a(this.context,i).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const c=this._activeSources.get(a);e=this.toSeconds(e),c.forEach(f=>{f.stop(e)}),this._activeSources.set(a,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,i,a=1){const c=this.toSeconds(i);return this.triggerAttack(t,c,a),to(e)?(xe(to(t),"notes must be an array when duration is array"),t.forEach((f,d)=>{const m=e[Math.min(d,e.length-1)];this.triggerRelease(f,c+this.toSeconds(m))})):this.triggerRelease(t,c+this.toSeconds(e)),this}add(t,e,i){if(xe(jy(t)||isFinite(t),`note must be a pitch or midi: ${t}`),jy(t)){const a=new _a(this.context,t).toMidi();this._buffers.add(a,e,i)}else this._buffers.add(t,e,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}ro([ql(0)],W0.prototype,"attack",void 0);ro([ql(0)],W0.prototype,"release",void 0);class rw extends je{constructor(){const t=Se(rw.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Qn({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",si(this,"pan")}static getDefaults(){return Object.assign(je.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const hD="bit-crusher",fD=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;gE(hD,fD);class _i extends je{constructor(){const t=Se(_i.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new Ts({context:this.context}),_i._allSolos.has(this.context)||_i._allSolos.set(this.context,new Set),_i._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(je.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),_i._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){_i._soloed.has(this.context)||_i._soloed.set(this.context,new Set),_i._soloed.get(this.context).add(this)}_removeSolo(){_i._soloed.has(this.context)&&_i._soloed.get(this.context).delete(this)}_isSoloed(){return _i._soloed.has(this.context)&&_i._soloed.get(this.context).has(this)}_noSolos(){return!_i._soloed.has(this.context)||_i._soloed.has(this.context)&&_i._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),_i._allSolos.get(this.context).delete(this),this._removeSolo(),this}}_i._allSolos=new Map;_i._soloed=new Map;class aw extends je{constructor(){const t=Se(aw.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new rw({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new rp({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,si(this,["pan","volume"])}static getDefaults(){return Object.assign(je.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Nd extends je{constructor(){const t=Se(Nd.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new _i({solo:t.solo,context:this.context}),this._panVol=this.output=new aw({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),si(this,["pan","volume"])}static getDefaults(){return Object.assign(je.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Nd.buses.has(t)||Nd.buses.set(t,new Ts({context:this.context})),Nd.buses.get(t)}send(t,e=0){const i=this._getBus(t),a=new Ts({context:this.context,units:"decibels",gain:e});return this.connect(a),a.connect(i),a}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Nd.buses=new Map;function y1(){return ga().now()}ga().transport;ga().destination;ga().destination;ga().listener;ga().draw;ga();const Hh={hiragana:[{char:"",romaji:"a",category:"vowel",row:"vowel",col:1,type:"basic"},{char:"",romaji:"i",category:"vowel",row:"vowel",col:2,type:"basic"},{char:"",romaji:"u",category:"vowel",row:"vowel",col:3,type:"basic"},{char:"",romaji:"e",category:"vowel",row:"vowel",col:4,type:"basic"},{char:"",romaji:"o",category:"vowel",row:"vowel",col:5,type:"basic"},{char:"",romaji:"ka",category:"k-series",row:"k",col:1,type:"basic"},{char:"",romaji:"ki",category:"k-series",row:"k",col:2,type:"basic"},{char:"",romaji:"ku",category:"k-series",row:"k",col:3,type:"basic"},{char:"",romaji:"ke",category:"k-series",row:"k",col:4,type:"basic"},{char:"",romaji:"ko",category:"k-series",row:"k",col:5,type:"basic"},{char:"",romaji:"sa",category:"s-series",row:"s",col:1,type:"basic"},{char:"",romaji:"shi",category:"s-series",row:"s",col:2,type:"basic"},{char:"",romaji:"su",category:"s-series",row:"s",col:3,type:"basic"},{char:"",romaji:"se",category:"s-series",row:"s",col:4,type:"basic"},{char:"",romaji:"so",category:"s-series",row:"s",col:5,type:"basic"},{char:"",romaji:"ta",category:"t-series",row:"t",col:1,type:"basic"},{char:"",romaji:"chi",category:"t-series",row:"t",col:2,type:"basic"},{char:"",romaji:"tsu",category:"t-series",row:"t",col:3,type:"basic"},{char:"",romaji:"te",category:"t-series",row:"t",col:4,type:"basic"},{char:"",romaji:"to",category:"t-series",row:"t",col:5,type:"basic"},{char:"",romaji:"na",category:"n-series",row:"n",col:1,type:"basic"},{char:"",romaji:"ni",category:"n-series",row:"n",col:2,type:"basic"},{char:"",romaji:"nu",category:"n-series",row:"n",col:3,type:"basic"},{char:"",romaji:"ne",category:"n-series",row:"n",col:4,type:"basic"},{char:"",romaji:"no",category:"n-series",row:"n",col:5,type:"basic"},{char:"",romaji:"ha",category:"h-series",row:"h",col:1,type:"basic"},{char:"",romaji:"hi",category:"h-series",row:"h",col:2,type:"basic"},{char:"",romaji:"fu",category:"h-series",row:"h",col:3,type:"basic"},{char:"",romaji:"he",category:"h-series",row:"h",col:4,type:"basic"},{char:"",romaji:"ho",category:"h-series",row:"h",col:5,type:"basic"},{char:"",romaji:"ma",category:"m-series",row:"m",col:1,type:"basic"},{char:"",romaji:"mi",category:"m-series",row:"m",col:2,type:"basic"},{char:"",romaji:"mu",category:"m-series",row:"m",col:3,type:"basic"},{char:"",romaji:"me",category:"m-series",row:"m",col:4,type:"basic"},{char:"",romaji:"mo",category:"m-series",row:"m",col:5,type:"basic"},{char:"",romaji:"ya",category:"y-series",row:"y",col:1,type:"basic"},{char:"",romaji:"yu",category:"y-series",row:"y",col:3,type:"basic"},{char:"",romaji:"yo",category:"y-series",row:"y",col:5,type:"basic"},{char:"",romaji:"ra",category:"r-series",row:"r",col:1,type:"basic"},{char:"",romaji:"ri",category:"r-series",row:"r",col:2,type:"basic"},{char:"",romaji:"ru",category:"r-series",row:"r",col:3,type:"basic"},{char:"",romaji:"re",category:"r-series",row:"r",col:4,type:"basic"},{char:"",romaji:"ro",category:"r-series",row:"r",col:5,type:"basic"},{char:"",romaji:"wa",category:"w-series",row:"w",col:1,type:"basic"},{char:"",romaji:"wo",category:"w-series",row:"w",col:5,type:"basic"},{char:"",romaji:"n",category:"n-consonant",row:"n-single",col:1,type:"basic"},{char:"",romaji:"ga",category:"g-series",row:"g",col:1,type:"dakuten"},{char:"",romaji:"gi",category:"g-series",row:"g",col:2,type:"dakuten"},{char:"",romaji:"gu",category:"g-series",row:"g",col:3,type:"dakuten"},{char:"",romaji:"ge",category:"g-series",row:"g",col:4,type:"dakuten"},{char:"",romaji:"go",category:"g-series",row:"g",col:5,type:"dakuten"},{char:"",romaji:"za",category:"z-series",row:"z",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"z-series",row:"z",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"z-series",row:"z",col:3,type:"dakuten"},{char:"",romaji:"ze",category:"z-series",row:"z",col:4,type:"dakuten"},{char:"",romaji:"zo",category:"z-series",row:"z",col:5,type:"dakuten"},{char:"",romaji:"da",category:"d-series",row:"d",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"d-series",row:"d",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"d-series",row:"d",col:3,type:"dakuten"},{char:"",romaji:"de",category:"d-series",row:"d",col:4,type:"dakuten"},{char:"",romaji:"do",category:"d-series",row:"d",col:5,type:"dakuten"},{char:"",romaji:"ba",category:"b-series",row:"b",col:1,type:"dakuten"},{char:"",romaji:"bi",category:"b-series",row:"b",col:2,type:"dakuten"},{char:"",romaji:"bu",category:"b-series",row:"b",col:3,type:"dakuten"},{char:"",romaji:"be",category:"b-series",row:"b",col:4,type:"dakuten"},{char:"",romaji:"bo",category:"b-series",row:"b",col:5,type:"dakuten"},{char:"",romaji:"pa",category:"p-series",row:"p",col:1,type:"handakuten"},{char:"",romaji:"pi",category:"p-series",row:"p",col:2,type:"handakuten"},{char:"",romaji:"pu",category:"p-series",row:"p",col:3,type:"handakuten"},{char:"",romaji:"pe",category:"p-series",row:"p",col:4,type:"handakuten"},{char:"",romaji:"po",category:"p-series",row:"p",col:5,type:"handakuten"}],katakana:[{char:"",romaji:"a",category:"vowel",row:"vowel",col:1,type:"basic"},{char:"",romaji:"i",category:"vowel",row:"vowel",col:2,type:"basic"},{char:"",romaji:"u",category:"vowel",row:"vowel",col:3,type:"basic"},{char:"",romaji:"e",category:"vowel",row:"vowel",col:4,type:"basic"},{char:"",romaji:"o",category:"vowel",row:"vowel",col:5,type:"basic"},{char:"",romaji:"ka",category:"k-series",row:"k",col:1,type:"basic"},{char:"",romaji:"ki",category:"k-series",row:"k",col:2,type:"basic"},{char:"",romaji:"ku",category:"k-series",row:"k",col:3,type:"basic"},{char:"",romaji:"ke",category:"k-series",row:"k",col:4,type:"basic"},{char:"",romaji:"ko",category:"k-series",row:"k",col:5,type:"basic"},{char:"",romaji:"sa",category:"s-series",row:"s",col:1,type:"basic"},{char:"",romaji:"shi",category:"s-series",row:"s",col:2,type:"basic"},{char:"",romaji:"su",category:"s-series",row:"s",col:3,type:"basic"},{char:"",romaji:"se",category:"s-series",row:"s",col:4,type:"basic"},{char:"",romaji:"so",category:"s-series",row:"s",col:5,type:"basic"},{char:"",romaji:"ta",category:"t-series",row:"t",col:1,type:"basic"},{char:"",romaji:"chi",category:"t-series",row:"t",col:2,type:"basic"},{char:"",romaji:"tsu",category:"t-series",row:"t",col:3,type:"basic"},{char:"",romaji:"te",category:"t-series",row:"t",col:4,type:"basic"},{char:"",romaji:"to",category:"t-series",row:"t",col:5,type:"basic"},{char:"",romaji:"na",category:"n-series",row:"n",col:1,type:"basic"},{char:"",romaji:"ni",category:"n-series",row:"n",col:2,type:"basic"},{char:"",romaji:"nu",category:"n-series",row:"n",col:3,type:"basic"},{char:"",romaji:"ne",category:"n-series",row:"n",col:4,type:"basic"},{char:"",romaji:"no",category:"n-series",row:"n",col:5,type:"basic"},{char:"",romaji:"ha",category:"h-series",row:"h",col:1,type:"basic"},{char:"",romaji:"hi",category:"h-series",row:"h",col:2,type:"basic"},{char:"",romaji:"fu",category:"h-series",row:"h",col:3,type:"basic"},{char:"",romaji:"he",category:"h-series",row:"h",col:4,type:"basic"},{char:"",romaji:"ho",category:"h-series",row:"h",col:5,type:"basic"},{char:"",romaji:"ma",category:"m-series",row:"m",col:1,type:"basic"},{char:"",romaji:"mi",category:"m-series",row:"m",col:2,type:"basic"},{char:"",romaji:"mu",category:"m-series",row:"m",col:3,type:"basic"},{char:"",romaji:"me",category:"m-series",row:"m",col:4,type:"basic"},{char:"",romaji:"mo",category:"m-series",row:"m",col:5,type:"basic"},{char:"",romaji:"ya",category:"y-series",row:"y",col:1,type:"basic"},{char:"",romaji:"yu",category:"y-series",row:"y",col:3,type:"basic"},{char:"",romaji:"yo",category:"y-series",row:"y",col:5,type:"basic"},{char:"",romaji:"ra",category:"r-series",row:"r",col:1,type:"basic"},{char:"",romaji:"ri",category:"r-series",row:"r",col:2,type:"basic"},{char:"",romaji:"ru",category:"r-series",row:"r",col:3,type:"basic"},{char:"",romaji:"re",category:"r-series",row:"r",col:4,type:"basic"},{char:"",romaji:"ro",category:"r-series",row:"r",col:5,type:"basic"},{char:"",romaji:"wa",category:"w-series",row:"w",col:1,type:"basic"},{char:"",romaji:"wo",category:"w-series",row:"w",col:5,type:"basic"},{char:"",romaji:"n",category:"n-consonant",row:"n-single",col:1,type:"basic"},{char:"",romaji:"ga",category:"g-series",row:"g",col:1,type:"dakuten"},{char:"",romaji:"gi",category:"g-series",row:"g",col:2,type:"dakuten"},{char:"",romaji:"gu",category:"g-series",row:"g",col:3,type:"dakuten"},{char:"",romaji:"ge",category:"g-series",row:"g",col:4,type:"dakuten"},{char:"",romaji:"go",category:"g-series",row:"g",col:5,type:"dakuten"},{char:"",romaji:"za",category:"z-series",row:"z",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"z-series",row:"z",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"z-series",row:"z",col:3,type:"dakuten"},{char:"",romaji:"ze",category:"z-series",row:"z",col:4,type:"dakuten"},{char:"",romaji:"zo",category:"z-series",row:"z",col:5,type:"dakuten"},{char:"",romaji:"da",category:"d-series",row:"d",col:1,type:"dakuten"},{char:"",romaji:"ji",category:"d-series",row:"d",col:2,type:"dakuten"},{char:"",romaji:"zu",category:"d-series",row:"d",col:3,type:"dakuten"},{char:"",romaji:"de",category:"d-series",row:"d",col:4,type:"dakuten"},{char:"",romaji:"do",category:"d-series",row:"d",col:5,type:"dakuten"},{char:"",romaji:"ba",category:"b-series",row:"b",col:1,type:"dakuten"},{char:"",romaji:"bi",category:"b-series",row:"b",col:2,type:"dakuten"},{char:"",romaji:"bu",category:"b-series",row:"b",col:3,type:"dakuten"},{char:"",romaji:"be",category:"b-series",row:"b",col:4,type:"dakuten"},{char:"",romaji:"bo",category:"b-series",row:"b",col:5,type:"dakuten"},{char:"",romaji:"pa",category:"p-series",row:"p",col:1,type:"handakuten"},{char:"",romaji:"pi",category:"p-series",row:"p",col:2,type:"handakuten"},{char:"",romaji:"pu",category:"p-series",row:"p",col:3,type:"handakuten"},{char:"",romaji:"pe",category:"p-series",row:"p",col:4,type:"handakuten"},{char:"",romaji:"po",category:"p-series",row:"p",col:5,type:"handakuten"}]},_E={hiragana:[{id:"basic",name:"Base"},{id:"dakuten",name:"Dakuten"},{id:"handakuten",name:"Handakuten"}],katakana:[{id:"basic",name:"Base"},{id:"dakuten",name:"Dakuten"},{id:"handakuten",name:"Handakuten"}]},ow=[{id:"n-single",label:"N"},{id:"w",label:"W"},{id:"r",label:"R"},{id:"y",label:"Y"},{id:"m",label:"M"},{id:"h",label:"H"},{id:"n",label:"N"},{id:"t",label:"T"},{id:"s",label:"S"},{id:"k",label:"K"},{id:"vowel",label:"A"},{id:"g",label:"G"},{id:"z",label:"Z"},{id:"d",label:"D"},{id:"b",label:"B"},{id:"p",label:"P"}],lw=[{id:1,label:"a"},{id:2,label:"i"},{id:3,label:"u"},{id:4,label:"e"},{id:5,label:"o"}],dD=s=>{if(!Hh[s])return new Set;const t=new Set;return Hh[s].forEach(e=>{e.type==="basic"&&t.add(e.char)}),t},yE=(s,t)=>{const e=Hh[s];if(!e)return{header:[],rows:[]};const a=e.filter(d=>d.type===t).reduce((d,m)=>{const _=m.row,T=m.col;return!_||!T||(d[_]||(d[_]={}),d[_][T]=m),d},{}),c=ow.filter(d=>a[d.id]),f=lw.map(d=>{const m=c.map(_=>a[_.id]?.[d.id]||null);return{id:d.id,label:d.label,chars:m}});return{header:c,rows:f}},Lh=s=>{if(!(!s||!("speechSynthesis"in window)))try{window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(s);t.lang="ja-JP",t.rate=.9,window.speechSynthesis.speak(t)}catch(t){console.error("Sintesi vocale non riuscita:",t)}},v1=(s,t,e)=>s+(t-s)*e,Py={RED:{r:220,g:38,b:38},YELLOW:{r:202,g:138,b:4},GREEN:{r:21,g:128,b:61}},vE=s=>s.reduce((t,e)=>{const i=e.char;return t[i]||(t[i]={char:i,attempts:0,correct:0,accuracy:0}),t[i].attempts+=1,e.isCorrect&&(t[i].correct+=1),t[i].accuracy=t[i].attempts>0?t[i].correct/t[i].attempts*100:0,t},{}),Ig=(s,t)=>{if(!t||s===null)return{backgroundColor:"#E5E7EB",color:"#6B7280"};let e,i,a;s<=50?(a=s/50,e=Py.RED,i=Py.YELLOW):(a=(s-50)/50,e=Py.YELLOW,i=Py.GREEN);const c=Math.round(v1(e.r,i.r,a)),f=Math.round(v1(e.g,i.g,a)),d=Math.round(v1(e.b,i.b,a)),m=`rgb(${c}, ${f}, ${d})`,_=`rgba(${c}, ${f}, ${d}, 0.2)`,T=s>70?"white":"black";return{backgroundImage:`linear-gradient(to top, ${m} ${s}%, ${_} ${s}%)`,color:T}},Xa={SOUND_EFFECTS:"kana:soundEffects",SPEECH:"kana:speech",AUTO_SKIP:"kana:autoSkip",DIRECTION:"kana:direction",TIMED_MODE:"kana:timedMode",SELECTION_MAP:"kana:selectionMap",SELECTED_SETS:"kana:selectedSets",SESSION_HISTORY:"kana:sessionHistory",SESSION_STATS:"kana:sessionStats",CURRENT_STREAK:"kana:currentStreak"};function Ol(s,t){const e=(c,f)=>{try{if(typeof window<"u"){const d=window.localStorage.getItem(c);if(d){const m=JSON.parse(d);if(s===Xa.SELECTION_MAP){const _={};for(const T in m)_[T]=new Set(m[T]);return _}return m}}}catch(d){console.warn(`Error reading localStorage key "${c}":`,d)}return f},[i,a]=Ht.useState(()=>e(s,t));return Ht.useEffect(()=>{try{if(typeof window<"u"){let c;if(s===Xa.SELECTION_MAP){const f={};for(const d in i)f[d]=Array.from(i[d]);c=JSON.stringify(f)}else c=JSON.stringify(i);window.localStorage.setItem(s,c)}}catch(c){console.warn(`Error setting localStorage key "${s}":`,c)}},[s,i]),[i,a]}const pD=()=>{};var Vb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(s){const t=[];let e=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},mD=function(s){const t=[];let e=0,i=0;for(;e<s.length;){const a=s[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[e++];t[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[e++],f=s[e++],d=s[e++],m=((a&7)<<18|(c&63)<<12|(f&63)<<6|d&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const c=s[e++],f=s[e++];t[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return t.join("")},wE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],f=a+1<s.length,d=f?s[a+1]:0,m=a+2<s.length,_=m?s[a+2]:0,T=c>>2,w=(c&3)<<4|d>>4;let C=(d&15)<<2|_>>6,I=_&63;m||(I=64,f||(C=64)),i.push(e[T],e[w],e[C],e[I])}return i.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(TE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):mD(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=e[s.charAt(a++)],d=a<s.length?e[s.charAt(a)]:0;++a;const _=a<s.length?e[s.charAt(a)]:64;++a;const w=a<s.length?e[s.charAt(a)]:64;if(++a,c==null||d==null||_==null||w==null)throw new gD;const C=c<<2|d>>4;if(i.push(C),_!==64){const I=d<<4&240|_>>2;if(i.push(I),w!==64){const O=_<<6&192|w;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class gD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _D=function(s){const t=TE(s);return wE.encodeByteArray(t,!0)},f0=function(s){return _D(s).replace(/\./g,"")},yD=function(s){try{return wE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=()=>vD().__FIREBASE_DEFAULTS__,wD=()=>{if(typeof process>"u"||typeof Vb>"u")return;const s=Vb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},bD=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&yD(s[1]);return t&&JSON.parse(t)},cw=()=>{try{return pD()||TD()||wD()||bD()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},SD=s=>cw()?.emulatorHosts?.[s],AD=s=>{const t=SD(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},bE=()=>cw()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CD(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[f0(JSON.stringify(e)),f0(JSON.stringify(f)),""].join(".")}const ng={};function RD(){const s={prod:[],emulator:[]};for(const t of Object.keys(ng))ng[t]?s.emulator.push(t):s.prod.push(t);return s}function ND(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let jb=!1;function ID(s,t){if(typeof window>"u"||typeof document>"u"||!uw(window.location.host)||ng[s]===t||ng[s]||jb)return;ng[s]=t;function e(C){return`__firebase__banner__${C}`}const i="__firebase__banner",c=RD().prod.length>0;function f(){const C=document.getElementById(i);C&&C.remove()}function d(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,I){C.setAttribute("width","24"),C.setAttribute("id",I),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{jb=!0,f()},C}function T(C,I){C.setAttribute("id",I),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function w(){const C=ND(i),I=e("text"),O=document.getElementById(I)||document.createElement("span"),k=e("learnmore"),D=document.getElementById(k)||document.createElement("a"),z=e("preprendIcon"),X=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const Y=C.element;d(Y),T(D,k);const it=_();m(X,z),Y.append(X,O,D,it),document.body.appendChild(Y)}c?(O.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DD(){const s=cw()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MD(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function kD(){return!DD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SE(){try{return typeof indexedDB=="object"}catch{return!1}}function AE(){return new Promise((s,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}function VD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="FirebaseError";class du extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=jD,Object.setPrototypeOf(this,du.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$0.prototype.create)}}class $0{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,c=this.errors[t],f=c?LD(c,i):"Error",d=`${this.serviceName}: ${f} (${a}).`;return new du(a,d,i)}}function LD(s,t){return s.replace(PD,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const PD=/\{\$([^}]+)}/g;function ug(s,t){if(s===t)return!0;const e=Object.keys(s),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const c=s[a],f=t[a];if(Lb(c)&&Lb(f)){if(!ug(c,f))return!1}else if(c!==f)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function Lb(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=1e3,zD=2,BD=14400*1e3,qD=.5;function Pb(s,t=UD,e=zD){const i=t*Math.pow(e,s),a=Math.round(qD*i*(Math.random()-.5)*2);return Math.min(BD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(s){return s&&s._delegate?s._delegate:s}class jl{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new ED;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(GD(t))try{this.getOrInitializeService({instanceIdentifier:Ph})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(t=Ph){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ph){return this.instances.has(t)}getOptions(t=Ph){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[c,f]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(c);i===d&&f.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&t(c,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:HD(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ph){return this.component?this.component.multipleInstances?t:Ph:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HD(s){return s===Ph?void 0:s}function GD(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new FD(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ke||(Ke={}));const WD={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},$D=Ke.INFO,YD={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},QD=(s,t,...e)=>{if(t<s.logLevel)return;const i=new Date().toISOString(),a=YD[t];if(a)console[a](`[${i}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class hw{constructor(t){this.name=t,this._logLevel=$D,this._logHandler=QD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ke))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?WD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...t),this._logHandler(this,Ke.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...t),this._logHandler(this,Ke.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...t),this._logHandler(this,Ke.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...t),this._logHandler(this,Ke.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...t),this._logHandler(this,Ke.ERROR,...t)}}const XD=(s,t)=>t.some(e=>s instanceof e);let Ub,zb;function ZD(){return Ub||(Ub=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JD(){return zb||(zb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EE=new WeakMap,Z1=new WeakMap,CE=new WeakMap,T1=new WeakMap,fw=new WeakMap;function tM(s){const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{e(Yc(s.result)),a()},f=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",f)});return t.then(e=>{e instanceof IDBCursor&&EE.set(e,s)}).catch(()=>{}),fw.set(t,s),t}function eM(s){if(Z1.has(s))return;const t=new Promise((e,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{e(),a()},f=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Z1.set(s,t)}let J1={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Z1.get(s);if(t==="objectStoreNames")return s.objectStoreNames||CE.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Yc(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function nM(s){J1=s(J1)}function iM(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=s.call(w1(this),t,...e);return CE.set(i,t.sort?t.sort():[t]),Yc(i)}:JD().includes(s)?function(...t){return s.apply(w1(this),t),Yc(EE.get(this))}:function(...t){return Yc(s.apply(w1(this),t))}}function sM(s){return typeof s=="function"?iM(s):(s instanceof IDBTransaction&&eM(s),XD(s,ZD())?new Proxy(s,J1):s)}function Yc(s){if(s instanceof IDBRequest)return tM(s);if(T1.has(s))return T1.get(s);const t=sM(s);return t!==s&&(T1.set(s,t),fw.set(t,s)),t}const w1=s=>fw.get(s);function xE(s,t,{blocked:e,upgrade:i,blocking:a,terminated:c}={}){const f=indexedDB.open(s,t),d=Yc(f);return i&&f.addEventListener("upgradeneeded",m=>{i(Yc(f.result),m.oldVersion,m.newVersion,Yc(f.transaction),m)}),e&&f.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),d.then(m=>{c&&m.addEventListener("close",()=>c()),a&&m.addEventListener("versionchange",_=>a(_.oldVersion,_.newVersion,_))}).catch(()=>{}),d}const rM=["get","getKey","getAll","getAllKeys","count"],aM=["put","add","delete","clear"],b1=new Map;function Bb(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(b1.get(t))return b1.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=aM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||rM.includes(e)))return;const c=async function(f,...d){const m=this.transaction(f,a?"readwrite":"readonly");let _=m.store;return i&&(_=_.index(d.shift())),(await Promise.all([_[e](...d),a&&m.done]))[0]};return b1.set(t,c),c}nM(s=>({...s,get:(t,e,i)=>Bb(t,e)||s.get(t,e,i),has:(t,e)=>!!Bb(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(lM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function lM(s){return s.getComponent()?.type==="VERSION"}const tT="@firebase/app",qb="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new hw("@firebase/app"),cM="@firebase/app-compat",uM="@firebase/analytics-compat",hM="@firebase/analytics",fM="@firebase/app-check-compat",dM="@firebase/app-check",pM="@firebase/auth",mM="@firebase/auth-compat",gM="@firebase/database",_M="@firebase/data-connect",yM="@firebase/database-compat",vM="@firebase/functions",TM="@firebase/functions-compat",wM="@firebase/installations",bM="@firebase/installations-compat",SM="@firebase/messaging",AM="@firebase/messaging-compat",EM="@firebase/performance",CM="@firebase/performance-compat",xM="@firebase/remote-config",RM="@firebase/remote-config-compat",NM="@firebase/storage",IM="@firebase/storage-compat",OM="@firebase/firestore",DM="@firebase/ai",MM="@firebase/firestore-compat",kM="firebase",VM="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="[DEFAULT]",jM={[tT]:"fire-core",[cM]:"fire-core-compat",[hM]:"fire-analytics",[uM]:"fire-analytics-compat",[dM]:"fire-app-check",[fM]:"fire-app-check-compat",[pM]:"fire-auth",[mM]:"fire-auth-compat",[gM]:"fire-rtdb",[_M]:"fire-data-connect",[yM]:"fire-rtdb-compat",[vM]:"fire-fn",[TM]:"fire-fn-compat",[wM]:"fire-iid",[bM]:"fire-iid-compat",[SM]:"fire-fcm",[AM]:"fire-fcm-compat",[EM]:"fire-perf",[CM]:"fire-perf-compat",[xM]:"fire-rc",[RM]:"fire-rc-compat",[NM]:"fire-gcs",[IM]:"fire-gcs-compat",[OM]:"fire-fst",[MM]:"fire-fst-compat",[DM]:"fire-vertex","fire-js":"fire-js",[kM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new Map,LM=new Map,nT=new Map;function Fb(s,t){try{s.container.addComponent(t)}catch(e){Ll.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function nu(s){const t=s.name;if(nT.has(t))return Ll.debug(`There were multiple attempts to register component ${t}.`),!1;nT.set(t,s);for(const e of d0.values())Fb(e,s);for(const e of LM.values())Fb(e,s);return!0}function Og(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function PM(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qc=new $0("app","Firebase",UM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new jl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=VM;function RE(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const i={name:eT,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw Qc.create("bad-app-name",{appName:String(a)});if(e||(e=bE()),!e)throw Qc.create("no-options");const c=d0.get(a);if(c){if(ug(e,c.options)&&ug(i,c.config))return c;throw Qc.create("duplicate-app",{appName:a})}const f=new KD(a);for(const m of nT.values())f.addComponent(m);const d=new zM(e,i,f);return d0.set(a,d),d}function NE(s=eT){const t=d0.get(s);if(!t&&s===eT&&bE())return RE();if(!t)throw Qc.create("no-app",{appName:s});return t}function Bo(s,t,e){let i=jM[s]??s;e&&(i+=`-${e}`);const a=i.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const f=[`Unable to register library "${i}" with version "${t}":`];a&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ll.warn(f.join(" "));return}nu(new jl(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="firebase-heartbeat-database",FM=1,hg="firebase-heartbeat-store";let S1=null;function IE(){return S1||(S1=xE(qM,FM,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(hg)}catch(e){console.warn(e)}}}}).catch(s=>{throw Qc.create("idb-open",{originalErrorMessage:s.message})})),S1}async function HM(s){try{const e=(await IE()).transaction(hg),i=await e.objectStore(hg).get(OE(s));return await e.done,i}catch(t){if(t instanceof du)Ll.warn(t.message);else{const e=Qc.create("idb-get",{originalErrorMessage:t?.message});Ll.warn(e.message)}}}async function Hb(s,t){try{const i=(await IE()).transaction(hg,"readwrite");await i.objectStore(hg).put(t,OE(s)),await i.done}catch(e){if(e instanceof du)Ll.warn(e.message);else{const i=Qc.create("idb-set",{originalErrorMessage:e?.message});Ll.warn(i.message)}}}function OE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=1024,KM=30;class WM{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new YM(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>KM){const a=QM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ll.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gb(),{heartbeatsToSend:e,unsentEntries:i}=$M(this._heartbeatsCache.heartbeats),a=f0(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ll.warn(t),""}}}function Gb(){return new Date().toISOString().substring(0,10)}function $M(s,t=GM){const e=[];let i=s.slice();for(const a of s){const c=e.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),Kb(e)>t){c.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Kb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class YM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SE()?AE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await HM(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Kb(s){return f0(JSON.stringify({version:2,heartbeats:s})).length}function QM(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let i=1;i<s.length;i++)s[i].date<e&&(e=s[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(s){nu(new jl("platform-logger",t=>new oM(t),"PRIVATE")),nu(new jl("heartbeat",t=>new WM(t),"PRIVATE")),Bo(tT,qb,s),Bo(tT,qb,"esm2020"),Bo("fire-js","")}XM("");var ZM="firebase",JM="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bo(ZM,JM,"app");const DE="@firebase/installations",dw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=1e4,kE=`w:${dw}`,VE="FIS_v2",t3="https://firebaseinstallations.googleapis.com/v1",e3=3600*1e3,n3="installations",i3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$h=new $0(n3,i3,s3);function jE(s){return s instanceof du&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE({projectId:s}){return`${t3}/projects/${s}/installations`}function PE(s){return{token:s.token,requestStatus:2,expiresIn:a3(s.expiresIn),creationTime:Date.now()}}async function UE(s,t){const i=(await t.json()).error;return $h.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function zE({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function r3(s,{refreshToken:t}){const e=zE(s);return e.append("Authorization",o3(t)),e}async function BE(s){const t=await s();return t.status>=500&&t.status<600?s():t}function a3(s){return Number(s.replace("s","000"))}function o3(s){return`${VE} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3({appConfig:s,heartbeatServiceProvider:t},{fid:e}){const i=LE(s),a=zE(s),c=t.getImmediate({optional:!0});if(c){const _=await c.getHeartbeatsHeader();_&&a.append("x-firebase-client",_)}const f={fid:e,authVersion:VE,appId:s.appId,sdkVersion:kE},d={method:"POST",headers:a,body:JSON.stringify(f)},m=await BE(()=>fetch(i,d));if(m.ok){const _=await m.json();return{fid:_.fid||e,registrationStatus:2,refreshToken:_.refreshToken,authToken:PE(_.authToken)}}else throw await UE("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=/^[cdef][\w-]{21}$/,iT="";function h3(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const e=f3(s);return u3.test(e)?e:iT}catch{return iT}}function f3(s){return c3(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Map;function HE(s,t){const e=Y0(s);GE(e,t),d3(e,t)}function GE(s,t){const e=FE.get(s);if(e)for(const i of e)i(t)}function d3(s,t){const e=p3();e&&e.postMessage({key:s,fid:t}),m3()}let zh=null;function p3(){return!zh&&"BroadcastChannel"in self&&(zh=new BroadcastChannel("[Firebase] FID Change"),zh.onmessage=s=>{GE(s.data.key,s.data.fid)}),zh}function m3(){FE.size===0&&zh&&(zh.close(),zh=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="firebase-installations-database",_3=1,Yh="firebase-installations-store";let A1=null;function pw(){return A1||(A1=xE(g3,_3,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Yh)}}})),A1}async function p0(s,t){const e=Y0(s),a=(await pw()).transaction(Yh,"readwrite"),c=a.objectStore(Yh),f=await c.get(e);return await c.put(t,e),await a.done,(!f||f.fid!==t.fid)&&HE(s,t.fid),t}async function KE(s){const t=Y0(s),i=(await pw()).transaction(Yh,"readwrite");await i.objectStore(Yh).delete(t),await i.done}async function Q0(s,t){const e=Y0(s),a=(await pw()).transaction(Yh,"readwrite"),c=a.objectStore(Yh),f=await c.get(e),d=t(f);return d===void 0?await c.delete(e):await c.put(d,e),await a.done,d&&(!f||f.fid!==d.fid)&&HE(s,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mw(s){let t;const e=await Q0(s.appConfig,i=>{const a=y3(i),c=v3(s,a);return t=c.registrationPromise,c.installationEntry});return e.fid===iT?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function y3(s){const t=s||{fid:h3(),registrationStatus:0};return WE(t)}function v3(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject($h.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=T3(s,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:w3(s)}:{installationEntry:t}}async function T3(s,t){try{const e=await l3(s,t);return p0(s.appConfig,e)}catch(e){throw jE(e)&&e.customData.serverCode===409?await KE(s.appConfig):await p0(s.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function w3(s){let t=await Wb(s.appConfig);for(;t.registrationStatus===1;)await qE(100),t=await Wb(s.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:i}=await mw(s);return i||e}return t}function Wb(s){return Q0(s,t=>{if(!t)throw $h.create("installation-not-found");return WE(t)})}function WE(s){return b3(s)?{fid:s.fid,registrationStatus:0}:s}function b3(s){return s.registrationStatus===1&&s.registrationTime+ME<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S3({appConfig:s,heartbeatServiceProvider:t},e){const i=A3(s,e),a=r3(s,e),c=t.getImmediate({optional:!0});if(c){const _=await c.getHeartbeatsHeader();_&&a.append("x-firebase-client",_)}const f={installation:{sdkVersion:kE,appId:s.appId}},d={method:"POST",headers:a,body:JSON.stringify(f)},m=await BE(()=>fetch(i,d));if(m.ok){const _=await m.json();return PE(_)}else throw await UE("Generate Auth Token",m)}function A3(s,{fid:t}){return`${LE(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(s,t=!1){let e;const i=await Q0(s.appConfig,c=>{if(!$E(c))throw $h.create("not-registered");const f=c.authToken;if(!t&&x3(f))return c;if(f.requestStatus===1)return e=E3(s,t),c;{if(!navigator.onLine)throw $h.create("app-offline");const d=N3(c);return e=C3(s,d),d}});return e?await e:i.authToken}async function E3(s,t){let e=await $b(s.appConfig);for(;e.authToken.requestStatus===1;)await qE(100),e=await $b(s.appConfig);const i=e.authToken;return i.requestStatus===0?gw(s,t):i}function $b(s){return Q0(s,t=>{if(!$E(t))throw $h.create("not-registered");const e=t.authToken;return I3(e)?{...t,authToken:{requestStatus:0}}:t})}async function C3(s,t){try{const e=await S3(s,t),i={...t,authToken:e};return await p0(s.appConfig,i),e}catch(e){if(jE(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await KE(s.appConfig);else{const i={...t,authToken:{requestStatus:0}};await p0(s.appConfig,i)}throw e}}function $E(s){return s!==void 0&&s.registrationStatus===2}function x3(s){return s.requestStatus===2&&!R3(s)}function R3(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+e3}function N3(s){const t={requestStatus:1,requestTime:Date.now()};return{...s,authToken:t}}function I3(s){return s.requestStatus===1&&s.requestTime+ME<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(s){const t=s,{installationEntry:e,registrationPromise:i}=await mw(t);return i?i.catch(console.error):gw(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D3(s,t=!1){const e=s;return await M3(e),(await gw(e,t)).token}async function M3(s){const{registrationPromise:t}=await mw(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(s){if(!s||!s.options)throw E1("App Configuration");if(!s.name)throw E1("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!s.options[e])throw E1(e);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function E1(s){return $h.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="installations",V3="installations-internal",j3=s=>{const t=s.getProvider("app").getImmediate(),e=k3(t),i=Og(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},L3=s=>{const t=s.getProvider("app").getImmediate(),e=Og(t,YE).getImmediate();return{getId:()=>O3(e),getToken:a=>D3(e,a)}};function P3(){nu(new jl(YE,j3,"PUBLIC")),nu(new jl(V3,L3,"PRIVATE"))}P3();Bo(DE,dw);Bo(DE,dw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="analytics",U3="firebase_id",z3="origin",B3=60*1e3,q3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_w="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new hw("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$r=new $0("analytics","Analytics",F3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(s){if(!s.startsWith(_w)){const t=$r.create("invalid-gtag-resource",{gtagURL:s});return Ks.warn(t.message),""}return s}function QE(s){return Promise.all(s.map(t=>t.catch(e=>e)))}function G3(s,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(s,t)),e}function K3(s,t){const e=G3("firebase-js-sdk-policy",{createScriptURL:H3}),i=document.createElement("script"),a=`${_w}?l=${s}&id=${t}`;i.src=e?e?.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function W3(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function $3(s,t,e,i,a,c){const f=i[a];try{if(f)await t[f];else{const m=(await QE(e)).find(_=>_.measurementId===a);m&&await t[m.appId]}}catch(d){Ks.error(d)}s("config",a,c)}async function Y3(s,t,e,i,a){try{let c=[];if(a&&a.send_to){let f=a.send_to;Array.isArray(f)||(f=[f]);const d=await QE(e);for(const m of f){const _=d.find(w=>w.measurementId===m),T=_&&t[_.appId];if(T)c.push(T);else{c=[];break}}}c.length===0&&(c=Object.values(t)),await Promise.all(c),s("event",i,a||{})}catch(c){Ks.error(c)}}function Q3(s,t,e,i){async function a(c,...f){try{if(c==="event"){const[d,m]=f;await Y3(s,t,e,d,m)}else if(c==="config"){const[d,m]=f;await $3(s,t,e,i,d,m)}else if(c==="consent"){const[d,m]=f;s("consent",d,m)}else if(c==="get"){const[d,m,_]=f;s("get",d,m,_)}else if(c==="set"){const[d]=f;s("set",d)}else s(c,...f)}catch(d){Ks.error(d)}}return a}function X3(s,t,e,i,a){let c=function(...f){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(c=window[a]),window[a]=Q3(c,s,t,e),{gtagCore:c,wrappedGtag:window[a]}}function Z3(s){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(_w)&&e.src.includes(s))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=30,t5=1e3;class e5{constructor(t={},e=t5){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const XE=new e5;function n5(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function i5(s){const{appId:t,apiKey:e}=s,i={method:"GET",headers:n5(e)},a=q3.replace("{app-id}",t),c=await fetch(a,i);if(c.status!==200&&c.status!==304){let f="";try{const d=await c.json();d.error?.message&&(f=d.error.message)}catch{}throw $r.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function s5(s,t=XE,e){const{appId:i,apiKey:a,measurementId:c}=s.options;if(!i)throw $r.create("no-app-id");if(!a){if(c)return{measurementId:c,appId:i};throw $r.create("no-api-key")}const f=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new o5;return setTimeout(async()=>{d.abort()},B3),ZE({appId:i,apiKey:a,measurementId:c},f,d,t)}async function ZE(s,{throttleEndTimeMillis:t,backoffCount:e},i,a=XE){const{appId:c,measurementId:f}=s;try{await r5(i,t)}catch(d){if(f)return Ks.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:f};throw d}try{const d=await i5(s);return a.deleteThrottleMetadata(c),d}catch(d){const m=d;if(!a5(m)){if(a.deleteThrottleMetadata(c),f)return Ks.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:f};throw d}const _=Number(m?.customData?.httpStatus)===503?Pb(e,a.intervalMillis,J3):Pb(e,a.intervalMillis),T={throttleEndTimeMillis:Date.now()+_,backoffCount:e+1};return a.setThrottleMetadata(c,T),Ks.debug(`Calling attemptFetch again in ${_} millis`),ZE(s,T,i,a)}}function r5(s,t){return new Promise((e,i)=>{const a=Math.max(t-Date.now(),0),c=setTimeout(e,a);s.addEventListener(()=>{clearTimeout(c),i($r.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function a5(s){if(!(s instanceof du)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class o5{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function l5(s,t,e,i,a){if(a&&a.global){s("event",e,i);return}else{const c=await t,f={...i,send_to:c};s("event",e,f)}}async function c5(s,t,e,i){if(i&&i.global){const a={};for(const c of Object.keys(e))a[`user_properties.${c}`]=e[c];return s("set",a),Promise.resolve()}else{const a=await t;s("config",a,{update:!0,user_properties:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(){if(SE())try{await AE()}catch(s){return Ks.warn($r.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return Ks.warn($r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function h5(s,t,e,i,a,c,f){const d=s5(s);d.then(C=>{e[C.measurementId]=C.appId,s.options.measurementId&&C.measurementId!==s.options.measurementId&&Ks.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${C.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(C=>Ks.error(C)),t.push(d);const m=u5().then(C=>{if(C)return i.getId()}),[_,T]=await Promise.all([d,m]);Z3(c)||K3(c,_.measurementId),a("js",new Date);const w=f?.config??{};return w[z3]="firebase",w.update=!0,T!=null&&(w[U3]=T),a("config",_.measurementId,w),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(t){this.app=t}_delete(){return delete Dd[this.app.options.appId],Promise.resolve()}}let Dd={},Yb=[];const Qb={};let C1="dataLayer",d5="gtag",Xb,yw,Zb=!1;function p5(){const s=[];if(MD()&&s.push("This is a browser extension environment."),VD()||s.push("Cookies are not available."),s.length>0){const t=s.map((i,a)=>`(${a+1}) ${i}`).join(" "),e=$r.create("invalid-analytics-context",{errorInfo:t});Ks.warn(e.message)}}function m5(s,t,e){p5();const i=s.options.appId;if(!i)throw $r.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Ks.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $r.create("no-api-key");if(Dd[i]!=null)throw $r.create("already-exists",{id:i});if(!Zb){W3(C1);const{wrappedGtag:c,gtagCore:f}=X3(Dd,Yb,Qb,C1,d5);yw=c,Xb=f,Zb=!0}return Dd[i]=h5(s,Yb,Qb,t,Xb,C1,e),new f5(s)}function g5(s=NE()){s=vr(s);const t=Og(s,m0);return t.isInitialized()?t.getImmediate():_5(s)}function _5(s,t={}){const e=Og(s,m0);if(e.isInitialized()){const a=e.getImmediate();if(ug(t,e.getOptions()))return a;throw $r.create("already-initialized")}return e.initialize({options:t})}function y5(s,t,e){s=vr(s),c5(yw,Dd[s.app.options.appId],t,e).catch(i=>Ks.error(i))}function v5(s,t,e,i){s=vr(s),l5(yw,Dd[s.app.options.appId],t,e,i).catch(a=>Ks.error(a))}const Jb="@firebase/analytics",tS="0.10.19";function T5(){nu(new jl(m0,(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();return m5(i,a,e)},"PUBLIC")),nu(new jl("analytics-internal",s,"PRIVATE")),Bo(Jb,tS),Bo(Jb,tS,"esm2020");function s(t){try{const e=t.getProvider(m0).getImmediate();return{logEvent:(i,a,c)=>v5(e,i,a,c),setUserProperties:(i,a)=>y5(e,i,a)}}catch(e){throw $r.create("interop-component-reg-failed",{reason:e})}}}T5();var eS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xc,JE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,E){function M(){}M.prototype=E.prototype,R.F=E.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(B,P,F){for(var U=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)U[vt-2]=arguments[vt];return E.prototype[P].apply(B,U)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,E,M){M||(M=0);const B=Array(16);if(typeof E=="string")for(var P=0;P<16;++P)B[P]=E.charCodeAt(M++)|E.charCodeAt(M++)<<8|E.charCodeAt(M++)<<16|E.charCodeAt(M++)<<24;else for(P=0;P<16;++P)B[P]=E[M++]|E[M++]<<8|E[M++]<<16|E[M++]<<24;E=R.g[0],M=R.g[1],P=R.g[2];let F=R.g[3],U;U=E+(F^M&(P^F))+B[0]+3614090360&4294967295,E=M+(U<<7&4294967295|U>>>25),U=F+(P^E&(M^P))+B[1]+3905402710&4294967295,F=E+(U<<12&4294967295|U>>>20),U=P+(M^F&(E^M))+B[2]+606105819&4294967295,P=F+(U<<17&4294967295|U>>>15),U=M+(E^P&(F^E))+B[3]+3250441966&4294967295,M=P+(U<<22&4294967295|U>>>10),U=E+(F^M&(P^F))+B[4]+4118548399&4294967295,E=M+(U<<7&4294967295|U>>>25),U=F+(P^E&(M^P))+B[5]+1200080426&4294967295,F=E+(U<<12&4294967295|U>>>20),U=P+(M^F&(E^M))+B[6]+2821735955&4294967295,P=F+(U<<17&4294967295|U>>>15),U=M+(E^P&(F^E))+B[7]+4249261313&4294967295,M=P+(U<<22&4294967295|U>>>10),U=E+(F^M&(P^F))+B[8]+1770035416&4294967295,E=M+(U<<7&4294967295|U>>>25),U=F+(P^E&(M^P))+B[9]+2336552879&4294967295,F=E+(U<<12&4294967295|U>>>20),U=P+(M^F&(E^M))+B[10]+4294925233&4294967295,P=F+(U<<17&4294967295|U>>>15),U=M+(E^P&(F^E))+B[11]+2304563134&4294967295,M=P+(U<<22&4294967295|U>>>10),U=E+(F^M&(P^F))+B[12]+1804603682&4294967295,E=M+(U<<7&4294967295|U>>>25),U=F+(P^E&(M^P))+B[13]+4254626195&4294967295,F=E+(U<<12&4294967295|U>>>20),U=P+(M^F&(E^M))+B[14]+2792965006&4294967295,P=F+(U<<17&4294967295|U>>>15),U=M+(E^P&(F^E))+B[15]+1236535329&4294967295,M=P+(U<<22&4294967295|U>>>10),U=E+(P^F&(M^P))+B[1]+4129170786&4294967295,E=M+(U<<5&4294967295|U>>>27),U=F+(M^P&(E^M))+B[6]+3225465664&4294967295,F=E+(U<<9&4294967295|U>>>23),U=P+(E^M&(F^E))+B[11]+643717713&4294967295,P=F+(U<<14&4294967295|U>>>18),U=M+(F^E&(P^F))+B[0]+3921069994&4294967295,M=P+(U<<20&4294967295|U>>>12),U=E+(P^F&(M^P))+B[5]+3593408605&4294967295,E=M+(U<<5&4294967295|U>>>27),U=F+(M^P&(E^M))+B[10]+38016083&4294967295,F=E+(U<<9&4294967295|U>>>23),U=P+(E^M&(F^E))+B[15]+3634488961&4294967295,P=F+(U<<14&4294967295|U>>>18),U=M+(F^E&(P^F))+B[4]+3889429448&4294967295,M=P+(U<<20&4294967295|U>>>12),U=E+(P^F&(M^P))+B[9]+568446438&4294967295,E=M+(U<<5&4294967295|U>>>27),U=F+(M^P&(E^M))+B[14]+3275163606&4294967295,F=E+(U<<9&4294967295|U>>>23),U=P+(E^M&(F^E))+B[3]+4107603335&4294967295,P=F+(U<<14&4294967295|U>>>18),U=M+(F^E&(P^F))+B[8]+1163531501&4294967295,M=P+(U<<20&4294967295|U>>>12),U=E+(P^F&(M^P))+B[13]+2850285829&4294967295,E=M+(U<<5&4294967295|U>>>27),U=F+(M^P&(E^M))+B[2]+4243563512&4294967295,F=E+(U<<9&4294967295|U>>>23),U=P+(E^M&(F^E))+B[7]+1735328473&4294967295,P=F+(U<<14&4294967295|U>>>18),U=M+(F^E&(P^F))+B[12]+2368359562&4294967295,M=P+(U<<20&4294967295|U>>>12),U=E+(M^P^F)+B[5]+4294588738&4294967295,E=M+(U<<4&4294967295|U>>>28),U=F+(E^M^P)+B[8]+2272392833&4294967295,F=E+(U<<11&4294967295|U>>>21),U=P+(F^E^M)+B[11]+1839030562&4294967295,P=F+(U<<16&4294967295|U>>>16),U=M+(P^F^E)+B[14]+4259657740&4294967295,M=P+(U<<23&4294967295|U>>>9),U=E+(M^P^F)+B[1]+2763975236&4294967295,E=M+(U<<4&4294967295|U>>>28),U=F+(E^M^P)+B[4]+1272893353&4294967295,F=E+(U<<11&4294967295|U>>>21),U=P+(F^E^M)+B[7]+4139469664&4294967295,P=F+(U<<16&4294967295|U>>>16),U=M+(P^F^E)+B[10]+3200236656&4294967295,M=P+(U<<23&4294967295|U>>>9),U=E+(M^P^F)+B[13]+681279174&4294967295,E=M+(U<<4&4294967295|U>>>28),U=F+(E^M^P)+B[0]+3936430074&4294967295,F=E+(U<<11&4294967295|U>>>21),U=P+(F^E^M)+B[3]+3572445317&4294967295,P=F+(U<<16&4294967295|U>>>16),U=M+(P^F^E)+B[6]+76029189&4294967295,M=P+(U<<23&4294967295|U>>>9),U=E+(M^P^F)+B[9]+3654602809&4294967295,E=M+(U<<4&4294967295|U>>>28),U=F+(E^M^P)+B[12]+3873151461&4294967295,F=E+(U<<11&4294967295|U>>>21),U=P+(F^E^M)+B[15]+530742520&4294967295,P=F+(U<<16&4294967295|U>>>16),U=M+(P^F^E)+B[2]+3299628645&4294967295,M=P+(U<<23&4294967295|U>>>9),U=E+(P^(M|~F))+B[0]+4096336452&4294967295,E=M+(U<<6&4294967295|U>>>26),U=F+(M^(E|~P))+B[7]+1126891415&4294967295,F=E+(U<<10&4294967295|U>>>22),U=P+(E^(F|~M))+B[14]+2878612391&4294967295,P=F+(U<<15&4294967295|U>>>17),U=M+(F^(P|~E))+B[5]+4237533241&4294967295,M=P+(U<<21&4294967295|U>>>11),U=E+(P^(M|~F))+B[12]+1700485571&4294967295,E=M+(U<<6&4294967295|U>>>26),U=F+(M^(E|~P))+B[3]+2399980690&4294967295,F=E+(U<<10&4294967295|U>>>22),U=P+(E^(F|~M))+B[10]+4293915773&4294967295,P=F+(U<<15&4294967295|U>>>17),U=M+(F^(P|~E))+B[1]+2240044497&4294967295,M=P+(U<<21&4294967295|U>>>11),U=E+(P^(M|~F))+B[8]+1873313359&4294967295,E=M+(U<<6&4294967295|U>>>26),U=F+(M^(E|~P))+B[15]+4264355552&4294967295,F=E+(U<<10&4294967295|U>>>22),U=P+(E^(F|~M))+B[6]+2734768916&4294967295,P=F+(U<<15&4294967295|U>>>17),U=M+(F^(P|~E))+B[13]+1309151649&4294967295,M=P+(U<<21&4294967295|U>>>11),U=E+(P^(M|~F))+B[4]+4149444226&4294967295,E=M+(U<<6&4294967295|U>>>26),U=F+(M^(E|~P))+B[11]+3174756917&4294967295,F=E+(U<<10&4294967295|U>>>22),U=P+(E^(F|~M))+B[2]+718787259&4294967295,P=F+(U<<15&4294967295|U>>>17),U=M+(F^(P|~E))+B[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(P+(U<<21&4294967295|U>>>11))&4294967295,R.g[2]=R.g[2]+P&4294967295,R.g[3]=R.g[3]+F&4294967295}i.prototype.v=function(R,E){E===void 0&&(E=R.length);const M=E-this.blockSize,B=this.C;let P=this.h,F=0;for(;F<E;){if(P==0)for(;F<=M;)a(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<E;)if(B[P++]=R.charCodeAt(F++),P==this.blockSize){a(this,B),P=0;break}}else for(;F<E;)if(B[P++]=R[F++],P==this.blockSize){a(this,B),P=0;break}}this.h=P,this.o+=E},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;E=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=E&255,E/=256;for(this.v(R),R=Array(16),E=0,M=0;M<4;++M)for(let B=0;B<32;B+=8)R[E++]=this.g[M]>>>B&255;return R};function c(R,E){var M=d;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=E(R)}function f(R,E){this.h=E;const M=[];let B=!0;for(let P=R.length-1;P>=0;P--){const F=R[P]|0;B&&F==E||(M[P]=F,B=!1)}this.g=M}var d={};function m(R){return-128<=R&&R<128?c(R,function(E){return new f([E|0],E<0?-1:0)}):new f([R|0],R<0?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return w;if(R<0)return D(_(-R));const E=[];let M=1;for(let B=0;R>=M;B++)E[B]=R/M|0,M*=4294967296;return new f(E,0)}function T(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return D(T(R.substring(1),E));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=_(Math.pow(E,8));let B=w;for(let F=0;F<R.length;F+=8){var P=Math.min(8,R.length-F);const U=parseInt(R.substring(F,F+P),E);P<8?(P=_(Math.pow(E,P)),B=B.j(P).add(_(U))):(B=B.j(M),B=B.add(_(U)))}return B}var w=m(0),C=m(1),I=m(16777216);s=f.prototype,s.m=function(){if(k(this))return-D(this).m();let R=0,E=1;for(let M=0;M<this.g.length;M++){const B=this.i(M);R+=(B>=0?B:4294967296+B)*E,E*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O(this))return"0";if(k(this))return"-"+D(this).toString(R);const E=_(Math.pow(R,6));var M=this;let B="";for(;;){const P=it(M,E).g;M=z(M,P.j(E));let F=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=P,O(M))return F+B;for(;F.length<6;)F="0"+F;B=F+B}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function O(R){if(R.h!=0)return!1;for(let E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function k(R){return R.h==-1}s.l=function(R){return R=z(this,R),k(R)?-1:O(R)?0:1};function D(R){const E=R.g.length,M=[];for(let B=0;B<E;B++)M[B]=~R.g[B];return new f(M,~R.h).add(C)}s.abs=function(){return k(this)?D(this):this},s.add=function(R){const E=Math.max(this.g.length,R.g.length),M=[];let B=0;for(let P=0;P<=E;P++){let F=B+(this.i(P)&65535)+(R.i(P)&65535),U=(F>>>16)+(this.i(P)>>>16)+(R.i(P)>>>16);B=U>>>16,F&=65535,U&=65535,M[P]=U<<16|F}return new f(M,M[M.length-1]&-2147483648?-1:0)};function z(R,E){return R.add(D(E))}s.j=function(R){if(O(this)||O(R))return w;if(k(this))return k(R)?D(this).j(D(R)):D(D(this).j(R));if(k(R))return D(this.j(D(R)));if(this.l(I)<0&&R.l(I)<0)return _(this.m()*R.m());const E=this.g.length+R.g.length,M=[];for(var B=0;B<2*E;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(let P=0;P<R.g.length;P++){const F=this.i(B)>>>16,U=this.i(B)&65535,vt=R.i(P)>>>16,Rt=R.i(P)&65535;M[2*B+2*P]+=U*Rt,X(M,2*B+2*P),M[2*B+2*P+1]+=F*Rt,X(M,2*B+2*P+1),M[2*B+2*P+1]+=U*vt,X(M,2*B+2*P+1),M[2*B+2*P+2]+=F*vt,X(M,2*B+2*P+2)}for(R=0;R<E;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=E;R<2*E;R++)M[R]=0;return new f(M,0)};function X(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function Y(R,E){this.g=R,this.h=E}function it(R,E){if(O(E))throw Error("division by zero");if(O(R))return new Y(w,w);if(k(R))return E=it(D(R),E),new Y(D(E.g),D(E.h));if(k(E))return E=it(R,D(E)),new Y(D(E.g),E.h);if(R.g.length>30){if(k(R)||k(E))throw Error("slowDivide_ only works with positive integers.");for(var M=C,B=E;B.l(R)<=0;)M=K(M),B=K(B);var P=W(M,1),F=W(B,1);for(B=W(B,2),M=W(M,2);!O(B);){var U=F.add(B);U.l(R)<=0&&(P=P.add(M),F=U),B=W(B,1),M=W(M,1)}return E=z(R,P.j(E)),new Y(P,E)}for(P=w;R.l(E)>=0;){for(M=Math.max(1,Math.floor(R.m()/E.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),F=_(M),U=F.j(E);k(U)||U.l(R)>0;)M-=B,F=_(M),U=F.j(E);O(F)&&(F=C),P=P.add(F),R=z(R,U)}return new Y(P,R)}s.B=function(R){return it(this,R).h},s.and=function(R){const E=Math.max(this.g.length,R.g.length),M=[];for(let B=0;B<E;B++)M[B]=this.i(B)&R.i(B);return new f(M,this.h&R.h)},s.or=function(R){const E=Math.max(this.g.length,R.g.length),M=[];for(let B=0;B<E;B++)M[B]=this.i(B)|R.i(B);return new f(M,this.h|R.h)},s.xor=function(R){const E=Math.max(this.g.length,R.g.length),M=[];for(let B=0;B<E;B++)M[B]=this.i(B)^R.i(B);return new f(M,this.h^R.h)};function K(R){const E=R.g.length+1,M=[];for(let B=0;B<E;B++)M[B]=R.i(B)<<1|R.i(B-1)>>>31;return new f(M,R.h)}function W(R,E){const M=E>>5;E%=32;const B=R.g.length-M,P=[];for(let F=0;F<B;F++)P[F]=E>0?R.i(F+M)>>>E|R.i(F+M+1)<<32-E:R.i(F+M);return new f(P,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,JE=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=T,Xc=f}).apply(typeof eS<"u"?eS:typeof self<"u"?self:typeof window<"u"?window:{});var Uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t2,Zm,e2,$y,sT,n2,i2,s2;(function(){var s,t=Object.defineProperty;function e(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uy=="object"&&Uy];for(var S=0;S<p.length;++S){var x=p[S];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=e(this);function a(p,S){if(S)t:{var x=i;p=p.split(".");for(var H=0;H<p.length-1;H++){var ot=p[H];if(!(ot in x))break t;x=x[ot]}p=p[p.length-1],H=x[p],S=S(H),S!=H&&S!=null&&t(x,p,{configurable:!0,writable:!0,value:S})}}a("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(p){return p||function(S){var x=[],H;for(H in S)Object.prototype.hasOwnProperty.call(S,H)&&x.push([H,S[H]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function d(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function m(p,S,x){return p.call.apply(p.bind,arguments)}function _(p,S,x){return _=m,_.apply(null,arguments)}function T(p,S){var x=Array.prototype.slice.call(arguments,1);return function(){var H=x.slice();return H.push.apply(H,arguments),p.apply(this,H)}}function w(p,S){function x(){}x.prototype=S.prototype,p.Z=S.prototype,p.prototype=new x,p.prototype.constructor=p,p.Ob=function(H,ot,ht){for(var Vt=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)Vt[ge-2]=arguments[ge];return S.prototype[ot].apply(H,Vt)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function I(p){const S=p.length;if(S>0){const x=Array(S);for(let H=0;H<S;H++)x[H]=p[H];return x}return[]}function O(p,S){for(let H=1;H<arguments.length;H++){const ot=arguments[H];var x=typeof ot;if(x=x!="object"?x:ot?Array.isArray(ot)?"array":x:"null",x=="array"||x=="object"&&typeof ot.length=="number"){x=p.length||0;const ht=ot.length||0;p.length=x+ht;for(let Vt=0;Vt<ht;Vt++)p[x+Vt]=ot[Vt]}else p.push(ot)}}class k{constructor(S,x){this.i=S,this.j=x,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function D(p){f.setTimeout(()=>{throw p},0)}function z(){var p=R;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class X{constructor(){this.h=this.g=null}add(S,x){const H=Y.get();H.set(S,x),this.h?this.h.next=H:this.g=H,this.h=H}}var Y=new k(()=>new it,p=>p.reset());class it{constructor(){this.next=this.g=this.h=null}set(S,x){this.h=S,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let K,W=!1,R=new X,E=()=>{const p=Promise.resolve(void 0);K=()=>{p.then(M)}};function M(){for(var p;p=z();){try{p.h.call(p.g)}catch(x){D(x)}var S=Y;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}W=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const x=()=>{};f.addEventListener("test",x,S),f.removeEventListener("test",x,S)}catch{}return p})();function U(p){return/^[\s\xa0]*$/.test(p)}function vt(p,S){P.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}w(vt,P),vt.prototype.init=function(p,S){const x=this.type=p.type,H=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(x=="mouseover"?S=p.fromElement:x=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&vt.Z.h.call(this)},vt.prototype.h=function(){vt.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Rt="closure_listenable_"+(Math.random()*1e6|0),Z=0;function nt(p,S,x,H,ot){this.listener=p,this.proxy=null,this.src=S,this.type=x,this.capture=!!H,this.ha=ot,this.key=++Z,this.da=this.fa=!1}function Tt(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function dt(p,S,x){for(const H in p)S.call(x,p[H],H,p)}function pt(p,S){for(const x in p)S.call(void 0,p[x],x,p)}function G(p){const S={};for(const x in p)S[x]=p[x];return S}const at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function St(p,S){let x,H;for(let ot=1;ot<arguments.length;ot++){H=arguments[ot];for(x in H)p[x]=H[x];for(let ht=0;ht<at.length;ht++)x=at[ht],Object.prototype.hasOwnProperty.call(H,x)&&(p[x]=H[x])}}function Dt(p){this.src=p,this.g={},this.h=0}Dt.prototype.add=function(p,S,x,H,ot){const ht=p.toString();p=this.g[ht],p||(p=this.g[ht]=[],this.h++);const Vt=jt(p,S,H,ot);return Vt>-1?(S=p[Vt],x||(S.fa=!1)):(S=new nt(S,this.src,ht,!!H,ot),S.fa=x,p.push(S)),S};function Nt(p,S){const x=S.type;if(x in p.g){var H=p.g[x],ot=Array.prototype.indexOf.call(H,S,void 0),ht;(ht=ot>=0)&&Array.prototype.splice.call(H,ot,1),ht&&(Tt(S),p.g[x].length==0&&(delete p.g[x],p.h--))}}function jt(p,S,x,H){for(let ot=0;ot<p.length;++ot){const ht=p[ot];if(!ht.da&&ht.listener==S&&ht.capture==!!x&&ht.ha==H)return ot}return-1}var Ft="closure_lm_"+(Math.random()*1e6|0),kt={};function te(p,S,x,H,ot){if(Array.isArray(S)){for(let ht=0;ht<S.length;ht++)te(p,S[ht],x,H,ot);return null}return x=Pt(x),p&&p[Rt]?p.J(S,x,d(H)?!!H.capture:!1,ot):Ae(p,S,x,!1,H,ot)}function Ae(p,S,x,H,ot,ht){if(!S)throw Error("Invalid event type");const Vt=d(ot)?!!ot.capture:!!ot;let ge=Lt(p);if(ge||(p[Ft]=ge=new Dt(p)),x=ge.add(S,x,H,Vt,ht),x.proxy)return x;if(H=Ye(),x.proxy=H,H.src=p,H.listener=x,p.addEventListener)F||(ot=Vt),ot===void 0&&(ot=!1),p.addEventListener(S.toString(),H,ot);else if(p.attachEvent)p.attachEvent(Re(S.toString()),H);else if(p.addListener&&p.removeListener)p.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ye(){function p(x){return S.call(p.src,p.listener,x)}const S=gt;return p}function he(p,S,x,H,ot){if(Array.isArray(S))for(var ht=0;ht<S.length;ht++)he(p,S[ht],x,H,ot);else H=d(H)?!!H.capture:!!H,x=Pt(x),p&&p[Rt]?(p=p.i,ht=String(S).toString(),ht in p.g&&(S=p.g[ht],x=jt(S,x,H,ot),x>-1&&(Tt(S[x]),Array.prototype.splice.call(S,x,1),S.length==0&&(delete p.g[ht],p.h--)))):p&&(p=Lt(p))&&(S=p.g[S.toString()],p=-1,S&&(p=jt(S,x,H,ot)),(x=p>-1?S[p]:null)&&gn(x))}function gn(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[Rt])Nt(S.i,p);else{var x=p.type,H=p.proxy;S.removeEventListener?S.removeEventListener(x,H,p.capture):S.detachEvent?S.detachEvent(Re(x),H):S.addListener&&S.removeListener&&S.removeListener(H),(x=Lt(S))?(Nt(x,p),x.h==0&&(x.src=null,S[Ft]=null)):Tt(p)}}}function Re(p){return p in kt?kt[p]:kt[p]="on"+p}function gt(p,S){if(p.da)p=!0;else{S=new vt(S,this);const x=p.listener,H=p.ha||p.src;p.fa&&gn(p),p=x.call(H,S)}return p}function Lt(p){return p=p[Ft],p instanceof Dt?p:null}var $t="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pt(p){return typeof p=="function"?p:(p[$t]||(p[$t]=function(S){return p.handleEvent(S)}),p[$t])}function Ot(){B.call(this),this.i=new Dt(this),this.M=this,this.G=null}w(Ot,B),Ot.prototype[Rt]=!0,Ot.prototype.removeEventListener=function(p,S,x,H){he(this,p,S,x,H)};function Ut(p,S){var x,H=p.G;if(H)for(x=[];H;H=H.G)x.push(H);if(p=p.M,H=S.type||S,typeof S=="string")S=new P(S,p);else if(S instanceof P)S.target=S.target||p;else{var ot=S;S=new P(H,p),St(S,ot)}ot=!0;let ht,Vt;if(x)for(Vt=x.length-1;Vt>=0;Vt--)ht=S.g=x[Vt],ot=ne(ht,H,!0,S)&&ot;if(ht=S.g=p,ot=ne(ht,H,!0,S)&&ot,ot=ne(ht,H,!1,S)&&ot,x)for(Vt=0;Vt<x.length;Vt++)ht=S.g=x[Vt],ot=ne(ht,H,!1,S)&&ot}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const x=p.g[S];for(let H=0;H<x.length;H++)Tt(x[H]);delete p.g[S],p.h--}}this.G=null},Ot.prototype.J=function(p,S,x,H){return this.i.add(String(p),S,!1,x,H)},Ot.prototype.K=function(p,S,x,H){return this.i.add(String(p),S,!0,x,H)};function ne(p,S,x,H){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let ot=!0;for(let ht=0;ht<S.length;++ht){const Vt=S[ht];if(Vt&&!Vt.da&&Vt.capture==x){const ge=Vt.listener,Pn=Vt.ha||Vt.src;Vt.fa&&Nt(p.i,Vt),ot=ge.call(Pn,H)!==!1&&ot}}return ot&&!H.defaultPrevented}function ae(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:f.setTimeout(p,S||0)}function en(p){p.g=ae(()=>{p.g=null,p.i&&(p.i=!1,en(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class fn extends B{constructor(S,x){super(),this.m=S,this.l=x,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:en(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(p){B.call(this),this.h=p,this.g={}}w(Rn,B);var Qr=[];function fi(p){dt(p.g,function(S,x){this.g.hasOwnProperty(x)&&gn(S)},p),p.g={}}Rn.prototype.N=function(){Rn.Z.N.call(this),fi(this)},Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=f.JSON.stringify,bs=f.JSON.parse,ao=class{stringify(p){return f.JSON.stringify(p,void 0)}parse(p){return f.JSON.parse(p,void 0)}};function Ss(){}function wa(){}var Bi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nn(){P.call(this,"d")}w(Nn,P);function Ln(){P.call(this,"c")}w(Ln,P);var dn={},oo=null;function lo(){return oo=oo||new Ot}dn.Ia="serverreachability";function Fl(p){P.call(this,dn.Ia,p)}w(Fl,P);function $s(p){const S=lo();Ut(S,new Fl(S))}dn.STAT_EVENT="statevent";function Xr(p,S){P.call(this,dn.STAT_EVENT,p),this.stat=S}w(Xr,P);function In(p){const S=lo();Ut(S,new Xr(S,p))}dn.Ja="timingevent";function Ys(p,S){P.call(this,dn.Ja,p),this.size=S}w(Ys,P);function qi(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){p()},S)}function Ji(){this.g=!0}Ji.prototype.ua=function(){this.g=!1};function Xo(p,S,x,H,ot,ht){p.info(function(){if(p.g)if(ht){var Vt="",ge=ht.split("&");for(let qe=0;qe<ge.length;qe++){var Pn=ge[qe].split("=");if(Pn.length>1){const _n=Pn[0];Pn=Pn[1];const is=_n.split("_");Vt=is.length>=2&&is[1]=="type"?Vt+(_n+"="+Pn+"&"):Vt+(_n+"=redacted&")}}}else Vt=null;else Vt=ht;return"XMLHTTP REQ ("+H+") [attempt "+ot+"]: "+S+`
`+x+`
`+Vt})}function Zo(p,S,x,H,ot,ht,Vt){p.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ot+"]: "+S+`
`+x+`
`+ht+" "+Vt})}function Qs(p,S,x,H){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+gu(p,x)+(H?" "+H:"")})}function ba(p,S){p.info(function(){return"TIMEOUT: "+S})}Ji.prototype.info=function(){};function gu(p,S){if(!p.g)return S;if(!S)return null;try{const ht=JSON.parse(S);if(ht){for(p=0;p<ht.length;p++)if(Array.isArray(ht[p])){var x=ht[p];if(!(x.length<2)){var H=x[1];if(Array.isArray(H)&&!(H.length<1)){var ot=H[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(let Vt=1;Vt<H.length;Vt++)H[Vt]=""}}}}return Di(ht)}catch{return S}}var Tr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sa;function wr(){}w(wr,Ss),wr.prototype.g=function(){return new XMLHttpRequest},Sa=new wr;function It(p){return encodeURIComponent(String(p))}function Xt(p){var S=1;p=p.split(":");const x=[];for(;S>0&&p.length;)x.push(p.shift()),S--;return p.length&&x.push(p.join(":")),x}function Bt(p,S,x,H){this.j=p,this.i=S,this.l=x,this.S=H||1,this.V=new Rn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zt}function zt(){this.i=null,this.g="",this.h=!1}var Yt={},me={};function an(p,S,x){p.M=1,p.A=ta(Gn(S)),p.u=x,p.R=!0,Be(p,null)}function Be(p,S){p.F=Date.now(),es(p),p.B=Gn(p.A);var x=p.B,H=p.S;Array.isArray(H)||(H=[String(H)]),nl(x.i,"t",H),p.C=0,x=p.j.L,p.h=new zt,p.g=Rr(p.j,x?S:null,!p.u),p.P>0&&(p.O=new fn(_(p.Y,p,p.g),p.P)),S=p.V,x=p.g,H=p.ba;var ot="readystatechange";Array.isArray(ot)||(ot&&(Qr[0]=ot.toString()),ot=Qr);for(let ht=0;ht<ot.length;ht++){const Vt=te(x,ot[ht],H||S.handleEvent,!1,S.h||S);if(!Vt)break;S.g[Vt.key]=Vt}S=p.J?G(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),$s(),Xo(p.i,p.v,p.B,p.l,p.S,p.u)}Bt.prototype.ba=function(p){p=p.target;const S=this.O;S&&xr(p)==3?S.j():this.Y(p)},Bt.prototype.Y=function(p){try{if(p==this.g)t:{const ge=xr(this.g),Pn=this.g.ya(),qe=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||Si(this.g)))){this.K||ge!=4||Pn==7||(Pn==8||qe<=0?$s(3):$s(2)),Zr(this);var S=this.g.ca();this.X=S;var x=bi(this);if(this.o=S==200,Zo(this.i,this.v,this.B,this.l,this.S,ge,S),this.o){if(this.U&&!this.L){e:{if(this.g){var H,ot=this.g;if((H=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(H)){var ht=H;break e}}ht=null}if(p=ht)Qs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Es(this,p);else{this.o=!1,this.m=3,In(12),As(this),Fi(this);break t}}if(this.R){p=!0;let _n;for(;!this.K&&this.C<x.length;)if(_n=br(this,x),_n==me){ge==4&&(this.m=4,In(14),p=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Yt){this.m=4,In(15),Qs(this.i,this.l,x,"[Invalid Chunk]"),p=!1;break}else Qs(this.i,this.l,_n,null),Es(this,_n);if(ts(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||x.length!=0||this.h.h||(this.m=1,In(16),p=!1),this.o=this.o&&p,!p)Qs(this.i,this.l,x,"[Invalid Chunked Response]"),As(this),Fi(this);else if(x.length>0&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.aa&&!Vt.P&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Xl(Vt),Vt.P=!0,In(11))}}else Qs(this.i,this.l,x,null),Es(this,x);ge==4&&As(this),this.o&&!this.K&&(ge==4?ki(this.j,this):(this.o=!1,es(this)))}else Ra(this.g),S==400&&x.indexOf("Unknown SID")>0?(this.m=3,In(12)):(this.m=0,In(13)),As(this),Fi(this)}}}catch{}finally{}};function bi(p){if(!ts(p))return p.g.la();const S=Si(p.g);if(S==="")return"";let x="";const H=S.length,ot=xr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return As(p),Fi(p),"";p.h.i=new f.TextDecoder}for(let ht=0;ht<H;ht++)p.h.h=!0,x+=p.h.i.decode(S[ht],{stream:!(ot&&ht==H-1)});return S.length=0,p.h.g+=x,p.C=0,p.h.g}function ts(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function br(p,S){var x=p.C,H=S.indexOf(`
`,x);return H==-1?me:(x=Number(S.substring(x,H)),isNaN(x)?Yt:(H+=1,H+x>S.length?me:(S=S.slice(H,H+x),p.C=H+x,S)))}Bt.prototype.cancel=function(){this.K=!0,As(this)};function es(p){p.T=Date.now()+p.H,Hl(p,p.H)}function Hl(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=qi(_(p.aa,p),S)}function Zr(p){p.D&&(f.clearTimeout(p.D),p.D=null)}Bt.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(ba(this.i,this.B),this.M!=2&&($s(),In(17)),As(this),this.m=2,Fi(this)):Hl(this,this.T-p)};function Fi(p){p.j.I==0||p.K||ki(p.j,p)}function As(p){Zr(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,fi(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function Es(p,S){try{var x=p.j;if(x.I!=0&&(x.g==p||Ar(x.h,p))){if(!p.L&&Ar(x.h,p)&&x.I==3){try{var H=x.Ba.g.parse(S)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ot=H;if(ot[0]==0){t:if(!x.v){if(x.g)if(x.g.F+3e3<p.F)cl(x),bn(x);else break t;ho(x),In(18)}}else x.xa=ot[1],0<x.xa-x.K&&ot[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=qi(_(x.Va,x),6e3));Sr(x.h)<=1&&x.ta&&(x.ta=void 0)}else Kn(x,11)}else if((p.L||x.g==p)&&cl(x),!U(S))for(ot=x.Ba.g.parse(S),S=0;S<ot.length;S++){let qe=ot[S];const _n=qe[0];if(!(_n<=x.K))if(x.K=_n,qe=qe[1],x.I==2)if(qe[0]=="c"){x.M=qe[1],x.ba=qe[2];const is=qe[3];is!=null&&(x.ka=is,x.j.info("VER="+x.ka));const Ir=qe[4];Ir!=null&&(x.za=Ir,x.j.info("SVER="+x.za));const Or=qe[5];Or!=null&&typeof Or=="number"&&Or>0&&(H=1.5*Or,x.O=H,x.j.info("backChannelRequestTimeoutMs_="+H)),H=x;const xs=p.g;if(xs){const Oa=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var ht=H.h;ht.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(ht.j=ht.l,ht.g=new Set,ht.h&&(Gl(ht,ht.h),ht.h=null))}if(H.G){const Jl=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;Jl&&(H.wa=Jl,Qe(H.J,H.G,Jl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-p.F,x.j.info("Handshake RTT: "+x.T+"ms")),H=x;var Vt=p;if(H.na=Du(H,H.L?H.ba:null,H.W),Vt.L){vu(H.h,Vt);var ge=Vt,Pn=H.O;Pn&&(ge.H=Pn),ge.D&&(Zr(ge),es(ge)),H.g=Vt}else Iu(H);x.i.length>0&&Mi(x)}else qe[0]!="stop"&&qe[0]!="close"||Kn(x,7);else x.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Kn(x,7):Ru(x):qe[0]!="noop"&&x.l&&x.l.qa(qe),x.A=0)}}$s(4)}catch{}}var Zn=class{constructor(p,S){this.g=p,this.map=S}};function _u(p){this.l=p||10,f.PerformanceNavigationTiming?(p=f.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yu(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Sr(p){return p.h?1:p.g?p.g.size:0}function Ar(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Gl(p,S){p.g?p.g.add(S):p.h=S}function vu(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}_u.prototype.cancel=function(){if(this.i=Tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Tu(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const x of p.g.values())S=S.concat(x.G);return S}return I(p.i)}var sf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kl(p,S){if(p){p=p.split("&");for(let x=0;x<p.length;x++){const H=p[x].indexOf("=");let ot,ht=null;H>=0?(ot=p[x].substring(0,H),ht=p[x].substring(H+1)):ot=p[x],S(ot,ht?decodeURIComponent(ht.replace(/\+/g," ")):"")}}}function ns(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof ns?(this.l=p.l,ri(this,p.j),this.o=p.o,this.g=p.g,Jr(this,p.u),this.h=p.h,wu(this,Eu(p.i)),this.m=p.m):p&&(S=String(p).match(sf))?(this.l=!1,ri(this,S[1]||"",!0),this.o=Er(S[2]||""),this.g=Er(S[3]||"",!0),Jr(this,S[4]),this.h=Er(S[5]||"",!0),wu(this,S[6]||"",!0),this.m=Er(S[7]||"")):(this.l=!1,this.i=new ea(null,this.l))}ns.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(tl(S,el,!0),":");var x=this.g;return(x||S=="file")&&(p.push("//"),(S=this.o)&&p.push(tl(S,el,!0),"@"),p.push(It(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&p.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&p.push("/"),p.push(tl(x,x.charAt(0)=="/"?bu:Wl,!0))),(x=this.i.toString())&&p.push("?",x),(x=this.m)&&p.push("#",tl(x,$l)),p.join("")},ns.prototype.resolve=function(p){const S=Gn(this);let x=!!p.j;x?ri(S,p.j):x=!!p.o,x?S.o=p.o:x=!!p.g,x?S.g=p.g:x=p.u!=null;var H=p.h;if(x)Jr(S,p.u);else if(x=!!p.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ot=S.h.lastIndexOf("/");ot!=-1&&(H=S.h.slice(0,ot+1)+H)}if(ot=H,ot==".."||ot==".")H="";else if(ot.indexOf("./")!=-1||ot.indexOf("/.")!=-1){H=ot.lastIndexOf("/",0)==0,ot=ot.split("/");const ht=[];for(let Vt=0;Vt<ot.length;){const ge=ot[Vt++];ge=="."?H&&Vt==ot.length&&ht.push(""):ge==".."?((ht.length>1||ht.length==1&&ht[0]!="")&&ht.pop(),H&&Vt==ot.length&&ht.push("")):(ht.push(ge),H=!0)}H=ht.join("/")}else H=ot}return x?S.h=H:x=p.i.toString()!=="",x?wu(S,Eu(p.i)):x=!!p.m,x&&(S.m=p.m),S};function Gn(p){return new ns(p)}function ri(p,S,x){p.j=x?Er(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function Jr(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function wu(p,S,x){S instanceof ea?(p.i=S,il(p.i,p.l)):(x||(S=tl(S,Aa)),p.i=new ea(S,p.l))}function Qe(p,S,x){p.i.set(S,x)}function ta(p){return Qe(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Er(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function tl(p,S,x){return typeof p=="string"?(p=encodeURI(p).replace(S,Hi),x&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Hi(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var el=/[#\/\?@]/g,Wl=/[#\?:]/g,bu=/[#\?]/g,Aa=/[#\?@]/g,$l=/#/g;function ea(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function ai(p){p.g||(p.g=new Map,p.h=0,p.i&&Kl(p.i,function(S,x){p.add(decodeURIComponent(S.replace(/\+/g," ")),x)}))}s=ea.prototype,s.add=function(p,S){ai(this),this.i=null,p=Ea(this,p);let x=this.g.get(p);return x||this.g.set(p,x=[]),x.push(S),this.h+=1,this};function Su(p,S){ai(p),S=Ea(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function Yl(p,S){return ai(p),S=Ea(p,S),p.g.has(S)}s.forEach=function(p,S){ai(this),this.g.forEach(function(x,H){x.forEach(function(ot){p.call(S,ot,H,this)},this)},this)};function Au(p,S){ai(p);let x=[];if(typeof S=="string")Yl(p,S)&&(x=x.concat(p.g.get(Ea(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)x=x.concat(p[S]);return x}s.set=function(p,S){return ai(this),this.i=null,p=Ea(this,p),Yl(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},s.get=function(p,S){return p?(p=Au(this,p),p.length>0?String(p[0]):S):S};function nl(p,S,x){Su(p,S),x.length>0&&(p.i=null,p.g.set(Ea(p,S),I(x)),p.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let H=0;H<S.length;H++){var x=S[H];const ot=It(x);x=Au(this,x);for(let ht=0;ht<x.length;ht++){let Vt=ot;x[ht]!==""&&(Vt+="="+It(x[ht])),p.push(Vt)}}return this.i=p.join("&")};function Eu(p){const S=new ea;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function Ea(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function il(p,S){S&&!p.j&&(ai(p),p.i=null,p.g.forEach(function(x,H){const ot=H.toLowerCase();H!=ot&&(Su(this,H),nl(this,ot,x))},p)),p.j=S}function Cr(p,S){const x=new Ji;if(f.Image){const H=new Image;H.onload=T(Xs,x,"TestLoadImage: loaded",!0,S,H),H.onerror=T(Xs,x,"TestLoadImage: error",!1,S,H),H.onabort=T(Xs,x,"TestLoadImage: abort",!1,S,H),H.ontimeout=T(Xs,x,"TestLoadImage: timeout",!1,S,H),f.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=p}else S(!1)}function Cu(p,S){const x=new Ji,H=new AbortController,ot=setTimeout(()=>{H.abort(),Xs(x,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:H.signal}).then(ht=>{clearTimeout(ot),ht.ok?Xs(x,"TestPingServer: ok",!0,S):Xs(x,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ot),Xs(x,"TestPingServer: error",!1,S)})}function Xs(p,S,x,H,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),H(x)}catch{}}function Ca(){this.g=new ao}function na(p){this.i=p.Sb||null,this.h=p.ab||!1}w(na,Ss),na.prototype.g=function(){return new sl(this.i,this.h)};function sl(p,S){Ot.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(sl,Ot),s=sl.prototype,s.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,Cs(this)},s.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||f).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,co(this)),this.readyState=0},s.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ql(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ql(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}s.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?co(this):Cs(this),this.readyState==3&&Ql(this)}},s.Oa=function(p){this.g&&(this.response=this.responseText=p,co(this))},s.Na=function(p){this.g&&(this.response=p,co(this))},s.ga=function(){this.g&&co(this)};function co(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Cs(p)}s.setRequestHeader=function(p,S){this.A.append(p,S)},s.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var x=S.next();!x.done;)x=x.value,p.push(x[0]+": "+x[1]),x=S.next();return p.join(`\r
`)};function Cs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Zs(p){let S="";return dt(p,function(x,H){S+=H,S+=":",S+=x,S+=`\r
`}),S}function rl(p,S,x){t:{for(H in x){var H=!1;break t}H=!0}H||(x=Zs(x),typeof p=="string"?x!=null&&It(x):Qe(p,S,x))}function on(p){Ot.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(on,Ot);var ia=/^https?$/i,xu=["POST","PUT"];s=on.prototype,s.Fa=function(p){this.H=p},s.ea=function(p,S,x,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sa.g(),this.g.onreadystatechange=C(_(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(ht){We(this,ht);return}if(p=x||"",x=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ot in H)x.set(ot,H[ot]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ht of H.keys())x.set(ht,H.get(ht));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(x.keys()).find(ht=>ht.toLowerCase()=="content-type"),ot=f.FormData&&p instanceof f.FormData,!(Array.prototype.indexOf.call(xu,S,void 0)>=0)||H||ot||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ht,Vt]of x)this.g.setRequestHeader(ht,Vt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ht){We(this,ht)}};function We(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,Xe(p),xa(p)}function Xe(p){p.A||(p.A=!0,Ut(p,"complete"),Ut(p,"error"))}s.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Ut(this,"complete"),Ut(this,"abort"),xa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xa(this,!0)),on.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?al(this):this.Xa())},s.Xa=function(){al(this)};function al(p){if(p.h&&typeof c<"u"){if(p.v&&xr(p)==4)setTimeout(p.Ca.bind(p),0);else if(Ut(p,"readystatechange"),xr(p)==4){p.h=!1;try{const ht=p.ca();t:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break t;default:S=!1}var x;if(!(x=S)){var H;if(H=ht===0){let Vt=String(p.D).match(sf)[1]||null;!Vt&&f.self&&f.self.location&&(Vt=f.self.location.protocol.slice(0,-1)),H=!ia.test(Vt?Vt.toLowerCase():"")}x=H}if(x)Ut(p,"complete"),Ut(p,"success");else{p.o=6;try{var ot=xr(p)>2?p.g.statusText:""}catch{ot=""}p.l=ot+" ["+p.ca()+"]",Xe(p)}}finally{xa(p)}}}}function xa(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const x=p.g;p.g=null,S||Ut(p,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function xr(p){return p.g?p.g.readyState:0}s.ca=function(){try{return xr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),bs(S)}};function Si(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ra(p){const S={};p=(p.g&&xr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<p.length;H++){if(U(p[H]))continue;var x=Xt(p[H]);const ot=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ht=S[ot]||[];S[ot]=ht,ht.push(x)}pt(S,function(H){return H.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sa(p,S,x){return x&&x.internalChannelParams&&x.internalChannelParams[p]||S}function Na(p){this.za=0,this.i=[],this.j=new Ji,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sa("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sa("baseRetryDelayMs",5e3,p),this.Za=sa("retryDelaySeedMs",1e4,p),this.Ta=sa("forwardChannelMaxRetries",2,p),this.va=sa("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new _u(p&&p.concurrentRequestLimit),this.Ba=new Ca,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Na.prototype,s.ka=8,s.I=1,s.connect=function(p,S,x,H){In(0),this.W=p,this.H=S||{},x&&H!==void 0&&(this.H.OSID=x,this.H.OAID=H),this.F=this.X,this.J=Du(this,null,this.W),Mi(this)};function Ru(p){if(uo(p),p.I==3){var S=p.V++,x=Gn(p.J);if(Qe(x,"SID",p.M),Qe(x,"RID",S),Qe(x,"TYPE","terminate"),di(p,x),S=new Bt(p,p.j,S),S.M=2,S.A=ta(Gn(x)),x=!1,f.navigator&&f.navigator.sendBeacon)try{x=f.navigator.sendBeacon(S.A.toString(),"")}catch{}!x&&f.Image&&(new Image().src=S.A,x=!0),x||(S.g=Rr(S.j,null),S.g.ea(S.A)),S.F=Date.now(),es(S)}af(p)}function bn(p){p.g&&(Xl(p),p.g.cancel(),p.g=null)}function uo(p){bn(p),p.v&&(f.clearTimeout(p.v),p.v=null),cl(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&f.clearTimeout(p.m),p.m=null)}function Mi(p){if(!yu(p.h)&&!p.m){p.m=!0;var S=p.Ea;K||E(),W||(K(),W=!0),R.add(S,p),p.D=0}}function ol(p,S){return Sr(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=qi(_(p.Ea,p,S),rf(p,p.D)),p.D++,!0)}s.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ot=new Bt(this,this.j,p);let ht=this.o;if(this.U&&(ht?(ht=G(ht),St(ht,this.U)):ht=this.U),this.u!==null||this.R||(ot.J=ht,ht=null),this.S)t:{for(var S=0,x=0;x<this.i.length;x++){e:{var H=this.i[x];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break e}H=void 0}if(H===void 0)break;if(S+=H,S>4096){S=x;break t}if(S===4096||x===this.i.length-1){S=x+1;break t}}S=1e3}else S=1e3;S=Nu(this,ot,S),x=Gn(this.J),Qe(x,"RID",p),Qe(x,"CVER",22),this.G&&Qe(x,"X-HTTP-Session-Id",this.G),di(this,x),ht&&(this.R?S="headers="+It(Zs(ht))+"&"+S:this.u&&rl(x,this.u,ht)),Gl(this.h,ot),this.Ra&&Qe(x,"TYPE","init"),this.S?(Qe(x,"$req",S),Qe(x,"SID","null"),ot.U=!0,an(ot,x,null)):an(ot,x,S),this.I=2}}else this.I==3&&(p?ll(this,p):this.i.length==0||yu(this.h)||ll(this))};function ll(p,S){var x;S?x=S.l:x=p.V++;const H=Gn(p.J);Qe(H,"SID",p.M),Qe(H,"RID",x),Qe(H,"AID",p.K),di(p,H),p.u&&p.o&&rl(H,p.u,p.o),x=new Bt(p,p.j,x,p.D+1),p.u===null&&(x.J=p.o),S&&(p.i=S.G.concat(p.i)),S=Nu(p,x,1e3),x.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Gl(p.h,x),an(x,H,S)}function di(p,S){p.H&&dt(p.H,function(x,H){Qe(S,H,x)}),p.l&&dt({},function(x,H){Qe(S,H,x)})}function Nu(p,S,x){x=Math.min(p.i.length,x);const H=p.l?_(p.l.Ka,p.l,p):null;t:{var ot=p.i;let ge=-1;for(;;){const Pn=["count="+x];ge==-1?x>0?(ge=ot[0].g,Pn.push("ofs="+ge)):ge=0:Pn.push("ofs="+ge);let qe=!0;for(let _n=0;_n<x;_n++){var ht=ot[_n].g;const is=ot[_n].map;if(ht-=ge,ht<0)ge=Math.max(0,ot[_n].g-100),qe=!1;else try{ht="req"+ht+"_"||"";try{var Vt=is instanceof Map?is:Object.entries(is);for(const[Ir,Or]of Vt){let xs=Or;d(Or)&&(xs=Di(Or)),Pn.push(ht+Ir+"="+encodeURIComponent(xs))}}catch(Ir){throw Pn.push(ht+"type="+encodeURIComponent("_badmap")),Ir}}catch{H&&H(is)}}if(qe){Vt=Pn.join("&");break t}}Vt=void 0}return p=p.i.splice(0,x),S.G=p,Vt}function Iu(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;K||E(),W||(K(),W=!0),R.add(S,p),p.A=0}}function ho(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=qi(_(p.Da,p),rf(p,p.A)),p.A++,!0)}s.Da=function(){if(this.v=null,Ou(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=qi(_(this.Wa,this),p)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,In(10),bn(this),Ou(this))};function Xl(p){p.B!=null&&(f.clearTimeout(p.B),p.B=null)}function Ou(p){p.g=new Bt(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=Gn(p.na);Qe(S,"RID","rpc"),Qe(S,"SID",p.M),Qe(S,"AID",p.K),Qe(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&Qe(S,"TO",p.ia),Qe(S,"TYPE","xmlhttp"),di(p,S),p.u&&p.o&&rl(S,p.u,p.o),p.O&&(p.g.H=p.O);var x=p.g;p=p.ba,x.M=1,x.A=ta(Gn(S)),x.u=null,x.R=!0,Be(x,p)}s.Va=function(){this.C!=null&&(this.C=null,bn(this),ho(this),In(19))};function cl(p){p.C!=null&&(f.clearTimeout(p.C),p.C=null)}function ki(p,S){var x=null;if(p.g==S){cl(p),Xl(p),p.g=null;var H=2}else if(Ar(p.h,S))x=S.G,vu(p.h,S),H=1;else return;if(p.I!=0){if(S.o)if(H==1){x=S.u?S.u.length:0,S=Date.now()-S.F;var ot=p.D;H=lo(),Ut(H,new Ys(H,x)),Mi(p)}else Iu(p);else if(ot=S.m,ot==3||ot==0&&S.X>0||!(H==1&&ol(p,S)||H==2&&ho(p)))switch(x&&x.length>0&&(S=p.h,S.i=S.i.concat(x)),ot){case 1:Kn(p,5);break;case 4:Kn(p,10);break;case 3:Kn(p,6);break;default:Kn(p,2)}}}function rf(p,S){let x=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(x*=2),x*S}function Kn(p,S){if(p.j.info("Error code "+S),S==2){var x=_(p.bb,p),H=p.Ua;const ot=!H;H=new ns(H||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ri(H,"https"),ta(H),ot?Cr(H.toString(),x):Cu(H.toString(),x)}else In(2);p.I=0,p.l&&p.l.pa(S),af(p),uo(p)}s.bb=function(p){p?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function af(p){if(p.I=0,p.ja=[],p.l){const S=Tu(p.h);(S.length!=0||p.i.length!=0)&&(O(p.ja,S),O(p.ja,p.i),p.h.i.length=0,I(p.i),p.i.length=0),p.l.oa()}}function Du(p,S,x){var H=x instanceof ns?Gn(x):new ns(x);if(H.g!="")S&&(H.g=S+"."+H.g),Jr(H,H.u);else{var ot=f.location;H=ot.protocol,S=S?S+"."+ot.hostname:ot.hostname,ot=+ot.port;const ht=new ns(null);H&&ri(ht,H),S&&(ht.g=S),ot&&Jr(ht,ot),x&&(ht.h=x),H=ht}return x=p.G,S=p.wa,x&&S&&Qe(H,x,S),Qe(H,"VER",p.ka),di(p,H),H}function Rr(p,S,x){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new on(new na({ab:x})):new on(p.ma),S.Fa(p.L),S}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ul(){}s=ul.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ra(){}ra.prototype.g=function(p,S){return new Ee(p,S)};function Ee(p,S){Ot.call(this),this.g=new Na(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!U(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!U(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Ia(this)}w(Ee,Ot),Ee.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ee.prototype.close=function(){Ru(this.g)},Ee.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var x={};x.__data__=p,p=x}else this.v&&(x={},x.__data__=Di(p),p=x);S.i.push(new Zn(S.Ya++,p)),S.I==3&&Mi(S)},Ee.prototype.N=function(){this.g.l=null,delete this.j,Ru(this.g),delete this.g,Ee.Z.N.call(this)};function Nr(p){Nn.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){t:{for(const x in S){p=x;break t}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}w(Nr,Nn);function Zl(){Ln.call(this),this.status=1}w(Zl,Ln);function Ia(p){this.g=p}w(Ia,ul),Ia.prototype.ra=function(){Ut(this.g,"a")},Ia.prototype.qa=function(p){Ut(this.g,new Nr(p))},Ia.prototype.pa=function(p){Ut(this.g,new Zl)},Ia.prototype.oa=function(){Ut(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,Ee.prototype.send=Ee.prototype.o,Ee.prototype.open=Ee.prototype.m,Ee.prototype.close=Ee.prototype.close,s2=function(){return new ra},i2=function(){return lo()},n2=dn,sT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tr.NO_ERROR=0,Tr.TIMEOUT=8,Tr.HTTP_ERROR=6,$y=Tr,Jo.COMPLETE="complete",e2=Jo,wa.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Zm=wa,on.prototype.listenOnce=on.prototype.K,on.prototype.getLastError=on.prototype.Ha,on.prototype.getLastErrorCode=on.prototype.ya,on.prototype.getStatus=on.prototype.ca,on.prototype.getResponseJson=on.prototype.La,on.prototype.getResponseText=on.prototype.la,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Fa,t2=on}).apply(typeof Uy<"u"?Uy:typeof self<"u"?self:typeof window<"u"?window:{});const nS="@firebase/firestore",iS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ys.UNAUTHENTICATED=new ys(null),ys.GOOGLE_CREDENTIALS=new ys("google-credentials-uid"),ys.FIRST_PARTY=new ys("first-party-uid"),ys.MOCK_USER=new ys("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new hw("@firebase/firestore");function Sd(){return Qh.logLevel}function Wt(s,...t){if(Qh.logLevel<=Ke.DEBUG){const e=t.map(vw);Qh.debug(`Firestore (${ap}): ${s}`,...e)}}function Pl(s,...t){if(Qh.logLevel<=Ke.ERROR){const e=t.map(vw);Qh.error(`Firestore (${ap}): ${s}`,...e)}}function Kd(s,...t){if(Qh.logLevel<=Ke.WARN){const e=t.map(vw);Qh.warn(`Firestore (${ap}): ${s}`,...e)}}function vw(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(s,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,r2(s,i,e)}function r2(s,t,e){let i=`FIRESTORE (${ap}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Pl(i),new Error(i)}function hn(s,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,s||r2(t,a,i)}function we(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kt extends du{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class w5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ys.UNAUTHENTICATED)))}shutdown(){}}class b5{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class S5{constructor(t){this.t=t,this.currentUser=ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){hn(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let c=new Zc;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zc,t.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const m=c;t.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{Wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zc)}}),0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(Wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(hn(typeof i.accessToken=="string",31837,{l:i}),new a2(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return hn(t===null||typeof t=="string",2055,{h:t}),new ys(t)}}class A5{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=ys.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E5{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new A5(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(ys.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sS{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C5{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,PM(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){hn(this.o===void 0,3512);const i=c=>{c.error!=null&&Wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Wt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?e(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>i(c)))};const a=c=>{Wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sS(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(hn(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new sS(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<s;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=x5(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<e&&(i+=t.charAt(a[c]%62))}return i}}function Le(s,t){return s<t?-1:s>t?1:0}function rT(s,t){const e=Math.min(s.length,t.length);for(let i=0;i<e;i++){const a=s.charAt(i),c=t.charAt(i);if(a!==c)return x1(a)===x1(c)?Le(a,c):x1(a)?1:-1}return Le(s.length,t.length)}const R5=55296,N5=57343;function x1(s){const t=s.charCodeAt(0);return t>=R5&&t<=N5}function Wd(s,t,e){return s.length===t.length&&s.every(((i,a)=>e(i,t[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="__name__";class zo{constructor(t,e,i){e===void 0?e=0:e>t.length&&ue(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&ue(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return zo.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof zo?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const c=zo.compareSegments(t.get(a),e.get(a));if(c!==0)return c}return Le(t.length,e.length)}static compareSegments(t,e){const i=zo.isNumericId(t),a=zo.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?zo.extractNumericId(t).compare(zo.extractNumericId(e)):rT(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Xc.fromString(t.substring(4,t.length-2))}}class Cn extends zo{construct(t,e,i){return new Cn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Kt(Et.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((a=>a.length>0)))}return new Cn(e)}static emptyPath(){return new Cn([])}}const I5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qi extends zo{construct(t,e,i){return new Qi(t,e,i)}static isValidIdentifier(t){return I5.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rS}static keyField(){return new Qi([rS])}static fromServerFormat(t){const e=[];let i="",a=0;const c=()=>{if(i.length===0)throw new Kt(Et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let f=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new Kt(Et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Kt(Et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,a+=2}else d==="`"?(f=!f,a++):d!=="."||f?(i+=d,a++):(c(),a++)}if(c(),f)throw new Kt(Et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qi(e)}static emptyPath(){return new Qi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.path=t}static fromPath(t){return new ie(Cn.fromString(t))}static fromName(t){return new ie(Cn.fromString(t).popFirst(5))}static empty(){return new ie(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Cn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Cn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ie(new Cn(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(s,t,e){if(!e)throw new Kt(Et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function O5(s,t,e,i){if(t===!0&&i===!0)throw new Kt(Et.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function aS(s){if(!ie.isDocumentKey(s))throw new Kt(Et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function oS(s){if(ie.isDocumentKey(s))throw new Kt(Et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function l2(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function X0(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ue(12329,{type:typeof s})}function iu(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Kt(Et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=X0(s);throw new Kt(Et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(s,t){const e={typeString:s};return t&&(e.value=t),e}function Dg(s,t){if(!l2(s))throw new Kt(Et.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,c="value"in t[i]?{value:t[i].value}:void 0;if(!(i in s)){e=`JSON missing required field: '${i}'`;break}const f=s[i];if(a&&typeof f!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){e=`Expected '${i}' field to equal '${c.value}'`;break}}if(e)throw new Kt(Et.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=-62135596800,cS=1e6;class kn{static now(){return kn.fromMillis(Date.now())}static fromDate(t){return kn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*cS);return new kn(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Kt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Kt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<lS)throw new Kt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Kt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cS}_compareTo(t){return this.seconds===t.seconds?Le(this.nanoseconds,t.nanoseconds):Le(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Dg(t,kn._jsonSchema))return new kn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-lS;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kn._jsonSchemaVersion="firestore/timestamp/1.0",kn._jsonSchema={type:wi("string",kn._jsonSchemaVersion),seconds:wi("number"),nanoseconds:wi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(t){return new pe(t)}static min(){return new pe(new kn(0,0))}static max(){return new pe(new kn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=-1;function D5(s,t){const e=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=pe.fromTimestamp(i===1e9?new kn(e+1,0):new kn(e,i));return new su(a,ie.empty(),t)}function M5(s){return new su(s.readTime,s.key,fg)}class su{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new su(pe.min(),ie.empty(),fg)}static max(){return new su(pe.max(),ie.empty(),fg)}}function k5(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=ie.comparator(s.documentKey,t.documentKey),e!==0?e:Le(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(s){if(s.code!==Et.FAILED_PRECONDITION||s.message!==V5)throw s;Wt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new xt(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(e,c).next(i,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof xt?e:xt.resolve(e)}catch(e){return xt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):xt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):xt.reject(e)}static resolve(t){return new xt(((e,i)=>{e(t)}))}static reject(t){return new xt(((e,i)=>{i(t)}))}static waitFor(t){return new xt(((e,i)=>{let a=0,c=0,f=!1;t.forEach((d=>{++a,d.next((()=>{++c,f&&c===a&&e()}),(m=>i(m)))})),f=!0,c===a&&e()}))}static or(t){let e=xt.resolve(!1);for(const i of t)e=e.next((a=>a?xt.resolve(a):i()));return e}static forEach(t,e){const i=[];return t.forEach(((a,c)=>{i.push(e.call(this,a,c))})),this.waitFor(i)}static mapArray(t,e){return new xt(((i,a)=>{const c=t.length,f=new Array(c);let d=0;for(let m=0;m<c;m++){const _=m;e(t[_]).next((T=>{f[_]=T,++d,d===c&&i(f)}),(T=>a(T)))}}))}static doWhile(t,e){return new xt(((i,a)=>{const c=()=>{t()===!0?e().next((()=>{c()}),a):i()};c()}))}}function L5(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function lp(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Z0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=-1;function J0(s){return s==null}function g0(s){return s===0&&1/s==-1/0}function P5(s){return typeof s=="number"&&Number.isInteger(s)&&!g0(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="";function U5(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=uS(t)),t=z5(s.get(e),t);return uS(t)}function z5(s,t){let e=t;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":e+="";break;case c2:e+="";break;default:e+=c}}return e}function uS(s){return s+c2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function pu(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function u2(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t,e){this.comparator=t,this.root=e||Yi.EMPTY}insert(t,e){return new Xn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(t){return new Xn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zy(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zy(this.root,t,this.comparator,!1)}getReverseIterator(){return new zy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zy(this.root,t,this.comparator,!0)}}class zy{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,e&&a&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Yi{constructor(t,e,i,a,c){this.key=t,this.value=e,this.color=i??Yi.RED,this.left=a??Yi.EMPTY,this.right=c??Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,c){return new Yi(t??this.key,e??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,e,i),null):c===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Yi.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ue(27949);return t+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1;Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(t,e,i,a,c){return this}insert(t,e,i){return new Yi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t){this.comparator=t,this.data=new Xn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new fS(this.data.getIterator())}getIteratorFrom(t){return new fS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Ii)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ii(this.comparator);return e.data=t,e}}class fS{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.fields=t,t.sort(Qi.comparator)}static empty(){return new Wr([])}unionWith(t){let e=new Ii(Qi.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Wr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Wd(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new h2("Invalid base64 string: "+c):c}})(t);return new Xi(e)}static fromUint8Array(t){const e=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(t);return new Xi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Le(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Xi.EMPTY_BYTE_STRING=new Xi("");const B5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ru(s){if(hn(!!s,39018),typeof s=="string"){let t=0;const e=B5.exec(s);if(hn(!!e,46558,{timestamp:s}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ui(s.seconds),nanos:ui(s.nanos)}}function ui(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function au(s){return typeof s=="string"?Xi.fromBase64String(s):Xi.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="server_timestamp",d2="__type__",p2="__previous_value__",m2="__local_write_time__";function bw(s){return(s?.mapValue?.fields||{})[d2]?.stringValue===f2}function tv(s){const t=s.mapValue.fields[p2];return bw(t)?tv(t):t}function dg(s){const t=ru(s.mapValue.fields[m2].timestampValue);return new kn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(t,e,i,a,c,f,d,m,_,T){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=_,this.isUsingEmulator=T}}const _0="(default)";class pg{constructor(t,e){this.projectId=t,this.database=e||_0}static empty(){return new pg("","")}get isDefaultDatabase(){return this.database===_0}isEqual(t){return t instanceof pg&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="__type__",F5="__max__",By={mapValue:{}},_2="__vector__",y0="value";function ou(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?bw(s)?4:G5(s)?9007199254740991:H5(s)?10:11:ue(28295,{value:s})}function Wo(s,t){if(s===t)return!0;const e=ou(s);if(e!==ou(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return dg(s).isEqual(dg(t));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=ru(a.timestampValue),d=ru(c.timestampValue);return f.seconds===d.seconds&&f.nanos===d.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(a,c){return au(a.bytesValue).isEqual(au(c.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(a,c){return ui(a.geoPointValue.latitude)===ui(c.geoPointValue.latitude)&&ui(a.geoPointValue.longitude)===ui(c.geoPointValue.longitude)})(s,t);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return ui(a.integerValue)===ui(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=ui(a.doubleValue),d=ui(c.doubleValue);return f===d?g0(f)===g0(d):isNaN(f)&&isNaN(d)}return!1})(s,t);case 9:return Wd(s.arrayValue.values||[],t.arrayValue.values||[],Wo);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},d=c.mapValue.fields||{};if(hS(f)!==hS(d))return!1;for(const m in f)if(f.hasOwnProperty(m)&&(d[m]===void 0||!Wo(f[m],d[m])))return!1;return!0})(s,t);default:return ue(52216,{left:s})}}function mg(s,t){return(s.values||[]).find((e=>Wo(e,t)))!==void 0}function $d(s,t){if(s===t)return 0;const e=ou(s),i=ou(t);if(e!==i)return Le(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Le(s.booleanValue,t.booleanValue);case 2:return(function(c,f){const d=ui(c.integerValue||c.doubleValue),m=ui(f.integerValue||f.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(s,t);case 3:return dS(s.timestampValue,t.timestampValue);case 4:return dS(dg(s),dg(t));case 5:return rT(s.stringValue,t.stringValue);case 6:return(function(c,f){const d=au(c),m=au(f);return d.compareTo(m)})(s.bytesValue,t.bytesValue);case 7:return(function(c,f){const d=c.split("/"),m=f.split("/");for(let _=0;_<d.length&&_<m.length;_++){const T=Le(d[_],m[_]);if(T!==0)return T}return Le(d.length,m.length)})(s.referenceValue,t.referenceValue);case 8:return(function(c,f){const d=Le(ui(c.latitude),ui(f.latitude));return d!==0?d:Le(ui(c.longitude),ui(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return pS(s.arrayValue,t.arrayValue);case 10:return(function(c,f){const d=c.fields||{},m=f.fields||{},_=d[y0]?.arrayValue,T=m[y0]?.arrayValue,w=Le(_?.values?.length||0,T?.values?.length||0);return w!==0?w:pS(_,T)})(s.mapValue,t.mapValue);case 11:return(function(c,f){if(c===By.mapValue&&f===By.mapValue)return 0;if(c===By.mapValue)return 1;if(f===By.mapValue)return-1;const d=c.fields||{},m=Object.keys(d),_=f.fields||{},T=Object.keys(_);m.sort(),T.sort();for(let w=0;w<m.length&&w<T.length;++w){const C=rT(m[w],T[w]);if(C!==0)return C;const I=$d(d[m[w]],_[T[w]]);if(I!==0)return I}return Le(m.length,T.length)})(s.mapValue,t.mapValue);default:throw ue(23264,{he:e})}}function dS(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Le(s,t);const e=ru(s),i=ru(t),a=Le(e.seconds,i.seconds);return a!==0?a:Le(e.nanos,i.nanos)}function pS(s,t){const e=s.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const c=$d(e[a],i[a]);if(c)return c}return Le(e.length,i.length)}function Yd(s){return aT(s)}function aT(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const i=ru(e);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return au(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return ie.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let i="[",a=!0;for(const c of e.values||[])a?a=!1:i+=",",i+=aT(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(e){const i=Object.keys(e.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${aT(e.fields[f])}`;return a+"}"})(s.mapValue):ue(61005,{value:s})}function Yy(s){switch(ou(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=tv(s);return t?16+Yy(t):16;case 5:return 2*s.stringValue.length;case 6:return au(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+Yy(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return pu(i.fields,((c,f)=>{a+=c.length+Yy(f)})),a})(s.mapValue);default:throw ue(13486,{value:s})}}function mS(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function oT(s){return!!s&&"integerValue"in s}function Sw(s){return!!s&&"arrayValue"in s}function gS(s){return!!s&&"nullValue"in s}function _S(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Qy(s){return!!s&&"mapValue"in s}function H5(s){return(s?.mapValue?.fields||{})[g2]?.stringValue===_2}function ig(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return pu(s.mapValue.fields,((e,i)=>t.mapValue.fields[e]=ig(i))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ig(s.arrayValue.values[e]);return t}return{...s}}function G5(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===F5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t){this.value=t}static empty(){return new mr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Qy(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ig(e)}setAll(t){let e=Qi.emptyPath(),i={},a=[];t.forEach(((f,d)=>{if(!e.isImmediateParentOf(d)){const m=this.getFieldsMap(e);this.applyChanges(m,i,a),i={},a=[],e=d.popLast()}f?i[d.lastSegment()]=ig(f):a.push(d.lastSegment())}));const c=this.getFieldsMap(e);this.applyChanges(c,i,a)}delete(t){const e=this.field(t.popLast());Qy(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Wo(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];Qy(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){pu(e,((a,c)=>t[a]=c));for(const a of i)delete t[a]}clone(){return new mr(ig(this.value))}}function y2(s){const t=[];return pu(s.fields,((e,i)=>{const a=new Qi([e]);if(Qy(i)){const c=y2(i.mapValue).fields;if(c.length===0)t.push(a);else for(const f of c)t.push(a.child(f))}else t.push(a)})),new Wr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(t,e,i,a,c,f,d){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=c,this.data=f,this.documentState=d}static newInvalidDocument(t){return new vs(t,0,pe.min(),pe.min(),pe.min(),mr.empty(),0)}static newFoundDocument(t,e,i,a){return new vs(t,1,e,pe.min(),i,a,0)}static newNoDocument(t,e){return new vs(t,2,e,pe.min(),pe.min(),mr.empty(),0)}static newUnknownDocument(t,e){return new vs(t,3,e,pe.min(),pe.min(),mr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof vs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new vs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,e){this.position=t,this.inclusive=e}}function yS(s,t,e){let i=0;for(let a=0;a<s.position.length;a++){const c=t[a],f=s.position[a];if(c.field.isKeyField()?i=ie.comparator(ie.fromName(f.referenceValue),e.key):i=$d(f,e.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function vS(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Wo(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(t,e="asc"){this.field=t,this.dir=e}}function K5(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{}class vi extends v2{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new $5(t,e,i):e==="array-contains"?new X5(t,i):e==="in"?new Z5(t,i):e==="not-in"?new J5(t,i):e==="array-contains-any"?new tk(t,i):new vi(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Y5(t,i):new Q5(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison($d(e,this.value)):e!==null&&ou(this.value)===ou(e)&&this.matchesComparison($d(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class no extends v2{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new no(t,e)}matches(t){return T2(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function T2(s){return s.op==="and"}function w2(s){return W5(s)&&T2(s)}function W5(s){for(const t of s.filters)if(t instanceof no)return!1;return!0}function lT(s){if(s instanceof vi)return s.field.canonicalString()+s.op.toString()+Yd(s.value);if(w2(s))return s.filters.map((t=>lT(t))).join(",");{const t=s.filters.map((e=>lT(e))).join(",");return`${s.op}(${t})`}}function b2(s,t){return s instanceof vi?(function(i,a){return a instanceof vi&&i.op===a.op&&i.field.isEqual(a.field)&&Wo(i.value,a.value)})(s,t):s instanceof no?(function(i,a){return a instanceof no&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,f,d)=>c&&b2(f,a.filters[d])),!0):!1})(s,t):void ue(19439)}function S2(s){return s instanceof vi?(function(e){return`${e.field.canonicalString()} ${e.op} ${Yd(e.value)}`})(s):s instanceof no?(function(e){return e.op.toString()+" {"+e.getFilters().map(S2).join(" ,")+"}"})(s):"Filter"}class $5 extends vi{constructor(t,e,i){super(t,e,i),this.key=ie.fromName(i.referenceValue)}matches(t){const e=ie.comparator(t.key,this.key);return this.matchesComparison(e)}}class Y5 extends vi{constructor(t,e){super(t,"in",e),this.keys=A2("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Q5 extends vi{constructor(t,e){super(t,"not-in",e),this.keys=A2("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function A2(s,t){return(t.arrayValue?.values||[]).map((e=>ie.fromName(e.referenceValue)))}class X5 extends vi{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Sw(e)&&mg(e.arrayValue,this.value)}}class Z5 extends vi{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&mg(this.value.arrayValue,e)}}class J5 extends vi{constructor(t,e){super(t,"not-in",e)}matches(t){if(mg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!mg(this.value.arrayValue,e)}}class tk extends vi{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Sw(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>mg(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(t,e=null,i=[],a=[],c=null,f=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=f,this.endAt=d,this.Te=null}}function TS(s,t=null,e=[],i=[],a=null,c=null,f=null){return new ek(s,t,e,i,a,c,f)}function Aw(s){const t=we(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>lT(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),J0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>Yd(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>Yd(i))).join(",")),t.Te=e}return t.Te}function Ew(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!K5(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!b2(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!vS(s.startAt,t.startAt)&&vS(s.endAt,t.endAt)}function cT(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,e=null,i=[],a=[],c=null,f="F",d=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=f,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nk(s,t,e,i,a,c,f,d){return new Mg(s,t,e,i,a,c,f,d)}function E2(s){return new Mg(s)}function wS(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function C2(s){return s.collectionGroup!==null}function sg(s){const t=we(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),e.add(c.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let d=new Ii(Qi.comparator);return f.filters.forEach((m=>{m.getFlattenedFilters().forEach((_=>{_.isInequality()&&(d=d.add(_.field))}))})),d})(t).forEach((c=>{e.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new T0(c,i))})),e.has(Qi.keyField().canonicalString())||t.Ie.push(new T0(Qi.keyField(),i))}return t.Ie}function qo(s){const t=we(s);return t.Ee||(t.Ee=ik(t,sg(s))),t.Ee}function ik(s,t){if(s.limitType==="F")return TS(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new T0(a.field,c)}));const e=s.endAt?new v0(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new v0(s.startAt.position,s.startAt.inclusive):null;return TS(s.path,s.collectionGroup,t,s.filters,s.limit,e,i)}}function uT(s,t){const e=s.filters.concat([t]);return new Mg(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function hT(s,t,e){return new Mg(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function ev(s,t){return Ew(qo(s),qo(t))&&s.limitType===t.limitType}function x2(s){return`${Aw(qo(s))}|lt:${s.limitType}`}function Ad(s){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((a=>S2(a))).join(", ")}]`),J0(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>Yd(a))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>Yd(a))).join(",")),`Target(${i})`})(qo(s))}; limitType=${s.limitType})`}function nv(s,t){return t.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ie.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,t)&&(function(i,a){for(const c of sg(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,t)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,t)&&(function(i,a){return!(i.startAt&&!(function(f,d,m){const _=yS(f,d,m);return f.inclusive?_<=0:_<0})(i.startAt,sg(i),a)||i.endAt&&!(function(f,d,m){const _=yS(f,d,m);return f.inclusive?_>=0:_>0})(i.endAt,sg(i),a))})(s,t)}function sk(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function R2(s){return(t,e)=>{let i=!1;for(const a of sg(s)){const c=rk(a,t,e);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function rk(s,t,e){const i=s.field.isKeyField()?ie.comparator(t.key,e.key):(function(c,f,d){const m=f.data.field(c),_=d.data.field(c);return m!==null&&_!==null?$d(m,_):ue(42886)})(s.field,t,e);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return ue(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,t))return c}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],t))return void(a[c]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){pu(this.inner,((e,i)=>{for(const[a,c]of i)t(a,c)}))}isEmpty(){return u2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Xn(ie.comparator);function Ul(){return ak}const N2=new Xn(ie.comparator);function Jm(...s){let t=N2;for(const e of s)t=t.insert(e.key,e);return t}function I2(s){let t=N2;return s.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Bh(){return rg()}function O2(){return rg()}function rg(){return new ef((s=>s.toString()),((s,t)=>s.isEqual(t)))}const ok=new Xn(ie.comparator),lk=new Ii(ie.comparator);function Ue(...s){let t=lk;for(const e of s)t=t.add(e);return t}const ck=new Ii(Le);function uk(){return ck}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:g0(t)?"-0":t}}function D2(s){return{integerValue:""+s}}function hk(s,t){return P5(t)?D2(t):Cw(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this._=void 0}}function fk(s,t,e){return s instanceof w0?(function(a,c){const f={fields:{[d2]:{stringValue:f2},[m2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&bw(c)&&(c=tv(c)),c&&(f.fields[p2]=c),{mapValue:f}})(e,t):s instanceof gg?k2(s,t):s instanceof _g?V2(s,t):(function(a,c){const f=M2(a,c),d=bS(f)+bS(a.Ae);return oT(f)&&oT(a.Ae)?D2(d):Cw(a.serializer,d)})(s,t)}function dk(s,t,e){return s instanceof gg?k2(s,t):s instanceof _g?V2(s,t):e}function M2(s,t){return s instanceof b0?(function(i){return oT(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(t)?t:{integerValue:0}:null}class w0 extends iv{}class gg extends iv{constructor(t){super(),this.elements=t}}function k2(s,t){const e=j2(t);for(const i of s.elements)e.some((a=>Wo(a,i)))||e.push(i);return{arrayValue:{values:e}}}class _g extends iv{constructor(t){super(),this.elements=t}}function V2(s,t){let e=j2(t);for(const i of s.elements)e=e.filter((a=>!Wo(a,i)));return{arrayValue:{values:e}}}class b0 extends iv{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function bS(s){return ui(s.integerValue||s.doubleValue)}function j2(s){return Sw(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function pk(s,t){return s.field.isEqual(t.field)&&(function(i,a){return i instanceof gg&&a instanceof gg||i instanceof _g&&a instanceof _g?Wd(i.elements,a.elements,Wo):i instanceof b0&&a instanceof b0?Wo(i.Ae,a.Ae):i instanceof w0&&a instanceof w0})(s.transform,t.transform)}class mk{constructor(t,e){this.version=t,this.transformResults=e}}class _r{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new _r}static exists(t){return new _r(void 0,t)}static updateTime(t){return new _r(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xy(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class sv{}function L2(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new rv(s.key,_r.none()):new kg(s.key,s.data,_r.none());{const e=s.data,i=mr.empty();let a=new Ii(Qi.comparator);for(let c of t.fields)if(!a.has(c)){let f=e.field(c);f===null&&c.length>1&&(c=c.popLast(),f=e.field(c)),f===null?i.delete(c):i.set(c,f),a=a.add(c)}return new mu(s.key,i,new Wr(a.toArray()),_r.none())}}function gk(s,t,e){s instanceof kg?(function(a,c,f){const d=a.value.clone(),m=AS(a.fieldTransforms,c,f.transformResults);d.setAll(m),c.convertToFoundDocument(f.version,d).setHasCommittedMutations()})(s,t,e):s instanceof mu?(function(a,c,f){if(!Xy(a.precondition,c))return void c.convertToUnknownDocument(f.version);const d=AS(a.fieldTransforms,c,f.transformResults),m=c.data;m.setAll(P2(a)),m.setAll(d),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(s,t,e):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,e)}function ag(s,t,e,i){return s instanceof kg?(function(c,f,d,m){if(!Xy(c.precondition,f))return d;const _=c.value.clone(),T=ES(c.fieldTransforms,m,f);return _.setAll(T),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(s,t,e,i):s instanceof mu?(function(c,f,d,m){if(!Xy(c.precondition,f))return d;const _=ES(c.fieldTransforms,m,f),T=f.data;return T.setAll(P2(c)),T.setAll(_),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),d===null?null:d.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,t,e,i):(function(c,f,d){return Xy(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):d})(s,t,e)}function _k(s,t){let e=null;for(const i of s.fieldTransforms){const a=t.data.field(i.field),c=M2(i.transform,a||null);c!=null&&(e===null&&(e=mr.empty()),e.set(i.field,c))}return e||null}function SS(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Wd(i,a,((c,f)=>pk(c,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class kg extends sv{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class mu extends sv{constructor(t,e,i,a,c=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function P2(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=s.data.field(e);t.set(e,i)}})),t}function AS(s,t,e){const i=new Map;hn(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let a=0;a<e.length;a++){const c=s[a],f=c.transform,d=t.data.field(c.field);i.set(c.field,dk(f,d,e[a]))}return i}function ES(s,t,e){const i=new Map;for(const a of s){const c=a.transform,f=e.data.field(a.field);i.set(a.field,fk(c,f,t))}return i}class rv extends sv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yk extends sv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(t.key)&&gk(c,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=ag(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=ag(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=O2();return this.mutations.forEach((a=>{const c=t.get(a.key),f=c.overlayedDocument;let d=this.applyToLocalView(f,c.mutatedFields);d=e.has(a.key)?null:d;const m=L2(f,d);m!==null&&i.set(a.key,m),f.isValidDocument()||f.convertToNoDocument(pe.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ue())}isEqual(t){return this.batchId===t.batchId&&Wd(this.mutations,t.mutations,((e,i)=>SS(e,i)))&&Wd(this.baseMutations,t.baseMutations,((e,i)=>SS(e,i)))}}class xw{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){hn(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let a=(function(){return ok})();const c=t.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,i[f].version);return new xw(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gi,Ge;function bk(s){switch(s){case Et.OK:return ue(64938);case Et.CANCELLED:case Et.UNKNOWN:case Et.DEADLINE_EXCEEDED:case Et.RESOURCE_EXHAUSTED:case Et.INTERNAL:case Et.UNAVAILABLE:case Et.UNAUTHENTICATED:return!1;case Et.INVALID_ARGUMENT:case Et.NOT_FOUND:case Et.ALREADY_EXISTS:case Et.PERMISSION_DENIED:case Et.FAILED_PRECONDITION:case Et.ABORTED:case Et.OUT_OF_RANGE:case Et.UNIMPLEMENTED:case Et.DATA_LOSS:return!0;default:return ue(15467,{code:s})}}function U2(s){if(s===void 0)return Pl("GRPC error has no .code"),Et.UNKNOWN;switch(s){case gi.OK:return Et.OK;case gi.CANCELLED:return Et.CANCELLED;case gi.UNKNOWN:return Et.UNKNOWN;case gi.DEADLINE_EXCEEDED:return Et.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return Et.RESOURCE_EXHAUSTED;case gi.INTERNAL:return Et.INTERNAL;case gi.UNAVAILABLE:return Et.UNAVAILABLE;case gi.UNAUTHENTICATED:return Et.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return Et.INVALID_ARGUMENT;case gi.NOT_FOUND:return Et.NOT_FOUND;case gi.ALREADY_EXISTS:return Et.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return Et.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return Et.FAILED_PRECONDITION;case gi.ABORTED:return Et.ABORTED;case gi.OUT_OF_RANGE:return Et.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return Et.UNIMPLEMENTED;case gi.DATA_LOSS:return Et.DATA_LOSS;default:return ue(39323,{code:s})}}(Ge=gi||(gi={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Xc([4294967295,4294967295],0);function CS(s){const t=Sk().encode(s),e=new JE;return e.update(t),new Uint8Array(e.digest())}function xS(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Xc([e,i],0),new Xc([a,c],0)]}class Rw{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new tg(`Invalid padding: ${e}`);if(i<0)throw new tg(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new tg(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new tg(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Xc.fromNumber(this.ge)}ye(t,e,i){let a=t.add(e.multiply(Xc.fromNumber(i)));return a.compare(Ak)===1&&(a=new Xc([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=CS(t),[i,a]=xS(e);for(let c=0;c<this.hashCount;c++){const f=this.ye(i,a,c);if(!this.we(f))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Rw(c,a,e);return i.forEach((d=>f.insert(d))),f}insert(t){if(this.ge===0)return;const e=CS(t),[i,a]=xS(e);for(let c=0;c<this.hashCount;c++){const f=this.ye(i,a,c);this.Se(f)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class tg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(t,e,i,a,c){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,Vg.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new av(pe.min(),a,new Xn(Le),Ul(),Ue())}}class Vg{constructor(t,e,i,a,c){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Vg(i,e,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,e,i,a){this.be=t,this.removedTargetIds=e,this.key=i,this.De=a}}class z2{constructor(t,e){this.targetId=t,this.Ce=e}}class B2{constructor(t,e,i=Xi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class RS{constructor(){this.ve=0,this.Fe=NS(),this.Me=Xi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ue(),e=Ue(),i=Ue();return this.Fe.forEach(((a,c)=>{switch(c){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:ue(38017,{changeType:c})}})),new Vg(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=NS()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,hn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ek{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ul(),this.Je=qy(),this.He=qy(),this.Ye=new Xn(Le)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:ue(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,i=t.Ce.count,a=this.ot(e);if(a){const c=a.target;if(cT(c))if(i===0){const f=new ie(c.path);this.et(e,f,vs.newNoDocument(f,pe.min()))}else hn(i===1,20013,{expectedCount:i});else{const f=this._t(e);if(f!==i){const d=this.ut(t),m=d?this.ct(d,t,f):1;if(m!==0){this.it(e);const _=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,_)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=e;let f,d;try{f=au(i).toUint8Array()}catch(m){if(m instanceof h2)return Kd("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Rw(f,a,c)}catch(m){return Kd(m instanceof tg?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let a=0;return i.forEach((c=>{const f=this.Ge.ht(),d=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(d)||(this.et(e,c,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((c,f)=>{const d=this.ot(f);if(d){if(c.current&&cT(d.target)){const m=new ie(d.target.path);this.It(m).has(f)||this.Et(f,m)||this.et(f,m,vs.newNoDocument(m,t))}c.Be&&(e.set(f,c.ke()),c.qe())}}));let i=Ue();this.He.forEach(((c,f)=>{let d=!0;f.forEachWhile((m=>{const _=this.ot(m);return!_||_.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const a=new av(t,e,this.Ye,this.je,i);return this.je=Ul(),this.Je=qy(),this.He=qy(),this.Ye=new Xn(Le),a}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.Qe(e,1):a.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new RS,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ii(Le),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ii(Le),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||Wt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new RS),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function qy(){return new Xn(ie.comparator)}function NS(){return new Xn(ie.comparator)}const Ck={asc:"ASCENDING",desc:"DESCENDING"},xk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rk={and:"AND",or:"OR"};class Nk{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function fT(s,t){return s.useProto3Json||J0(t)?t:{value:t}}function S0(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function q2(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Ik(s,t){return S0(s,t.toTimestamp())}function Fo(s){return hn(!!s,49232),pe.fromTimestamp((function(e){const i=ru(e);return new kn(i.seconds,i.nanos)})(s))}function Nw(s,t){return dT(s,t).canonicalString()}function dT(s,t){const e=(function(a){return new Cn(["projects",a.projectId,"databases",a.database])})(s).child("documents");return t===void 0?e:e.child(t)}function F2(s){const t=Cn.fromString(s);return hn($2(t),10190,{key:t.toString()}),t}function pT(s,t){return Nw(s.databaseId,t.path)}function R1(s,t){const e=F2(t);if(e.get(1)!==s.databaseId.projectId)throw new Kt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new Kt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new ie(G2(e))}function H2(s,t){return Nw(s.databaseId,t)}function Ok(s){const t=F2(s);return t.length===4?Cn.emptyPath():G2(t)}function mT(s){return new Cn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function G2(s){return hn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function IS(s,t,e){return{name:pT(s,t),fields:e.value.mapValue.fields}}function Dk(s,t){let e;if("targetChange"in t){t.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ue(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],c=(function(_,T){return _.useProto3Json?(hn(T===void 0||typeof T=="string",58123),Xi.fromBase64String(T||"")):(hn(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Xi.fromUint8Array(T||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,d=f&&(function(_){const T=_.code===void 0?Et.UNKNOWN:U2(_.code);return new Kt(T,_.message||"")})(f);e=new B2(i,a,c,d||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=R1(s,i.document.name),c=Fo(i.document.updateTime),f=i.document.createTime?Fo(i.document.createTime):pe.min(),d=new mr({mapValue:{fields:i.document.fields}}),m=vs.newFoundDocument(a,c,f,d),_=i.targetIds||[],T=i.removedTargetIds||[];e=new Zy(_,T,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=R1(s,i.document),c=i.readTime?Fo(i.readTime):pe.min(),f=vs.newNoDocument(a,c),d=i.removedTargetIds||[];e=new Zy([],d,f.key,f)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=R1(s,i.document),c=i.removedTargetIds||[];e=new Zy([],c,a,null)}else{if(!("filter"in t))return ue(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,f=new wk(a,c),d=i.targetId;e=new z2(d,f)}}return e}function Mk(s,t){let e;if(t instanceof kg)e={update:IS(s,t.key,t.value)};else if(t instanceof rv)e={delete:pT(s,t.key)};else if(t instanceof mu)e={update:IS(s,t.key,t.data),updateMask:qk(t.fieldMask)};else{if(!(t instanceof yk))return ue(16599,{Vt:t.type});e={verify:pT(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(c,f){const d=f.transform;if(d instanceof w0)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof gg)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _g)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof b0)return{fieldPath:f.field.canonicalString(),increment:d.Ae};throw ue(20930,{transform:f.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Ik(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ue(27497)})(s,t.precondition)),e}function kk(s,t){return s&&s.length>0?(hn(t!==void 0,14353),s.map((e=>(function(a,c){let f=a.updateTime?Fo(a.updateTime):Fo(c);return f.isEqual(pe.min())&&(f=Fo(c)),new mk(f,a.transformResults||[])})(e,t)))):[]}function Vk(s,t){return{documents:[H2(s,t.path)]}}function jk(s,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=H2(s,a);const c=(function(_){if(_.length!==0)return W2(no.create(_,"and"))})(t.filters);c&&(e.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((T=>(function(C){return{field:Ed(C.field),direction:Uk(C.dir)}})(T)))})(t.orderBy);f&&(e.structuredQuery.orderBy=f);const d=fT(s,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:e,parent:a}}function Lk(s){let t=Ok(s.parent);const e=s.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){hn(i===1,65062);const T=e.from[0];T.allDescendants?a=T.collectionId:t=t.child(T.collectionId)}let c=[];e.where&&(c=(function(w){const C=K2(w);return C instanceof no&&w2(C)?C.getFilters():[C]})(e.where));let f=[];e.orderBy&&(f=(function(w){return w.map((C=>(function(O){return new T0(Cd(O.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(C)))})(e.orderBy));let d=null;e.limit&&(d=(function(w){let C;return C=typeof w=="object"?w.value:w,J0(C)?null:C})(e.limit));let m=null;e.startAt&&(m=(function(w){const C=!!w.before,I=w.values||[];return new v0(I,C)})(e.startAt));let _=null;return e.endAt&&(_=(function(w){const C=!w.before,I=w.values||[];return new v0(I,C)})(e.endAt)),nk(t,a,f,c,d,"F",m,_)}function Pk(s,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function K2(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Cd(e.unaryFilter.field);return vi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Cd(e.unaryFilter.field);return vi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Cd(e.unaryFilter.field);return vi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Cd(e.unaryFilter.field);return vi.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(s):s.fieldFilter!==void 0?(function(e){return vi.create(Cd(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return no.create(e.compositeFilter.filters.map((i=>K2(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(e.compositeFilter.op))})(s):ue(30097,{filter:s})}function Uk(s){return Ck[s]}function zk(s){return xk[s]}function Bk(s){return Rk[s]}function Ed(s){return{fieldPath:s.canonicalString()}}function Cd(s){return Qi.fromServerFormat(s.fieldPath)}function W2(s){return s instanceof vi?(function(e){if(e.op==="=="){if(_S(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NAN"}};if(gS(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(_S(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NOT_NAN"}};if(gS(e.value))return{unaryFilter:{field:Ed(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ed(e.field),op:zk(e.op),value:e.value}}})(s):s instanceof no?(function(e){const i=e.getFilters().map((a=>W2(a)));return i.length===1?i[0]:{compositeFilter:{op:Bk(e.op),filters:i}}})(s):ue(54877,{filter:s})}function qk(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function $2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,e,i,a,c=pe.min(),f=pe.min(),d=Xi.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(t){return new Wc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(t){this.yt=t}}function Hk(s){const t=Lk({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?hT(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.Cn=new Kk}addToCollectionParentIndex(t,e){return this.Cn.add(e),xt.resolve()}getCollectionParents(t,e){return xt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return xt.resolve()}deleteFieldIndex(t,e){return xt.resolve()}deleteAllFieldIndexes(t){return xt.resolve()}createTargetIndexes(t,e){return xt.resolve()}getDocumentsMatchingTarget(t,e){return xt.resolve(null)}getIndexType(t,e){return xt.resolve(0)}getFieldIndexes(t,e){return xt.resolve([])}getNextCollectionGroupToUpdate(t){return xt.resolve(null)}getMinOffset(t,e){return xt.resolve(su.min())}getMinOffsetFromCollectionGroup(t,e){return xt.resolve(su.min())}updateCollectionGroup(t,e,i){return xt.resolve()}updateIndexEntries(t,e){return xt.resolve()}}class Kk{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new Ii(Cn.comparator),c=!a.has(i);return this.index[e]=a.add(i),c}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new Ii(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y2=41943040;class dr{static withCacheSize(t){return new dr(t,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(Y2,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Qd(0)}static cr(){return new Qd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="LruGarbageCollector",Wk=1048576;function MS([s,t],[e,i]){const a=Le(s,e);return a===0?Le(t,i):a}class $k{constructor(t){this.Ir=t,this.buffer=new Ii(MS),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();MS(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Yk{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Wt(DS,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){lp(e)?Wt(DS,"Ignoring IndexedDB error during garbage collection: ",e):await op(e)}await this.Vr(3e5)}))}}class Qk{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return xt.resolve(Z0.ce);const i=new $k(e);return this.mr.forEachTarget(t,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(t,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Wt("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(OS)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OS):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,a,c,f,d,m,_;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,f=Date.now(),this.nthSequenceNumber(t,a)))).next((w=>(i=w,d=Date.now(),this.removeTargets(t,i,e)))).next((w=>(c=w,m=Date.now(),this.removeOrphanedDocuments(t,i)))).next((w=>(_=Date.now(),Sd()<=Ke.DEBUG&&Wt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${a} in `+(d-f)+`ms
	Removed ${c} targets in `+(m-d)+`ms
	Removed ${w} documents in `+(_-m)+`ms
Total Duration: ${_-T}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:w}))))}}function Xk(s,t){return new Qk(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.changes=new ef((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,vs.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?xt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(i=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(i!==null&&ag(i.mutation,a,Wr.empty(),kn.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Ue()){const a=Bh();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,i).next((c=>{let f=Jm();return c.forEach(((d,m)=>{f=f.insert(d,m.overlayedDocument)})),f}))))}getOverlayedDocuments(t,e){const i=Bh();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Ue())))}populateOverlays(t,e,i){const a=[];return i.forEach((c=>{e.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(t,a).next((c=>{c.forEach(((f,d)=>{e.set(f,d)}))}))}computeViews(t,e,i,a){let c=Ul();const f=rg(),d=(function(){return rg()})();return e.forEach(((m,_)=>{const T=i.get(_.key);a.has(_.key)&&(T===void 0||T.mutation instanceof mu)?c=c.insert(_.key,_):T!==void 0?(f.set(_.key,T.mutation.getFieldMask()),ag(T.mutation,_,T.mutation.getFieldMask(),kn.now())):f.set(_.key,Wr.empty())})),this.recalculateAndSaveOverlays(t,c).next((m=>(m.forEach(((_,T)=>f.set(_,T))),e.forEach(((_,T)=>d.set(_,new Jk(T,f.get(_)??null)))),d)))}recalculateAndSaveOverlays(t,e){const i=rg();let a=new Xn(((f,d)=>f-d)),c=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((f=>{for(const d of f)d.keys().forEach((m=>{const _=e.get(m);if(_===null)return;let T=i.get(m)||Wr.empty();T=d.applyToLocalView(_,T),i.set(m,T);const w=(a.get(d.batchId)||Ue()).add(m);a=a.insert(d.batchId,w)}))})).next((()=>{const f=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),_=m.key,T=m.value,w=O2();T.forEach((C=>{if(!c.has(C)){const I=L2(e.get(C),i.get(C));I!==null&&w.set(C,I),c=c.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(t,_,w))}return xt.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,a){return(function(f){return ie.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):C2(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-c.size):xt.resolve(Bh());let d=fg,m=c;return f.next((_=>xt.forEach(_,((T,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),c.get(T)?xt.resolve():this.remoteDocumentCache.getEntry(t,T).next((C=>{m=m.insert(T,C)}))))).next((()=>this.populateOverlays(t,_,c))).next((()=>this.computeViews(t,m,_,Ue()))).next((T=>({batchId:d,changes:I2(T)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ie(e)).next((i=>{let a=Jm();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const c=e.collectionGroup;let f=Jm();return this.indexManager.getCollectionParents(t,c).next((d=>xt.forEach(d,(m=>{const _=(function(w,C){return new Mg(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(e,m.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,i,a).next((T=>{T.forEach(((w,C)=>{f=f.insert(w,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,e,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,c,a)))).next((f=>{c.forEach(((m,_)=>{const T=_.getKey();f.get(T)===null&&(f=f.insert(T,vs.newInvalidDocument(T)))}));let d=Jm();return f.forEach(((m,_)=>{const T=c.get(m);T!==void 0&&ag(T.mutation,_,Wr.empty(),kn.now()),nv(e,_)&&(d=d.insert(m,_))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return xt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:Fo(a.createTime)}})(e)),xt.resolve()}getNamedQuery(t,e){return xt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(a){return{name:a.name,query:Hk(a.bundledQuery),readTime:Fo(a.readTime)}})(e)),xt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this.overlays=new Xn(ie.comparator),this.qr=new Map}getOverlay(t,e){return xt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Bh();return xt.forEach(e,(a=>this.getOverlay(t,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((a,c)=>{this.St(t,e,c)})),xt.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),xt.resolve()}getOverlaysForCollection(t,e,i){const a=Bh(),c=e.length+1,f=new ie(e.child("")),d=this.overlays.getIteratorFrom(f);for(;d.hasNext();){const m=d.getNext().value,_=m.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===c&&m.largestBatchId>i&&a.set(m.getKey(),m)}return xt.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let c=new Xn(((_,T)=>_-T));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let T=c.get(_.largestBatchId);T===null&&(T=Bh(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const d=Bh(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((_,T)=>d.set(_,T))),!(d.size()>=a)););return xt.resolve(d)}St(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const f=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new Tk(e,i));let c=this.qr.get(e);c===void 0&&(c=Ue(),this.qr.set(e,c)),this.qr.set(e,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.sessionToken=Xi.EMPTY_BYTE_STRING}getSessionToken(t){return xt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,xt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.Qr=new Ii(Pi.$r),this.Ur=new Ii(Pi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new Pi(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Gr(new Pi(t,e))}zr(t,e){t.forEach((i=>this.removeReference(i,e)))}jr(t){const e=new ie(new Cn([])),i=new Pi(e,t),a=new Pi(e,t+1),c=[];return this.Ur.forEachInRange([i,a],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ie(new Cn([])),i=new Pi(e,t),a=new Pi(e,t+1);let c=Ue();return this.Ur.forEachInRange([i,a],(f=>{c=c.add(f.key)})),c}containsKey(t){const e=new Pi(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Pi{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ie.comparator(t.key,e.key)||Le(t.Yr,e.Yr)}static Kr(t,e){return Le(t.Yr,e.Yr)||ie.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ii(Pi.$r)}checkEmpty(t){return xt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new vk(c,e,i,a);this.mutationQueue.push(f);for(const d of a)this.Zr=this.Zr.add(new Pi(d.key,c)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return xt.resolve(f)}lookupMutationBatch(t,e){return xt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.ei(i),c=a<0?0:a;return xt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(this.mutationQueue.length===0?ww:this.tr-1)}getAllMutationBatches(t){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Pi(e,0),a=new Pi(e,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,a],(f=>{const d=this.Xr(f.Yr);c.push(d)})),xt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ii(Le);return e.forEach((a=>{const c=new Pi(a,0),f=new Pi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(d=>{i=i.add(d.Yr)}))})),xt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let c=i;ie.isDocumentKey(c)||(c=c.child(""));const f=new Pi(new ie(c),0);let d=new Ii(Le);return this.Zr.forEachWhile((m=>{const _=m.key.path;return!!i.isPrefixOf(_)&&(_.length===a&&(d=d.add(m.Yr)),!0)}),f),xt.resolve(this.ti(d))}ti(t){const e=[];return t.forEach((i=>{const a=this.Xr(i);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){hn(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return xt.forEach(e.mutations,(a=>{const c=new Pi(a.key,e.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,e){const i=new Pi(e,0),a=this.Zr.firstAfterOrEqual(i);return xt.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,xt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(t){this.ri=t,this.docs=(function(){return new Xn(ie.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),c=a?a.size:0,f=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return xt.resolve(i?i.document.mutableCopy():vs.newInvalidDocument(e))}getEntries(t,e){let i=Ul();return e.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():vs.newInvalidDocument(a))})),xt.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let c=Ul();const f=e.path,d=new ie(f.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:_,value:{document:T}}=m.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||k5(M5(T),i)<=0||(a.has(T.key)||nv(e,T))&&(c=c.insert(T.key,T.mutableCopy()))}return xt.resolve(c)}getAllFromCollectionGroup(t,e,i,a){ue(9500)}ii(t,e){return xt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new a6(this)}getSize(t){return xt.resolve(this.size)}}class a6 extends Zk{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?e.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(i)})),xt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(t){this.persistence=t,this.si=new ef((e=>Aw(e)),Ew),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Iw,this.targetCount=0,this.ai=Qd.ur()}forEachTarget(t,e){return this.si.forEach(((i,a)=>e(a))),xt.resolve()}getLastRemoteSnapshotVersion(t){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return xt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),xt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Qd(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,xt.resolve()}updateTargetData(t,e){return this.Pr(e),xt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,xt.resolve()}removeTargets(t,e,i){let a=0;const c=[];return this.si.forEach(((f,d)=>{d.sequenceNumber<=e&&i.get(d.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)})),xt.waitFor(c).next((()=>a))}getTargetCount(t){return xt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return xt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),xt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const a=this.persistence.referenceDelegate,c=[];return a&&e.forEach((f=>{c.push(a.markPotentiallyOrphaned(t,f))})),xt.waitFor(c)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),xt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return xt.resolve(i)}containsKey(t,e){return xt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,e){this.ui={},this.overlays={},this.ci=new Z0(0),this.li=!1,this.li=!0,this.hi=new i6,this.referenceDelegate=t(this),this.Pi=new o6(this),this.indexManager=new Gk,this.remoteDocumentCache=(function(a){return new r6(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Fk(e),this.Ii=new e6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new n6,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new s6(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){Wt("MemoryPersistence","Starting transaction:",t);const a=new l6(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(t,e){return xt.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,e))))}}class l6 extends j5{constructor(t){super(),this.currentSequenceNumber=t}}class Ow{constructor(t){this.persistence=t,this.Ri=new Iw,this.Vi=null}static mi(t){return new Ow(t)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),xt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),xt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),xt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.fi,(i=>{const a=ie.fromPath(i);return this.gi(t,a).next((c=>{c||e.removeEntry(a,pe.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return xt.or([()=>xt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class A0{constructor(t,e){this.persistence=t,this.pi=new ef((i=>U5(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=Xk(this,e)}static mi(t,e){return new A0(t,e)}Ei(){}di(t){return xt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((a=>i+a))))}wr(t){let e=0;return this.pr(t,(i=>{e++})).next((()=>e))}pr(t,e){return xt.forEach(this.pi,((i,a)=>this.br(t,i,a).next((c=>c?xt.resolve():e(a)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(t,(f=>this.br(t,f,e).next((d=>{d||(i++,c.removeEntry(f,pe.min()))})))).next((()=>c.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),xt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),xt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),xt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),xt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Yy(t.data.value)),e}br(t,e,i){return xt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.pi.get(e);return xt.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=a}static As(t,e){let i=Ue(),a=Ue();for(const c of e.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Dw(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kD()?8:L5(OD())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,a){const c={result:null};return this.ys(t,e).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,e,a,i).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new c6;return this.Ss(t,e,f).next((d=>{if(c.result=d,this.Vs)return this.bs(t,e,f,d.size)}))})).next((()=>c.result))}bs(t,e,i,a){return i.documentReadCount<this.fs?(Sd()<=Ke.DEBUG&&Wt("QueryEngine","SDK will not create cache indexes for query:",Ad(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xt.resolve()):(Sd()<=Ke.DEBUG&&Wt("QueryEngine","Query:",Ad(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Sd()<=Ke.DEBUG&&Wt("QueryEngine","The SDK decides to create cache indexes for query:",Ad(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qo(e))):xt.resolve())}ys(t,e){if(wS(e))return xt.resolve(null);let i=qo(e);return this.indexManager.getIndexType(t,i).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=hT(e,null,"F"),i=qo(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((c=>{const f=Ue(...c);return this.ps.getDocuments(t,f).next((d=>this.indexManager.getMinOffset(t,i).next((m=>{const _=this.Ds(e,d);return this.Cs(e,_,f,m.readTime)?this.ys(t,hT(e,null,"F")):this.vs(t,_,e,m)}))))})))))}ws(t,e,i,a){return wS(e)||a.isEqual(pe.min())?xt.resolve(null):this.ps.getDocuments(t,i).next((c=>{const f=this.Ds(e,c);return this.Cs(e,f,i,a)?xt.resolve(null):(Sd()<=Ke.DEBUG&&Wt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ad(e)),this.vs(t,f,e,D5(a,fg)).next((d=>d)))}))}Ds(t,e){let i=new Ii(R2(t));return e.forEach(((a,c)=>{nv(t,c)&&(i=i.add(c))})),i}Cs(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const c=t.limitType==="F"?e.last():e.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(t,e,i){return Sd()<=Ke.DEBUG&&Wt("QueryEngine","Using full collection scan to execute query:",Ad(e)),this.ps.getDocumentsMatchingQuery(t,e,su.min(),i)}vs(t,e,i,a){return this.ps.getDocumentsMatchingQuery(t,i,a).next((c=>(e.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="LocalStore",h6=3e8;class f6{constructor(t,e,i,a){this.persistence=t,this.Fs=e,this.serializer=a,this.Ms=new Xn(Le),this.xs=new ef((c=>Aw(c)),Ew),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new t6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function d6(s,t,e,i){return new f6(s,t,e,i)}async function X2(s,t){const e=we(s);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,e.Bs(t),e.mutationQueue.getAllMutationBatches(i)))).next((c=>{const f=[],d=[];let m=Ue();for(const _ of a){f.push(_.batchId);for(const T of _.mutations)m=m.add(T.key)}for(const _ of c){d.push(_.batchId);for(const T of _.mutations)m=m.add(T.key)}return e.localDocuments.getDocuments(i,m).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:d})))}))}))}function p6(s,t){const e=we(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=t.batch.keys(),c=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,_,T){const w=_.batch,C=w.keys();let I=xt.resolve();return C.forEach((O=>{I=I.next((()=>T.getEntry(m,O))).next((k=>{const D=_.docVersions.get(O);hn(D!==null,48541),k.version.compareTo(D)<0&&(w.applyToRemoteDocument(k,_),k.isValidDocument()&&(k.setReadTime(_.commitVersion),T.addEntry(k)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(m,w)))})(e,i,t,c).next((()=>c.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Ue();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(m=m.add(d.batch.mutations[_].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(i,a)))}))}function Z2(s){const t=we(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function m6(s,t){const e=we(s),i=t.snapshotVersion;let a=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=e.Ns.newChangeBuffer({trackRemovals:!0});a=e.Ms;const d=[];t.targetChanges.forEach(((T,w)=>{const C=a.get(w);if(!C)return;d.push(e.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>e.Pi.addMatchingKeys(c,T.addedDocuments,w))));let I=C.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?I=I.withResumeToken(Xi.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):T.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(T.resumeToken,i)),a=a.insert(w,I),(function(k,D,z){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=h6?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(C,I,T)&&d.push(e.Pi.updateTargetData(c,I))}));let m=Ul(),_=Ue();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(c,T))})),d.push(g6(c,f,t.documentUpdates).next((T=>{m=T.ks,_=T.qs}))),!i.isEqual(pe.min())){const T=e.Pi.getLastRemoteSnapshotVersion(c).next((w=>e.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));d.push(T)}return xt.waitFor(d).next((()=>f.apply(c))).next((()=>e.localDocuments.getLocalViewOfDocuments(c,m,_))).next((()=>m))})).then((c=>(e.Ms=a,c)))}function g6(s,t,e){let i=Ue(),a=Ue();return e.forEach((c=>i=i.add(c))),t.getEntries(s,i).next((c=>{let f=Ul();return e.forEach(((d,m)=>{const _=c.get(d);m.isFoundDocument()!==_.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(pe.min())?(t.removeEntry(d,m.readTime),f=f.insert(d,m)):!_.isValidDocument()||m.version.compareTo(_.version)>0||m.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(m),f=f.insert(d,m)):Wt(Mw,"Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",m.version)})),{ks:f,qs:a}}))}function _6(s,t){const e=we(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=ww),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function y6(s,t){const e=we(s);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return e.Pi.getTargetData(i,t).next((c=>c?(a=c,xt.resolve(a)):e.Pi.allocateTargetId(i).next((f=>(a=new Wc(t,f,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=e.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i}))}async function gT(s,t,e){const i=we(s),a=i.Ms.get(t),c=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",c,(f=>i.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!lp(f))throw f;Wt(Mw,`Failed to update sequence numbers for target ${t}: ${f}`)}i.Ms=i.Ms.remove(t),i.xs.delete(a.target)}function kS(s,t,e){const i=we(s);let a=pe.min(),c=Ue();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(m,_,T){const w=we(m),C=w.xs.get(T);return C!==void 0?xt.resolve(w.Ms.get(C)):w.Pi.getTargetData(_,T)})(i,f,qo(t)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,d.targetId).next((m=>{c=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,t,e?a:pe.min(),e?c:Ue()))).next((d=>(v6(i,sk(t),d),{documents:d,Qs:c})))))}function v6(s,t,e){let i=s.Os.get(t)||pe.min();e.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Os.set(t,i)}class VS{constructor(){this.activeTargetIds=uk()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class T6{constructor(){this.Mo=new VS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new VS,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="ConnectivityMonitor";class LS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Wt(jS,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Wt(jS,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy=null;function _T(){return Fy===null?Fy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fy++,"0x"+Fy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="RestConnection",b6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S6{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===_0?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(t,e,i,a,c){const f=_T(),d=this.zo(t,e.toUriEncodedString());Wt(N1,`Sending RPC '${t}' ${f}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,c);const{host:_}=new URL(d),T=uw(_);return this.Jo(t,d,m,i,T).then((w=>(Wt(N1,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw Kd(N1,`RPC '${t}' ${f} failed with error: `,w,"url: ",d,"request:",i),w}))}Ho(t,e,i,a,c,f){return this.Go(t,e,i,a,c)}jo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ap})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,c)=>t[c]=a)),i&&i.headers.forEach(((a,c)=>t[c]=a))}zo(t,e){const i=b6[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="WebChannelConnection";class E6 extends S6{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,a,c){const f=_T();return new Promise(((d,m)=>{const _=new t2;_.setWithCredentials(!0),_.listenOnce(e2.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case $y.NO_ERROR:const w=_.getResponseJson();Wt(_s,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),d(w);break;case $y.TIMEOUT:Wt(_s,`RPC '${t}' ${f} timed out`),m(new Kt(Et.DEADLINE_EXCEEDED,"Request time out"));break;case $y.HTTP_ERROR:const C=_.getStatus();if(Wt(_s,`RPC '${t}' ${f} failed with status:`,C,"response text:",_.getResponseText()),C>0){let I=_.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I?.error;if(O&&O.status&&O.message){const k=(function(z){const X=z.toLowerCase().replace(/_/g,"-");return Object.values(Et).indexOf(X)>=0?X:Et.UNKNOWN})(O.status);m(new Kt(k,O.message))}else m(new Kt(Et.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new Kt(Et.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:t,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Wt(_s,`RPC '${t}' ${f} completed.`)}}));const T=JSON.stringify(a);Wt(_s,`RPC '${t}' ${f} sending request:`,a),_.send(e,"POST",T,i,15)}))}T_(t,e,i){const a=_T(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=s2(),d=i2(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(m.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const T=c.join("");Wt(_s,`Creating RPC '${t}' stream ${a}: ${T}`,m);const w=f.createWebChannel(T,m);this.I_(w);let C=!1,I=!1;const O=new A6({Yo:D=>{I?Wt(_s,`Not sending because RPC '${t}' stream ${a} is closed:`,D):(C||(Wt(_s,`Opening RPC '${t}' stream ${a} transport.`),w.open(),C=!0),Wt(_s,`RPC '${t}' stream ${a} sending:`,D),w.send(D))},Zo:()=>w.close()}),k=(D,z,X)=>{D.listen(z,(Y=>{try{X(Y)}catch(it){setTimeout((()=>{throw it}),0)}}))};return k(w,Zm.EventType.OPEN,(()=>{I||(Wt(_s,`RPC '${t}' stream ${a} transport opened.`),O.o_())})),k(w,Zm.EventType.CLOSE,(()=>{I||(I=!0,Wt(_s,`RPC '${t}' stream ${a} transport closed`),O.a_(),this.E_(w))})),k(w,Zm.EventType.ERROR,(D=>{I||(I=!0,Kd(_s,`RPC '${t}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),O.a_(new Kt(Et.UNAVAILABLE,"The operation could not be completed")))})),k(w,Zm.EventType.MESSAGE,(D=>{if(!I){const z=D.data[0];hn(!!z,16349);const X=z,Y=X?.error||X[0]?.error;if(Y){Wt(_s,`RPC '${t}' stream ${a} received error:`,Y);const it=Y.status;let K=(function(E){const M=gi[E];if(M!==void 0)return U2(M)})(it),W=Y.message;K===void 0&&(K=Et.INTERNAL,W="Unknown error status: "+it+" with message "+Y.message),I=!0,O.a_(new Kt(K,W)),w.close()}else Wt(_s,`RPC '${t}' stream ${a} received:`,z),O.u_(z)}})),k(d,n2.STAT_EVENT,(D=>{D.stat===sT.PROXY?Wt(_s,`RPC '${t}' stream ${a} detected buffering proxy`):D.stat===sT.NOPROXY&&Wt(_s,`RPC '${t}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function I1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(s){return new Nk(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t,e,i=1e3,a=1.5,c=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-i);a>0&&Wt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="PersistentStream";class tC{constructor(t,e,i,a,c,f,d,m){this.Mi=t,this.S_=i,this.b_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J2(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Et.RESOURCE_EXHAUSTED?(Pl(e.toString()),Pl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===e&&this.G_(i,a)}),(i=>{t((()=>{const a=new Kt(Et.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Wt(PS,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(Wt(PS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class C6 extends tC{constructor(t,e,i,a,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,f),this.serializer=c}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=Dk(this.serializer,t),i=(function(c){if(!("targetChange"in c))return pe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?pe.min():f.readTime?Fo(f.readTime):pe.min()})(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=mT(this.serializer),e.addTarget=(function(c,f){let d;const m=f.target;if(d=cT(m)?{documents:Vk(c,m)}:{query:jk(c,m).ft},d.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){d.resumeToken=q2(c,f.resumeToken);const _=fT(c,f.expectedCount);_!==null&&(d.expectedCount=_)}else if(f.snapshotVersion.compareTo(pe.min())>0){d.readTime=S0(c,f.snapshotVersion.toTimestamp());const _=fT(c,f.expectedCount);_!==null&&(d.expectedCount=_)}return d})(this.serializer,t);const i=Pk(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=mT(this.serializer),e.removeTarget=t,this.q_(e)}}class x6 extends tC{constructor(t,e,i,a,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return hn(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,hn(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){hn(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=kk(t.writeResults,t.commitTime),i=Fo(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=mT(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>Mk(this.serializer,i)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{}class N6 extends R6{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Kt(Et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,dT(e,i),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Kt(Et.UNKNOWN,c.toString())}))}Ho(t,e,i,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,d])=>this.connection.Ho(t,dT(e,i),a,f,d,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Kt(Et.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class I6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pl(e),this.aa=!1):Wt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="RemoteStore";class O6{constructor(t,e,i,a,c){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{nf(this)&&(Wt(Xh,"Restarting streams for network reachability change."),await(async function(m){const _=we(m);_.Ea.add(4),await jg(_),_.Ra.set("Unknown"),_.Ea.delete(4),await lv(_)})(this))}))})),this.Ra=new I6(i,a)}}async function lv(s){if(nf(s))for(const t of s.da)await t(!0)}async function jg(s){for(const t of s.da)await t(!1)}function eC(s,t){const e=we(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Lw(e)?jw(e):cp(e).O_()&&Vw(e,t))}function kw(s,t){const e=we(s),i=cp(e);e.Ia.delete(t),i.O_()&&nC(e,t),e.Ia.size===0&&(i.O_()?i.L_():nf(e)&&e.Ra.set("Unknown"))}function Vw(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pe.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}cp(s).Y_(t)}function nC(s,t){s.Va.Ue(t),cp(s).Z_(t)}function jw(s){s.Va=new Ek({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),cp(s).start(),s.Ra.ua()}function Lw(s){return nf(s)&&!cp(s).x_()&&s.Ia.size>0}function nf(s){return we(s).Ea.size===0}function iC(s){s.Va=void 0}async function D6(s){s.Ra.set("Online")}async function M6(s){s.Ia.forEach(((t,e)=>{Vw(s,t)}))}async function k6(s,t){iC(s),Lw(s)?(s.Ra.ha(t),jw(s)):s.Ra.set("Unknown")}async function V6(s,t,e){if(s.Ra.set("Online"),t instanceof B2&&t.state===2&&t.cause)try{await(async function(a,c){const f=c.cause;for(const d of c.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,f),a.Ia.delete(d),a.Va.removeTarget(d))})(s,t)}catch(i){Wt(Xh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await E0(s,i)}else if(t instanceof Zy?s.Va.Ze(t):t instanceof z2?s.Va.st(t):s.Va.tt(t),!e.isEqual(pe.min()))try{const i=await Z2(s.localStore);e.compareTo(i)>=0&&await(function(c,f){const d=c.Va.Tt(f);return d.targetChanges.forEach(((m,_)=>{if(m.resumeToken.approximateByteSize()>0){const T=c.Ia.get(_);T&&c.Ia.set(_,T.withResumeToken(m.resumeToken,f))}})),d.targetMismatches.forEach(((m,_)=>{const T=c.Ia.get(m);if(!T)return;c.Ia.set(m,T.withResumeToken(Xi.EMPTY_BYTE_STRING,T.snapshotVersion)),nC(c,m);const w=new Wc(T.target,m,_,T.sequenceNumber);Vw(c,w)})),c.remoteSyncer.applyRemoteEvent(d)})(s,e)}catch(i){Wt(Xh,"Failed to raise snapshot:",i),await E0(s,i)}}async function E0(s,t,e){if(!lp(t))throw t;s.Ea.add(1),await jg(s),s.Ra.set("Offline"),e||(e=()=>Z2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Wt(Xh,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await lv(s)}))}function sC(s,t){return t().catch((e=>E0(s,e,t)))}async function cv(s){const t=we(s),e=lu(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ww;for(;j6(t);)try{const a=await _6(t.localStore,i);if(a===null){t.Ta.length===0&&e.L_();break}i=a.batchId,L6(t,a)}catch(a){await E0(t,a)}rC(t)&&aC(t)}function j6(s){return nf(s)&&s.Ta.length<10}function L6(s,t){s.Ta.push(t);const e=lu(s);e.O_()&&e.X_&&e.ea(t.mutations)}function rC(s){return nf(s)&&!lu(s).x_()&&s.Ta.length>0}function aC(s){lu(s).start()}async function P6(s){lu(s).ra()}async function U6(s){const t=lu(s);for(const e of s.Ta)t.ea(e.mutations)}async function z6(s,t,e){const i=s.Ta.shift(),a=xw.from(i,t,e);await sC(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await cv(s)}async function B6(s,t){t&&lu(s).X_&&await(async function(i,a){if((function(f){return bk(f)&&f!==Et.ABORTED})(a.code)){const c=i.Ta.shift();lu(i).B_(),await sC(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await cv(i)}})(s,t),rC(s)&&aC(s)}async function US(s,t){const e=we(s);e.asyncQueue.verifyOperationInProgress(),Wt(Xh,"RemoteStore received new credentials");const i=nf(e);e.Ea.add(3),await jg(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await lv(e)}async function q6(s,t){const e=we(s);t?(e.Ea.delete(2),await lv(e)):t||(e.Ea.add(2),await jg(e),e.Ra.set("Unknown"))}function cp(s){return s.ma||(s.ma=(function(e,i,a){const c=we(e);return c.sa(),new C6(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Xo:D6.bind(null,s),t_:M6.bind(null,s),r_:k6.bind(null,s),H_:V6.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Lw(s)?jw(s):s.Ra.set("Unknown")):(await s.ma.stop(),iC(s))}))),s.ma}function lu(s){return s.fa||(s.fa=(function(e,i,a){const c=we(e);return c.sa(),new x6(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:P6.bind(null,s),r_:B6.bind(null,s),ta:U6.bind(null,s),na:z6.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await cv(s)):(await s.fa.stop(),s.Ta.length>0&&(Wt(Xh,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,e,i,a,c){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Zc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,c){const f=Date.now()+i,d=new Pw(t,e,f,a,c);return d.start(i),d}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Kt(Et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uw(s,t){if(Pl("AsyncQueue",`${t}: ${s}`),lp(s))return new Kt(Et.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{static emptySet(t){return new Md(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||ie.comparator(e.key,i.key):(e,i)=>ie.comparator(e.key,i.key),this.keyedMap=Jm(),this.sortedSet=new Xn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Md)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Md;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.ga=new Xn(ie.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ue(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class Xd{constructor(t,e,i,a,c,f,d,m,_){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=_}static fromInitialDocuments(t,e,i,a,c){const f=[];return e.forEach((d=>{f.push({type:0,doc:d})})),new Xd(t,e,Md.emptySet(e),f,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ev(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class H6{constructor(){this.queries=BS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const a=we(e),c=a.queries;a.queries=BS(),c.forEach(((f,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new Kt(Et.ABORTED,"Firestore shutting down"))}}function BS(){return new ef((s=>x2(s)),ev)}async function G6(s,t){const e=we(s);let i=3;const a=t.query;let c=e.queries.get(a);c?!c.ba()&&t.Da()&&(i=2):(c=new F6,i=t.Da()?0:1);try{switch(i){case 0:c.wa=await e.onListen(a,!0);break;case 1:c.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(f){const d=Uw(f,`Initialization of query '${Ad(t.query)}' failed`);return void t.onError(d)}e.queries.set(a,c),c.Sa.push(t),t.va(e.onlineState),c.wa&&t.Fa(c.wa)&&zw(e)}async function K6(s,t){const e=we(s),i=t.query;let a=3;const c=e.queries.get(i);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=t.Da()?0:1:!c.ba()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function W6(s,t){const e=we(s);let i=!1;for(const a of t){const c=a.query,f=e.queries.get(c);if(f){for(const d of f.Sa)d.Fa(a)&&(i=!0);f.wa=a}}i&&zw(e)}function $6(s,t,e){const i=we(s),a=i.queries.get(t);if(a)for(const c of a.Sa)c.onError(e);i.queries.delete(t)}function zw(s){s.Ca.forEach((t=>{t.next()}))}var yT,qS;(qS=yT||(yT={})).Ma="default",qS.Cache="cache";class Y6{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new Xd(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Xd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==yT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.key=t}}class lC{constructor(t){this.key=t}}class Q6{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=R2(t),this.tu=new Md(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new zS,a=e?e.tu:this.tu;let c=e?e.mutatedKeys:this.mutatedKeys,f=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,_=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((T,w)=>{const C=a.get(T),I=nv(this.query,w)?w:null,O=!!C&&this.mutatedKeys.has(C.key),k=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let D=!1;C&&I?C.data.isEqual(I.data)?O!==k&&(i.track({type:3,doc:I}),D=!0):this.su(C,I)||(i.track({type:2,doc:I}),D=!0,(m&&this.eu(I,m)>0||_&&this.eu(I,_)<0)&&(d=!0)):!C&&I?(i.track({type:0,doc:I}),D=!0):C&&!I&&(i.track({type:1,doc:C}),D=!0,(m||_)&&(d=!0)),D&&(I?(f=f.add(I),c=k?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),i.track({type:1,doc:T})}return{tu:f,iu:i,Cs:d,mutatedKeys:c}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((T,w)=>(function(I,O){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:D})}};return k(I)-k(O)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(i),a=a??!1;const d=e&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,_=m!==this.Za;return this.Za=m,f.length!==0||_?{snapshot:new Xd(this.query,t.tu,c,f,t.mutatedKeys,m===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const e=[];return t.forEach((i=>{this.Xa.has(i)||e.push(new lC(i))})),this.Xa.forEach((i=>{t.has(i)||e.push(new oC(i))})),e}cu(t){this.Ya=t.Qs,this.Xa=Ue();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Xd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bw="SyncEngine";class X6{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Z6{constructor(t){this.key=t,this.hu=!1}}class J6{constructor(t,e,i,a,c,f){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ef((d=>x2(d)),ev),this.Iu=new Map,this.Eu=new Set,this.du=new Xn(ie.comparator),this.Au=new Map,this.Ru=new Iw,this.Vu={},this.mu=new Map,this.fu=Qd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tV(s,t,e=!0){const i=pC(s);let a;const c=i.Tu.get(t);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await cC(i,t,e,!0),a}async function eV(s,t){const e=pC(s);await cC(e,t,!0,!1)}async function cC(s,t,e,i){const a=await y6(s.localStore,qo(t)),c=a.targetId,f=s.sharedClientState.addLocalQueryTarget(c,e);let d;return i&&(d=await nV(s,t,c,f==="current",a.resumeToken)),s.isPrimaryClient&&e&&eC(s.remoteStore,a),d}async function nV(s,t,e,i,a){s.pu=(w,C,I)=>(async function(k,D,z,X){let Y=D.view.ru(z);Y.Cs&&(Y=await kS(k.localStore,D.query,!1).then((({documents:R})=>D.view.ru(R,Y))));const it=X&&X.targetChanges.get(D.targetId),K=X&&X.targetMismatches.get(D.targetId)!=null,W=D.view.applyChanges(Y,k.isPrimaryClient,it,K);return HS(k,D.targetId,W.au),W.snapshot})(s,w,C,I);const c=await kS(s.localStore,t,!0),f=new Q6(t,c.Qs),d=f.ru(c.documents),m=Vg.createSynthesizedTargetChangeForCurrentChange(e,i&&s.onlineState!=="Offline",a),_=f.applyChanges(d,s.isPrimaryClient,m);HS(s,e,_.au);const T=new X6(t,e,f);return s.Tu.set(t,T),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),_.snapshot}async function iV(s,t,e){const i=we(s),a=i.Tu.get(t),c=i.Iu.get(a.targetId);if(c.length>1)return i.Iu.set(a.targetId,c.filter((f=>!ev(f,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await gT(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),e&&kw(i.remoteStore,a.targetId),vT(i,a.targetId)})).catch(op)):(vT(i,a.targetId),await gT(i.localStore,a.targetId,!0))}async function sV(s,t){const e=we(s),i=e.Tu.get(t),a=e.Iu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),kw(e.remoteStore,i.targetId))}async function rV(s,t,e){const i=fV(s);try{const a=await(function(f,d){const m=we(f),_=kn.now(),T=d.reduce(((I,O)=>I.add(O.key)),Ue());let w,C;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let O=Ul(),k=Ue();return m.Ns.getEntries(I,T).next((D=>{O=D,O.forEach(((z,X)=>{X.isValidDocument()||(k=k.add(z))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,O))).next((D=>{w=D;const z=[];for(const X of d){const Y=_k(X,w.get(X.key).overlayedDocument);Y!=null&&z.push(new mu(X.key,Y,y2(Y.value.mapValue),_r.exists(!0)))}return m.mutationQueue.addMutationBatch(I,_,z,d)})).next((D=>{C=D;const z=D.applyToLocalDocumentSet(w,k);return m.documentOverlayCache.saveOverlays(I,D.batchId,z)}))})).then((()=>({batchId:C.batchId,changes:I2(w)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),(function(f,d,m){let _=f.Vu[f.currentUser.toKey()];_||(_=new Xn(Le)),_=_.insert(d,m),f.Vu[f.currentUser.toKey()]=_})(i,a.batchId,e),await Lg(i,a.changes),await cv(i.remoteStore)}catch(a){const c=Uw(a,"Failed to persist write");e.reject(c)}}async function uC(s,t){const e=we(s);try{const i=await m6(e.localStore,t);t.targetChanges.forEach(((a,c)=>{const f=e.Au.get(c);f&&(hn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.hu=!0:a.modifiedDocuments.size>0?hn(f.hu,14607):a.removedDocuments.size>0&&(hn(f.hu,42227),f.hu=!1))})),await Lg(e,i,t)}catch(i){await op(i)}}function FS(s,t,e){const i=we(s);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Tu.forEach(((c,f)=>{const d=f.view.va(t);d.snapshot&&a.push(d.snapshot)})),(function(f,d){const m=we(f);m.onlineState=d;let _=!1;m.queries.forEach(((T,w)=>{for(const C of w.Sa)C.va(d)&&(_=!0)})),_&&zw(m)})(i.eventManager,t),a.length&&i.Pu.H_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function aV(s,t,e){const i=we(s);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Au.get(t),c=a&&a.key;if(c){let f=new Xn(ie.comparator);f=f.insert(c,vs.newNoDocument(c,pe.min()));const d=Ue().add(c),m=new av(pe.min(),new Map,new Xn(Le),f,d);await uC(i,m),i.du=i.du.remove(c),i.Au.delete(t),qw(i)}else await gT(i.localStore,t,!1).then((()=>vT(i,t,e))).catch(op)}async function oV(s,t){const e=we(s),i=t.batch.batchId;try{const a=await p6(e.localStore,t);fC(e,i,null),hC(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Lg(e,a)}catch(a){await op(a)}}async function lV(s,t,e){const i=we(s);try{const a=await(function(f,d){const m=we(f);return m.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return m.mutationQueue.lookupMutationBatch(_,d).next((w=>(hn(w!==null,37113),T=w.keys(),m.mutationQueue.removeMutationBatch(_,w)))).next((()=>m.mutationQueue.performConsistencyCheck(_))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(_,T,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>m.localDocuments.getDocuments(_,T)))}))})(i.localStore,t);fC(i,t,e),hC(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Lg(i,a)}catch(a){await op(a)}}function hC(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function fC(s,t,e){const i=we(s);let a=i.Vu[i.currentUser.toKey()];if(a){const c=a.get(t);c&&(e?c.reject(e):c.resolve(),a=a.remove(t)),i.Vu[i.currentUser.toKey()]=a}}function vT(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const i of s.Iu.get(t))s.Tu.delete(i),e&&s.Pu.yu(i,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((i=>{s.Ru.containsKey(i)||dC(s,i)}))}function dC(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(kw(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),qw(s))}function HS(s,t,e){for(const i of e)i instanceof oC?(s.Ru.addReference(i.key,t),cV(s,i)):i instanceof lC?(Wt(Bw,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,t),s.Ru.containsKey(i.key)||dC(s,i.key)):ue(19791,{wu:i})}function cV(s,t){const e=t.key,i=e.path.canonicalString();s.du.get(e)||s.Eu.has(i)||(Wt(Bw,"New document in limbo: "+e),s.Eu.add(i),qw(s))}function qw(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new ie(Cn.fromString(t)),i=s.fu.next();s.Au.set(i,new Z6(e)),s.du=s.du.insert(e,i),eC(s.remoteStore,new Wc(qo(E2(e.path)),i,"TargetPurposeLimboResolution",Z0.ce))}}async function Lg(s,t,e){const i=we(s),a=[],c=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{f.push(i.pu(m,t,e).then((_=>{if((_||e)&&i.isPrimaryClient){const T=_?!_.fromCache:e?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(_){a.push(_);const T=Dw.As(m.targetId,_);c.push(T)}})))})),await Promise.all(f),i.Pu.H_(a),await(async function(m,_){const T=we(m);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>xt.forEach(_,(C=>xt.forEach(C.Es,(I=>T.persistence.referenceDelegate.addReference(w,C.targetId,I))).next((()=>xt.forEach(C.ds,(I=>T.persistence.referenceDelegate.removeReference(w,C.targetId,I)))))))))}catch(w){if(!lp(w))throw w;Wt(Mw,"Failed to update sequence numbers: "+w)}for(const w of _){const C=w.targetId;if(!w.fromCache){const I=T.Ms.get(C),O=I.snapshotVersion,k=I.withLastLimboFreeSnapshotVersion(O);T.Ms=T.Ms.insert(C,k)}}})(i.localStore,c))}async function uV(s,t){const e=we(s);if(!e.currentUser.isEqual(t)){Wt(Bw,"User change. New user:",t.toKey());const i=await X2(e.localStore,t);e.currentUser=t,(function(c,f){c.mu.forEach((d=>{d.forEach((m=>{m.reject(new Kt(Et.CANCELLED,f))}))})),c.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Lg(e,i.Ls)}}function hV(s,t){const e=we(s),i=e.Au.get(t);if(i&&i.hu)return Ue().add(i.key);{let a=Ue();const c=e.Iu.get(t);if(!c)return a;for(const f of c){const d=e.Tu.get(f);a=a.unionWith(d.view.nu)}return a}}function pC(s){const t=we(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=uC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=aV.bind(null,t),t.Pu.H_=W6.bind(null,t.eventManager),t.Pu.yu=$6.bind(null,t.eventManager),t}function fV(s){const t=we(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lV.bind(null,t),t}class C0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ov(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return d6(this.persistence,new u6,t.initialUser,this.serializer)}Cu(t){return new Q2(Ow.mi,this.serializer)}Du(t){return new T6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}C0.provider={build:()=>new C0};class dV extends C0{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){hn(this.persistence.referenceDelegate instanceof A0,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Yk(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new Q2((i=>A0.mi(i,e)),this.serializer)}}class TT{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uV.bind(null,this.syncEngine),await q6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new H6})()}createDatastore(t){const e=ov(t.databaseInfo.databaseId),i=(function(c){return new E6(c)})(t.databaseInfo);return(function(c,f,d,m){return new N6(c,f,d,m)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,a,c,f,d){return new O6(i,a,c,f,d)})(this.localStore,this.datastore,t.asyncQueue,(e=>FS(this.syncEngine,e,0)),(function(){return LS.v()?new LS:new w6})())}createSyncEngine(t,e){return(function(a,c,f,d,m,_,T){const w=new J6(a,c,f,d,m,_);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const i=we(e);Wt(Xh,"RemoteStore shutting down."),i.Ea.add(5),await jg(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}TT.provider={build:()=>new TT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Pl("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="FirestoreClient";class mV{constructor(t,e,i,a,c){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=ys.UNAUTHENTICATED,this.clientId=Tw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async f=>{Wt(cu,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Wt(cu,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=Uw(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function O1(s,t){s.asyncQueue.verifyOperationInProgress(),Wt(cu,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let i=e.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await X2(t.localStore,a),i=a)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function GS(s,t){s.asyncQueue.verifyOperationInProgress();const e=await gV(s);Wt(cu,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((i=>US(t.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>US(t.remoteStore,a))),s._onlineComponents=t}async function gV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Wt(cu,"Using user provided OfflineComponentProvider");try{await O1(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===Et.FAILED_PRECONDITION||a.code===Et.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;Kd("Error using user provided cache. Falling back to memory cache: "+e),await O1(s,new C0)}}else Wt(cu,"Using default OfflineComponentProvider"),await O1(s,new dV(void 0));return s._offlineComponents}async function mC(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Wt(cu,"Using user provided OnlineComponentProvider"),await GS(s,s._uninitializedComponentsProvider._online)):(Wt(cu,"Using default OnlineComponentProvider"),await GS(s,new TT))),s._onlineComponents}function _V(s){return mC(s).then((t=>t.syncEngine))}async function yV(s){const t=await mC(s),e=t.eventManager;return e.onListen=tV.bind(null,t.syncEngine),e.onUnlisten=iV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=eV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=sV.bind(null,t.syncEngine),e}function vV(s,t,e={}){const i=new Zc;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,d,m,_){const T=new pV({next:C=>{T.Nu(),f.enqueueAndForget((()=>K6(c,w))),C.fromCache&&m.source==="server"?_.reject(new Kt(Et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(C)},error:C=>_.reject(C)}),w=new Y6(d,T,{includeMetadataChanges:!0,qa:!0});return G6(c,w)})(await yV(s),s.asyncQueue,t,e,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firestore.googleapis.com",WS=!0;class $S{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Kt(Et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_C,this.ssl=WS}else this.host=t.host,this.ssl=t.ssl??WS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Y2;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Wk)throw new Kt(Et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}O5("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gC(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Kt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Kt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Kt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class uv{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $S({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kt(Et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Kt(Et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $S(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new w5;switch(i.type){case"firstParty":return new E5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Kt(Et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=KS.get(e);i&&(Wt("ComponentProvider","Removing Datastore"),KS.delete(e),i.terminate())})(this),Promise.resolve()}}function TV(s,t,e,i={}){s=iu(s,uv);const a=uw(t),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},d=`${t}:${e}`;a&&(CD(`https://${d}`),ID("Firestore",!0)),c.host!==_C&&c.host!==d&&Kd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:d,ssl:a,emulatorOptions:i};if(!ug(m,f)&&(s._setSettings(m),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=ys.MOCK_USER;else{_=xD(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Kt(Et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new ys(w)}s._authCredentials=new b5(new a2(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new up(this.firestore,t,this._query)}}class Ni{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ni(this.firestore,t,this._key)}toJSON(){return{type:Ni._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Dg(e,Ni._jsonSchema))return new Ni(t,i||null,new ie(Cn.fromString(e.referencePath)))}}Ni._jsonSchemaVersion="firestore/documentReference/1.0",Ni._jsonSchema={type:wi("string",Ni._jsonSchemaVersion),referencePath:wi("string")};class Jc extends up{constructor(t,e,i){super(t,e,E2(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ni(this.firestore,null,new ie(t))}withConverter(t){return new Jc(this.firestore,t,this._path)}}function Pg(s,t,...e){if(s=vr(s),o2("collection","path",t),s instanceof uv){const i=Cn.fromString(t,...e);return oS(i),new Jc(s,null,i)}{if(!(s instanceof Ni||s instanceof Jc))throw new Kt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Cn.fromString(t,...e));return oS(i),new Jc(s.firestore,null,i)}}function hv(s,t,...e){if(s=vr(s),arguments.length===1&&(t=Tw.newId()),o2("doc","path",t),s instanceof uv){const i=Cn.fromString(t,...e);return aS(i),new Ni(s,null,new ie(i))}{if(!(s instanceof Ni||s instanceof Jc))throw new Kt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Cn.fromString(t,...e));return aS(i),new Ni(s.firestore,s instanceof Jc?s.converter:null,new ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="AsyncQueue";class QS{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J2(this,"async_queue_retry"),this._c=()=>{const i=I1();i&&Wt(YS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=I1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=I1();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Zc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!lp(t))throw t;Wt(YS,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Pl("INTERNAL UNHANDLED ERROR: ",XS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=Pw.createAndSchedule(this,t,e,i,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&ue(47125,{Pc:XS(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function XS(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class hp extends uv{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new QS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new QS(t),this._firestoreClient=void 0,await t}}}function wV(s,t){const e=typeof s=="object"?s:NE(),i=typeof s=="string"?s:_0,a=Og(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=AD("firestore");c&&TV(a,...c)}return a}function Fw(s){if(s._terminated)throw new Kt(Et.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||bV(s),s._firestoreClient}function bV(s){const t=s._freezeSettings(),e=(function(a,c,f,d){return new q5(a,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new mV(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ma(Xi.fromBase64String(t))}catch(e){throw new Kt(Et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ma(Xi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ma._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Dg(t,ma._jsonSchema))return ma.fromBase64String(t.bytes)}}ma._jsonSchemaVersion="firestore/bytes/1.0",ma._jsonSchema={type:wi("string",ma._jsonSchemaVersion),bytes:wi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Kt(Et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Kt(Et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Kt(Et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Le(this._lat,t._lat)||Le(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ho._jsonSchemaVersion}}static fromJSON(t){if(Dg(t,Ho._jsonSchema))return new Ho(t.latitude,t.longitude)}}Ho._jsonSchemaVersion="firestore/geoPoint/1.0",Ho._jsonSchema={type:wi("string",Ho._jsonSchemaVersion),latitude:wi("number"),longitude:wi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Go._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Dg(t,Go._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Go(t.vectorValues);throw new Kt(Et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Go._jsonSchemaVersion="firestore/vectorValue/1.0",Go._jsonSchema={type:wi("string",Go._jsonSchemaVersion),vectorValues:wi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=/^__.*__$/;class AV{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new mu(t,this.data,this.fieldMask,e,this.fieldTransforms):new kg(t,this.data,e,this.fieldTransforms)}}class yC{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new mu(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function vC(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:s})}}class Gw{constructor(t,e,i,a,c,f){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Gw({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return x0(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(vC(this.Ac)&&SV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class EV{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ov(t)}Cc(t,e,i,a=!1){return new Gw({Ac:t,methodName:e,Dc:i,path:Qi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fv(s){const t=s._freezeSettings(),e=ov(s._databaseId);return new EV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function TC(s,t,e,i,a,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,t,e,a);Kw("Data must be an object, but it was:",f,i);const d=SC(i,f);let m,_;if(c.merge)m=new Wr(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const C=wT(t,w,e);if(!f.contains(C))throw new Kt(Et.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);EC(T,C)||T.push(C)}m=new Wr(T),_=f.fieldTransforms.filter((w=>m.covers(w.field)))}else m=null,_=f.fieldTransforms;return new AV(new mr(d),m,_)}class dv extends Hw{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dv}}function wC(s,t,e,i){const a=s.Cc(1,t,e);Kw("Data must be an object, but it was:",a,i);const c=[],f=mr.empty();pu(i,((m,_)=>{const T=Ww(t,m,e);_=vr(_);const w=a.yc(T);if(_ instanceof dv)c.push(T);else{const C=zg(_,w);C!=null&&(c.push(T),f.set(T,C))}}));const d=new Wr(c);return new yC(f,d,a.fieldTransforms)}function bC(s,t,e,i,a,c){const f=s.Cc(1,t,e),d=[wT(t,i,e)],m=[a];if(c.length%2!=0)throw new Kt(Et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)d.push(wT(t,c[C])),m.push(c[C+1]);const _=[],T=mr.empty();for(let C=d.length-1;C>=0;--C)if(!EC(_,d[C])){const I=d[C];let O=m[C];O=vr(O);const k=f.yc(I);if(O instanceof dv)_.push(I);else{const D=zg(O,k);D!=null&&(_.push(I),T.set(I,D))}}const w=new Wr(_);return new yC(T,w,f.fieldTransforms)}function CV(s,t,e,i=!1){return zg(e,s.Cc(i?4:3,t))}function zg(s,t){if(AC(s=vr(s)))return Kw("Unsupported field value:",t,s),SC(s,t);if(s instanceof Hw)return(function(i,a){if(!vC(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,a){const c=[];let f=0;for(const d of i){let m=zg(d,a.wc(f));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),f++}return{arrayValue:{values:c}}})(s,t)}return(function(i,a){if((i=vr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hk(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=kn.fromDate(i);return{timestampValue:S0(a.serializer,c)}}if(i instanceof kn){const c=new kn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:S0(a.serializer,c)}}if(i instanceof Ho)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ma)return{bytesValue:q2(a.serializer,i._byteString)};if(i instanceof Ni){const c=a.databaseId,f=i.firestore._databaseId;if(!f.isEqual(c))throw a.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Nw(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Go)return(function(f,d){return{mapValue:{fields:{[g2]:{stringValue:_2},[y0]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw d.Sc("VectorValues must only contain numeric values.");return Cw(d.serializer,_)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${X0(i)}`)})(s,t)}function SC(s,t){const e={};return u2(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pu(s,((i,a)=>{const c=zg(a,t.mc(i));c!=null&&(e[i]=c)})),{mapValue:{fields:e}}}function AC(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof kn||s instanceof Ho||s instanceof ma||s instanceof Ni||s instanceof Hw||s instanceof Go)}function Kw(s,t,e){if(!AC(e)||!l2(e)){const i=X0(e);throw i==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+i)}}function wT(s,t,e){if((t=vr(t))instanceof Ug)return t._internalPath;if(typeof t=="string")return Ww(s,t);throw x0("Field path arguments must be of type string or ",s,!1,void 0,e)}const xV=new RegExp("[~\\*/\\[\\]]");function Ww(s,t,e){if(t.search(xV)>=0)throw x0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new Ug(...t.split("."))._internalPath}catch{throw x0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function x0(s,t,e,i,a){const c=i&&!i.isEmpty(),f=a!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(c||f)&&(m+=" (found",c&&(m+=` in field ${i}`),f&&(m+=` in document ${a}`),m+=")"),new Kt(Et.INVALID_ARGUMENT,d+s+m)}function EC(s,t){return s.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t,e,i,a,c){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ni(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new RV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field($w("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class RV extends CC{data(){return super.data()}}function $w(s,t){return typeof t=="string"?Ww(s,t):t instanceof Ug?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Kt(Et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yw{}class IV extends Yw{}function xC(s,t,...e){let i=[];t instanceof Yw&&i.push(t),i=i.concat(e),(function(c){const f=c.filter((m=>m instanceof Qw)).length,d=c.filter((m=>m instanceof pv)).length;if(f>1||f>0&&d>0)throw new Kt(Et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class pv extends IV{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new pv(t,e,i)}_apply(t){const e=this._parse(t);return NC(t._query,e),new up(t.firestore,t.converter,uT(t._query,e))}_parse(t){const e=fv(t.firestore);return(function(c,f,d,m,_,T,w){let C;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Kt(Et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){JS(w,T);const O=[];for(const k of w)O.push(ZS(m,c,k));C={arrayValue:{values:O}}}else C=ZS(m,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||JS(w,T),C=CV(d,f,w,T==="in"||T==="not-in");return vi.create(_,T,C)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function RC(s,t,e){const i=t,a=$w("where",s);return pv._create(a,i,e)}class Qw extends Yw{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Qw(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:no.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(a,c){let f=a;const d=c.getFlattenedFilters();for(const m of d)NC(f,m),f=uT(f,m)})(t._query,e),new up(t.firestore,t.converter,uT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ZS(s,t,e){if(typeof(e=vr(e))=="string"){if(e==="")throw new Kt(Et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C2(t)&&e.indexOf("/")!==-1)throw new Kt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Cn.fromString(e));if(!ie.isDocumentKey(i))throw new Kt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return mS(s,new ie(i))}if(e instanceof Ni)return mS(s,e._key);throw new Kt(Et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X0(e)}.`)}function JS(s,t){if(!Array.isArray(s)||s.length===0)throw new Kt(Et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function NC(s,t){const e=(function(a,c){for(const f of a)for(const d of f.getFlattenedFilters())if(c.indexOf(d.op)>=0)return d.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new Kt(Et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Kt(Et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class OV{convertValue(t,e="none"){switch(ou(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(au(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ue(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return pu(t,((a,c)=>{i[a]=this.convertValue(c,e)})),i}convertVectorValue(t){const e=t.fields?.[y0].arrayValue?.values?.map((i=>ui(i.doubleValue)));return new Go(e)}convertGeoPoint(t){return new Ho(ui(t.latitude),ui(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=tv(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(dg(t));default:return null}}convertTimestamp(t){const e=ru(t);return new kn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Cn.fromString(t);hn($2(i),9688,{name:t});const a=new pg(i.get(1),i.get(3)),c=new ie(i.popFirst(5));return a.isEqual(e)||Pl(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(s,t,e){let i;return i=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,i}class Hy{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class kd extends CC{constructor(t,e,i,a,c,f){super(t,e,i,a,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Jy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field($w("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=kd._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}kd._jsonSchemaVersion="firestore/documentSnapshot/1.0",kd._jsonSchema={type:wi("string",kd._jsonSchemaVersion),bundleSource:wi("string","DocumentSnapshot"),bundleName:wi("string"),bundle:wi("string")};class Jy extends kd{data(t={}){return super.data(t)}}class Vd{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Hy(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Jy(this._firestore,this._userDataWriter,i.key,i,new Hy(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Kt(Et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((d=>{const m=new Jy(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Hy(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>c||d.type!==3)).map((d=>{const m=new Jy(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Hy(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let _=-1,T=-1;return d.type!==0&&(_=f.indexOf(d.doc.key),f=f.delete(d.doc.key)),d.type!==1&&(f=f.add(d.doc),T=f.indexOf(d.doc.key)),{type:DV(d.type),doc:m,oldIndex:_,newIndex:T}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Vd._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Tw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(e.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function DV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:s})}}Vd._jsonSchemaVersion="firestore/querySnapshot/1.0",Vd._jsonSchema={type:wi("string",Vd._jsonSchemaVersion),bundleSource:wi("string","QuerySnapshot"),bundleName:wi("string"),bundle:wi("string")};class MV extends OV{constructor(t){super(),this.firestore=t}convertBytes(t){return new ma(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ni(this.firestore,null,e)}}function Xw(s){s=iu(s,up);const t=iu(s.firestore,hp),e=Fw(t),i=new MV(t);return NV(s._query),vV(e,s._query).then((a=>new Vd(t,i,s,a)))}function kV(s,t,e,...i){s=iu(s,Ni);const a=iu(s.firestore,hp),c=fv(a);let f;return f=typeof(t=vr(t))=="string"||t instanceof Ug?bC(c,"updateDoc",s._key,t,e,i):wC(c,"updateDoc",s._key,t),mv(a,[f.toMutation(s._key,_r.exists(!0))])}function VV(s){return mv(iu(s.firestore,hp),[new rv(s._key,_r.none())])}function OC(s,t){const e=iu(s.firestore,hp),i=hv(s),a=IC(s.converter,t);return mv(e,[TC(fv(s.firestore),"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,_r.exists(!1))]).then((()=>i))}function mv(s,t){return(function(i,a){const c=new Zc;return i.asyncQueue.enqueueAndForget((async()=>rV(await _V(i),a,c))),c.promise})(Fw(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fv(t)}set(t,e,i){this._verifyNotCommitted();const a=D1(t,this._firestore),c=IC(a.converter,e,i),f=TC(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,i);return this._mutations.push(f.toMutation(a._key,_r.none())),this}update(t,e,i,...a){this._verifyNotCommitted();const c=D1(t,this._firestore);let f;return f=typeof(e=vr(e))=="string"||e instanceof Ug?bC(this._dataReader,"WriteBatch.update",c._key,e,i,a):wC(this._dataReader,"WriteBatch.update",c._key,e),this._mutations.push(f.toMutation(c._key,_r.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=D1(t,this._firestore);return this._mutations=this._mutations.concat(new rv(e._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Kt(Et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function D1(s,t){if((s=vr(s)).firestore!==t)throw new Kt(Et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(s){return Fw(s=iu(s,hp)),new jV(s,(t=>mv(s,t)))}(function(t,e=!0){(function(a){ap=a})(BM),nu(new jl("firestore",((i,{instanceIdentifier:a,options:c})=>{const f=i.getProvider("app").getImmediate(),d=new hp(new S5(i.getProvider("auth-internal")),new C5(f,i.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Kt(Et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pg(_.options.projectId,T)})(f,a),f);return c={useFetchStreams:e,...c},d._setSettings(c),d}),"PUBLIC").setMultipleInstances(!0)),Bo(nS,iS,t),Bo(nS,iS,"esm2020")})();const PV={apiKey:"AIzaSyB0deMtV2CpYVzRrnA9hXmbdLs7t7NciiM",authDomain:"kanamate.firebaseapp.com",projectId:"kanamate",storageBucket:"kanamate.firebasestorage.app",messagingSenderId:"995286381047",appId:"1:995286381047:web:6d1fd272f557a7aa68fef2",measurementId:"G-YNV2CP7K1E"},DC=RE(PV);g5(DC);const kl=wV(DC),MC=async()=>{const s=Pg(kl,"studySets");return(await Xw(s)).docs.map(i=>({...i.data(),id:i.id}))},UV=async s=>{const t=Pg(kl,"studySets"),e=await OC(t,s);return{...s,id:e.id}},zV=async s=>{const t=xC(Pg(kl,"kanji"),RC("setId","==",s)),e=await Xw(t),i=LV(kl);e.docs.forEach(c=>{i.delete(c.ref)});const a=hv(kl,"studySets",s);i.delete(a),await i.commit()},kC=async s=>{const t=xC(Pg(kl,"kanji"),RC("setId","==",s));return(await Xw(t)).docs.map(a=>({...a.data(),id:a.id}))},BV=async s=>{const t=Pg(kl,"kanji"),e=await OC(t,s);return{...s,id:e.id}},qV=async s=>{const t=hv(kl,"kanji",s);await VV(t)},FV=async(s,t)=>{const e=hv(kl,"kanji",s);await kV(e,t)};var M1={exports:{}},k1={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function HV(){if(tA)return k1;tA=1;var s=R0().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return k1.c=function(t){return s.H.useMemoCache(t)},k1}var eA;function GV(){return eA||(eA=1,M1.exports=HV()),M1.exports}var jn=GV();const VC=s=>{const t=jn.c(10),{item:e}=s;let i;t[0]!==e.accuracy||t[1]!==e.isAttempted?(i=Ig(e.accuracy,e.isAttempted),t[0]=e.accuracy,t[1]=e.isAttempted,t[2]=i):i=t[2];const a=i,c=e.isAttempted?`${e.char} (${e.romajiList||e.readingList}): ${e.accuracy?.toFixed(0)}% (${e.stats?.correct}/${e.stats?.attempts})`:`${e.char} (${e.romajiList||e.readingList}): Non tentato`;let f;t[3]!==e.char?(f=L.jsx("div",{className:"text-3xl font-bold",children:e.char}),t[3]=e.char,t[4]=f):f=t[4];let d;return t[5]!==e.char||t[6]!==a||t[7]!==f||t[8]!==c?(d=L.jsx("div",{className:`p-3 text-center rounded-lg shadow-sm japanese-char 
                        flex items-center justify-center`,title:c,style:a,children:f},e.char),t[5]=e.char,t[6]=a,t[7]=f,t[8]=c,t[9]=d):d=t[9],d},KV=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})}),s[0]=t):t=s[0],t},WV=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),s[0]=t):t=s[0],t},$V=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),s[0]=t):t=s[0],t},gv=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),s[0]=t):t=s[0],t},nA=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),s[0]=t):t=s[0],t},jC=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-5 h-5 w-5",children:[L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"})]}),s[0]=t):t=s[0],t},LC=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})}),s[0]=t):t=s[0],t},PC=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.747 0-3.332.477-4.5 1.253"})}),s[0]=t):t=s[0],t},UC=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:L.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),s[0]=t):t=s[0],t},zC=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:L.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),s[0]=t):t=s[0],t},iA=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s[0]=t):t=s[0],t},YV=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 h-5 w-5",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})}),s[0]=t):t=s[0],t},QV=()=>{const s=jn.c(1);let t;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})}),s[0]=t):t=s[0],t},XV=({history:s,allSets:t,onClose:e,dynamicSets:i,dynamicKanjiMap:a})=>{const[c,f]=Ht.useState("hiragana"),[d,m]=Ht.useState(null),_=Ht.useMemo(()=>vE(s),[s]),T=(D,z)=>{const X=t[D];if(!X)return{header:[],rows:[]};const it=X.filter(R=>R.type===z).reduce((R,E)=>{const M=E.row,B=E.col;if(!M||!B)return R;R[M]||(R[M]={});const P=_[E.char];return R[M][B]={...E,stats:P,isAttempted:!!P,accuracy:P?P.accuracy:null},R},{}),K=ow.filter(R=>it[R.id]),W=lw.map(R=>{const E=K.map(M=>it[M.id]?.[R.id]||null);return{id:R.id,label:R.label,chars:E}});return{header:K,rows:W}},w=Ht.useMemo(()=>{const D={};return["hiragana","katakana"].forEach(z=>{t[z]&&(D[z]={},D[z].basic=T(z,"basic"),D[z].dakuten=T(z,"dakuten"),D[z].handakuten=T(z,"handakuten"))}),D},[t,_]),C=Ht.useMemo(()=>i.map(D=>{const z=a[D.id]||[],X=z.map(R=>_[R.char]).filter(Boolean),Y=X.reduce((R,E)=>R+E.attempts,0),it=X.reduce((R,E)=>R+E.correct,0),K=Y>0?it/Y*100:null,W=z.map(R=>{const E=_[R.char],M=!!E;return{...R,stats:E,isAttempted:M,accuracy:M?E.accuracy:null,romajiList:R.romaji}});return{id:D.id,name:D.name,accuracy:K,isAttempted:Y>0,kanjiList:W}}),[i,a,_]),I=D=>{const z=w[D];return z?L.jsxs("div",{className:"space-y-6",children:[z.basic&&z.basic.header.length>0&&L.jsx(V1,{title:"Base",gridData:z.basic}),z.dakuten&&z.dakuten.header.length>0&&L.jsx(V1,{title:"Dakuten",gridData:z.dakuten}),z.handakuten&&z.handakuten.header.length>0&&L.jsx(V1,{title:"Handakuten",gridData:z.handakuten})]}):L.jsxs("p",{className:"text-gray-500",children:["Nessun dato per ",D,"."]})},O=()=>L.jsx("div",{className:"space-y-6",children:L.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:C.map(D=>{const z=Ig(D.accuracy,D.isAttempted),X=D.isAttempted?`${D.name}: ${D.accuracy?.toFixed(0)}%`:`${D.name}: Non ancora praticato`;return L.jsxs("button",{onClick:()=>m(D.id),title:X,style:z,className:`w-full h-36 p-4 flex flex-col items-center justify-center text-xl font-bold rounded-xl
                              transition-all japanese-char shadow-md hover:shadow-lg hover:-translate-y-1`,children:[L.jsx("span",{className:"text-5xl mb-2",children:""}),L.jsx("span",{className:"text-lg font-semibold capitalize truncate w-full px-2 text-center",children:D.name})]},D.id)})})}),k=D=>{const z=C.find(X=>X.id===D);return z?L.jsx("div",{className:"space-y-6",children:L.jsxs("div",{children:[L.jsx("div",{className:"flex justify-between items-center mb-4",children:L.jsxs("button",{onClick:()=>m(null),className:"flex items-center text-gray-500 hover:text-blue-600",children:[L.jsx(gv,{}),L.jsx("span",{className:"ml-1",children:"Tutti i Set"})]})}),L.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize japanese-char mb-4",children:z.name}),L.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-y-2",children:z.kanjiList.map(X=>L.jsx(VC,{item:X},X.id||X.char))})]},z.id)}):null};return L.jsxs("div",{className:"bg-white w-full h-full p-6 overflow-y-auto shadow-2xl",children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Statistiche"}),L.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 text-3xl font-light leading-none",children:""})]}),L.jsxs("div",{className:"flex border-b mb-4",children:[L.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="hiragana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("hiragana"),m(null)},children:"Hiragana"},"hiragana"),L.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="katakana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("katakana"),m(null)},children:"Katakana"},"katakana"),L.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${c==="kanji"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{f("kanji")},children:"Kanji"},"kanji")]}),L.jsxs("div",{className:"mt-6",children:[c==="hiragana"&&I("hiragana"),c==="katakana"&&I("katakana"),c==="kanji"&&(d?k(d):O())]})]})},V1=s=>{const t=jn.c(28),{title:e,gridData:i}=s;let a;t[0]!==e?(a=L.jsx("h4",{className:"text-md font-semibold text-gray-600 mb-2",children:e}),t[0]=e,t[1]=a):a=t[1];const c=`repeat(${i.header.length}, minmax(0, 1fr))`;let f;t[2]!==c?(f={gridTemplateColumns:c},t[2]=c,t[3]=f):f=t[3];let d;t[4]!==i.header?(d=i.header.map(ZV),t[4]=i.header,t[5]=d):d=t[5];let m;t[6]!==f||t[7]!==d?(m=L.jsx("div",{className:"grid",style:f,children:d}),t[6]=f,t[7]=d,t[8]=m):m=t[8];let _;if(t[9]!==i.header.length||t[10]!==i.rows){let D;t[12]!==i.header.length?(D=z=>L.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${i.header.length}, minmax(0, 1fr))`},children:z.chars.map((X,Y)=>{if(!X)return L.jsx("div",{className:"w-full h-12 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${z.id}-${Y}`);const it=Ig(X.accuracy??null,X.isAttempted??!1),K=X.isAttempted?`${X.char}: ${X.accuracy?.toFixed(0)}% (${X.stats.correct}/${X.stats.attempts})`:`${X.char}: Non tentato`;return L.jsx("div",{className:"w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2 border-white cursor-help japanese-char",title:K,style:it,children:X.char},X.char)})},z.id),t[12]=i.header.length,t[13]=D):D=t[13],_=i.rows.map(D),t[9]=i.header.length,t[10]=i.rows,t[11]=_}else _=t[11];let T;t[14]!==m||t[15]!==_?(T=L.jsxs("div",{className:"grow flex flex-col space-y-1",children:[m,_]}),t[14]=m,t[15]=_,t[16]=T):T=t[16];let w;t[17]===Symbol.for("react.memo_cache_sentinel")?(w={paddingTop:"28px"},t[17]=w):w=t[17];let C;t[18]!==i.rows?(C=i.rows.map(JV),t[18]=i.rows,t[19]=C):C=t[19];let I;t[20]!==C?(I=L.jsx("div",{className:"flex flex-col space-y-1",style:w,children:C}),t[20]=C,t[21]=I):I=t[21];let O;t[22]!==I||t[23]!==T?(O=L.jsxs("div",{className:"flex space-x-1",children:[T,I]}),t[22]=I,t[23]=T,t[24]=O):O=t[24];let k;return t[25]!==a||t[26]!==O?(k=L.jsxs("div",{children:[a,O]}),t[25]=a,t[26]=O,t[27]=k):k=t[27],k};function ZV(s){return L.jsx("div",{className:"w-full text-center py-1 text-sm font-medium text-gray-500",children:s.label},s.id)}function JV(s){return L.jsx("div",{className:"w-8 h-12 flex items-center justify-center font-bold text-gray-600 text-xs",children:s.label.toUpperCase()},s.id)}const tj=s=>{const t=jn.c(47),{onClose:e,visibleSets:i,allSetNames:a,onPlayClick:c,isSpeechEnabled:f,initAudio:d}=s,[m,_]=Ht.useState(i[0]||a[0]);let T,w;t[0]!==m||t[1]!==a?(T=()=>{a.includes(m)||_(a[0])},w=[a,m],t[0]=m,t[1]=a,t[2]=T,t[3]=w):(T=t[2],w=t[3]),Ht.useEffect(T,w);let C;t[4]!==e||t[5]!==c?(C=()=>{c(),e()},t[4]=e,t[5]=c,t[6]=C):C=t[6];const I=C;let O;t[7]!==d||t[8]!==f||t[9]!==c?(O=(B,P)=>{d(),c(),f&&Lh(B)},t[7]=d,t[8]=f,t[9]=c,t[10]=O):O=t[10];const k=O,D=m;if(!D)return null;const z=D;let X,Y,it,K,W,R;if(t[11]!==m||t[12]!==a||t[13]!==k||t[14]!==I||t[15]!==c||t[16]!==z){const B=_E[z]||[];K="bg-white w-full h-full p-6 overflow-y-auto shadow-2xl",W=ej;let P;t[23]===Symbol.for("react.memo_cache_sentinel")?(P=L.jsx("h2",{className:"text-2xl font-bold capitalize",children:"Study Panel"}),t[23]=P):P=t[23],t[24]!==I?(R=L.jsxs("div",{className:"flex justify-between items-center mb-2 border-b",children:[P,L.jsx("div",{className:"flex items-center space-x-2",children:L.jsx("button",{onClick:I,className:"text-gray-500 hover:text-gray-800 text-3xl font-light leading-none",children:""})})]}),t[24]=I,t[25]=R):R=t[25];let F;if(t[26]!==m||t[27]!==a||t[28]!==c){let vt;t[30]!==m||t[31]!==c?(vt=Rt=>L.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${m===Rt?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{c(),_(Rt)},children:Rt.replace("_"," ")},Rt),t[30]=m,t[31]=c,t[32]=vt):vt=t[32],F=a.map(vt),t[26]=m,t[27]=a,t[28]=c,t[29]=F}else F=t[29];t[33]!==F?(X=L.jsx("div",{className:"flex border-b mb-4",children:F}),t[33]=F,t[34]=X):X=t[34],Y="space-y-6";let U;t[35]!==k||t[36]!==z?(U=vt=>{if(z==="kanji_basic"){const Z=Hh[z];return L.jsxs("div",{children:[L.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-2",children:vt.name}),L.jsx("div",{className:"grid grid-cols-5 gap-2",children:Z.map(nt=>L.jsxs("button",{onClick:()=>k(nt.char,nt.romaji),className:`w-full h-16 flex flex-col items-center justify-center text-xl font-bold rounded-md border-2
                                  transition-all japanese-char bg-gray-100 text-gray-700 border-gray-200 hover:border-gray-400 hover:bg-gray-200`,children:[L.jsx("span",{className:"text-2xl",children:nt.char}),L.jsx("span",{className:"text-xs font-normal",children:Array.isArray(nt.romaji)?nt.romaji[0]:nt.romaji})]},nt.char))})]},"kanji-grid")}const Rt=yE(z,vt.id);return Rt.header.length===0?null:L.jsxs("div",{children:[L.jsx("h3",{className:"text-md font-semibold text-gray-600 mb-2",children:vt.name}),L.jsxs("div",{className:"flex space-x-1",children:[L.jsxs("div",{className:"grow flex flex-col space-y-1",children:[L.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${Rt.header.length}, minmax(0, 1fr))`},children:Rt.header.map(nj)}),Rt.rows.map(Z=>L.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${Rt.header.length}, minmax(0, 1fr))`},children:Z.chars.map((nt,Tt)=>{if(!nt)return L.jsx("div",{className:"w-full h-16 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${Z.id}-${Tt}`);const dt=Array.isArray(nt.romaji)?nt.romaji[0]:nt.romaji;return L.jsxs("button",{onClick:()=>k(nt.char,dt),className:`w-full h-16 flex flex-col items-center justify-center text-xl font-bold rounded-sm border-2
                                        transition-all japanese-char bg-gray-100 text-gray-700 border-gray-200 hover:border-gray-400 hover:bg-gray-200`,children:[L.jsx("span",{className:"text-2xl",children:nt.char}),L.jsx("span",{className:"text-xs font-normal",children:dt})]},nt.char)})},Z.id))]}),L.jsx("div",{className:"flex flex-col space-y-1",style:{paddingTop:"28px"},children:Rt.rows.map(ij)})]})]},vt.id)},t[35]=k,t[36]=z,t[37]=U):U=t[37],it=B.map(U),t[11]=m,t[12]=a,t[13]=k,t[14]=I,t[15]=c,t[16]=z,t[17]=X,t[18]=Y,t[19]=it,t[20]=K,t[21]=W,t[22]=R}else X=t[17],Y=t[18],it=t[19],K=t[20],W=t[21],R=t[22];let E;t[38]!==Y||t[39]!==it?(E=L.jsx("div",{className:Y,children:it}),t[38]=Y,t[39]=it,t[40]=E):E=t[40];let M;return t[41]!==X||t[42]!==E||t[43]!==K||t[44]!==W||t[45]!==R?(M=L.jsxs("div",{className:K,onClick:W,children:[R,X,E]}),t[41]=X,t[42]=E,t[43]=K,t[44]=W,t[45]=R,t[46]=M):M=t[46],M};function ej(s){return s.stopPropagation()}function nj(s){return L.jsx("div",{className:"w-full text-center py-1 text-sm font-medium text-gray-500 rounded-md",children:s.label},s.id)}function ij(s){return L.jsx("div",{className:"w-8 h-16 flex items-center justify-center font-bold text-gray-600 text-xs rounded-md",children:s.label.toUpperCase()},s.id)}const Gy=s=>{const t=jn.c(5),{label:e,icon:i,isActive:a,onClick:c}=s,f=`flex items-center justify-center space-x-3 w-full p-3 rounded-lg text-left transition-colors
                  ${a?"bg-blue-600 text-white":"text-gray-600 hover:bg-blue-50 hover:text-blue-600"}`;let d;return t[0]!==i||t[1]!==e||t[2]!==c||t[3]!==f?(d=L.jsx("button",{onClick:c,title:e,className:f,children:i}),t[0]=i,t[1]=e,t[2]=c,t[3]=f,t[4]=d):d=t[4],d},sj=s=>{const t=jn.c(41),{activeView:e,setActiveView:i,initAudio:a,isSoundEffectsEnabled:c,setIsSoundEffectsEnabled:f,handlePlayClick:d}=s;let m;t[0]!==d||t[1]!==a||t[2]!==c||t[3]!==f?(m=()=>L.jsx("button",{onClick:()=>{d(),a(),f(rj)},className:`flex items-center justify-center w-full p-3 rounded-lg text-left transition-colors
                       text-gray-600 hover:bg-blue-50 hover:text-blue-600`,title:c?"Disattiva effetti sonori":"Attiva effetti sonori",children:c?L.jsx(UC,{}):L.jsx(zC,{})}),t[0]=d,t[1]=a,t[2]=c,t[3]=f,t[4]=m):m=t[4];const _=m;let T;t[5]===Symbol.for("react.memo_cache_sentinel")?(T=L.jsx($V,{}),t[5]=T):T=t[5];const w=e==="quiz";let C;t[6]!==i?(C=()=>i("quiz"),t[6]=i,t[7]=C):C=t[7];let I;t[8]!==w||t[9]!==C?(I=L.jsx(Gy,{label:"Pratica",icon:T,isActive:w,onClick:C}),t[8]=w,t[9]=C,t[10]=I):I=t[10];let O;t[11]===Symbol.for("react.memo_cache_sentinel")?(O=L.jsx(PC,{}),t[11]=O):O=t[11];const k=e==="kanjiManager";let D;t[12]!==i?(D=()=>i("kanjiManager"),t[12]=i,t[13]=D):D=t[13];let z;t[14]!==k||t[15]!==D?(z=L.jsx(Gy,{label:"I Miei Kanji",icon:O,isActive:k,onClick:D}),t[14]=k,t[15]=D,t[16]=z):z=t[16];let X;t[17]===Symbol.for("react.memo_cache_sentinel")?(X=L.jsx(WV,{}),t[17]=X):X=t[17];const Y=e==="dashboard";let it;t[18]!==i?(it=()=>i("dashboard"),t[18]=i,t[19]=it):it=t[19];let K;t[20]!==Y||t[21]!==it?(K=L.jsx(Gy,{label:"Progressi",icon:X,isActive:Y,onClick:it}),t[20]=Y,t[21]=it,t[22]=K):K=t[22];let W;t[23]!==K||t[24]!==I||t[25]!==z?(W=L.jsxs("nav",{className:"flex flex-col space-y-2 grow",children:[I,z,K]}),t[23]=K,t[24]=I,t[25]=z,t[26]=W):W=t[26];let R;t[27]!==_?(R=L.jsx(_,{}),t[27]=_,t[28]=R):R=t[28];let E;t[29]===Symbol.for("react.memo_cache_sentinel")?(E=L.jsx(KV,{}),t[29]=E):E=t[29];const M=e==="settings";let B;t[30]!==i?(B=()=>i("settings"),t[30]=i,t[31]=B):B=t[31];let P;t[32]!==M||t[33]!==B?(P=L.jsx(Gy,{label:"Impostazioni",icon:E,isActive:M,onClick:B}),t[32]=M,t[33]=B,t[34]=P):P=t[34];let F;t[35]!==R||t[36]!==P?(F=L.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-200 space-y-2",children:[R,P]}),t[35]=R,t[36]=P,t[37]=F):F=t[37];let U;return t[38]!==W||t[39]!==F?(U=L.jsxs("div",{className:`h-screen bg-white text-gray-800 p-5 flex flex-col border-r border-gray-200 
                  w-20`,children:[W,F]}),t[38]=W,t[39]=F,t[40]=U):U=t[40],U};function rj(s){return!s}const aj=({history:s,allSets:t,dynamicSets:e,dynamicKanjiMap:i})=>{const[a,c]=Ht.useState("hiragana"),[f,d]=Ht.useState(null),m=Ht.useMemo(()=>vE(s),[s]),_=(k,D)=>{const z=t[k];if(!z)return{header:[],rows:[]};const Y=z.filter(W=>W.type===D).reduce((W,R)=>{const E=R.row,M=R.col;if(!E||!M)return W;W[E]||(W[E]={});const B=m[R.char];return W[E][M]={...R,stats:B,isAttempted:!!B,accuracy:B?B.accuracy:null},W},{}),it=ow.filter(W=>Y[W.id]),K=lw.map(W=>{const R=it.map(E=>Y[E.id]?.[W.id]||null);return{id:W.id,label:W.label,chars:R}});return{header:it,rows:K}},T=Ht.useMemo(()=>{const k={};return["hiragana","katakana"].forEach(D=>{t[D]&&(k[D]={},k[D].basic=_(D,"basic"),k[D].dakuten=_(D,"dakuten"),k[D].handakuten=_(D,"handakuten"))}),k},[t,m]),w=Ht.useMemo(()=>e.map(k=>{const D=i[k.id]||[],z=D.map(W=>m[W.char]).filter(Boolean),X=z.reduce((W,R)=>W+R.attempts,0),Y=z.reduce((W,R)=>W+R.correct,0),it=X>0?Y/X*100:null,K=D.map(W=>{const R=m[W.char],E=!!R;return{...W,stats:R,isAttempted:E,accuracy:E?R.accuracy:null,romajiList:W.romaji}});return{id:k.id,name:k.name,accuracy:it,isAttempted:X>0,kanjiList:K}}),[e,i,m]),C=k=>{const D=T[k];return D?L.jsxs("div",{className:"space-y-6",children:[L.jsx(j1,{title:"Base",gridData:D.basic||_(k,"basic")}),L.jsx(j1,{title:"Dakuten",gridData:D.dakuten||_(k,"dakuten")}),L.jsx(j1,{title:"Handakuten",gridData:D.handakuten||_(k,"handakuten")})]}):null},I=()=>w.length===0?L.jsx("p",{className:"text-gray-500 text-center p-4",children:'Vai su "I Miei Kanji" per creare il tuo primo set di studio.'}):L.jsx("div",{className:"space-y-6",children:L.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:w.map(k=>{const D=Ig(k.accuracy,k.isAttempted),z=k.isAttempted?`${k.name}: ${k.accuracy?.toFixed(0)}%`:`${k.name}: Non ancora praticato`;return L.jsxs("button",{onClick:()=>d(k.id),title:z,style:D,className:`w-full h-36 p-4 flex flex-col items-center justify-center text-xl font-bold rounded-xl
                              transition-all japanese-char shadow-md hover:shadow-lg hover:-translate-y-1`,children:[L.jsx("span",{className:"text-5xl mb-2",children:""}),L.jsx("span",{className:"text-lg font-semibold capitalize truncate w-full px-2 text-center",children:k.name})]},k.id)})})}),O=k=>{const D=w.find(z=>z.id===k);return D?L.jsx("div",{className:"space-y-6",children:L.jsxs("div",{children:[L.jsx("div",{className:"flex justify-between items-center mb-4",children:L.jsxs("button",{onClick:()=>d(null),className:"flex items-center text-gray-500 hover:text-blue-600",children:[L.jsx(gv,{}),L.jsx("span",{className:"ml-1",children:"Tutti i Set"})]})}),L.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize japanese-char mb-4",children:D.name}),L.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-y-2",children:D.kanjiList.map(z=>L.jsx(VC,{item:z},z.id||z.char))})]},D.id)}):null};return L.jsxs("div",{className:"w-full p-8",children:[L.jsx("div",{className:"flex justify-between items-center mb-6"}),L.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[L.jsxs("div",{className:"flex border-b mb-4",children:[L.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${a==="hiragana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{c("hiragana"),d(null)},children:"Hiragana"},"hiragana"),L.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${a==="katakana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{c("katakana"),d(null)},children:"Katakana"},"katakana"),L.jsx("button",{className:`py-2 px-4 capitalize japanese-char ${a==="kanji"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`,onClick:()=>{c("kanji")},children:"Kanji"},"kanji")]}),L.jsxs("div",{className:"mt-6",children:[a==="hiragana"&&C("hiragana"),a==="katakana"&&C("katakana"),a==="kanji"&&(f?O(f):I())]})]})]})},j1=s=>{const t=jn.c(8),{title:e,gridData:i}=s;let a;t[0]!==e?(a=L.jsx("h4",{className:"text-md font-semibold text-gray-600 mb-2",children:e}),t[0]=e,t[1]=a):a=t[1];let c;t[2]!==i.header||t[3]!==i.rows?(c=i.header.length===0?L.jsx("div",{className:"w-full h-12 bg-gray-50 border border-gray-100 rounded-sm flex items-center justify-center",children:L.jsx("span",{className:"text-gray-400 text-sm",children:"N/A"})}):L.jsxs("div",{className:"flex space-x-1",children:[L.jsxs("div",{className:"grow flex flex-col space-y-1",children:[L.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${i.header.length}, minmax(0, 1fr))`},children:i.header.map(oj)}),i.rows.map(d=>L.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${i.header.length}, minmax(0, 1fr))`},children:d.chars.map((m,_)=>{if(!m)return L.jsx("div",{className:"w-full h-12 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${d.id}-${_}`);const T=Ig(m.accuracy??null,m.isAttempted??!1),w=m.isAttempted?`${m.char}: ${m.accuracy?.toFixed(0)}% (${m.stats.correct}/${m.stats.attempts})`:`${m.char}: Non tentato`;return L.jsx("div",{className:"w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2 border-white cursor-help japanese-char",title:w,style:T,children:m.char},m.char)})},d.id))]}),L.jsx("div",{className:"flex flex-col space-y-1",style:{paddingTop:"28px"},children:i.rows.map(lj)})]}),t[2]=i.header,t[3]=i.rows,t[4]=c):c=t[4];let f;return t[5]!==a||t[6]!==c?(f=L.jsxs("div",{children:[a,c]}),t[5]=a,t[6]=c,t[7]=f):f=t[7],f};function oj(s){return L.jsx("div",{className:"w-full text-center py-1 text-sm font-medium text-gray-500",children:s.label},s.id)}function lj(s){return L.jsx("div",{className:"w-8 h-12 flex items-center justify-center font-bold text-gray-600 text-xs",children:s.label.toUpperCase()},s.id)}function Zd(s){return s===null?"null":s!==Object(s)?typeof s:{}.toString.call(s).slice(8,-1).toLowerCase()}function Ta(s){return Zd(s)!=="string"?!0:!s.length}function fp(s="",t,e){if(Ta(s))return!1;const i=s.charCodeAt(0);return t<=i&&i<=e}const sA={HIRAGANA:"toHiragana",KATAKANA:"toKatakana"},BC={HEPBURN:"hepburn"},cj={useObsoleteKana:!1,passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:BC.HEPBURN},uj=65,hj=90,Zw=12353,fj=12438,Jw=12449,dj=12540,pj=19968,mj=40879,gj=12293,_j=12540,yj=12539,vj=[0,127],Tj=[[256,257],[274,275],[298,299],[332,333],[362,363]],wj=[[8216,8217],[8220,8221]],bj=[vj,...Tj],Sj=[[32,47],[58,63],[91,96],[123,126],...wj];var rA=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Aj(s,t){return!!(s===t||rA(s)&&rA(t))}function Ej(s,t){if(s.length!==t.length)return!1;for(var e=0;e<s.length;e++)if(!Aj(s[e],t[e]))return!1;return!0}function qC(s,t){t===void 0&&(t=Ej);var e=null;function i(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(e&&e.lastThis===this&&t(a,e.lastArgs))return e.lastResult;var f=s.apply(this,a);return e={lastResult:f,lastArgs:a,lastThis:this},f}return i.clear=function(){e=null},i}var aA=Object.prototype.hasOwnProperty;function oA(s,t,e){for(e of s.keys())if(jd(e,t))return e}function jd(s,t){var e,i,a;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((i=s.length)===t.length)for(;i--&&jd(s[i],t[i]););return i===-1}if(e===Set){if(s.size!==t.size)return!1;for(i of s)if(a=i,a&&typeof a=="object"&&(a=oA(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(i of s)if(a=i[0],a&&typeof a=="object"&&(a=oA(t,a),!a)||!jd(i[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((i=s.byteLength)===t.byteLength)for(;i--&&s.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(s)){if((i=s.byteLength)===t.byteLength)for(;i--&&s[i]===t[i];);return i===-1}if(!e||typeof s=="object"){i=0;for(e in s)if(aA.call(s,e)&&++i&&!aA.call(t,e)||!(e in t)||!jd(s[e],t[e]))return!1;return Object.keys(t).length===i}}return s!==s&&t!==t}const tb=(s={})=>Object.assign({},cj,s);function FC(s,t,e){const i=t;function a(d,m){if(d[m]!==void 0)return Object.assign({"":d[""]+m},d[m])}function c(d,m){const _=d.charAt(0);return f(Object.assign({"":_},i[_]),d.slice(1),m,m+1)}function f(d,m,_,T){if(!m)return e||Object.keys(d).length===1?d[""]?[[_,T,d[""]]]:[]:[[_,T,null]];if(Object.keys(d).length===1)return[[_,T,d[""]]].concat(c(m,T));const w=a(d,m.charAt(0));return w===void 0?[[_,T,d[""]]].concat(c(m,T)):f(w,m.slice(1),_,T+1)}return c(s,0)}function eb(s){return Object.entries(s).reduce((t,[e,i])=>{const a=Zd(i)==="string";return t[e]=a?{"":i}:eb(i),t},{})}function HC(s,t){return t.split("").reduce((e,i)=>(e[i]===void 0&&(e[i]={}),e[i]),s)}function GC(s={}){const t={};return Zd(s)==="object"&&Object.entries(s).forEach(([e,i])=>{let a=t;e.split("").forEach(c=>{a[c]===void 0&&(a[c]={}),a=a[c]}),a[""]=i}),function(i){const a=JSON.parse(JSON.stringify(i));function c(f,d){return f===void 0||Zd(f)==="string"?d:Object.entries(d).reduce((m,[_,T])=>(m[_]=c(f[_],T),m),f)}return c(a,t)}}function KC(s,t){return t?Zd(t)==="function"?t(s):GC(t)(s):s}const Cj={a:"",i:"",u:"",e:"",o:"",k:{a:"",i:"",u:"",e:"",o:""},s:{a:"",i:"",u:"",e:"",o:""},t:{a:"",i:"",u:"",e:"",o:""},n:{a:"",i:"",u:"",e:"",o:""},h:{a:"",i:"",u:"",e:"",o:""},m:{a:"",i:"",u:"",e:"",o:""},y:{a:"",u:"",o:""},r:{a:"",i:"",u:"",e:"",o:""},w:{a:"",i:"",e:"",o:""},g:{a:"",i:"",u:"",e:"",o:""},z:{a:"",i:"",u:"",e:"",o:""},d:{a:"",i:"",u:"",e:"",o:""},b:{a:"",i:"",u:"",e:"",o:""},p:{a:"",i:"",u:"",e:"",o:""},v:{a:"",i:"",u:"",e:"",o:""}},xj={".":"",",":"",":":"","/":"","!":"","?":"","~":"","-":"","":"","":"","":"","":"","[":"","]":"","(":"",")":"","{":"","}":""},lA={k:"",s:"",t:"",n:"",h:"",m:"",r:"",g:"",z:"",d:"",b:"",p:"",v:"",q:"",f:""},WC={ya:"",yi:"",yu:"",ye:"",yo:""},$C={a:"",i:"",u:"",e:"",o:""},cA={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},Rj=Object.assign({tu:"",wa:"",ka:"",ke:""},$C,WC),Nj={yi:"",wu:"",ye:"",wi:"",we:"",kwa:"",whu:"",tha:"",thu:"",tho:"",dha:"",dhu:"",dho:""},Ij={wh:"",kw:"",qw:"",q:"",gw:"",sw:"",ts:"",th:"",tw:"",dh:"",dw:"",fw:"",f:""};function Oj(){const s=eb(Cj),t=a=>HC(s,a);Object.entries(lA).forEach(([a,c])=>{Object.entries(WC).forEach(([f,d])=>{t(a+f)[""]=c+d})}),Object.entries(xj).forEach(([a,c])=>{t(a)[""]=c}),Object.entries(Ij).forEach(([a,c])=>{Object.entries($C).forEach(([f,d])=>{const m=t(a+f);m[""]=c+d})}),["n","n'","xn"].forEach(a=>{t(a)[""]=""}),s.c=JSON.parse(JSON.stringify(s.k)),Object.entries(cA).forEach(([a,c])=>{const f=a.slice(0,a.length-1),d=a.charAt(a.length-1),m=t(f);m[d]=JSON.parse(JSON.stringify(t(c)))});function e(a){return[...Object.entries(cA),["c","k"]].reduce((c,[f,d])=>a.startsWith(d)?c.concat(a.replace(d,f)):c,[])}Object.entries(Rj).forEach(([a,c])=>{const f=w=>w.charAt(w.length-1),d=w=>w.slice(0,w.length-1),m=`x${a}`,_=t(m);_[""]=c;const T=t(`l${d(a)}`);T[f(a)]=_,e(a).forEach(w=>{["l","x"].forEach(C=>{const I=t(C+d(w));I[f(w)]=t(C+a)})})}),Object.entries(Nj).forEach(([a,c])=>{t(a)[""]=c});function i(a){return Object.entries(a).reduce((c,[f,d])=>(f?c[f]=i(d):c[f]=`${d}`,c),{})}return[...Object.keys(lA),"c","y","w","j"].forEach(a=>{const c=s[a];c[a]=i(c)}),delete s.n.n,Object.freeze(JSON.parse(JSON.stringify(s)))}let L1=null;function Dj(){return L1==null&&(L1=Oj()),L1}const Mj=GC({wi:"",we:""});function kj(s){const t=JSON.parse(JSON.stringify(s));return t.n.n={"":""},t.n[" "]={"":""},t}function Vj(s=""){return Ta(s)?!1:fp(s,uj,hj)}function Bg(s=""){return Ta(s)?!1:s.charCodeAt(0)===_j}function YC(s=""){return Ta(s)?!1:s.charCodeAt(0)===yj}function QC(s=""){return Ta(s)?!1:Bg(s)?!0:fp(s,Zw,fj)}function jj(s=""){const t=[];return s.split("").forEach(e=>{if(Bg(e)||YC(e))t.push(e);else if(QC(e)){const i=e.charCodeAt(0)+(Jw-Zw),a=String.fromCharCode(i);t.push(a)}else t.push(e)}),t.join("")}const XC=qC((s,t,e)=>{let i=Dj();return i=s?kj(i):i,i=t?Mj(i):i,e&&(i=KC(i,e)),i},jd);function bT(s="",t={},e){let i;return e?i=t:(i=tb(t),e=XC(i.IMEMode,i.useObsoleteKana,i.customKanaMapping)),Lj(s,i,e).map(a=>{const[c,f,d]=a;if(d===null)return s.slice(c);const m=i.IMEMode===sA.HIRAGANA,_=i.IMEMode===sA.KATAKANA||[...s.slice(c,f)].every(Vj);return m||!_?d:jj(d)}).join("")}function Lj(s="",t={},e){const{IMEMode:i,useObsoleteKana:a,customKanaMapping:c}=t;return e||(e=XC(i,a,c)),FC(s.toLowerCase(),e,!i)}function Pj(s=""){return Ta(s)?!1:bj.some(([t,e])=>fp(s,t,e))}function ZC(s="",t){const e=Zd(t)==="regexp";return Ta(s)?!1:[...s].every(i=>{const a=Pj(i);return e?a||t.test(i):a})}function ST(s=""){return fp(s,Jw,dj)}function Uj(s=""){return Ta(s)?!1:[...s].every(QC)}function JC(s=""){return Ta(s)?!1:[...s].every(ST)}function zj(s=""){return Ta(s)?!1:s.charCodeAt(0)===gj}function Bj(s=""){return fp(s,pj,mj)||zj(s)}function qj(s=""){return Ta(s)?!1:[...s].every(Bj)}function Fj(s="",t={passKanji:!0}){const e=[...s];let i=!1;return t.passKanji||(i=e.some(qj)),(e.some(Uj)||e.some(JC))&&e.some(ZC)&&!i}const Hj=(s,t)=>Bg(s)&&t<1,Gj=(s,t)=>Bg(s)&&t>0,Kj=s=>["",""].includes(s),Wj={a:"",i:"",u:"",e:"",o:""};function t0(s="",t,{isDestinationRomaji:e,convertLongVowelMark:i}={}){let a="";return s.split("").reduce((c,f,d)=>{if(YC(f)||Hj(f,d)||Kj(f))return c.concat(f);if(i&&a&&Gj(f,d)){const m=t(a).slice(-1);return ST(s[d-1])&&m==="o"&&e?c.concat(""):c.concat(Wj[m])}if(!Bg(f)&&ST(f)){const m=f.charCodeAt(0)+(Zw-Jw),_=String.fromCharCode(m);return a=_,c.concat(_)}return a="",c.concat(f)},[]).join("")}let P1=null;const $j={:"a",:"i",:"u",:"e",:"o",:"ka",:"ki",:"ku",:"ke",:"ko",:"sa",:"shi",:"su",:"se",:"so",:"ta",:"chi",:"tsu",:"te",:"to",:"na",:"ni",:"nu",:"ne",:"no",:"ha",:"hi",:"fu",:"he",:"ho",:"ma",:"mi",:"mu",:"me",:"mo",:"ra",:"ri",:"ru",:"re",:"ro",:"ya",:"yu",:"yo",:"wa",:"wi",:"we",:"wo",:"n",:"ga",:"gi",:"gu",:"ge",:"go",:"za",:"ji",:"zu",:"ze",:"zo",:"da",:"ji",:"zu",:"de",:"do",:"ba",:"bi",:"bu",:"be",:"bo",:"pa",:"pi",:"pu",:"pe",:"po",:"va",:"vi",:"vu",:"ve",:"vo"},Yj={"":".","":",","":":","":"/","":"!","":"?","":"~",:"-","":"","":"","":"","":"","":"[","":"]","":"(","":")","":"{","":"}","":" "},Qj=["","","","","","","",""],U1={:"ya",:"yu",:"yo"},Xj={:"yi",:"ye"},Zj={:"a",:"i",:"u",:"e",:"o"},Jj=["","","","","","","","","","",""],t9={:"sh",:"ch",:"j",:"j"},e9={:"",:"ya",:"yu",:"yo",:"a",:"i",:"u",:"e",:"o"},uA={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function n9(){return P1==null&&(P1=s9()),P1}function i9(s){switch(s){case BC.HEPBURN:return n9();default:return{}}}function s9(){const s=eb($j),t=i=>HC(s,i),e=(i,a)=>{t(i)[""]=a};return Object.entries(Yj).forEach(([i,a])=>{t(i)[""]=a}),[...Object.entries(U1),...Object.entries(Zj)].forEach(([i,a])=>{e(i,a)}),Jj.forEach(i=>{const a=t(i)[""][0];Object.entries(U1).forEach(([c,f])=>{e(i+c,a+f)}),Object.entries(Xj).forEach(([c,f])=>{e(i+c,a+f)})}),Object.entries(t9).forEach(([i,a])=>{Object.entries(U1).forEach(([c,f])=>{e(i+c,a+f[1])}),e(`${i}`,`${a}yi`),e(`${i}`,`${a}e`)}),s.=tx(s),Object.entries(e9).forEach(([i,a])=>{e(i,a)}),Qj.forEach(i=>{e(`${i}`,`n'${t(i)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(s)))}function tx(s){return Object.entries(s).reduce((t,[e,i])=>{if(e)t[e]=tx(i);else{const a=i.charAt(0);t[e]=Object.keys(uA).includes(a)?uA[a]+i:i}return t},{})}const ex=qC((s,t)=>{let e=i9(s);return t&&(e=KC(e,t)),e},jd);function Ld(s="",t={},e){const i=tb(t);return e||(e=ex(i.romanization,i.customRomajiMapping)),r9(s,i,e).map(a=>{const[c,f,d]=a;return i.upcaseKatakana&&JC(s.slice(c,f))?d.toUpperCase():d}).join("")}function r9(s,t,e){e||(e=ex(t.romanization,t.customRomajiMapping));const i=Object.assign({},{isDestinationRomaji:!0},t);return FC(t0(s,Ld,i),e,!t.IMEMode)}function a9(s=""){return Ta(s)?!1:Sj.some(([t,e])=>fp(s,t,e))}function o9(s="",t={}){const e=tb(t);if(e.passRomaji)return t0(s,Ld,e);if(Fj(s,{passKanji:!0})){const i=t0(s,Ld,e);return bT(i.toLowerCase(),e)}return ZC(s)||a9(s)?bT(s.toLowerCase(),e):t0(s,Ld,e)}const l9=({refreshDynamicData:s})=>{const[t,e]=Ht.useState([]),[i,a]=Ht.useState([]),[c,f]=Ht.useState(null),[,d]=Ht.useState(!0),[,m]=Ht.useState(!1),[_,T]=Ht.useState(null),[w,C]=Ht.useState(""),[I,O]=Ht.useState(""),[k,D]=Ht.useState(""),[z,X]=Ht.useState(null),[Y,it]=Ht.useState("list");Ht.useEffect(()=>{(async()=>{d(!0),T(null);try{const pt=await MC();e(pt)}catch{}finally{d(!1)}})()},[]);const K=dt=>{const pt=dt.target.value,G=bT(pt,{isIME:!0,useObsoleteKana:!1});O(G)},W=async dt=>{f(dt),m(!0),T(null);try{const pt=await kC(dt.id);a(pt)}catch{}finally{m(!1)}},R=()=>{f(null),a([]),T(null),P(),it("list")},E=async dt=>{if(dt.trim()==="")return;const pt={name:dt.trim()};try{const G=await UV(pt);G&&G.id?(e([...t,G]),await s(),await W(G)):T("Impossibile creare il set. ID non ricevuto.")}catch(G){T(G instanceof Error?G.message:"Errore sconosciuto")}},M=async()=>{const dt=window.prompt("Come vuoi chiamare il nuovo set?");dt&&dt.trim()!==""&&await E(dt.trim())},B=async dt=>{if(window.confirm("Sei sicuro? Questo eliminer il set E TUTTI i kanji al suo interno."))try{await zV(dt),e(t.filter(pt=>pt.id!==dt)),await s()}catch{}},P=()=>{X(null),C(""),O(""),D("")},F=dt=>{X(dt),C(dt.char),O(dt.reading),D(dt.meaning)},U=async()=>{if(!z)return;const dt=Ld(I),pt={char:w,reading:I,romaji:dt,meaning:k};try{await FV(z.id,pt),a(i.map(G=>G.id===z.id?{...G,...pt}:G)),P(),await s()}catch{}},vt=async()=>{if(!c||!w.trim()||!I.trim()||!k.trim())return;const dt=Ld(I),pt={char:w,reading:I,romaji:dt,meaning:k,setId:c.id};try{const G=await BV(pt);a([...i,G]),C(""),O(""),D(""),await s()}catch{}},Rt=async dt=>{try{await qV(dt),a(i.filter(pt=>pt.id!==dt)),await s()}catch{}},Z=dt=>{const pt=dt.length;return pt<=1?"text-8xl":pt===2?"text-7xl":pt===3?"text-6xl":pt===4?"text-5xl":pt<=6?"text-4xl":"text-3xl"},nt=()=>L.jsx(L.Fragment,{children:L.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6 mt-6",children:[L.jsx("button",{onClick:M,className:"w-full h-48 p-4 flex flex-col justify-center items-center rounded-2xl shadow-lg bg-white text-gray-400 hover:text-blue-600 hover:shadow-xl transition transform hover:-translate-y-1 border-2 border-dashed border-gray-300 hover:border-blue-500 cursor-pointer group",title:"Crea un nuovo set",children:L.jsx("span",{className:"text-8xl font-light text-gray-400 group-hover:text-blue-500 transition-colors pb-4",children:"+"})}),t.map(dt=>L.jsxs("div",{className:"relative w-full h-48 rounded-2xl shadow-lg bg-white text-gray-800 transition transform hover:shadow-xl hover:-translate-y-1",children:[L.jsxs("button",{onClick:()=>W(dt),className:"w-full h-full p-4 flex flex-col justify-between items-center rounded-2xl",children:[L.jsx("span",{className:"text-7xl font-bold japanese-char text-blue-600 mt-6",children:""}),L.jsx("span",{className:"text-xl font-semibold japanese-char truncate w-full text-center",children:dt.name})]}),L.jsx("button",{onClick:()=>B(dt.id),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-100 rounded-full z-10 transition",title:`Elimina set ${dt.name}`,children:L.jsx(nA,{})})]},dt.id))]})}),Tt=()=>{const dt=Z(w);return L.jsxs(L.Fragment,{children:[L.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:c?.name}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-8",children:[L.jsxs("div",{className:"md:col-span-4 md:col-start-2 space-y-4",children:[L.jsxs("div",{className:"w-full h-64 p-6 flex flex-col items-center justify-center space-y-4 rounded-2xl shadow-lg bg-white",children:[L.jsx("input",{type:"text",value:w,onChange:pt=>C(pt.target.value),placeholder:"",className:`w-full border-none focus:ring-0 focus:outline-none bg-transparent font-bold japanese-char text-blue-600 text-center placeholder:text-blue-100 
                          ${dt}`}),L.jsx("input",{type:"text",value:I,onChange:K,placeholder:"Lettura",className:"w-full border-none focus:ring-0 focus:outline-none bg-transparent text-3xl font-semibold japanese-char text-gray-800 text-center placeholder:text-gray-300",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})]}),L.jsx("input",{type:"text",value:k,onChange:pt=>D(pt.target.value),placeholder:"Significato (es. io)",className:"w-full p-4 bg-white rounded-lg focus:outline-none focus:ring-0 border-none text-lg shadow-lg"}),L.jsx("button",{onClick:z?U:vt,className:"w-full p-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",children:z?"Salva Modifiche":"Aggiungi"}),z&&L.jsx("button",{onClick:P,className:"w-full p-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition",children:"Annulla"})]}),L.jsx("div",{className:"md:col-span-4 md:col-start-7",children:L.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[L.jsxs("div",{className:"flex justify-end mb-4",children:[L.jsx("button",{onClick:()=>it("list"),className:`p-2 rounded-l-lg ${Y==="list"?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:"Vista Lista",children:L.jsx(QV,{})}),L.jsx("button",{onClick:()=>it("grid"),className:`p-2 rounded-r-lg ${Y==="grid"?"bg-blue-600 text-white":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,title:"Vista Griglia",children:L.jsx(YV,{})})]}),L.jsxs("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto hide-scrollbar",children:[Y==="list"&&i.map(pt=>L.jsxs("div",{className:"grid grid-cols-4 gap-4 items-center p-3 bg-gray-50 rounded-lg",children:[L.jsx("span",{className:"font-bold text-2xl japanese-char",children:pt.char}),L.jsx("span",{className:"japanese-char",children:pt.reading}),L.jsx("span",{children:pt.meaning}),L.jsxs("div",{className:"flex justify-end items-center",children:[L.jsx("button",{onClick:()=>F(pt),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-full",children:L.jsx(LC,{})}),L.jsx("button",{onClick:()=>Rt(pt.id),className:"p-1 text-red-600 hover:bg-red-100 rounded-full",children:L.jsx(nA,{})})]})]},pt.id)),Y==="grid"&&L.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:i.map(pt=>L.jsx("div",{className:"flex justify-center items-center p-2 bg-gray-50 rounded-lg aspect-square",title:`${pt.reading} (${pt.meaning})`,children:L.jsx("span",{className:"font-bold text-2xl japanese-char",children:pt.char})},pt.id))})]})]})})]})]})};return L.jsxs("div",{className:"w-full p-8 relative",children:[L.jsx("style",{children:`
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}),_&&L.jsx("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg mb-4",children:_}),c&&L.jsx("button",{onClick:R,className:"absolute top-8 right-8 p-2 text-gray-500 hover:text-gray-800 transition rounded-full hover:bg-gray-100",title:"Torna ai set",children:L.jsx(gv,{})}),c?Tt():nt()]})},z1=s=>{const t=jn.c(10),{char:e,title:i,isSelected:a,onClick:c}=s,f=`w-28 h-28 md:w-64 md:h-64 p-4 md:p-6 flex flex-col justify-between items-center rounded-2xl shadow-lg
                transition-all duration-300 transform
                ${a?"bg-blue-600 text-white shadow-blue-300 scale-105":"bg-white text-gray-800 hover:shadow-xl hover:-translate-y-1"}`,d=`text-5xl md:text-8xl font-bold japanese-char ${a?"text-white":"text-blue-600"}`;let m;t[0]!==e||t[1]!==d?(m=L.jsx("div",{className:d,children:e}),t[0]=e,t[1]=d,t[2]=m):m=t[2];let _;t[3]!==i?(_=L.jsx("div",{className:"text-lg md:text-3xl font-semibold japanese-char",children:i}),t[3]=i,t[4]=_):_=t[4];let T;return t[5]!==c||t[6]!==f||t[7]!==m||t[8]!==_?(T=L.jsxs("button",{onClick:c,className:f,children:[m,_]}),t[5]=c,t[6]=f,t[7]=m,t[8]=_,t[9]=T):T=t[9],T},c9=s=>{const t=jn.c(19),{direction:e,setDirection:i,onPlayClick:a}=s,c=e==="charToRomaji",f=`absolute top-1 bottom-1 w-1/2 bg-blue-600 rounded-full shadow-md
                      transition-all duration-300 ease-out
                      ${c?"transform translate-x-0":"transform translate-x-full"}`;let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={width:"calc(50% - 4px)",left:"2px",right:"2px"},t[0]=d):d=t[0];let m;t[1]!==f?(m=L.jsx("span",{className:f,style:d}),t[1]=f,t[2]=m):m=t[2];const _=`relative z-10 w-1/2 text-center py-2 rounded-full transition-colors duration-300 japanese-char
                      ${c?"text-white font-semibold":"text-gray-600"}`;let T;t[3]!==a||t[4]!==i?(T=()=>{a(),i("charToRomaji")},t[3]=a,t[4]=i,t[5]=T):T=t[5];let w;t[6]!==_||t[7]!==T?(w=L.jsx("div",{className:_,onClick:T,children:"  a"}),t[6]=_,t[7]=T,t[8]=w):w=t[8];const C=`relative z-10 w-1/2 text-center py-2 rounded-full transition-colors duration-300 japanese-char
                      ${c?"text-gray-600":"text-white font-semibold"}`;let I;t[9]!==a||t[10]!==i?(I=()=>{a(),i("romajiToChar")},t[9]=a,t[10]=i,t[11]=I):I=t[11];let O;t[12]!==C||t[13]!==I?(O=L.jsx("div",{className:C,onClick:I,children:"a  "}),t[12]=C,t[13]=I,t[14]=O):O=t[14];let k;return t[15]!==m||t[16]!==w||t[17]!==O?(k=L.jsx("div",{className:"w-full max-w-lg p-6 bg-white rounded-xl shadow-lg",children:L.jsxs("div",{className:"relative flex w-full bg-gray-200 rounded-full p-1 cursor-pointer",children:[m,w,O]})}),t[15]=m,t[16]=w,t[17]=O,t[18]=k):k=t[18],k},u9=s=>{const t=jn.c(66),{screen:e,handlePlayClick:i,selectedSets:a,toggleMode:c,direction:f,setDirection:d,setShowStudyPanel:m,startQuiz:_,available:T,isTimedMode:w,setIsTimedMode:C}=s,I=`w-full h-full p-8 flex flex-col justify-center items-center relative
                        transition-all duration-500 ease-in-out
                        ${e==="quiz"?"-translate-x-full opacity-70":"translate-x-0 opacity-100"}`;let O;t[0]!==a?(O=a.includes("hiragana"),t[0]=a,t[1]=O):O=t[1];let k;t[2]!==i||t[3]!==c?(k=()=>{i(),c("hiragana")},t[2]=i,t[3]=c,t[4]=k):k=t[4];let D;t[5]!==O||t[6]!==k?(D=L.jsx(z1,{char:"",title:"Hiragana",isSelected:O,onClick:k}),t[5]=O,t[6]=k,t[7]=D):D=t[7];let z;t[8]!==a?(z=a.includes("katakana"),t[8]=a,t[9]=z):z=t[9];let X;t[10]!==i||t[11]!==c?(X=()=>{i(),c("katakana")},t[10]=i,t[11]=c,t[12]=X):X=t[12];let Y;t[13]!==z||t[14]!==X?(Y=L.jsx(z1,{char:"",title:"Katakana",isSelected:z,onClick:X}),t[13]=z,t[14]=X,t[15]=Y):Y=t[15];let it;t[16]!==a?(it=a.includes("kanji"),t[16]=a,t[17]=it):it=t[17];let K;t[18]!==i||t[19]!==c?(K=()=>{i(),c("kanji")},t[18]=i,t[19]=c,t[20]=K):K=t[20];let W;t[21]!==it||t[22]!==K?(W=L.jsx(z1,{char:"",title:"Kanji",isSelected:it,onClick:K}),t[21]=it,t[22]=K,t[23]=W):W=t[23];let R;t[24]!==W||t[25]!==D||t[26]!==Y?(R=L.jsxs("div",{className:"flex flex-row space-x-4 md:space-x-8 mb-10 mt-10",children:[D,Y,W]}),t[24]=W,t[25]=D,t[26]=Y,t[27]=R):R=t[27];let E;t[28]!==f||t[29]!==i||t[30]!==d?(E=L.jsx("div",{className:"w-full max-w-lg mt-4 mb-10",children:L.jsx(c9,{direction:f,setDirection:d,onPlayClick:i})}),t[28]=f,t[29]=i,t[30]=d,t[31]=E):E=t[31];let M;t[32]!==i||t[33]!==m?(M=()=>{i(),m(!0)},t[32]=i,t[33]=m,t[34]=M):M=t[34];const B=T.length===0;let P;t[35]===Symbol.for("react.memo_cache_sentinel")?(P=L.jsx(PC,{}),t[35]=P):P=t[35];let F;t[36]!==M||t[37]!==B?(F=L.jsx("button",{onClick:M,disabled:B,className:`p-4 rounded-xl transition-all shadow-md bg-gray-200 text-gray-500 hover:bg-gray-300
                         disabled:bg-gray-100 disabled:text-gray-300 disabled:cursor-not-allowed`,title:"Modalit Studio",children:P}),t[36]=M,t[37]=B,t[38]=F):F=t[38];let U;t[39]!==i||t[40]!==_?(U=()=>{i(),_()},t[39]=i,t[40]=_,t[41]=U):U=t[41];const vt=T.length===0;let Rt;t[42]!==U||t[43]!==vt?(Rt=L.jsx("button",{onClick:U,disabled:vt,className:`grow bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg shadow-lg hover:bg-blue-700 transition
                         disabled:bg-gray-300 disabled:cursor-not-allowed disabled:shadow-none`,children:"Start!"}),t[42]=U,t[43]=vt,t[44]=Rt):Rt=t[44];let Z;t[45]!==i||t[46]!==C?(Z=()=>{i(),C(h9)},t[45]=i,t[46]=C,t[47]=Z):Z=t[47];const nt=`p-4 rounded-xl transition-all shadow-md
                          ${w?"bg-orange-500 text-white shadow-orange-200":"bg-gray-200 text-gray-500 hover:bg-gray-300"}`,Tt=w?"Disattiva Modalit a Tempo":"Attiva Modalit a Tempo";let dt;t[48]===Symbol.for("react.memo_cache_sentinel")?(dt=L.jsx(jC,{}),t[48]=dt):dt=t[48];let pt;t[49]!==Z||t[50]!==nt||t[51]!==Tt?(pt=L.jsx("button",{onClick:Z,className:nt,title:Tt,children:dt}),t[49]=Z,t[50]=nt,t[51]=Tt,t[52]=pt):pt=t[52];let G;t[53]!==F||t[54]!==Rt||t[55]!==pt?(G=L.jsxs("div",{className:"flex w-full max-w-sm space-x-2",children:[F,Rt,pt]}),t[53]=F,t[54]=Rt,t[55]=pt,t[56]=G):G=t[56];const at=w?"(Blitz Mode Active)":"";let St;t[57]!==T.length||t[58]!==at?(St=L.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[T.length," characters ",at]}),t[57]=T.length,t[58]=at,t[59]=St):St=t[59];let Dt;return t[60]!==I||t[61]!==R||t[62]!==E||t[63]!==G||t[64]!==St?(Dt=L.jsxs("div",{className:I,children:[R,E,G,St]}),t[60]=I,t[61]=R,t[62]=E,t[63]=G,t[64]=St,t[65]=Dt):Dt=t[65],Dt};function h9(s){return!s}const f9=s=>{const t=jn.c(83),{selectedModes:e,selectionMap:i,setSelectionMap:a,resetProgress:c,direction:f,isAutoSkipEnabled:d,setIsAutoSkipEnabled:m,onPlayClick:_,dynamicSets:T,dynamicKanjiMap:w}=s,[C,I]=Ht.useState("hiragana"),[O,k]=Ht.useState(null);let D;t[0]!==e[0]?(D=()=>{const gt=e[0];gt==="hiragana"||gt==="katakana"?I(gt):gt&&I("kanji")},t[0]=e[0],t[1]=D):D=t[1];let z;t[2]!==e?(z=[e],t[2]=e,t[3]=z):z=t[3],Ht.useEffect(D,z);let X;t[4]!==_||t[5]!==a?(X=(gt,Lt)=>{_(),a($t=>{const Pt={...$t},Ot=new Set(Pt[Lt]||[]);return Ot.has(gt)?Ot.delete(gt):Ot.add(gt),Pt[Lt]=Ot,Pt})},t[4]=_,t[5]=a,t[6]=X):X=t[6];const Y=X;let it;t[7]!==_||t[8]!==a?(it=(gt,Lt)=>{_(),a($t=>{const Pt={...$t},Ot=new Set(Pt[Lt]||[]),Ut=gt.filter(d9).map(p9);return Ut.length===0?$t:(Ut.every(ae=>Ot.has(ae))?Ut.forEach(ae=>Ot.delete(ae)):Ut.forEach(ae=>Ot.add(ae)),Pt[Lt]=Ot,Pt)})},t[7]=_,t[8]=a,t[9]=it):it=t[9];const K=it;let W;t[10]!==_||t[11]!==a?(W=(gt,Lt)=>{_(),a($t=>{const Pt={...$t},Ot=new Set(Pt[Lt]||[]),Ut=gt.rows.flatMap(m9).filter(g9).map(_9);return Ut.length===0?$t:(Ut.every(ae=>Ot.has(ae))?Ut.forEach(ae=>Ot.delete(ae)):Ut.forEach(ae=>Ot.add(ae)),Pt[Lt]=Ot,Pt)})},t[10]=_,t[11]=a,t[12]=W):W=t[12];const R=W;let E;t[13]!==_||t[14]!==a?(E=(gt,Lt)=>{_(),a($t=>{const Pt={...$t},Ot=new Set(Pt[Lt]||[]),Ut=gt.map(y9).filter(Boolean);return Ut.length===0?$t:(Ut.every(ae=>Ot.has(ae))?Ut.forEach(ae=>Ot.delete(ae)):Ut.forEach(ae=>Ot.add(ae)),Pt[Lt]=Ot,Pt)})},t[13]=_,t[14]=a,t[15]=E):E=t[15];const M=E;let B;t[16]!==R||t[17]!==i||t[18]!==Y||t[19]!==K?(B=gt=>{const Lt=_E[gt]||[];return L.jsx("div",{className:"space-y-6",children:Lt.map($t=>{const Pt=yE(gt,$t.id);return Pt.header.length===0?null:L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-between items-center mb-2",children:[L.jsx("h3",{className:"text-md font-semibold text-gray-600",children:$t.name}),L.jsx("button",{onClick:()=>R(Pt,gt),className:"text-gray-500 hover:text-blue-600 p-1 rounded-full hover:bg-gray-100",title:"Seleziona/Deseleziona Tutti",children:L.jsx(iA,{})})]}),L.jsxs("div",{className:"flex space-x-1",children:[L.jsxs("div",{className:"grow flex flex-col space-y-1",children:[L.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${Pt.header.length}, minmax(0, 1fr))`},children:Pt.header.map((Ot,Ut)=>L.jsx("button",{onClick:()=>K(Pt.rows.map(ne=>ne.chars[Ut]),gt),className:"w-full text-center py-1 text-sm font-medium text-gray-500 rounded-md hover:bg-gray-200",title:`Seleziona/Deseleziona colonna ${Ot.label}`,children:Ot.label},Ot.id))}),Pt.rows.map(Ot=>L.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${Pt.header.length}, minmax(0, 1fr))`},children:Ot.chars.map((Ut,ne)=>{if(!Ut)return L.jsx("div",{className:"w-full h-12 bg-gray-50 border border-gray-100 rounded-sm"},`empty-${Ot.id}-${ne}`);const ae=i[gt]?.has(Ut.char);return L.jsx("button",{onClick:()=>Y(Ut.char,gt),className:`w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2
                                        transition-all japanese-char
                                        ${ae?"bg-blue-600 text-white border-blue-600":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,children:Ut.char},Ut.char)})},Ot.id))]}),L.jsx("div",{className:"flex flex-col space-y-1",style:{paddingTop:"28px"},children:Pt.rows.map(Ot=>L.jsx("button",{onClick:()=>K(Ot.chars,gt),className:"w-8 h-12 flex items-center justify-center font-bold text-gray-600 text-xs rounded-md hover:bg-gray-200",title:`Seleziona/Deseleziona riga ${Ot.label.toUpperCase()}`,children:Ot.label.toUpperCase()},Ot.id))})]})]},$t.id)})})},t[16]=R,t[17]=i,t[18]=Y,t[19]=K,t[20]=B):B=t[20];const P=B;let F;t[21]!==w||t[22]!==T||t[23]!==M||t[24]!==_||t[25]!==i?(F=()=>L.jsx("div",{className:"space-y-6",children:L.jsx("div",{children:L.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:T.map(gt=>{const Lt=w[gt.id]||[],$t=Lt.map(v9),Pt=i[gt.id]||new Set,Ot=$t.length>0&&$t.every(en=>Pt.has(en)),Ut=!Ot&&$t.some(en=>Pt.has(en));let ne,ae="text-gray-500 hover:text-blue-700";return Ot?(ne="bg-blue-600 text-white border-blue-600 shadow-lg",ae="text-white hover:text-white/80"):Ut?(ne="bg-blue-50 text-blue-700 border-transparent shadow-md",ae="text-blue-600 hover:text-blue-800"):ne="bg-white text-gray-800 border-transparent shadow-md hover:shadow-lg hover:-translate-y-1",L.jsxs("div",{className:"relative",children:[L.jsxs("button",{onClick:()=>M(Lt,gt.id),title:`Clicca to Seleziona/Deseleziona tutti i ${Lt.length} kanji in "${gt.name}"`,className:`w-full h-36 p-4 flex flex-col items-center justify-center text-xl font-bold rounded-xl border-2
                                transition-all japanese-char ${ne}`,children:[L.jsx("span",{className:"text-5xl mb-2",children:""}),L.jsx("span",{className:"text-lg font-semibold capitalize truncate w-full px-2 text-center",children:gt.name}),L.jsxs("span",{className:"text-xs font-normal",children:[Pt.size," / ",$t.length]})]}),L.jsx("button",{onClick:en=>{en.stopPropagation(),_(),k(gt.id)},title:`Modifica kanji in "${gt.name}"`,className:`absolute top-2 right-2 p-2 transition ${ae}`,children:L.jsx(LC,{})})]},gt.id)})})})}),t[21]=w,t[22]=T,t[23]=M,t[24]=_,t[25]=i,t[26]=F):F=t[26];const U=F;let vt;t[27]!==w||t[28]!==T||t[29]!==M||t[30]!==i||t[31]!==Y?(vt=gt=>{const Lt=w[gt]||[],$t=T.find(Pt=>Pt.id===gt);return L.jsx("div",{className:"space-y-6",children:L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsxs("button",{onClick:()=>k(null),className:"flex items-center text-gray-500 hover:text-blue-600",children:[L.jsx(gv,{}),L.jsx("span",{className:"ml-1",children:"Tutti i Set"})]}),L.jsx("button",{onClick:()=>M(Lt,gt),className:"text-gray-500 hover:text-blue-600 p-1 rounded-full hover:bg-gray-100",title:"Seleziona/Deseleziona Tutti",children:L.jsx(iA,{})})]}),L.jsx("h3",{className:"text-xl font-semibold text-gray-800 capitalize japanese-char mb-4",children:$t?.name}),L.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-y-2",children:Lt.map(Pt=>{const Ot=Pt.id,Ut=i[gt]?.has(Ot);return L.jsx("button",{onClick:()=>Y(Ot,gt),title:`${Pt.reading} (${Pt.meaning})`,className:`w-full h-12 flex items-center justify-center text-xl font-bold rounded-sm border-2
                              transition-all japanese-char
                              ${Ut?"bg-blue-600 text-white border-blue-600":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,children:Pt.char},Ot)})})]},gt)})},t[27]=w,t[28]=T,t[29]=M,t[30]=i,t[31]=Y,t[32]=vt):vt=t[32];const Rt=vt,Z=`py-2 px-4 capitalize japanese-char ${C==="hiragana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`;let nt;t[33]!==_?(nt=()=>{_(),I("hiragana"),k(null)},t[33]=_,t[34]=nt):nt=t[34];let Tt;t[35]!==Z||t[36]!==nt?(Tt=L.jsx("button",{className:Z,onClick:nt,children:"Hiragana"},"hiragana"),t[35]=Z,t[36]=nt,t[37]=Tt):Tt=t[37];const dt=`py-2 px-4 capitalize japanese-char ${C==="katakana"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`;let pt;t[38]!==_?(pt=()=>{_(),I("katakana"),k(null)},t[38]=_,t[39]=pt):pt=t[39];let G;t[40]!==dt||t[41]!==pt?(G=L.jsx("button",{className:dt,onClick:pt,children:"Katakana"},"katakana"),t[40]=dt,t[41]=pt,t[42]=G):G=t[42];const at=`py-2 px-4 capitalize japanese-char ${C==="kanji"?"border-b-2 border-blue-600 font-semibold text-blue-600":"text-gray-500"}`;let St;t[43]!==_?(St=()=>{_(),I("kanji")},t[43]=_,t[44]=St):St=t[44];let Dt;t[45]!==at||t[46]!==St?(Dt=L.jsx("button",{className:at,onClick:St,children:"Kanji"},"kanji"),t[45]=at,t[46]=St,t[47]=Dt):Dt=t[47];let Nt;t[48]!==Tt||t[49]!==G||t[50]!==Dt?(Nt=L.jsxs("div",{className:"flex border-b mb-4",children:[Tt,G,Dt]}),t[48]=Tt,t[49]=G,t[50]=Dt,t[51]=Nt):Nt=t[51];let jt;t[52]!==C||t[53]!==P?(jt=C==="hiragana"&&P("hiragana"),t[52]=C,t[53]=P,t[54]=jt):jt=t[54];let Ft;t[55]!==C||t[56]!==P?(Ft=C==="katakana"&&P("katakana"),t[55]=C,t[56]=P,t[57]=Ft):Ft=t[57];let kt;t[58]!==C||t[59]!==O||t[60]!==Rt||t[61]!==U?(kt=C==="kanji"&&(O?Rt(O):U()),t[58]=C,t[59]=O,t[60]=Rt,t[61]=U,t[62]=kt):kt=t[62];let te;t[63]!==jt||t[64]!==Ft||t[65]!==kt?(te=L.jsxs("div",{className:"mt-6",children:[jt,Ft,kt]}),t[63]=jt,t[64]=Ft,t[65]=kt,t[66]=te):te=t[66];let Ae;t[67]!==f||t[68]!==d||t[69]!==_||t[70]!==m?(Ae=f==="charToRomaji"&&L.jsxs("div",{children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Training Options"}),L.jsxs("label",{className:"flex items-center justify-between cursor-pointer p-2 rounded-md hover:bg-gray-50",children:[L.jsx("span",{className:"text-sm text-gray-700",children:"Auto-Skip"}),L.jsx("input",{type:"checkbox",checked:d,onChange:gt=>{_(),m(gt.target.checked)},className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})]}),L.jsx("p",{className:"text-xs text-gray-500 mt-2 pl-2",children:"If enabled, it skips to the next question as soon as you type the correct answer."})]}),t[67]=f,t[68]=d,t[69]=_,t[70]=m,t[71]=Ae):Ae=t[71];let Ye;t[72]===Symbol.for("react.memo_cache_sentinel")?(Ye=L.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Data Management"}),t[72]=Ye):Ye=t[72];let he;t[73]!==_||t[74]!==c?(he=L.jsxs("div",{children:[Ye,L.jsx("button",{onClick:()=>{_(),c()},className:"w-full px-6 bg-red-100 text-red-600 py-3 rounded-xl font-semibold hover:bg-red-200 transition shadow-md",children:"Reset Progress..."})]}),t[73]=_,t[74]=c,t[75]=he):he=t[75];let gn;t[76]!==Ae||t[77]!==he?(gn=L.jsxs("div",{className:"border-t pt-6 mt-6 space-y-6",children:[Ae,he]}),t[76]=Ae,t[77]=he,t[78]=gn):gn=t[78];let Re;return t[79]!==Nt||t[80]!==te||t[81]!==gn?(Re=L.jsx("div",{className:"w-full p-8",children:L.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md mt-6",children:[Nt,te,gn]})}),t[79]=Nt,t[80]=te,t[81]=gn,t[82]=Re):Re=t[82],Re};function d9(s){return s!==null}function p9(s){return s.char}function m9(s){return s.chars}function g9(s){return s!==null}function _9(s){return s.char}function y9(s){return s.id}function v9(s){return s.id}const T9=s=>{const t=jn.c(42),[e,i]=Ht.useState("quiz");let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=O=>{i(O)},t[0]=a):a=t[0];const c=a,f=`flex w-full min-h-screen absolute top-0 left-0
                  transition-all duration-500 ease-in-out
                  ${s.screen==="quiz"?"-translate-x-full opacity-70":"translate-x-0 opacity-100"}`;let d;t[1]!==e||t[2]!==s.handlePlayClick||t[3]!==s.initAudio||t[4]!==s.isSoundEffectsEnabled||t[5]!==s.setIsSoundEffectsEnabled?(d=L.jsx(sj,{activeView:e,setActiveView:c,initAudio:s.initAudio,isSoundEffectsEnabled:s.isSoundEffectsEnabled,setIsSoundEffectsEnabled:s.setIsSoundEffectsEnabled,handlePlayClick:s.handlePlayClick}),t[1]=e,t[2]=s.handlePlayClick,t[3]=s.initAudio,t[4]=s.isSoundEffectsEnabled,t[5]=s.setIsSoundEffectsEnabled,t[6]=d):d=t[6];let m;t[7]!==e||t[8]!==s?(m=e==="quiz"&&L.jsx(u9,{...s}),t[7]=e,t[8]=s,t[9]=m):m=t[9];let _;t[10]!==e||t[11]!==s.allSetNames||t[12]!==s.allSets||t[13]!==s.dynamicKanjiMap||t[14]!==s.dynamicSets||t[15]!==s.handlePlayClick||t[16]!==s.sessionHistory?(_=e==="dashboard"&&L.jsx(aj,{history:s.sessionHistory,allSets:s.allSets,visibleSets:Object.keys(s.allSets),allSetNames:s.allSetNames,onPlayClick:s.handlePlayClick,dynamicSets:s.dynamicSets,dynamicKanjiMap:s.dynamicKanjiMap,onClose:w9}),t[10]=e,t[11]=s.allSetNames,t[12]=s.allSets,t[13]=s.dynamicKanjiMap,t[14]=s.dynamicSets,t[15]=s.handlePlayClick,t[16]=s.sessionHistory,t[17]=_):_=t[17];let T;t[18]!==e||t[19]!==s.direction||t[20]!==s.dynamicKanjiMap||t[21]!==s.dynamicSets||t[22]!==s.handlePlayClick||t[23]!==s.isAutoSkipEnabled||t[24]!==s.resetProgress||t[25]!==s.selectedSets||t[26]!==s.selectionMap||t[27]!==s.setIsAutoSkipEnabled||t[28]!==s.setSelectionMap?(T=e==="settings"&&L.jsx(f9,{selectedModes:s.selectedSets,selectionMap:s.selectionMap,setSelectionMap:s.setSelectionMap,resetProgress:s.resetProgress,direction:s.direction,isAutoSkipEnabled:s.isAutoSkipEnabled,setIsAutoSkipEnabled:s.setIsAutoSkipEnabled,onPlayClick:s.handlePlayClick,dynamicSets:s.dynamicSets,dynamicKanjiMap:s.dynamicKanjiMap}),t[18]=e,t[19]=s.direction,t[20]=s.dynamicKanjiMap,t[21]=s.dynamicSets,t[22]=s.handlePlayClick,t[23]=s.isAutoSkipEnabled,t[24]=s.resetProgress,t[25]=s.selectedSets,t[26]=s.selectionMap,t[27]=s.setIsAutoSkipEnabled,t[28]=s.setSelectionMap,t[29]=T):T=t[29];let w;t[30]!==e||t[31]!==s.refreshDynamicData?(w=e==="kanjiManager"&&L.jsx(l9,{refreshDynamicData:s.refreshDynamicData}),t[30]=e,t[31]=s.refreshDynamicData,t[32]=w):w=t[32];let C;t[33]!==m||t[34]!==_||t[35]!==T||t[36]!==w?(C=L.jsxs("main",{className:"flex-1 h-screen overflow-y-auto bg-gray-50",children:[m,_,T,w]}),t[33]=m,t[34]=_,t[35]=T,t[36]=w,t[37]=C):C=t[37];let I;return t[38]!==f||t[39]!==d||t[40]!==C?(I=L.jsxs("div",{className:f,children:[d,C]}),t[38]=f,t[39]=d,t[40]=C,t[41]=I):I=t[41],I};function w9(){}const b9=s=>{const t=jn.c(71),{screen:e,handlePlayClick:i,setScreen:a,setShowStats:c,showStats:f,currentStreak:d,progressBarStyle:m,correctInLast10:_,last10Length:T,uniqueCharsSeen:w,sessionStats:C,sessionHistoryLength:I,currentQuestion:O,timerKey:k,cardBgClass:D,cardState:z,setCardState:X,initAudio:Y,isSoundEffectsEnabled:it,setIsSoundEffectsEnabled:K,isTimedMode:W,isCharToRomajiTyping:R,feedback:E,isAutoSkipEnabled:M,nextQuestion:B,isRomajiToCharMultipleChoice:P,wrongGuesses:F,selectedAnswer:U,handleMultipleChoiceClick:vt,userAnswer:Rt,handleInputChange:Z,manualCheckAnswer:nt,inputColorClass:Tt,isKanjiQuestion:dt,inputState:pt}=s,G=`w-full min-h-screen p-4 md:p-8 absolute top-0 left-0
                                transition-all duration-500 ease-in-out
                                ${e==="quiz"?"translate-x-0 opacity-100":"translate-x-full opacity-70"}`;let at;t[0]!==i||t[1]!==a?(at=L.jsx("div",{className:"flex justify-start",children:L.jsx("button",{onClick:()=>{i(),a("home")},className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-semibold hover:bg-blue-200 transition",children:"Home"})}),t[0]=i,t[1]=a,t[2]=at):at=t[2];const St=`flex items-center font-bold text-lg ${d>0?"text-orange-500":"text-gray-400"}`;let Dt;t[3]===Symbol.for("react.memo_cache_sentinel")?(Dt=L.jsx(jC,{}),t[3]=Dt):Dt=t[3];let Nt;t[4]!==d?(Nt=L.jsx("span",{className:"ml-1",children:d}),t[4]=d,t[5]=Nt):Nt=t[5];let jt;t[6]!==St||t[7]!==Nt?(jt=L.jsx("div",{className:"flex justify-center",children:L.jsxs("div",{className:St,children:[Dt,Nt]})}),t[6]=St,t[7]=Nt,t[8]=jt):jt=t[8];let Ft;t[9]!==i||t[10]!==c?(Ft=()=>{i(),c(!0)},t[9]=i,t[10]=c,t[11]=Ft):Ft=t[11];const kt=f?"Nascondi":"Stats";let te;t[12]!==Ft||t[13]!==kt?(te=L.jsx("div",{className:"flex justify-end",children:L.jsx("button",{onClick:Ft,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg text-sm font-semibold hover:bg-purple-200 transition",children:kt})}),t[12]=Ft,t[13]=kt,t[14]=te):te=t[14];let Ae;t[15]!==at||t[16]!==jt||t[17]!==te?(Ae=L.jsxs("div",{className:"grid grid-cols-3 items-center mb-3",children:[at,jt,te]}),t[15]=at,t[16]=jt,t[17]=te,t[18]=Ae):Ae=t[18];let Ye;t[19]!==m?(Ye=L.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:L.jsx("div",{className:"h-2.5 rounded-full transition-all duration-300",style:m})}),t[19]=m,t[20]=Ye):Ye=t[20];let he;t[21]!==_||t[22]!==T?(he=L.jsxs("span",{children:[_," / ",T]}),t[21]=_,t[22]=T,t[23]=he):he=t[23];let gn;t[24]!==w?(gn=L.jsxs("span",{children:["Seen: ",w]}),t[24]=w,t[25]=gn):gn=t[25];let Re;t[26]!==C.attempts||t[27]!==C.correct?(Re=C.attempts>0?Math.round(C.correct/C.attempts*100):0,t[26]=C.attempts,t[27]=C.correct,t[28]=Re):Re=t[28];let gt;t[29]!==I||t[30]!==Re?(gt=L.jsxs("span",{children:["Acc: ",Re,"% (",I,")"]}),t[29]=I,t[30]=Re,t[31]=gt):gt=t[31];let Lt;t[32]!==he||t[33]!==gn||t[34]!==gt?(Lt=L.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2 px-1",children:[he,gn,gt]}),t[32]=he,t[33]=gn,t[34]=gt,t[35]=Lt):Lt=t[35];let $t;t[36]!==Ae||t[37]!==Ye||t[38]!==Lt?($t=L.jsxs("div",{className:"mb-4 bg-white p-4 rounded-xl shadow-md",children:[Ae,Ye,Lt]}),t[36]=Ae,t[37]=Ye,t[38]=Lt,t[39]=$t):$t=t[39];let Pt;t[40]!==D||t[41]!==z||t[42]!==O||t[43]!==E||t[44]!==Z||t[45]!==vt||t[46]!==i||t[47]!==Y||t[48]!==Tt||t[49]!==pt||t[50]!==M||t[51]!==R||t[52]!==dt||t[53]!==P||t[54]!==it||t[55]!==W||t[56]!==nt||t[57]!==B||t[58]!==U||t[59]!==X||t[60]!==K||t[61]!==k||t[62]!==Rt||t[63]!==F?(Pt=O&&L.jsx("div",{className:`rounded-xl shadow-2xl p-8 transform transition-all duration-300 ${D} 
                                    ${z==="correct"?"animate-pop":z==="incorrect"?"animate-shake":"animate-slideIn"}`,onAnimationEnd:()=>X("default"),children:L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"text-center mb-8 relative",children:[L.jsx("div",{className:"text-sm text-gray-500 mb-4 font-medium h-5",children:O.type==="charToRomaji"?"":"Seleziona il carattere corretto"}),L.jsx("div",{className:"absolute top-0 left-0",children:L.jsx("button",{onClick:()=>{Y(),K(S9)},className:`p-2 rounded-full transition-colors
                                            ${it?"text-blue-600 bg-blue-100":"text-gray-400 hover:bg-gray-100"}`,title:it?"Disattiva audio":"Attiva audio",children:it?L.jsx(UC,{}):L.jsx(zC,{})})}),L.jsx("div",{className:"text-9xl mb-4 font-extrabold text-gray-900 leading-none japanese-char",children:O.prompt}),O.charObj.meaning&&O.type==="romajiToChar"&&L.jsxs("div",{className:"text-gray-500 text-sm italic",children:["(Suggerimento: ",O.charObj.meaning,")"]})]}),W&&R&&!E&&L.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 my-4 overflow-hidden",children:L.jsx("div",{className:"h-2.5 bg-orange-500 rounded-full animate-timerBar"},k)}),R&&E&&L.jsxs("div",{className:"text-center",children:[E.isCorrect&&!M&&L.jsx("div",{className:"text-3xl font-extrabold mb-4 p-2 rounded-lg text-green-600",children:" Corretto!"}),!E.isCorrect&&L.jsxs("div",{className:"text-xl mb-6 text-gray-700",children:["Risposta corretta:",L.jsx("span",{className:"font-bold text-gray-900 japanese-char",children:E.correctReading||E.correctAnswer})]}),!M&&!W&&L.jsx("button",{onClick:B,className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-blue-700 transition shadow-lg mt-4",autoFocus:!0,children:"Prossima Domanda"}),(M||W)&&!E.isCorrect&&L.jsx("div",{className:"h-16"}),(M||W)&&E.isCorrect&&L.jsx("div",{className:"h-16"})]}),P&&L.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:O.options?.map((ne,ae)=>{const en=F.has(ne.char),fn=U===ne.char;let Rn="border-gray-200 hover:border-blue-300 bg-white";return en?Rn="bg-gray-200 text-gray-400 border-gray-200 cursor-not-allowed":fn&&z==="correct"?Rn="border-green-500 bg-green-100 scale-[1.02]":fn&&z==="incorrect"&&(Rn="border-red-500 bg-red-100"),L.jsx("button",{disabled:en,onClick:()=>vt(ne),className:`p-6 md:p-8 text-5xl border-4 rounded-xl transition shadow-md japanese-char
                                      ${Rn}
                                    `,children:ne.char},ae)})}),R&&!E&&dt&&L.jsxs("div",{className:"relative w-full mb-6",children:[L.jsx("div",{className:`absolute inset-0 p-4 text-2xl text-center 
                 flex items-center justify-center 
                 japanese-char pointer-events-none
                 font-bold
                 ${pt==="incorrect"?"text-red-500":"text-gray-900"}`,children:Rt.length===0?L.jsx("span",{className:"text-gray-400",children:"Type here..."}):L.jsx("span",{children:o9(Rt.toLowerCase(),{isIME:!0})})}),L.jsx("input",{type:"text",value:Rt,onChange:Z,onKeyPress:ne=>{ne.key==="Enter"&&!M&&(i(),nt())},className:`w-full p-4 text-2xl border-4 rounded-xl text-center 
                  focus:outline-none transition-all duration-200 
                  shadow-inner font-bold ${Tt} 
                  text-transparent caret-gray-900`,autoFocus:!0,disabled:!!E,placeholder:""})]}),R&&!E&&!dt&&L.jsx("input",{type:"text",value:Rt,onChange:Z,onKeyPress:ne=>{ne.key==="Enter"&&!M&&(i(),nt())},className:`w-full p-4 text-2xl border-4 rounded-xl mb-6 text-center 
                focus:outline-none transition-all duration-200 
                shadow-inner ${Tt}`,placeholder:"Type here...",autoFocus:!0,disabled:!!E}),R&&!M&&!W&&!E&&L.jsx("button",{onClick:()=>{i(),nt()},disabled:!Rt.trim(),className:"w-full bg-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-blue-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed shadow-lg",children:"Controlla"})]})},O.prompt+k),t[40]=D,t[41]=z,t[42]=O,t[43]=E,t[44]=Z,t[45]=vt,t[46]=i,t[47]=Y,t[48]=Tt,t[49]=pt,t[50]=M,t[51]=R,t[52]=dt,t[53]=P,t[54]=it,t[55]=W,t[56]=nt,t[57]=B,t[58]=U,t[59]=X,t[60]=K,t[61]=k,t[62]=Rt,t[63]=F,t[64]=Pt):Pt=t[64];let Ot;t[65]!==$t||t[66]!==Pt?(Ot=L.jsxs("div",{className:"max-w-2xl mx-auto",children:[$t,Pt]}),t[65]=$t,t[66]=Pt,t[67]=Ot):Ot=t[67];let Ut;return t[68]!==G||t[69]!==Ot?(Ut=L.jsx("div",{className:G,children:Ot}),t[68]=G,t[69]=Ot,t[70]=Ut):Ut=t[70],Ut};function S9(s){return!s}function A9(){const[s,t]=Ht.useState("home"),[e,i]=Ht.useState(!1),[a,c]=Ht.useState([]),[f,d]=Ht.useState({}),[m,_]=Ht.useState(!0),T=Ht.useMemo(()=>{const It={};return Object.keys(Hh).forEach(Xt=>{It[Xt]=dD(Xt)}),It},[]),[w,C]=Ol(Xa.SELECTED_SETS,["hiragana"]),[I,O]=Ol(Xa.SELECTION_MAP,T),[k,D]=Ol(Xa.DIRECTION,"charToRomaji"),[z,X]=Ol(Xa.AUTO_SKIP,!0),[Y,it]=Ol(Xa.SOUND_EFFECTS,!0),[K,W]=Ol(Xa.TIMED_MODE,!1),[,R]=Ht.useState("type"),[E,M]=Ht.useState(null),[B,P]=Ht.useState(""),[F,U]=Ht.useState(null),[vt,Rt]=Ht.useState({}),[Z,nt]=Ol(Xa.SESSION_STATS,{attempts:0,correct:0}),[Tt,dt]=Ht.useState(!0),[pt,G]=Ht.useState("typing"),[at,St]=Ol(Xa.SESSION_HISTORY,[]),[Dt,Nt]=Ht.useState(!1),[jt,Ft]=Ht.useState("default"),[kt,te]=Ol(Xa.CURRENT_STREAK,0),[Ae,Ye]=Ht.useState(!1),he=Ht.useRef(null),gn=Ht.useRef(0),[Re,gt]=Ht.useState(new Set),[Lt,$t]=Ht.useState(null),[Pt]=Ht.useState(()=>typeof window<"u"?{correct:new Fh({oscillator:{type:"sine"},envelope:{attack:.01,decay:.1,sustain:0,release:.2}}).toDestination(),incorrect:new Fh({oscillator:{type:"square"},envelope:{attack:.01,decay:.2,sustain:0,release:.2}}).toDestination(),click:new Fh({oscillator:{type:"triangle"},envelope:{attack:.001,decay:.05,sustain:0,release:.1}}).toDestination()}:null);Ht.useEffect(()=>{const It=Object.keys(Hh).filter(Bt=>Bt!=="kanji_basic");C(Bt=>{const zt=Bt.filter(Yt=>It.includes(Yt));return Bt.includes("kanji_basic")&&!zt.includes("kanji")&&zt.push("kanji"),zt.length===0&&Bt.length>0?["hiragana"]:zt}),O(Bt=>{const zt={};return It.forEach(Yt=>{zt[Yt]=Bt[Yt]||T[Yt]}),Object.keys(Bt).forEach(Yt=>{!It.includes(Yt)&&Yt!=="kanji_basic"&&(zt[Yt]=Bt[Yt])}),zt}),(()=>{try{if(typeof window<"u"){const Bt={};for(let zt=0;zt<window.localStorage.length;zt++){const Yt=window.localStorage.key(zt);if(Yt&&Yt.startsWith("mistake:")){const me=Yt.replace("mistake:",""),an=window.localStorage.getItem(Yt);an&&(Bt[me]=JSON.parse(an))}}Rt(Bt)}}catch{console.log("Nessun dato errore esistente, inizio da zero")}finally{dt(!1)}})()},[]);const Ot=Ht.useCallback(async()=>{try{const It=await MC();c(It);const Xt={},Bt=It.map(async zt=>{const Yt=await kC(zt.id);Xt[zt.id]=Yt});await Promise.all(Bt),d(Xt),O(zt=>{const Yt={...zt};return It.forEach(me=>{const an=me.id,Be=Yt[an];if(!Be)return;const bi=new Set(Xt[an].map(br=>br.id)),ts=new Set;Be.forEach(br=>{bi.has(br)&&ts.add(br)}),Yt[an]=ts}),Yt})}catch(It){console.error("Errore nel caricamento dei set kanji dinamici:",It)}},[O]),Ut=Ht.useCallback(async()=>{_(!0),await Ot(),_(!1)},[Ot]),ne=Ht.useCallback(async()=>{await Ot()},[Ot]);Ht.useEffect(()=>{Tt||Ut()},[Tt,Ut]);const ae=Ht.useMemo(()=>{const It={...Hh};return a.forEach(Xt=>{const Bt=f[Xt.id]||[];It[Xt.id]=Bt.map(zt=>({char:zt.char,romaji:zt.romaji,reading:zt.reading,meaning:zt.meaning,type:"kanji",category:{id:Xt.id,name:Xt.name},id:zt.id}))}),It},[a,f]),en=Ht.useCallback(async()=>{!Ae&&Pt&&(await G4(),Ye(!0),console.log("Audio context started"))},[Ae,Pt]),fn=Ht.useCallback(()=>{!Ae||!Pt||!Y||Pt.correct.triggerAttackRelease("C5","0.1",y1())},[Ae,Pt,Y]),Rn=Ht.useCallback(()=>{!Ae||!Pt||!Y||Pt.incorrect.triggerAttackRelease("C3","0.1",y1())},[Ae,Pt,Y]),Qr=Ht.useCallback(()=>{!Ae||!Pt||!Y||Pt.click.triggerAttackRelease("G5","0.01",y1())},[Ae,Pt,Y]),fi=Ht.useCallback(()=>{en(),Qr()},[en,Qr]),Di=Ht.useCallback(async(It,Xt)=>{if(typeof window>"u")return;const Bt=`mistake:${It}`;let zt=vt[It]||{count:0,lastMistake:null};Xt||(zt={count:zt.count+1,lastMistake:Date.now()});try{window.localStorage.setItem(Bt,JSON.stringify(zt)),Rt(Yt=>({...Yt,[It]:zt}))}catch(Yt){console.error("Salvataggio dati errore fallito:",Yt)}},[vt]),bs=Ht.useCallback(async(It,Xt,Bt)=>{St(zt=>[...zt,{char:It.char,isCorrect:Bt,answer:Xt,correct:Array.isArray(It.romaji)?It.romaji.join(" / "):It.romaji,timestamp:Date.now()}]),nt(zt=>({attempts:zt.attempts+1,correct:zt.correct+(Bt?1:0)})),te(Bt?zt=>zt+1:0),await Di(It.char,Bt)},[Di]),ao=It=>{C(Xt=>Xt.includes(It)?Xt.filter(Bt=>Bt!==It):[...Xt,It])},Ss=Ht.useCallback(()=>{let It=[];if(w.includes("hiragana")){const Xt=ae.hiragana||[],Bt=I.hiragana;Bt&&Bt.size>0&&Xt.forEach(zt=>{Bt.has(zt.char)&&It.push(zt)})}if(w.includes("katakana")){const Xt=ae.katakana||[],Bt=I.katakana;Bt&&Bt.size>0&&Xt.forEach(zt=>{Bt.has(zt.char)&&It.push(zt)})}return w.includes("kanji")&&a.forEach(Xt=>{const Bt=Xt.id,zt=ae[Bt]||[],Yt=I[Bt];Yt&&Yt.size>0&&zt.forEach(me=>{const an="id"in me?me.id:me.char;an&&Yt.has(an)&&It.push(me)})}),It},[w,I,ae,a]),wa=Ht.useCallback(()=>{const It=Ss();if(It.length===0)return null;const Xt=at.reduce((Be,bi)=>(Be[bi.char]=(Be[bi.char]||0)+1,Be),{});let Bt=1/0;It.forEach(Be=>{const bi=Xt[Be.char]||0;bi<Bt&&(Bt=bi)});const zt=It.map(Be=>{const bi=vt[Be.char]?.count||0,ts=Xt[Be.char]||0,br=Math.pow(2,bi);let es=1;return ts===Bt?es=4:ts===Bt+1&&(es=2),Math.min(br*es,100)}),Yt=g1.sum(zt),me=Math.random()*Yt;let an=0;for(let Be=0;Be<It.length;Be++)if(an+=zt[Be],me<=an)return It[Be];return It[It.length-1]},[Ss,vt,at]),Bi=(It,Xt)=>{const Bt=[It],zt=Xt.filter(me=>me.char!==It.char),Yt=g1.shuffle(zt);return Bt.push(...Yt.slice(0,3)),g1.shuffle(Bt)},Nn=Ht.useCallback((It,Xt)=>{if(!E)return{isCorrect:!1,correctAnswer:""};let Bt=!1,zt;const Yt=It.romaji,me=It.reading;if(E.type==="charToRomaji"){const Be=Array.isArray(Yt)?Yt.map(ts=>ts.toLowerCase()):[Yt.toLowerCase()],bi=Xt.toLowerCase().trim();Bt=Be.some(ts=>ts===bi),zt=Array.isArray(Yt)?Yt.join(" / "):Yt}else Bt=E.correctAnswer===Xt,zt=E.correctAnswer;let an;return me&&(an=Array.isArray(me)?me.join(" / "):me),{isCorrect:Bt,correctAnswer:zt,correctReading:an}},[E]),Ln=Ht.useCallback(()=>{he.current&&clearTimeout(he.current);const It=wa();if(!It){t("home"),console.error("Nessun carattere disponibile per la selezione.");return}const Xt=It,Bt=Ss(),zt=Array.isArray(It.romaji)?It.romaji:[It.romaji],me=(Array.isArray(It.reading)&&It.reading.length>0?It.reading:[It.char])[0];R(k==="romajiToChar"?"multipleChoice":"type");let Be;k==="charToRomaji"?Be={prompt:It.char,correctAnswer:zt.map(bi=>bi.toLowerCase()),type:"charToRomaji",charObj:Xt}:(Be={prompt:me,correctAnswer:It.char,type:"romajiToChar",charObj:Xt,options:Bi(Xt,Bt)},Y&&Lh(me)),M(Be),P(""),U(null),G("typing"),Ft("default"),gn.current+=1,gt(new Set),$t(null)},[k,wa,Ss,Y]),dn=Ht.useCallback((It,Xt)=>{he.current&&clearTimeout(he.current),bs(It,Xt,!1),Rn(),G("incorrect"),Ft("incorrect"),Y&&k==="charToRomaji"&&Lh(It.char);const{correctAnswer:Bt,correctReading:zt}=Nn(It,Xt);U({isCorrect:!1,correctAnswer:Bt,correctReading:zt}),setTimeout(()=>{Ln()},800)},[bs,Ln,Y,Rn,k,Nn]),oo=Ht.useCallback((It,Xt)=>{he.current&&clearTimeout(he.current),bs(It,Xt,!0),fn(),G("correct"),Ft("correct"),U(null),Y&&Lh(It.char),setTimeout(()=>{Ln()},400)},[bs,Ln,Y,fn]),lo=It=>{if(Re.has(It.char)||(fi(),$t(It.char),!E))return;It.char===E.correctAnswer?(he.current&&clearTimeout(he.current),bs(E.charObj,It.char,!0),fn(),Ft("correct"),Y&&It.char&&Lh(It.char),setTimeout(()=>Ln(),400)):(bs(E.charObj,It.char,!1),Rn(),Ft("incorrect"),gt(Bt=>new Set(Bt).add(It.char)))};Ht.useEffect(()=>{if(K&&s==="quiz"&&E&&!F){he.current&&clearTimeout(he.current);const It=E&&E.options;he.current=window.setTimeout(()=>{E&&(It||dn(E.charObj,"timeout"))},2e3)}return()=>{he.current&&clearTimeout(he.current)}},[K,s,E,F,dn]);const Fl=()=>{if(en(),Ss().length===0){console.error("Per favore seleziona almeno una categoria con caratteri!");return}te(0),t("quiz"),Ln()},$s=It=>{const Xt=It.target.value;if(P(Xt),!(E&&E.type==="charToRomaji")||!z)return;const zt=Xt.toLowerCase().trim(),Yt=E.correctAnswer,me=E.charObj;if(Yt.includes(zt)){oo(me,zt);return}if(!Yt.some(Be=>Be.startsWith(zt))&&zt.length>0){dn(me,zt);return}G("typing")},Xr=()=>{if(!B.trim()||!E)return;he.current&&clearTimeout(he.current);const{charObj:It}=E,{isCorrect:Xt,correctAnswer:Bt,correctReading:zt}=Nn(It,B);bs(It,B,Xt),Ft(Xt?"correct":"incorrect"),Xt?fn():Rn(),U({isCorrect:Xt,correctAnswer:Bt,correctReading:zt}),Y&&(k==="romajiToChar"&&Xt||k==="charToRomaji")&&Lh(It.char)},In=()=>{fi(),Ln()},Ys=Ht.useCallback(async()=>{console.warn("Reset progressi avviato.");try{if(nt({attempts:0,correct:0}),St([]),typeof window<"u"){const It=[];for(let Xt=0;Xt<window.localStorage.length;Xt++){const Bt=window.localStorage.key(Xt);Bt&&Bt.startsWith("mistake:")&&It.push(Bt)}It.forEach(Xt=>window.localStorage.removeItem(Xt))}Rt({}),nt({attempts:0,correct:0}),St([]),te(0),console.log("Progressi resettati con successo!")}catch(It){console.error("Reset progressi fallito:",It)}},[St,nt,te]),qi=at.slice(-10),Ji=qi.filter(It=>It.isCorrect).length,Xo=qi.length>0?Ji/qi.length*100:0,Zo=Ht.useMemo(()=>new Set(at.map(It=>It.char)).size,[at]),Qs={width:`${Xo}%`,backgroundColor:Xo>75?"#15803d":Xo>40?"#ca8a04":"#dc2626"},ba={typing:"border-gray-300 focus:border-blue-500 text-gray-700",correct:"border-green-500 ring-4 ring-green-100 text-green-700",incorrect:"border-red-500 ring-4 ring-red-100 text-red-500 font-bold"}[pt],gu={default:"bg-white",correct:"bg-green-100",incorrect:"bg-red-100"}[jt];if(Tt||m)return L.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",style:{fontFamily:"'Inter', sans-serif"},children:L.jsx("div",{className:"text-xl font-medium text-gray-700",children:"Caricamento..."})});const Tr=Ss(),Jo=E&&E.type==="charToRomaji",Sa=E&&E.type==="romajiToChar"&&E.options,wr=Object.keys(ae);return L.jsxs("div",{className:"min-h-screen bg-gray-100 relative overflow-x-hidden",style:{fontFamily:"'Inter', sans-serif"},children:[L.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Noto+Sans+JP:wght@400;700;900&display=swap');
          
          .japanese-char {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
          }

          @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
          }
          .animate-pop { animation: pop 0.2s ease-out; }

          @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
          }
          .animate-shake { animation: shake 0.3s ease-in-out; }

          @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-slideIn { animation: slideIn 0.3s ease-out; }
          
          /* Animazione per la barra del timer */
          @keyframes shrinkTimer {
            from { width: 100%; }
            to { width: 0%; }
          }
          .animate-timerBar {
            animation: shrinkTimer 2s linear 1;
            animation-fill-mode: forwards;
          }
        `}),L.jsxs("div",{className:"relative w-full min-h-screen",children:[L.jsx(T9,{screen:s,handlePlayClick:fi,initAudio:en,isSoundEffectsEnabled:Y,setIsSoundEffectsEnabled:it,selectedSets:w,toggleMode:ao,direction:k,setDirection:D,setShowStudyPanel:i,startQuiz:Fl,available:Tr,isTimedMode:K,setIsTimedMode:W,sessionHistory:at,allSets:ae,visibleSets:w,allSetNames:wr,selectionMap:I,setSelectionMap:O,resetProgress:Ys,isAutoSkipEnabled:z,setIsAutoSkipEnabled:X,dynamicSets:a,dynamicKanjiMap:f,refreshDynamicData:ne}),L.jsx("div",{className:`w-full min-h-screen p-4 md:p-8 absolute top-0 left-0
                transition-all duration-500 ease-in-out
                ${s==="quiz"?"translate-x-0 opacity-100":"translate-x-full opacity-70"}`,children:L.jsx(b9,{screen:s,handlePlayClick:fi,setScreen:t,setShowStats:Nt,showStats:Dt,currentStreak:kt,progressBarStyle:Qs,correctInLast10:Ji,last10Length:qi.length,uniqueCharsSeen:Zo,sessionStats:Z,sessionHistoryLength:at.length,currentQuestion:E,timerKey:gn.current,cardBgClass:gu,cardState:jt,setCardState:Ft,initAudio:en,isSoundEffectsEnabled:Y,setIsSoundEffectsEnabled:it,isTimedMode:K,isCharToRomajiTyping:!!Jo,feedback:F,isAutoSkipEnabled:z,nextQuestion:In,isRomajiToCharMultipleChoice:!!Sa,wrongGuesses:Re,selectedAnswer:Lt,handleMultipleChoiceClick:lo,userAnswer:B,handleInputChange:$s,manualCheckAnswer:Xr,inputColorClass:ba,isKanjiQuestion:!!(E&&E.charObj.reading),inputState:pt})}),(Dt||e)&&L.jsx("div",{className:"fixed inset-0 bg-black opacity-30 z-40 transition-opacity duration-500 ease-in-out",onClick:()=>{fi(),Nt(!1),i(!1)}}),L.jsx("div",{className:`fixed top-0 right-0 h-full w-full max-w-lg z-50 transition-transform duration-500 ease-in-out
                      ${Dt?"translate-x-0":"translate-x-full"}`,children:L.jsx(XV,{history:at,allSets:ae,allSetNames:wr,dynamicSets:a,dynamicKanjiMap:f,onClose:()=>{fi(),Nt(!1)},visibleSets:w,onPlayClick:fi})}),L.jsx("div",{className:`fixed top-0 right-0 h-full w-full max-w-lg z-50 transition-transform duration-500 ease-in-out
                      ${e?"translate-x-0":"translate-x-full"}`,children:L.jsx(tj,{onClose:()=>{i(!1)},visibleSets:w,onPlayClick:fi,isSpeechEnabled:Y,allSetNames:wr,setIsSpeechEnabled:it,initAudio:en})})]})]})}_x.createRoot(document.getElementById("root")).render(L.jsx(Ht.StrictMode,{children:L.jsx(A9,{})}));
